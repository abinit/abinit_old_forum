<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=598&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Compilation problem in 6.5</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Compilation problem in 6.5</h2>
		<p><a href="viewtopic4a3d.html?f=3&amp;t=598">https://forum.abinit.org/viewtopic.php?f=3&amp;t=598</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Thu Sep 16, 2010 11:46 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Hey guys, after downloading the 6.5 version in my mac, I did try to compile as usual before I include anything new, but this time<br />it did not go to far..<br /><br />i am gettin the message:<br /><br /><br />ifort -O3 -byte_kinds -free  -c diolib.f<br />ifort: command line warning #10006: ignoring unknown option '-byte_kinds'<br />diolib.f(13): error #7002: Error in opening the compiled module file.  Check INCLUDE paths.   [PRECLIB]<br />      USE preclib<br />----------^<br />diolib.f(14): error #6683: A kind type parameter must be a compile-time constant.   [Q]<br /><br /><br />Is there anything wrong with the Makefile?<br /><br />thanks!!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Fri Sep 17, 2010 12:14 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Which version of ifort are you using?<br /><br />Please attach config.dump as well.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Fri Sep 17, 2010 4:23 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Dear Yann<br /><br />here it is....hope it is something silly<br /><br />thanks!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 12:32 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Where?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 2:40 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Dear Yann<br /><br /><br />it seems it can not upload the file.. here I am copying it directly:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># Environment variables<br />ABI_CPPFLAGS=&quot;-I/sw/include&quot;<br />AR=&quot;ar&quot;<br />ARFLAGS=&quot;&nbsp; &nbsp; &nbsp;rc&quot;<br />ARFLAGS_64BITS=&quot;&quot;<br />ARFLAGS_CMD=&quot;rc&quot;<br />ARFLAGS_DEBUG=&quot;&quot;<br />ARFLAGS_EXTRA=&quot;&quot;<br />ARFLAGS_HINTS=&quot;&quot;<br />ARFLAGS_OPT=&quot;&quot;<br />CC=&quot;gcc&quot;<br />CC_LDFLAGS=&quot;&nbsp; &nbsp; &quot;<br />CC_LDFLAGS_64BITS=&quot;&quot;<br />CC_LDFLAGS_DEBUG=&quot;&quot;<br />CC_LDFLAGS_EXTRA=&quot;&quot;<br />CC_LDFLAGS_GPU=&quot;&quot;<br />CC_LDFLAGS_HINTS=&quot;&quot;<br />CC_LDFLAGS_OPT=&quot;&quot;<br />CC_LIBS=&quot;&nbsp; &nbsp; &quot;<br />CC_LIBS_64BITS=&quot;&quot;<br />CC_LIBS_DEBUG=&quot;&quot;<br />CC_LIBS_EXTRA=&quot;&quot;<br />CC_LIBS_GPU=&quot;&quot;<br />CC_LIBS_HINTS=&quot;&quot;<br />CC_LIBS_OPT=&quot;&quot;<br />CFLAGS=&quot;-I/sw/include&quot;<br />CFLAGS_64BITS=&quot;&quot;<br />CFLAGS_DEBUG=&quot;&quot;<br />CFLAGS_EXTRA=&quot;&quot;<br />CFLAGS_GPU=&quot;&quot;<br />CFLAGS_HINTS=&quot;&quot;<br />CFLAGS_OPT=&quot;&quot;<br />CPP=&quot;gcc -E&quot;<br />CPPFLAGS=&quot;&quot;<br />CPPFLAGS_64BITS=&quot;&quot;<br />CPPFLAGS_DEBUG=&quot;&quot;<br />CPPFLAGS_EXTRA=&quot;&quot;<br />CPPFLAGS_GPU=&quot;&quot;<br />CPPFLAGS_HINTS=&quot;&quot;<br />CPPFLAGS_OPT=&quot;&quot;<br />CXX=&quot;g++&quot;<br />CXXFLAGS=&quot;-I/sw/include&quot;<br />CXXFLAGS_64BITS=&quot;&quot;<br />CXXFLAGS_DEBUG=&quot;&quot;<br />CXXFLAGS_EXTRA=&quot;&quot;<br />CXXFLAGS_GPU=&quot;&quot;<br />CXXFLAGS_HINTS=&quot;&quot;<br />CXXFLAGS_OPT=&quot;&quot;<br />CXX_LDFLAGS=&quot;&nbsp; &nbsp; &quot;<br />CXX_LDFLAGS_64BITS=&quot;&quot;<br />CXX_LDFLAGS_DEBUG=&quot;&quot;<br />CXX_LDFLAGS_EXTRA=&quot;&quot;<br />CXX_LDFLAGS_GPU=&quot;&quot;<br />CXX_LDFLAGS_HINTS=&quot;&quot;<br />CXX_LDFLAGS_OPT=&quot;&quot;<br />CXX_LIBS=&quot;&nbsp; &nbsp; &quot;<br />CXX_LIBS_64BITS=&quot;&quot;<br />CXX_LIBS_DEBUG=&quot;&quot;<br />CXX_LIBS_EXTRA=&quot;&quot;<br />CXX_LIBS_GPU=&quot;&quot;<br />CXX_LIBS_HINTS=&quot;&quot;<br />CXX_LIBS_OPT=&quot;&quot;<br />DEFS=&quot;-DHAVE_CONFIG_H&quot;<br />FC=&quot;gfortran&quot;<br />FCFLAGS=&quot; -g -ffree-line-length-none &quot;<br />FCFLAGS_64BITS=&quot;&quot;<br />FCFLAGS_DEBUG=&quot;-g&quot;<br />FCFLAGS_EXTRA=&quot;&quot;<br />FCFLAGS_FIXEDFORM=&quot;-ffixed-form&quot;<br />FCFLAGS_FREEFORM=&quot;-ffree-form&quot;<br />FCFLAGS_HINTS=&quot;-ffree-line-length-none&quot;<br />FCFLAGS_MODDIR=&quot;-J$(abinit_moddir)&quot;<br />FCFLAGS_OPT=&quot;-O2&quot;<br />FC_LDFLAGS=&quot;&nbsp; &nbsp; &quot;<br />FC_LDFLAGS_64BITS=&quot;&quot;<br />FC_LDFLAGS_DEBUG=&quot;&quot;<br />FC_LDFLAGS_EXTRA=&quot;&quot;<br />FC_LDFLAGS_HINTS=&quot;&quot;<br />FC_LDFLAGS_OPT=&quot;&quot;<br />FC_LIBS=&quot;&nbsp; &nbsp; &quot;<br />FC_LIBS_64BITS=&quot;&quot;<br />FC_LIBS_DEBUG=&quot;&quot;<br />FC_LIBS_EXTRA=&quot;&quot;<br />FC_LIBS_HINTS=&quot;&quot;<br />FC_LIBS_OPT=&quot;&quot;<br />FPP=&quot;&quot;<br />FPPFLAGS=&quot;&nbsp; &nbsp; &quot;<br />FPPFLAGS_DEBUG=&quot;&quot;<br />FPPFLAGS_EXTRA=&quot;&quot;<br />FPPFLAGS_HINTS=&quot;&quot;<br />FPPFLAGS_OPT=&quot;&quot;<br />LTXFLAGS=&quot;&quot;<br />MDFLAGS=&quot;&quot;<br />MPI_RUNNER=&quot;&quot;<br />NVCC=&quot;&quot;<br />NVCC_CFLAGS=&quot;&quot;<br />NVCC_CPPFLAGS=&quot;&quot;<br />NVCC_LDFLAGS=&quot;&quot;<br />NVCC_LIBS=&quot;&quot;<br />PDFFLAGS=&quot;&quot;<br />SERIAL_RUNNER=&quot;&quot;<br />XPP=&quot;&quot;<br />XPPFLAGS=&quot;&nbsp; &nbsp; &quot;<br />XPPFLAGS_EXTRA=&quot;&quot;<br /><br /># Command-line options<br />enable_64bit_flags=&quot;no&quot;<br />enable_all_plugins=&quot;&quot;<br />enable_bigdft=&quot;yes&quot;<br />enable_bindings=&quot;no&quot;<br />enable_bse_unpacked=&quot;no&quot;<br />enable_cclock=&quot;no&quot;<br />enable_clib=&quot;no&quot;<br />enable_config_file=&quot;yes&quot;<br />enable_debug=&quot;yes&quot;<br />enable_dft=&quot;no&quot;<br />enable_etsf_io=&quot;yes&quot;<br />enable_exports=&quot;no&quot;<br />enable_fast_check=&quot;no&quot;<br />enable_fc_wrapper=&quot;no&quot;<br />enable_fft=&quot;no&quot;<br />enable_fox=&quot;no&quot;<br />enable_gpu=&quot;no&quot;<br />enable_gw_cutoff=&quot;no&quot;<br />enable_gw_dpc=&quot;no&quot;<br />enable_gw_optimal=&quot;no&quot;<br />enable_gw_wrapper=&quot;no&quot;<br />enable_hints=&quot;yes&quot;<br />enable_libxc=&quot;yes&quot;<br />enable_linalg=&quot;yes&quot;<br />enable_macroave=&quot;yes&quot;<br />enable_maintainer_checks=&quot;no&quot;<br />enable_math=&quot;no&quot;<br />enable_mpi=&quot;no&quot;<br />enable_mpi_io=&quot;no&quot;<br />enable_mpi_io_test=&quot;no&quot;<br />enable_mpi_trace=&quot;no&quot;<br />enable_netcdf=&quot;yes&quot;<br />enable_optim=&quot;standard&quot;<br />enable_scalapack=&quot;no&quot;<br />enable_smp=&quot;no&quot;<br />enable_stdin=&quot;yes&quot;<br />enable_test_timeout=&quot;no&quot;<br />enable_timer=&quot;no&quot;<br />enable_trio=&quot;no&quot;<br />enable_vdwxc=&quot;no&quot;<br />enable_wannier90=&quot;yes&quot;<br />with_bigdft_includes=&quot;&quot;<br />with_bigdft_libs=&quot;&quot;<br />with_config_file=&quot;&quot;<br />with_dft_flavor=&quot;bigdft+libxc+wannier90&quot;<br />with_dft_includes=&quot;&quot;<br />with_dft_libs=&quot;&quot;<br />with_etsf_io_includes=&quot;&quot;<br />with_etsf_io_libs=&quot;&quot;<br />with_fc_vendor=&quot;&quot;<br />with_fc_version=&quot;&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_includes=&quot;&quot;<br />with_fft_libs=&quot;&quot;<br />with_fox_includes=&quot;&quot;<br />with_fox_libs=&quot;&quot;<br />with_gpu_cflags=&quot;&quot;<br />with_gpu_cppflags=&quot;&quot;<br />with_gpu_flavor=&quot;cuda-single&quot;<br />with_gpu_includes=&quot;&quot;<br />with_gpu_ldflags=&quot;&quot;<br />with_gpu_libs=&quot;&quot;<br />with_gpu_prefix=&quot;&quot;<br />with_libxc_includes=&quot;&quot;<br />with_libxc_libs=&quot;&quot;<br />with_linalg_flavor=&quot;netlib&quot;<br />with_linalg_includes=&quot;&quot;<br />with_linalg_libs=&quot;&quot;<br />with_math_flavor=&quot;gsl&quot;<br />with_math_includes=&quot;&quot;<br />with_math_libs=&quot;&quot;<br />with_mpi_includes=&quot;&quot;<br />with_mpi_level=&quot;&quot;<br />with_mpi_libs=&quot;&quot;<br />with_mpi_prefix=&quot;&quot;<br />with_netcdf_includes=&quot;&quot;<br />with_netcdf_libs=&quot;&quot;<br />with_plugins_prefix=&quot;&quot;<br />with_plugins_tardir=&quot;&quot;<br />with_test_timeout=&quot;0&quot;<br />with_timer_flavor=&quot;abinit&quot;<br />with_timer_includes=&quot;&quot;<br />with_timer_libs=&quot;&quot;<br />with_trio_flavor=&quot;fox+etsf&quot;<br />with_trio_includes=&quot;&quot;<br />with_trio_libs=&quot;&quot;<br />with_wannier90=&quot;&quot;<br />with_wannier90_includes=&quot;&quot;<br />with_wannier90_libs=&quot;&quot;<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 4:03 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello Aldo, Yann ...<br /><br />&quot;i am gettin the message:<br />ifort -O3 -byte_kinds -free -c diolib.f&quot;<br /><br />and<br /><br />FC=&quot;gfortran&quot;<br /><br /><br />Sound fishy to me <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /><br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 4:28 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">I did a make clean and configure again and now the problem did appears in <br /><br /><br />mv -f .deps/xc_f.Tpo .deps/xc_f.Po<br />gfortran  -ffree-form -g -ffree-line-length-none  -O2 -c -o libxc_funcs.o  libxc_funcs.f90<br />cpp                          ./libxc_master.F90 &gt; ../src/libxc.f90<br />gfortran  -ffree-form -g -ffree-line-length-none  -O2 -c -o libxc.o  libxc.f90<br />./libxc_master.F90:28:<br /><br />module xc_f90_ ## types_m<br />1<br />Error: Declaración inclasificable en (1)<br />./libxc_master.F90:32.17:<br /><br />  integer, public, parameter :: xc_f90_kind = selected_real_kind(14)<br />                 1<br />Error: No se permite el atributo PUBLIC en (1) fuera de la parte de especificación de un módulo<br />./libxc_master.F90:35.2:<br /><br /><br />Sorry for the spanish.. my mac decided by default to use spanish messaging.<br /><br />Thanks again...</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 6:07 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Aldo,<br /><br />I think you use Fink gfortran ... right? If it is your case, it's advisable to mix the same versions of gfortran, gcc and cpp to compile abinit. Fink names the gnu fortran &quot;gfortran&quot; but the corresponding gnu C is &quot;gcc-4&quot; and gnu CPP is &quot;cpp-4&quot;. If you do a &quot;which cpp&quot;, I bet /usr/bin/cpp is returned - but not the one in /sw/bin/ ... right? So during the abinit compilation, Apple's cpp is invoked - and it is an oldtimer - not Fink cpp.<br /><br />I suggest first to try to redo the offending line &quot;by hand&quot; using Fink cpp-4: go where the libxc_master.F90 file resides (should be somewhere in plugins/libxc/libxc-svn-r6071-fixed/src), do a &quot;cpp-4 ./libxc_master.F90 &gt; ../src/libxc.f90&quot; and see if it still complains with Fink cpp-4.<br />If it runs fine, I would suggest to cleanup everything and redo a proper configure of abinit with CC=/sw/bin/gcc-4 and CPP=/sw/bin/cpp-4 to be sure to pick up the right compiler.<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 7:50 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">The problem comes from the build system not detecting ifort properly, after which it applies the flags for gfortran. In such a situation, it is normal that modules aren't found.<br /><br />I'm on it, and I'll let you know when I've solved the problem.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Mon Sep 20, 2010 10:43 pm</strong></div>
				<div class="author">by <strong>jolafc</strong></div>
				<div class="content">I did manage to compile abinit 6.5.0 on OS X 10.6.4 using the GNU compilers (gcc, g++, gfortran) version 4.2 and openmpi 1.4.2 as installed with macports. <br /><br />In short, here is the recipe that works for me : <br />1) Install macports (package available here : <!-- m --><a class="postlink" href="http://www.macports.org/install.php">http://www.macports.org/install.php</a><!-- m -->)<br />2) In a shell, run :<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo port install openmpi</code></pre></div><br />3) Use the attached .ac file to compile abinit (I added the .log extension just to make the forum let me upload it)<br /><br />Note : Building netcdf and libxc plugins failed in abinit 6.2.2 with this setup and I didn't test them in abinit 6.5.0, so they are still deactivated in the .ac file attached here. <br /><br />Let us know if it solves your problem...</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5</h3>
				<div class="date">Posted: <strong>Tue Sep 21, 2010 10:03 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Thanks for all replies. I was able to compile abinit 6.5 in my mac but excluding libxc. I will try to find out what is the problem but it is not related to find<br />the modules.<br /><br />regards</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation problem in 6.5&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Fri Sep 24, 2010 6:56 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">I partly solved the issues encountered with ifort. Part of the problem can come from the CC, CXX, and FC, variables set in the environment before runing configure. The build system is designed so that the environment variables always override the config file. Until now, this was done silently, and I changed this in my 6.4.0 branch: from now on, overrides will be brought to the attention of the user at the top of the output of configure.<br /><br />I now need to find out why ifort is not recognized anymore. In the meantime, you can force the detection of ifort by using the --with-fc-vendor=intel and --with-fc-version=&lt;your_version&gt; options of configure.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=598&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:51 GMT -->
</html>
