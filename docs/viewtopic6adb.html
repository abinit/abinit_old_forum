<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=1284&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:19:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; GW+PAW - EuO - Segmentation fault</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>GW+PAW - EuO - Segmentation fault</h2>
		<p><a href="viewtopice93d.html?f=11&amp;t=1284">https://forum.abinit.org/viewtopic.php?f=11&amp;t=1284</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>GW+PAW - EuO - Segmentation fault</h3>
				<div class="date">Posted: <strong>Wed Aug 24, 2011 2:00 pm</strong></div>
				<div class="author">by <strong>bbertran</strong></div>
				<div class="content">Dear all,<br /><br />In the G0W0 calculation for Europium oxide, from the version upper to 6.4 (including the 6.9) of Abinit I obtain a systematic segmentation fault at the level of the sigma calculation in the PAW case.<br /><br />Indeed I can read in the log file :<br /><br /> Calculating &lt;nk|Sigma_x|nk&gt; at k=    0.000   0.000   0.000<br /> bands n = from   5 to  25<br /><br /><br /> m_wfs.F90:4706:COMMENT<br /> Changing FFT mesh<br />-P-0000  Will sum  267 (b,k,s) occupied states in Sigma_x.<br /><br /> calc_sigx_me: calculation status (     64 to be completed):<br />[node031:07851] *** Process received signal ***<br />[node031:07851] Signal: Segmentation fault (11)<br />[node031:07851] Signal code:  (128)<br />[node031:07851] Failing at address: (nil)<br /><br /><br />Notice that the G0W0 for the Europium oxide for release 6.2 of Abinit is normally ended (despite the fact that we observe an over correction for the f-states).<br /><br />The main characteristic of EuO is its Ferromagnetic insulator character with 4f states (use of tsmear, spinpol, etc). However it is a half-metal in the DFT calculation and the GW correction is supposed to open the gap.<br /><br />This different avenue I tried but it did not solve the problem<br /><br />- Use different values of gwcalctyp, COHSEX calculation<br />- Use of contour deformation or plasmon-pole model<br />- Use different PAW atomic data, <br />- Including or not the compensation charge density with the PAW atomic data<br />- Use or not of semi-core states in the Eu PAW atomic data<br />- Make the calculation in serie or in parallel over the number of bands<br /><br />Note that an equivalent Hartree-Fock calculation give rise to the same segmentation fault, so the problem can not be uniquely ascribed to the correlation part.<br /><br />This is the input file...<br /><br />Bruno Bertrand<br /><br /><br />#                   #########################<br />#                   # Europium monoxide EuO #<br />#                   #########################<br /><br /># Calculation of the GW corrections of EuO at Gamma<br /># -------------------------------------------------<br /><br /># Dataset 1: Calculation of the density file<br /># Dataset 2: calculation of the kss file for k-points in IBZ<br /># Dataset 3: calculation of the screening (epsilon^-1 matrix for W)<br /># Dataset 4: calculation of the Self-Energy matrix elements (GW corrections)<br /><br /><br />chkexit 1<br /><br />ndtset  2              # 4 dataset<br />jdtset  3 4            # Only one run with the generic variables and those with index 'j'<br /><br /><br /># ---------------------------------------------<br />#| Dataset 1: Calculation of the density file |<br /># ---------------------------------------------<br /><br /># Definition of the k-point grid<br /># ------------------------------<br /><br /># Shifted to optimize the calculation of density<br /><br />kptopt1 1          # Option for the automatic generation of k points<br /><br />ngkpt1  4 4 4     # Great Density of k points = great precision for density<br /><br />nshiftk1 4         <br /><br />shiftk1  0.5 0.5 0.5<br />         0.5 0.0 0.0<br />         0.0 0.5 0.0<br />         0.0 0.0 0.5<br /><br />nbdbuf1  5    # Good compromise between tolvrs (toldff) and tolwfr<br /><br />#nband1  11  # valence 11 =&gt; HOMO half-filled<br /><br />nband1  30   # Specify slightly more than the occupied bands<br />             # to help convergence, so including the buffering bands<br /><br /><br /># Definition of the SCF procedure<br /># -------------------------------<br /><br />nstep1 80       # Maximal number of SCF cycles<br /><br />tolvrs1 1.0d-14  # Calcul of density =&gt; Tolerance on Potential energy residual<br /><br />diemac1 4.0<br /><br />prtden1     1         # Print out density<br /><br /><br /># -------------------------------------------------------------<br />#| Dataset 2 Generation of the Khom-Sham structure : KSS file |<br /># -------------------------------------------------------------<br /><br />kssform2    3<br /><br /># Definition of the k-point grid<br /># ------------------------------<br /><br />kptopt2  1<br /><br />ngkpt2 4 4 4<br /><br />nshiftk2 1<br /><br />shiftk2 0.0 0.0 0.0<br /><br /># Number of bands<br /># ---------------<br /><br />nbdbuf2 100<br /><br />nband2      1100    # Number of (occ and empty) bands to be computed<br /><br />nbandkss2   1000   # Number of bands in KSS file<br /><br /># Optimization<br /># ------------<br /><br />nline2  6  # More CG minimisation steps<br /><br />getden2     1      # Take the output density of a previous dataset (1)<br />                    #and use them as input density (2), with iscf&lt;0<br /><br /># Definition of the SCF procedure<br /># -------------------------------<br /><br />iscf2 -2    # Do a non-self consistent calc. reading<br />            # in the density (_DEN) file<br /><br />tolwfr2     1.0d-14     # when iscf&lt;0<br /><br />nstep2 60<br /><br /><br /># -------------------------------------------<br />#| Dataset 3 : Calculation of the screening |<br /># -------------------------------------------<br /><br />optdriver3  3      # Screening calculation (epsilon^-1 matrix)<br /><br /># Number of bands<br /># ---------------<br /><br />nband3 991<br /><br /># Planewave set<br /># -------------<br /><br />ecutwfn3  45<br /><br />ecuteps3 6<br /><br /><br /># Optimization<br /># ------------<br /><br /><br /><br />gwcalctyp3    2<br /><br />nfreqim3      6<br />nfreqre3     25<br />freqremax3    100<br /><br /><br />getkss3  2     # Get KSS file from dataset 2<br /><br />fftgw3  21      # 11 : Reduce the memory requirement by using a coarse fft grid<br /><br />gwpara3  2      # Use parallellism over bands<br /><br />awtr3 1         # Use time-reversal symmetry<br /><br />symchi3 1       # Use crystal symmetries in calc. of Chi<br /><br />inclvkb  2      # The commutator of the non-local part of the Hamiltonian with the position operator is correctly included in the q =&gt; 0 contribution<br /><br /><br /># Definition of the k-points<br /># --------------------------<br /><br />kptopt3  1<br /><br />ngkpt3 4 4 4<br /><br />nshiftk3 1<br /><br />shiftk3 0.0 0.0 0.0<br /><br /><br /># -----------------------------------<br />#| Dataset 4 : Calculation of Sigma |<br /># -----------------------------------<br /><br />optdriver4  4        # Calculation of the Self-Energy matrix elements (GW corrections)<br /><br /># Number of bands<br /># ---------------<br /><br />nband4  1000<br /><br /> bdgw4  5  25         # Calculate GW corrections for bands from 91 to 95<br />       5  25<br />       5  25<br />       5  25   # Two before the gap and 3 after due to intertwining and degeneracy<br />       5  25<br />       5  25<br />       5  25<br />       5  25<br /><br /># bdgw4 1 1 20 20 1 1 20 20 1 1 20 20 1 1 20 20<br /><br /># Planewave set<br /># -------------<br /><br />ecutwfn4 45.0<br /><br /><br />ecutsigx4 45.0<br /><br /># Optimization<br /># ------------<br /><br />getkss4  2       # Obtain KSS file from dataset 7<br /><br />getscr4  3<br /><br /><br /><br />gwcalctyp4  2<br /><br />nfreqim4      6<br />nfreqre4     25<br />freqremax4    100<br /><br /><br /># gwmem4  00           # Screening matrix read just a q-vector after another<br />                     # =&gt; reduce the memory needs but make the calculus slower<br /><br /><br />fftgw4  21<br /><br />gwpara4  2           # Use parallellism over bands<br /><br /><br /># Definition of the k-points<br /># --------------------------<br /><br />kptopt4  1<br /><br />ngkpt4 4 4 4<br /><br />nshiftk4  1<br /><br />shiftk4  0.0 0.0 0.0<br /><br />nkptgw4      4       # number of k-point where to calculate the GW correction<br /><br />kptgw4    0.000   0.000    0.000  # Gamma<br />          0.500   0.000    0.000  # L<br />          0.500   0.250    0.000  # W<br />          0.500   0.500    0.000  # X'<br /><br /><br /><br /># ==================================================================<br /># ||                                                              ||<br /># ||   THE INPUT VARIABLES BELOW ARE IDENTICAL FOR ALL DATASETS   ||<br /># ||                                                              ||<br /># ==================================================================<br /><br /><br /># Atoms in the base<br /># -----------------<br /><br />natom 2<br /><br />ntypat 2<br /><br />typat 1*1 1*2<br /><br />xred    0.00000   0.00000   0.00000  # Eu<br />        1/2       1/2       1/2      # 0<br /><br />znucl 63.0 8.0<br /><br />nsym  0     # Find autom. the symmetry operations leaving atomic sublattices invariant. Checks whether the cell is primitive<br /><br /><br /># Definition of the unit cell<br /># ---------------------------<br /><br />rprim  0.0  0.5  0.5   # FCC primitive vectors (to be scaled by acell)<br />       0.5  0.0  0.5<br />       0.5  0.5  0.0<br /><br />acell 3*9.72  # experimental value<br /><br /><br /># Optimisation in ecut<br /># --------------------<br /><br /> ecut  45         # Maximal plane-wave kinetic energy cut-off, in Hartree<br /><br /><br /># To be slightly raised<br /><br /> pawecutdg  120      <br /> <br /># To be raised to 100 ! see log files<br /><br /> ecutsm  0.5<br /><br /><br /># Spin polarisation and half-metallic character<br /># ---------------------------------------------<br /><br />nsppol 2<br /><br />nspinor 1<br /><br />nspden 2      # scalar magnetization (axis arbitrarily fixed in the z direction)<br />              # Spin up chosen<br />occopt 7<br /><br />tsmear 0.001<br /><br />spinat 0 0 2<br />       0 0 0<br /><br /># Other<br /># -----<br /><br />enunit 2<br /><br />istwfk *1       # Bug of abinit related to symmetry<br /><br /><br />ixc 11 #GGA calculus</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=1284&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:19:54 GMT -->
</html>
