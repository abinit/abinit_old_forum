<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=14&t=4472&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 17:19:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; The eigenvector with band 1 has zero norm</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>The eigenvector with band 1 has zero norm</h2>
		<p><a href="viewtopic8891.html?f=14&amp;t=4472">https://forum.abinit.org/viewtopic.php?f=14&amp;t=4472</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Sat Jul 11, 2020 2:32 pm</strong></div>
				<div class="author">by <strong>miro_ilias</strong></div>
				<div class="content">Hello,<br>
<br>
with abinit-8.10.3 I am trying the tutorial PAW1, <a href="https://docs.abinit.org/tutorial/paw1/" class="postlink">https://docs.abinit.org/tutorial/paw1/</a>  , abinit &lt; tpaw1_1.files &gt; log 2&gt; err &amp; .<br>
<br>
However, I get the error
<blockquote class="uncited"><div>--- !ERROR<br>
src_file: m_vtowfk.F90<br>
src_line: 1136<br>
mpi_rank: 0<br>
message: |<br>
    The eigenvector with band 1 has zero norm.<br>
    This usually happens when the number of bands (nband) is comparable to the number of planewaves (mpw)<br>
    Action: Check the parameters of the calculation. If nband ~ mpw, then decrease nband or, alternatively, increase ecut<br>
...
</div></blockquote>

Althoug I was changing parameters ecut, pawecutdg, error remains. Any help, please ?<br>
<br>
PS1: The same error happens also with <a href="https://docs.abinit.org/tutorial/paw1/#3a-convergence-with-respect-to-ecut-in-the-norm-conserving-pseudopotential-case" class="postlink">https://docs.abinit.org/tutorial/paw1/# ... ntial-case</a> .<br>
<br>
PS2: However, this test works with older abinit (in debian jessie package), version 7.8.2.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Mon Jul 13, 2020 12:03 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Miro,<br>
This looks strange since the tuto and tests are used to test Abinit on several architectures/compilers.<br>
What are your compilers and on which architecture (and waht return abinit -b)? <br>
Best wishes,<br>
Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Mon Jul 13, 2020 9:51 pm</strong></div>
				<div class="author">by <strong>miro_ilias</strong></div>
				<div class="content">Hello,<br>
I used <a href="mailto:milias@lxir127.gsi.de">milias@lxir127.gsi.de</a>:/data.local1/milias/software/abinit/abinit-8.10.3/../configure FC=mpif90 CC=mpicc  --with-mpi  --prefix=$PWD <br>
<br>
giving
<blockquote class="uncited"><div>
<a href="mailto:milias@lxir127.gsi.de">milias@lxir127.gsi.de</a>:/data.local1/milias/software/abinit/abinit-8.10.3/bin/../abinit -b<br>
--------------------------------------------------------------------------<br>
By default, for Open MPI 4.0 and later, infiniband ports on a device<br>
are not used by default.  The intent is to use UCX for these devices.<br>
You can override this policy by setting the btl_openib_allow_ib MCA parameter<br>
to true.<br>
<br>
  Local host:              lxir127<br>
  Local adapter:           mlx4_0<br>
  Local port:              1<br>
<br>
--------------------------------------------------------------------------<br>
--------------------------------------------------------------------------<br>
WARNING: There was an error initializing an OpenFabrics device.<br>
<br>
  Local host:   lxir127<br>
  Local device: mlx4_0<br>
--------------------------------------------------------------------------<br>
 DATA TYPE INFORMATION: <br>
 REAL:      Data type name: REAL(DP) <br>
            Kind value:      8<br>
            Precision:      15<br>
            Smallest nonnegligible quantity relative to 1:  0.22204460E-15<br>
            Smallest positive number:                       0.22250739-307<br>
            Largest representable number:                   0.17976931+309<br>
 INTEGER:   Data type name: INTEGER(default) <br>
            Kind value: 4<br>
            Bit size:   32<br>
            Largest representable number: 2147483647<br>
 LOGICAL:   Data type name: LOGICAL <br>
            Kind value: 4<br>
 CHARACTER: Data type name: CHARACTER             Kind value: 1<br>
  ==== Using MPI-2 specifications ==== <br>
  MPI-IO support is ON<br>
  xmpi_tag_ub ................      8388608<br>
  xmpi_bsize_ch ..............            1<br>
  xmpi_bsize_int .............            4<br>
  xmpi_bsize_sp ..............            4<br>
  xmpi_bsize_dp ..............            8<br>
  xmpi_bsize_spc .............            8<br>
  xmpi_bsize_dpc .............           16<br>
  xmpio_bsize_frm ............            4<br>
  xmpi_address_kind ..........            8<br>
  xmpi_offset_kind ...........            8<br>
  MPI_WTICK ..................   1.000000000000000E-009<br>
<br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
 CPP options activated during the build:<br>
<br>
                  CC_INTEL                   CXX_GNU                  FC_INTEL<br>
 <br>
 HAVE_FC_ALLOCATABLE_DT...             HAVE_FC_ASYNC  HAVE_FC_COMMAND_ARGUMENT<br>
 <br>
      HAVE_FC_COMMAND_LINE        HAVE_FC_CONTIGUOUS           HAVE_FC_CPUTIME<br>
 <br>
             HAVE_FC_ETIME              HAVE_FC_EXIT             HAVE_FC_FLUSH<br>
 <br>
             HAVE_FC_GAMMA            HAVE_FC_GETENV            HAVE_FC_GETPID<br>
 <br>
   HAVE_FC_IEEE_EXCEPTIONS             HAVE_FC_IOMSG     HAVE_FC_ISO_C_BINDING<br>
 <br>
  HAVE_FC_ISO_FORTRAN_2008        HAVE_FC_LONG_LINES        HAVE_FC_MOVE_ALLOC<br>
 <br>
           HAVE_FC_PRIVATE         HAVE_FC_PROTECTED         HAVE_FC_STREAM_IO<br>
 <br>
            HAVE_FC_SYSTEM        HAVE_LIBPAW_ABINIT      HAVE_LIBTETRA_ABINIT<br>
 <br>
               HAVE_LINALG        HAVE_LINALG_SERIAL                  HAVE_MPI<br>
 <br>
                 HAVE_MPI2       HAVE_MPI_IALLREDUCE        HAVE_MPI_IALLTOALL<br>
 <br>
       HAVE_MPI_IALLTOALLV        HAVE_MPI_INTEGER16               HAVE_MPI_IO<br>
 <br>
 HAVE_MPI_TYPE_CREATE_S...                HAVE_NUMPY             HAVE_OS_LINUX<br>
 <br>
         HAVE_TIMER_ABINIT              USE_MACROAVE                            <br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
<br>
 <br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
 <br>
 === Build Information === <br>
  Version       : 8.10.3<br>
  Build target  : x86_64_linux_intel17.0<br>
  Build date    : 20200710<br>
 <br>
 === Compiler Suite === <br>
  C compiler       : intel17.0<br>
  C++ compiler     : gnu4.9<br>
  Fortran compiler : intel17.0<br>
  CFLAGS           :  -g -O2 -vec-report0<br>
  CXXFLAGS         :  -g -O2 -mtune=native -march=native<br>
  FCFLAGS          :  -g<br>
  FC_LDFLAGS       : <br>
 <br>
 === Optimizations === <br>
  Debug level        : basic<br>
  Optimization level : standard<br>
  Architecture       : intel_xeon<br>
 <br>
 === Multicore === <br>
  Parallel build : yes<br>
  Parallel I/O   : auto<br>
  openMP support : no<br>
  GPU support    : no<br>
 <br>
 === Connectors / Fallbacks === <br>
  Connectors on : yes<br>
  Fallbacks on  : yes<br>
  DFT flavor    : none<br>
  FFT flavor    : none<br>
  LINALG flavor : netlib<br>
  MATH flavor   : none<br>
  TIMER flavor  : abinit<br>
  TRIO flavor   : none<br>
 <br>
 === Experimental features === <br>
  Bindings            : @enable_bindings@<br>
  Exports             : no<br>
  GW double-precision : no<br>
 <br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
 <br>
<br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
 Default optimizations:<br>
   -O3<br>
<br>
<br>
 Optimizations for 43_ptgroups:<br>
   -O0<br>
<br>
<br>
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>

</div></blockquote></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Thu Jul 16, 2020 10:38 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi Miro,<br>
<br>
I compile abinit 8.10.3 with intel 17<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;module list
Currently Loaded Modulefiles:
  1) intel/compiler/17.0.3      2) OpenMPI/2.0.2-intel-17.0   </code></pre></div>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>cd tests/tutorial/Input
&gt;cat tpaw1_1.files
tpaw1_1.in
tpaw1_1.out
tpaw1_1i
tpaw1_1o
tpaw1_1tmp
../../Psps_for_tests/6c.pspnc
</code></pre></div>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../src/98_main/abinit &lt; tpaw1_1.files &gt; log 2&gt; err
&gt;cat err
</code></pre></div>
then, it works...<br>
<br>
but if I used "Psps_for_tests/6c.lda.atompaw" , there is an error :<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&gt;cat err

--- !ERROR
src_file: m_memeval.F90
src_line: 2556
mpi_rank: 0
message: |
    The value of (paw)ecutdg is zero or negative, which is forbidden.
...</code></pre></div>

which PSP do you use?<br>
<br>
jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Fri Jul 17, 2020 9:54 am</strong></div>
				<div class="author">by <strong>miro_ilias</strong></div>
				<div class="content">Hello,<br>
<br>
I use 6c.lda.atompaw, but set the parameter "pawecutdg", according to the tutorial <a href="https://docs.abinit.org/tutorial/paw1/#2-using-paw-with-abinit" class="postlink">https://docs.abinit.org/tutorial/paw1/# ... ith-abinit</a> .</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: The eigenvector with band 1 has zero norm</h3>
				<div class="date">Posted: <strong>Fri Jul 17, 2020 3:05 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi Miro,<br>

<blockquote class="uncited"><div>but set the parameter "pawecutdg"</div></blockquote>

sorry, forgot to add <strong class="text-strong">pawecutdg 50</strong> in tpaw1_1.in   <img class="smilies" src="images/smilies/icon_e_confused.gif" width="15" height="17" alt=":?" title="Confused">  <img class="smilies" src="images/smilies/icon_e_confused.gif" width="15" height="17" alt=":?" title="Confused"> <br>
<br>
now <br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../src/98_main/abinit &lt; tpaw1_1.files &gt; log 2&gt; err
cat err</code></pre></div>

no error...<br>
<br>
then, there's a problem with your abinit binary<br>
which version of MPI do you use ?<br>
<br>
can you create an ac file  ( file.ac ) :<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_mpi="yes"
enable_mpi_io="yes"
with_mpi_prefix="${MPI_HOME}"
with_trio_flavor="netcdf"
with_fft_flavor="fftw3-mkl"
with_fft_incs="-I${MKLROOT}/include"
with_fft_libs="-L${MKLROOT}/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl"
with_linalg_flavor="mkl"
with_linalg_incs="-I${MKLROOT}/include"
with_linalg_libs="-L${MKLROOT}/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl"
with_dft_flavor="libxc"
enable_gw_dpc="yes" </code></pre></div>

and run these cmds :<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --with-config-file=./file.ac
make -j 8</code></pre></div>

good luck</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=14&t=4472&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 17:19:50 GMT -->
</html>
