<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3217&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:37:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; About &quot;signal 11 (Segmentation fault)&quot; error when value of n</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>About &quot;signal 11 (Segmentation fault)&quot; error when value of n</h2>
		<p><a href="viewtopicc7d8.html?f=3&amp;t=3217">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3217</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>About &quot;signal 11 (Segmentation fault)&quot; error when value of n</h3>
				<div class="date">Posted: <strong>Tue Mar 01, 2016 2:26 am</strong></div>
				<div class="author">by <strong>anemonekgo</strong></div>
				<div class="content">Subject: About &quot;signal 11 (Segmentation fault)&quot; error when value of natom is making to big.<br /><br />Dear all,<br /><br />I'm always thankful for the help.<br />Now , I'm creating a parallel computer by myself such as the bottom informations.(diskless ones and abinit configure info.)<br />Thanks to your advice it is about 80% was completed. However, we are suffering from the rest of the little.<br />Please help me again.<br /><span style="text-decoration: underline"><br />I understood that an error occur when I made natom big by a trial run of the parallel computer.</span><br /><br />First it is a LAN traffic error, I was able to calculate without a problem when 10Gbps LAN card and switch change only master node.<br />By this operation, a calculation was possible to natom=396.<br />=================================================================================================================<br />Ru_1	natom    48 	No problem calculation end by <strong class="text-strong">1Gbps_LAN</strong>_system								<br />Ru_2	natom    156 	I can calculate without a problem when <strong class="text-strong">10Gbps LAN</strong> card and switch change only master node.					<br />Ru_3	natom    252 	Same as above<br />Ru_4	natom    300	Same as above						<br />Ru_5	natom    348	Same as above						<br />Ru_6	natom    396 	Same as above						<br />Ru_7	<strong class="text-strong">natom    444 	#error  appears at $filename_o_DS1_TIM6.cif(DEN) and does Stop</strong>										<br />Ru_8	<strong class="text-strong">natom    492  	#error  appears at $filename_o_DS1_TIM4.cif(DEN) and does Stop</strong>	<br />=================================================================================================================<br /><br />But when natom is made bigger, the following error occurs and calculation stops.<br />#log<br />================================================================================<br /> ----iterations are completed or convergence reached----<br /><br /> outwf: write wavefunction to file Run_8_o_DS1_WFK, with accesswff 1<br />--------------------------------------------------------------------------<br />mpirun noticed that process rank 28 with PID 0 on node 192.168.0.107 exited on signal 11 (Segmentation fault).<br />--------------------------------------------------------------------------<br /><br />#terminal<br />================================================================================<br />Program received signal SIGSEGV: Segmentation fault - invalid memory reference.<br />Backtrace for this error:<br />#0  0x7fca9012e642<br />.<br />.<br />#13  0x2AE20DCBC2C5<br />#14  0x2AE20DCBC338<br />#15  0x2AE1FB0A1CCD<br />#16  0x2AE1F9283EB5<br />#17  0xEE399A in __m_wffile_MOD_wffreadwrite_mpio at m_wffile.F90:2054<br />#18  0xE3780B in writewf_ at rwwf.F90:935<br />#19  0xE38F0F in rwwf_ at rwwf.F90:163<br />#20  0x9BEF46 in outwf_ at outwf.F90:454<br />#21  0x4B1912 in gstate_ at gstate.F90:1266<br />#22  0x434857 in gstateimg_ at gstateimg.F90:426<br />#23  0x425BE4 in driver_ at driver.F90:645 (discriminator 2)<br />#24  0x41CCBA in abinit at abinit.F90:460<br />[node04][[58377,1],18][btl_tcp_frag.c:237:mca_btl_tcp_frag_recv] mca_btl_tcp_frag_recv: readv failed: Connection reset by peer (104)<br />[node01][[58377,1],6][btl_tcp_frag.c:237:mca_btl_tcp_frag_recv] mca_btl_tcp_frag_recv: readv failed: Connection reset by peer (104)<br />[node02][[58377,1],9][btl_tcp_frag.c:237:mca_btl_tcp_frag_recv] mca_btl_tcp_frag_recv: readv failed: Connection reset by peer (104)<br />---------------------------------------------------------------------------------------------------------------------------<br />[node00:17529] 40 more processes have sent help message help-mpi-api.txt / mpi-abort<br />[node00:17529] Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages<br />---------------------------------------------------------------------------------------------------------------------------<br /><br />I did not understand it well, but the error outstanding most was &quot;signal 11 (Segmentation fault)&quot;.<br /><br />Therefore I tried the following actions.<br /><br />*1st. I tried limit cancellation of Stack size at Run_7. <br /><br /> $ ulimit -s unlimited <br /><br /> But, the result was the same.						<br /><br />*2nd. I tried to change the value of ecut at Run_7.						<br /><br />ecut=5 ,pawecutdg=20  :	error  appears at $filename_o_DS1_TIM2.cif(DEN) and does Stop				<br />ecut=10,pawecutdg=20  :	error  appears at $filename_o_DS1_TIM6.cif(DEN) and does Stop				<br />ecut=15,pawecutdg=30  :	error  appears at $filename_o_DS1_TIM8.cif(DEN) and does Stop				<br />ecut=20,pawecutdg=40  :	I am trying it, but a calculation is slow, and a result is not readily given now.				<br /><br /><br />There are no changes by unlimited of Stack size, and I'm going to decrease more ecut and I was going to  get the memory capacity. <br /><strong class="text-strong"><span style="text-decoration: underline">But, a reverse result was obtained.</span></strong><br /><br /><strong class="text-strong"><span style="color: #0000BF">I'm in trouble because I don't know what has happened.</span></strong><br /><br />I am happy if I can ask for some advice.<br /><br />Please help me again.<br /><br />Best,regard,<br />Haruyuki Satou<br />(anemonekgo)<br />=====================================================================================================================<br />#Please pardon that a parameter is rough because the present gave priority to operation confirmation for a test run.<br /><br />&lt;Run_X.in&gt;<br />------------------------------------------------<br />    autoparal 1 <br />    ndtset 1<br /><br />    optcell 2 <br />    ionmov 3 <br />    tolmxf 5.0d-4<br />    ntime 10<br />    #getcell -1<br />    #getxred -1<br />    dilatmx 1.05<br />    ecutsm 0.5<br /><br />    kptopt 3                       <br />    nshiftk 1<br />    shiftk 0.0 0.0 0.0<br />    ngkpt 2 2 2   <br />    occopt 1<br /><br />    natom   &quot;Variable&quot;  <br />    ntypat   5 <br /><br />    ecut 10.0              #def.15<br />    pawecutdg 20.0<br />    pawspnorb 0<br />    pawovlp 20<br />    ixc 11<br /><br />    nstep 40<br />    toldff 1.0d-6 <br />    diemac 12.0<br />    optforces 1<br />    prtcif 1<br />    prtden 1<br />    enunit 1<br />------------------------------------------------<br /><br />&lt;Run_X.files&gt;<br />------------------------------------------------<br />Run_X.in<br />Run_X.out<br />Run_X_i<br />Run_X_o<br />Run_X0<br />atom1_pbe_v1_abinit.paw<br />atom2_pbe_v1_abinit.paw<br />atom3_pbe_v1.2_abinit.paw<br />atom4_pbe_v1.2_abinit.paw<br />atom5_pbe_v1_abinit.paw<br />------------------------------------------------<br /><br />============================================================================================<br />additional information<br />~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br />===Diskless(PXEboot) cluster system=========================================================<br /><br />abinit-7.10.4/OS:ubuntu14.04 amd64<br />-master node :[core i7 4790k(4core)/RAM 16Gb/ssd 512Gb/ASUS H97Plus/intel 1Gbpd NIC]x1 # =&gt;intel 1Gbps NIC<br />-clients node :[core i7 4790k(4core)/RAM 16Gb/ASUS H97Plus]x15<br />-Switching hub:NETGEAR 1Gbps  #=&gt; NETGEAR 10Gbps x2 + 1Gbps x24<br /><br />server stting:tftpd-hpa syslinux nfs-kernel-server isc-dhcp-server openssh-server NIS-serever<br /><br />=============================================================================================<br /><br />abinit-7.10.4<br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br />abinit configure/ atlas gcc48<br />□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□<br />#configure infomation<br />$ gedit ubuntu.ac<br />-----------------------------------------------------------------------------------------------------------------------<br />prefix=&quot;/usr/local&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr/local/openmpi&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/local/fftw/3.3.4/include&quot;<br />with_fft_libs=&quot;-L/usr/local/fftw/3.3.4/lib -lfftw3 -lfftw3_mpi -lfftw3_threads -lfftw3f -lfftw3f_mpi -lfftw3f_threads&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib -llapack -lf77blas -lcblas -latlas -lblas&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />#enable_openmp=&quot;yes&quot;<br />-----------------------------------------------------------------------------------------------------------------------<br />$ ./configure --with-config-file=&quot;./ubuntu.ac&quot; fcflags_opt_67_common=&quot;-O2&quot; fcflags_opt_77_lwf=&quot;-O2&quot; fcflags_opt_wannier90=&quot;-O2&quot; -enable-optim=&quot;safe&quot;<br /><br /> ==============================================================================<br /> === Final remarks                                                          ===<br /> ==============================================================================<br /><br /><br />Summary of important options:<br /><br />  * C compiler      : gnu version 4.8<br />  * Fortran compiler: gnu version 4.8<br />  * architecture    : unknown unknown (64 bits)<br /><br />  * debugging       : basic<br />  * optimizations   : safe<br /><br />  * OpenMP enabled  : no (collapse: ignored)<br />  * MPI    enabled  : yes<br />  * MPI-IO enabled  : yes<br />  * GPU    enabled  : no (flavor: none)<br /><br />  * TRIO   flavor = netcdf-fallback+etsf_io-fallback+fox-fallback<br />  * TIMER  flavor = abinit (libs: ignored)<br />  * LINALG flavor = atlas (libs: user-defined)<br />  * ALGO   flavor = none (libs: ignored)<br />  * FFT    flavor = fftw3 (libs: user-defined)<br />  * MATH   flavor = none (libs: ignored)<br />  * DFT    flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: About &quot;signal 11 (Segmentation fault)&quot; error when value </h3>
				<div class="date">Posted: <strong>Wed Mar 02, 2016 3:27 am</strong></div>
				<div class="author">by <strong>anemonekgo</strong></div>
				<div class="content">Dear all,<br />I revise a mention error.<br />Best,<br />============================================================================================<br />additional information<br />~~~~~~~~~~~~~~~~~~~~~~~~~~~<br />===Diskless(PXEboot) cluster system=========================================================<br /><br />abinit-7.10.4/OS:ubuntu14.04 amd64<br />-master node :[core i7 4790k(4core/8T)/RAM <strong class="text-strong">32Gb</strong>/ssd 512Gb/ASUS H97Plus/intel 1Gbpd NIC]x1 # =&gt;intel <strong class="text-strong">10</strong>Gbps NIC<br />-clients node :[core i7 4790k(4core/8T)/RAM 16Gb/ASUS H97Plus]x15<br />-Switching hub:NETGEAR 1Gbps <strong class="text-strong">x16</strong> #=&gt; NETGEAR 10Gbps x2 + 1Gbps x24<br /><br />server stting:tftpd-hpa syslinux nfs-kernel-server isc-dhcp-server openssh-server NIS-serever</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3217&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:37:29 GMT -->
</html>
