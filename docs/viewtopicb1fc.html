<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3670&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:52:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; get phonon spectrum success, but not elphon coeffiecients</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>get phonon spectrum success, but not elphon coeffiecients</h2>
		<p><a href="viewtopic52fd.html?f=10&amp;t=3670">https://forum.abinit.org/viewtopic.php?f=10&amp;t=3670</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>get phonon spectrum success, but not elphon coeffiecients&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Wed Aug 30, 2017 6:10 pm</strong></div>
				<div class="author">by <strong>onion2440</strong></div>
				<div class="content">Dear every one,<br />       sorry to trouble you again. <br />       I want to repeat the mode-specific electron-phonon coupling strength of the article (Fig. 3 b-c) : I. Loa, et al. Lattice dynamics and superconductivity in cerium at high pressure[J]. Physical review letters, 2012, 108(4): 045502.  however, I can only obtain phonon spectra and cannot obtain electron-phonon coupling coefficients. I have checked my input file carefully，I still don't know what's wrong with it. Anyone can help me?<br />       Specific practices are as follows：<br />　　Follow the electron-phonon tutorial， I first computed the DDB and GKK files, second, combine the DDB files with the help of mrgddb tool, and combine the GKK files with the help of mrggkk tool. However, When I use the ANADDB program to do electron-phonon coupling calculations (elphflag=1), I got a mistake:<br />########################<br />--- !ERROR<br />src_file: read_gkk.F90<br />src_line: 666<br />mpi_rank: 6<br />message: |<br />    gkk element    4     7     1     1 was not found by symmetry operations  on the irreducible perturbations and qpoints given<br />...<br />######################<br />        Interestingly, when I comment out the parameter :  elphflag, the anaddb program works well and I got the phonon dispersions.  <br />     <br />--------------------------------below are input files--------------------------<br />teph_1.in<br />-------------<br />ndtset 46<br />toldfe1   1.0d-12<br />#nline1   10       # This is to expedite the convergence of higher-lying bands<br />#nstep1  1<br />#nline1  1<br />##<br />rfphon1  0       # for DS1 do _not_ do perturbation<br />nqpt1    0       # for DS1 do _not_ do perturbation<br />prtwf1   1      # need GS wavefunctions for further runs<br />getwfk1  0<br />kptopt1  1<br /># enforce calculation of forces at each SCF step<br />optforces 1<br />qpt2              0.00000000E+00  0.00000000E+00  0.00000000E+00<br />qpt3              2.50000000E-01  0.00000000E+00  0.00000000E+00<br />qpt4              5.00000000E-01  0.00000000E+00  0.00000000E+00<br />qpt5              2.50000000E-01  2.50000000E-01  0.00000000E+00<br />qpt6              5.00000000E-01  2.50000000E-01  0.00000000E+00<br />qpt7             -2.50000000E-01  2.50000000E-01  0.00000000E+00<br />qpt8              5.00000000E-01  5.00000000E-01  0.00000000E+00<br />qpt9              0.00000000E+00  0.00000000E+00  2.50000000E-01<br />qpt10             2.50000000E-01  0.00000000E+00  2.50000000E-01<br />qpt11             5.00000000E-01  0.00000000E+00  2.50000000E-01<br />qpt12             2.50000000E-01  2.50000000E-01  2.50000000E-01<br />qpt13             5.00000000E-01  2.50000000E-01  2.50000000E-01<br />qpt14            -2.50000000E-01  2.50000000E-01  2.50000000E-01<br />qpt15             5.00000000E-01  5.00000000E-01  2.50000000E-01<br />qpt16             0.00000000E+00  0.00000000E+00  5.00000000E-01<br />qpt17             2.50000000E-01  0.00000000E+00  5.00000000E-01<br />qpt18             5.00000000E-01  0.00000000E+00  5.00000000E-01<br />qpt19             2.50000000E-01  2.50000000E-01  5.00000000E-01<br />qpt20             5.00000000E-01  2.50000000E-01  5.00000000E-01<br />qpt21            -2.50000000E-01  2.50000000E-01  5.00000000E-01<br />qpt22             5.00000000E-01  5.00000000E-01  5.00000000E-01<br /><br />toldfe23   1.0d-7<br />qpt23     0.0 0.0 0.0<br />rfphon23  0<br />rfelfd23  2<br />prtwf23   0<br /><br /># WF on full BZ<br />#tolwfr24      1.0d-14<br />toldfe24      1.0d-7<br />prtwf24       1<br />getwfk24      1<br />#nstep24       1<br />#nline24       1<br />nqpt24        0<br />rfphon24      0<br /><br />qpt25                      0.00000000E+00  0.00000000E+00  0.00000000E+00<br />qpt26                      2.50000000E-01  0.00000000E+00  0.00000000E+00<br />qpt27                      5.00000000E-01  0.00000000E+00  0.00000000E+00<br />qpt28                      2.50000000E-01  2.50000000E-01  0.00000000E+00<br />qpt29                      5.00000000E-01  2.50000000E-01  0.00000000E+00<br />qpt30                     -2.50000000E-01  2.50000000E-01  0.00000000E+00<br />qpt31                      5.00000000E-01  5.00000000E-01  0.00000000E+00<br />qpt32                      0.00000000E+00  0.00000000E+00  2.50000000E-01<br />qpt33                      2.50000000E-01  0.00000000E+00  2.50000000E-01<br />qpt34                      5.00000000E-01  0.00000000E+00  2.50000000E-01<br />qpt35                      2.50000000E-01  2.50000000E-01  2.50000000E-01<br />qpt36                      5.00000000E-01  2.50000000E-01  2.50000000E-01<br />qpt37                     -2.50000000E-01  2.50000000E-01  2.50000000E-01<br />qpt38                      5.00000000E-01  5.00000000E-01  2.50000000E-01<br />qpt39                      0.00000000E+00  0.00000000E+00  5.00000000E-01<br />qpt40                      2.50000000E-01  0.00000000E+00  5.00000000E-01<br />qpt41                      5.00000000E-01  0.00000000E+00  5.00000000E-01<br />qpt42                      2.50000000E-01  2.50000000E-01  5.00000000E-01<br />qpt43                      5.00000000E-01  2.50000000E-01  5.00000000E-01<br />qpt44                     -2.50000000E-01  2.50000000E-01  5.00000000E-01<br />qpt45                      5.00000000E-01  5.00000000E-01  5.00000000E-01<br /><br />get1den25     2    prtgkk25      1     iscf25       -2     tolwfr25      1.0d-20<br />get1den26     3    prtgkk26      1     iscf26       -2     tolwfr26      1.0d-20<br />get1den27     4    prtgkk27      1     iscf27       -2     tolwfr27      1.0d-20<br />get1den28     5    prtgkk28      1     iscf28       -2     tolwfr28      1.0d-20<br />get1den29     6    prtgkk29      1     iscf29       -2     tolwfr29      1.0d-20<br />get1den30     7    prtgkk30      1     iscf30       -2     tolwfr30      1.0d-20<br />get1den31     8    prtgkk31      1     iscf31       -2     tolwfr31      1.0d-20<br />get1den32     9    prtgkk32      1     iscf32       -2     tolwfr32      1.0d-20<br />get1den33     10   prtgkk33      1     iscf33       -2     tolwfr33      1.0d-20<br />get1den34     11   prtgkk34      1     iscf34       -2     tolwfr34      1.0d-20<br />get1den35     12   prtgkk35      1     iscf35       -2     tolwfr35      1.0d-20<br />get1den36     13   prtgkk36      1     iscf36       -2     tolwfr36      1.0d-20<br />get1den37     14   prtgkk37      1     iscf37       -2     tolwfr37      1.0d-20<br />get1den38     15   prtgkk38      1     iscf38       -2     tolwfr38      1.0d-20<br />get1den39     16   prtgkk39      1     iscf39       -2     tolwfr39      1.0d-20<br />get1den40     17   prtgkk40      1     iscf40       -2     tolwfr40      1.0d-20<br />get1den41     18   prtgkk41      1     iscf41       -2     tolwfr41      1.0d-20<br />get1den42     19   prtgkk42      1     iscf42       -2     tolwfr42      1.0d-20<br />get1den43     20   prtgkk43      1     iscf43       -2     tolwfr43      1.0d-20<br />get1den44     21   prtgkk44      1     iscf44       -2     tolwfr44      1.0d-20<br />get1den45     22   prtgkk45      1     iscf45       -2     tolwfr45      1.0d-20<br /><br />nstep25       1      nline25       1<br />nstep26       1      nline26       1<br />nstep27       1      nline27       1<br />nstep28       1      nline28       1<br />nstep29       1      nline29       1<br />nstep30       1      nline30       1<br />nstep31       1      nline31       1<br />nstep32       1      nline32       1<br />nstep33       1      nline33       1<br />nstep34       1      nline34       1<br />nstep35       1      nline35       1<br />nstep36       1      nline36       1<br />nstep37       1      nline37       1<br />nstep38       1      nline38       1<br />nstep39       1      nline39       1<br />nstep40       1      nline40       1<br />nstep41       1      nline41       1<br />nstep42       1      nline42       1<br />nstep43       1      nline43       1<br />nstep44       1      nline44       1<br />nstep45       1      nline45       1<br /><br />getwfk25      24<br />getwfk26      24<br />getwfk27      24<br />getwfk28      24<br />getwfk29      24<br />getwfk30      24<br />getwfk31      24<br />getwfk32      24<br />getwfk33      24<br />getwfk34      24<br />getwfk35      24<br />getwfk36      24<br />getwfk37      24<br />getwfk38      24<br />getwfk39      24<br />getwfk40      24<br />getwfk41      24<br />getwfk42      24<br />getwfk43      24<br />getwfk44      24<br />getwfk45      24<br /><br />prtgkk46     1<br />rfphon46     0             # no phonons here<br />rfelfd46     2             # Activate the calculation of the d/dk perturbation<br />qpt46        0.0 0.0 0.0   # This is a calculation at the Gamma point<br />iscf46      -3             # The d/dk perturbation must be treated non SC-ly<br />tolwfr46     1.0d-20       # Must use tolwfr for non-self-consistent calculations<br />#toldfe46      1.0d-7<br />nstep46      1<br />nline46      4<br />getwfk46     24<br />get1den46    23<br /><br />#<br /># general data for all phonon calculations:<br />#<br />prepgkk 1        # flag to calculate all perturbations for el-phon calculations<br />use_nonscf_gkk 0 # enforce old default and scf-calculate all perturbations<br />nqpt 1           # 1 qpoint at a time<br />#tolvrs 1.e-8     # tolerance on 2DTE convergence: potential^(1) is what we need<br />toldfe  1.0d-7<br />getwfk 1         # all other DS get wf from DS1<br />getwfq 1<br />prtwf 0<br />rfatpol 1 2      # all atoms are perturbed<br />rfdir 1 1 1      # all directions of perturbation<br />rfphon 1<br /><br />ngkpt        4 4 4<br />kptopt       3<br /><br /># As the kinetic energy cutoff<br />ecut         16.0<br />pawecutdg 20<br /># Use a centered grid for the kpoints<br />nshiftk      1<br />shiftk       0.0 0.0 0.0<br /><br />#<br />#  Common data<br /><br />acell      6.0561800248E+00  6.0561800248E+00  9.5375115231E+00 Bohr<br /><br />rprim      4.5739750302E-01  8.8926234837E-01  0.0000000000E+00<br />            -4.5739750302E-01  8.8926234837E-01  0.0000000000E+00<br />             0.0000000000E+00  0.0000000000E+00  1.0000000000E+00<br /><br />ntypat 1<br /><br />#Definition of tha atoms<br />natom  2<br />typat  1 1<br /><br />xred      1.0099598965E-01  1.0099598965E-01  7.5000000000E-01<br />         -1.0099598965E-01 -1.0099598965E-01  1.2500000000E+00<br /><br />nband        20<br />nbdbuf       4<br /><br />#  include metallic occupation function with a small smearing<br />occopt       7<br />tsmear       0.01<br /><br />nstep        800<br />nline         30<br />znucl        58<br /><br />---------------------------------<br />teph_4.in   for anaddb program<br />---------------------<br />elphflag 1<br /><br /># Path in reciprocal space along which the phonon linewidths<br />#  and band structure will be calculated<br />#telphint 0<br />#kptrlatt 20 0 0  0 20 0  0 0 20<br />#<br />#prtnest 1<br />nqpath 2<br />qpath<br />0 0 0<br />0.5 0.5 0<br /><br /># Coulomb pseudopotential parameter<br />mustar 0.136<br /><br /># Minimalistic qpoint grid<br />ngqpt 4 4 4<br /><br />#  impose acoustic sum rule in a symmetric way<br />asr 2<br />dipdip 0<br /><br />#  bravais lattice necessary<br />brav 1<br /><br /># qpt grid<br />nqshft 1<br />q1shft 0.0 0.0 0.0<br /># <br />ifcflag 1<br />ifcana 1<br />ifcout 0<br /><br />#  ifc for all atoms?<br />natifc 0<br />atifc 1 2  3<br /><br />#  print dielectric matrix with freq dependence<br />dieflag 0<br /><br />#  print out eigenvectors and symmetrize dyn matrix<br />eivec 1<br /><br />#Wavevector list number 1 (Reduced coordinates and normalization factor)<br />nph1l 21<br />qph1l<br />0.0     0.0     0   1<br />0.025   0.025   0   1<br />0.05    0.05    0   1<br />0.075   0.075   0   1<br />0.1     0.1     0   1<br />0.125   0.125   0   1<br />0.15    0.15    0   1<br />0.175   0.175   0   1<br />0.2     0.2     0   1<br />0.225   0.225   0   1<br />0.25    0.25    0   1<br />0.275   0.275   0   1<br />0.3     0.3     0   1<br />0.325   0.325   0   1<br />0.35    0.35    0   1<br />0.375   0.375   0   1<br />0.4     0.4     0   1<br />0.425   0.425   0   1<br />0.45    0.45    0   1<br />0.475   0.475   0   1<br />0.5     0.5     0   1<br /><br />Thank you for your help,<br />Chao Yang</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: get phonon spectrum success, but not elphon coeffiecient</h3>
				<div class="date">Posted: <strong>Thu Aug 31, 2017 12:28 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hello Chao,<br /><br />if you turn off elphflag, of course, it ignores the epc and goes through normal anaddb phonons.<br /><br />The code is complaining it does not find one of the elements in the GKK database you have provided. Could you check all of the GKK files are correctly included? Your input files seem alright to me. The element missing is ipert,ikpt_phon,isppol,iqptirred= 4 7 1 1, where ipert=4 means the atom 2 in direction x at iqptirred=1 (Gamma point). Could be it does not have enough symmetry to get this back. Could you try with use_nonscf_gkk 1 to see if this corrects things? It should produce many more GKK files.<br /><br />cheers</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: get phonon spectrum success, but not elphon coeffiecient</h3>
				<div class="date">Posted: <strong>Sat Sep 02, 2017 4:30 am</strong></div>
				<div class="author">by <strong>onion2440</strong></div>
				<div class="content"><blockquote><div><cite>mverstra wrote:</cite>Hello Chao,<br /><br />if you turn off elphflag, of course, it ignores the epc and goes through normal anaddb phonons.<br /><br />The code is complaining it does not find one of the elements in the GKK database you have provided. Could you check all of the GKK files are correctly included? Your input files seem alright to me. The element missing is ipert,ikpt_phon,isppol,iqptirred= 4 7 1 1, where ipert=4 means the atom 2 in direction x at iqptirred=1 (Gamma point). Could be it does not have enough symmetry to get this back. Could you try with use_nonscf_gkk 1 to see if this corrects things? It should produce many more GKK files.<br /><br />cheers</div></blockquote><br /><br />Dear Prof. Mverstra,<br />you are right, the problem is that I didn't include the GKK files completely。  <br />Very thank you for your help.<br />Best<br />Chao Yang</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3670&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:52:12 GMT -->
</html>
