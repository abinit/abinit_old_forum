<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1650&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:42:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; error while using mkmem, mkqmem flags for phonon calculation</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>error while using mkmem, mkqmem flags for phonon calculation</h2>
		<p><a href="viewtopic0fe7-2.html?f=9&amp;t=1650">https://forum.abinit.org/viewtopic.php?f=9&amp;t=1650</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>error while using mkmem, mkqmem flags for phonon calculation</h3>
				<div class="date">Posted: <strong>Thu May 03, 2012 11:06 am</strong></div>
				<div class="author">by <strong>guptasanjay.85</strong></div>
				<div class="content">Respected Sir, and Dear Abinit users,<br />Here we are facing the problem regarding the slow calculation to compute phonon dispersion.<br />for saving the core memory and fast calculation we need to apply mkmem, mkqmem, and mk1mem, but as we are including this flags in the input file code stops to calculate after finishing the ground state total energy and pressure. The input file and error coming in log file is give below.<br />Please suggest me more.<br />Input file<br />************************************************<br /># Phonon spectrum for ZrC<br /> <br />#Set 1 : ground state self-consistency<br />ndtset 52 #self-consistency<br /><br />  getwfk1  -1         # Cancel default<br />  kptopt1   1            # Automatic generation of k points, taking into account the symmetry<br />    nqpt1   0            # Cancel default<br />  tolvrs1   1.0d-20      # SCF stopping criterion (modify default)<br />  rfphon1   0            # Cancel default<br />  prtwf1    1<br />  prtden1   1<br /><br />#Q vectors for all datasets<br /><br />#Complete set of symmetry-inequivalent qpt chosen to be commensurate<br /># with kpt mesh so that only one set of GS wave functions is needed.<br />#Generated automatically by running GS calculation with kptopt=1,<br /># nshift=0, shiftk=0 0 0 (to include gamma) and taking output kpt set<br /># file as qpt set. Set nstep=1 so only one iteration runs.<br /><br />           nqpt   1            # One qpt for each dataset (only 0 or 1 allowed)<br />                         # This is the default for all datasets and must<br />                         #  be explicitly turned off for dataset 1.<br />           qpt2      0.00000000E+00  0.00000000E+00  0.00000000E+00<br />           qpt3      0.00000000E+00  0.00000000E+00  0.00000000E+00<br />           qpt4      8.33333333E-02  0.00000000E+00  0.00000000E+00<br />           qpt5      1.66666667E-01  0.00000000E+00  0.00000000E+00<br />           qpt6      2.50000000E-01  0.00000000E+00  0.00000000E+00<br />           qpt7      3.33333333E-01  0.00000000E+00  0.00000000E+00<br />           qpt8      4.16666667E-01  0.00000000E+00  0.00000000E+00<br />           qpt9     5.00000000E-01  0.00000000E+00  0.00000000E+00<br />           qpt10     8.33333333E-02  8.33333333E-02  0.00000000E+00<br />           qpt11     1.66666667E-01  8.33333333E-02  0.00000000E+00<br />           qpt12     2.50000000E-01  8.33333333E-02  0.00000000E+00<br />           qpt13     3.33333333E-01  8.33333333E-02  0.00000000E+00<br />           qpt14     4.16666667E-01  8.33333333E-02  0.00000000E+00<br />           qpt15     5.00000000E-01  8.33333333E-02  0.00000000E+00<br />           qpt16    -4.16666667E-01  8.33333333E-02  0.00000000E+00<br />           qpt17    -3.33333333E-01  8.33333333E-02  0.00000000E+00<br />           qpt18    -2.50000000E-01  8.33333333E-02  0.00000000E+00<br />           qpt19    -1.66666667E-01  8.33333333E-02  0.00000000E+00<br />           qpt20    -8.33333333E-02  8.33333333E-02  0.00000000E+00<br />           qpt21     1.66666667E-01  1.66666667E-01  0.00000000E+00<br />           qpt22     2.50000000E-01  1.66666667E-01  0.00000000E+00<br />           qpt23     3.33333333E-01  1.66666667E-01  0.00000000E+00<br />           qpt24     4.16666667E-01  1.66666667E-01  0.00000000E+00<br />           qpt25     5.00000000E-01  1.66666667E-01  0.00000000E+00<br />           qpt26    -4.16666667E-01  1.66666667E-01  0.00000000E+00<br />           qpt27    -3.33333333E-01  1.66666667E-01  0.00000000E+00<br />           qpt28    -2.50000000E-01  1.66666667E-01  0.00000000E+00<br />           qpt29    -1.66666667E-01  1.66666667E-01  0.00000000E+00<br />           qpt30     2.50000000E-01  2.50000000E-01  0.00000000E+00<br />           qpt31     3.33333333E-01  2.50000000E-01  0.00000000E+00<br />           qpt32     4.16666667E-01  2.50000000E-01  0.00000000E+00<br />           qpt33     5.00000000E-01  2.50000000E-01  0.00000000E+00<br />           qpt34    -4.16666667E-01  2.50000000E-01  0.00000000E+00<br />           qpt35    -3.33333333E-01  2.50000000E-01  0.00000000E+00<br />           qpt36    -2.50000000E-01  2.50000000E-01  0.00000000E+00<br />           qpt37     3.33333333E-01  3.33333333E-01  0.00000000E+00<br />           qpt38     4.16666667E-01  3.33333333E-01  0.00000000E+00<br />           qpt39     5.00000000E-01  3.33333333E-01  0.00000000E+00<br />           qpt40    -4.16666667E-01  3.33333333E-01  0.00000000E+00<br />           qpt41    -3.33333333E-01  3.33333333E-01  0.00000000E+00<br />           qpt42     4.16666667E-01  4.16666667E-01  0.00000000E+00<br />           qpt43     5.00000000E-01  4.16666667E-01  0.00000000E+00<br />           qpt44    -4.16666667E-01  4.16666667E-01  0.00000000E+00<br />           qpt45     5.00000000E-01  5.00000000E-01  0.00000000E+00<br />           qpt46     2.50000000E-01  1.66666667E-01  8.33333333E-02<br />           qpt47     3.33333333E-01  1.66666667E-01  8.33333333E-02<br />           qpt48     4.16666667E-01  1.66666667E-01  8.33333333E-02<br />           qpt49     5.00000000E-01  1.66666667E-01  8.33333333E-02<br />           qpt50    -4.16666667E-01  1.66666667E-01  8.33333333E-02<br />           qpt51     3.33333333E-01  2.50000000E-01  8.33333333E-02<br />           qpt52     4.16666667E-01  2.50000000E-01  8.33333333E-02<br /><br />  <br />#   nction calculation of d/dk wave function <br /><br />    iscf2  -3          # Need this non-self-consistent option for d/dk<br />  kptopt2   2          # Modify default to use time-reversal symmetry<br />  rfphon2   0          # Cancel default<br />  rfelfd2   2          # Calculate d/dk wave function only<br />#  tolvrs2   0.0       # Cancel default for d/dk<br />  tolwfr2   1.0d-18    # Use wave function residual criterion instead<br />  prtwf2   2<br />  prtden2  2<br /><br />#Set 3 : Response function calculation of Q=0 phonons and electric field pert.<br /><br />  getddk3   2          # d/dk wave functions from last dataset<br />  kptopt3   2          # Modify default to use time-reversal symmetry<br />  rfelfd3   3          # Electric-field perturbation response only<br /><br />#Sets 4-10 : Finite-wave-vector phonon calculations (defaults for all datasets)<br /><br />   getwfk   1          # Use GS wave functions from dataset1<br />   kptopt   3          # Need full k-point set for finite-Q response<br />   rfphon   1          # Do phonon response<br />  rfatpol   1 2        # Treat displacements of all atoms<br />    rfdir   1 1 1      # Do all directions (symmetry will be used)<br />   tolvrs   1.0d-8    # This default is active for sets 3-10<br />#######################################################################<br />#Common input variables<br />#Definition of the unit cell<br /><br />    acell   3*8.915<br />  spgroup   225<br />  angdeg    90 90 90<br />  brvltt    -1<br />#  strtarget  1.24570127E+01  1.24570127E+01  1.24570127E+01  0.00000000E+00 0.00000000E+00 0.00000000E+00<br />#   rprim   0.0  0.5  0.5  # In lessons 1 and 2, these primitive vectors <br />#           0.5  0.0  0.5 #(to be scaled by acell) were 1 0 0  0 1 0  0 0 le1 <br />#           0.5  0.5  0.0   # that is, the default.<br /><br />#Definition of the atom types<br />   ntypat   2         # There are two types of atom<br />    znucl   40 6      # The keyword &quot;znucl&quot; refers to the atomic number of the <br />                      # possible type(s) of atom. The pseudopotential(s) <br />                      # mentioned in the &quot;files&quot; file must correspond<br />                      # to the type(s) of atom. Here, type 1 is the Aluminum,<br />                      # type 2 is the Arsenic.<br /><br />#Definition of the atoms<br />    natom   2       # There are two atoms<br />    typat   1 2   # The first is of type 1 (Al), the second is of type 2 (As).<br /><br />     xred   0.0   0.0   0.0<br />            0.5   0.5   0.5<br /><br />#Gives the number of band, explicitely (do not take the default)<br />   nband    16<br />#Exchange-correlation functional<br />      ixc   9             # LDA Teter Pade parametrization<br />#Definition of the planewave basis set<br />     ecut   40.0         # Maximal kinetic energy cut-off, in Hartree<br />     nsppol 2 <br />     nspden 2<br />#Definition of the k-point grid<br />    ngkpt   12 12 12 <br />  nshiftk   4              # Use one copy of grid only (default)<br />   shiftk   0.0 0.0 0.5    # This gives the usual fcc Monkhorst-Pack grid<br />            0.0 0.5 0.0<br />            0.5 0.0 0.0<br />            0.5 0.5 0.5<br /><br />#Definition of the SCF procedure<br />     iscf   7           # Self-consistent calculation, using algorithm 5<br />    nstep   100         # Maximal number of SCF cycles<br />  diemac    1.0d60      # is described in the &quot;dielng&quot; input variable section.<br />occopt 4<br />tsmear 0.04<br /><span style="color: #FF0000">mkmem  0<br />mkqmem 0 <br />mk1mem 0</span><br />#iprcel 45<br />ntime  50<br />#nline  10<br />#nnsclo 12   # The dielectric constant of AlAs is smaller that the one of Si (=12).<br />*********************************************************************************************<br /><br />Error in log file<br />*******************************************************************************************<br />------<br />-----<br />P-0000 - newkpt: read input wf with ikpt,npw=  19    2128, make ikpt,npw=  48    2128<br />-P-0000 - newkpt: read input wf with ikpt,npw=  20    2128, make ikpt,npw=  49    2128<br />-P-0000 - newkpt: read input wf with ikpt,npw=  14    2127, make ikpt,npw=  50    2127<br />-P-0000 - newkpt : prtvol=0 or 1, do not print more k-points.<br />-P-0000<br />-P-0000  Subroutine Unknown:0:ERROR<br />-P-0000    Reading option of rwwf. Trying to read<br />-P-0000   the (npw,nspinor,nband) record of a wf file, unit=   3<br />-P-0000   gave iostat=  -1. Your file is likely not correct.<br />-P-0000   Action: check your input wf file.<br />-P-0000<br />-P-0000  leave_new : decision taken to exit ...<br /> <br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error while using mkmem, mkqmem flags for phonon calcula</h3>
				<div class="date">Posted: <strong>Sat Feb 09, 2013 11:19 pm</strong></div>
				<div class="author">by <strong>ljludwig</strong></div>
				<div class="content">Apparently I am having the same problem... OMG is it caused by mem? I thought it wouldnt change final output WF... Did you already find out why?</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1650&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:42:51 GMT -->
</html>
