<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1288&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:13:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; No convergence in big supercell calculations</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>No convergence in big supercell calculations</h2>
		<p><a href="viewtopicca71.html?f=9&amp;t=1288">https://forum.abinit.org/viewtopic.php?f=9&amp;t=1288</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>No convergence in big supercell calculations</h3>
				<div class="date">Posted: <strong>Fri Aug 26, 2011 12:51 pm</strong></div>
				<div class="author">by <strong>Ubiq</strong></div>
				<div class="content">Hi everyone,<br /><br />I have convergence problem in GS calculations of fcc  Al with 32, 64 atoms in basis. It is OK, when I set 1 or 4 atoms in basis and it takes about 10 iteration for good convergence. But when the number of atoms is increased (32, 64), there is no convergence even for nstep=300. The only difference between the inputs for small and big number of atoms is that I put some very small distortion in coordinates of atoms for the big number case to prevent symfind Error. Nevertheless, I have the same problem with liquid phase, so I think this parameter don't relate with the problem. Could you please help to solve this problem?<br /><br />My input for 32 atoms in basis:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># Crystalline aluminum<br /><br />#Definition of occupation numbers<br />nband 80<br />occopt 4<br />tsmear 0.05<br /><br />#Definition of the k-point grid<br />ngkpt&nbsp; 2 2 2<br />nshiftk 4<br />shiftk&nbsp; 0.5 0.5 0.5<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.5 0.0 0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0 0.5 0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0 0.0 0.5<br /><br /><br />#Definition of the unit cell<br />chkprim 0<br />acell 3*7.5056&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Lattice parameters of bulk aluminum<br />rprim&nbsp; 2.0&nbsp; 0.0&nbsp; 0.0&nbsp; &nbsp; # The lattice vector along the z direction<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0&nbsp; 2.0&nbsp; 0.0&nbsp; &nbsp; &nbsp;# is doubled with respect to previous run.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0&nbsp; 0.0&nbsp; 2.0&nbsp; &nbsp; &nbsp;#<br /><br />#Definition of the atom types<br />ntypat 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # There is only one type of atom<br />znucl 13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # The keyword &quot;znucl&quot; refers to the atomic number of the<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# possible type(s) of atom. The pseudopotential(s)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# mentioned in the &quot;files&quot; file must correspond<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# to the type(s) of atom. Here, the only type is Aluminum<br /><br /><br />#Definition of the atoms<br />natom 32&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #<br />typat 32*1&nbsp; &nbsp; &nbsp; &nbsp; # These atoms are of type 1, that is, Aluminum<br />xred&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # This keyword indicate that the location of the atom<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.000000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.500000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.250000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.000000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.750000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.250000000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000<br />&nbsp; &nbsp;0.750100000000000&nbsp; &nbsp;0.500000000000000&nbsp; &nbsp;0.750000000000000 #distortion<br />#The relaxation<br />#ionmov 3<br />#tolmxf 5.0d-4<br />#ntime 10<br /><br />#Exchange-correlation functional<br />ixc 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# LDA Teter Pade parametrization<br /><br />#Definition of the planewave basis set<br />ecut&nbsp; 6.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Maximal kinetic energy cut-off, in Hartree<br /><br />#Definition of the SCF procedure<br />nstep 20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Maximal number of SCF cycles<br />toldfe 1.0d-8<br /></code></pre></div>     <br />I use intel 12.0 and openmpi-1.4. <br />Thanks in advance!<br /><br />Peter</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: No convergence in big supercell calculations</h3>
				<div class="date">Posted: <strong>Fri Aug 26, 2011 6:32 pm</strong></div>
				<div class="author">by <strong>blackburn</strong></div>
				<div class="content">Hi,<br /><br />Your ecut value is very low. Your calculations will probably not be accurate. If increasing ecut to a 'reasonable' value doesn't solve your problem, you can set nline to 8 (or higher if it doesn't work).<br /><br />FYI, you can use chkprim 0 to bypass the symfind error.<br /><br />Simon</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: No convergence in big supercell calculations</h3>
				<div class="date">Posted: <strong>Mon Aug 29, 2011 3:24 pm</strong></div>
				<div class="author">by <strong>Ubiq</strong></div>
				<div class="content">Thanks  a lot for your answer Simon, but unfornutaly  after I have tried all your suggestion (increasing ecut and nline), the result remains the same. For the same input parameters the system with small basis converges very well and on the contrary there is no convergence for systems with big basis. I will be highly appreciated for further suggestions. This problem embarrasses me very much.  <br /><br />By the way, chkprim can't help avoid symfind error, maybe I haven't used that option in a proper way?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: No convergence in big supercell calculations</h3>
				<div class="date">Posted: <strong>Thu Sep 01, 2011 7:51 pm</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content">Hi<br /><br />Check if you have enough bands to accomodate all electrons (though I think 80 is way enough). Also try with a slightly larger kpoint mesh. Sometimes if the kpoint mesh is not fine enough, the convergence is harder, especially for metals.<br /><br />You can also try to first optimize atomic positions only and leave the cell volume constant.<br /><br />Finally you can try with a different value of occopt. Try a smearing of Methfessel and Paxton (occopt=6) and see if that changes anything<br /><br />Good luck<br /><br />Boris</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1288&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:13:25 GMT -->
</html>
