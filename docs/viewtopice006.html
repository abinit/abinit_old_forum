<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?t=4057 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:32:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Compiling with MPI and Intel 19.0 - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopice006.html?t=4057">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic23a5.html?f=3&amp;t=4057">Compiling with MPI and Intel 19.0</a>&nbsp;
<a href="viewtopic6423.html?f=3&amp;t=4057&amp;p=12685#p12685" style="color: #006600;">
	[SOLVED]
</a>
</h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="postingd95a.html?mode=reply&amp;f=3&amp;t=4057" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic0830-2.html?f=3&amp;t=4057&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="4057" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			16 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p12185" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12185">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12185">

						<h3 class="first"><a href="#p12185">Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6d5f.html?mode=quote&amp;f=3&amp;p=12185" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic112b.html?p=12185#p12185" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Sun Mar 03, 2019 11:13 pm
			</p>
			
			
			
			<div class="content">Hello,<br /><br />I'm having trouble running the abinit (8.10.2) executable after compiling with the Intel 19.0 compilers and with MPI enabled (64 bit intel).<br /><br />If I compile with either the gnu tools (gcc, gfortran 7.3.0) or the Intel tools (icc, ifort), and without MPI enabled, make check shows all fast tests succeed.<br /><br />If I compile with the gnu tools (gcc, gfortran) and MPI enabled, make check runs abinit without mpirun and all fast tests succeed.<br /><br />If I compile with the Intel tools (mpiicc, mpiifort) and MPI enabled, make check still runs abinit without mpirun and all fast tests fail with the following error:<br /><br />forrtl: severe (24): end-of-file during read, unit 5, file /proc/19230/fd/0<br />Image              PC                Routine            Line        Source             <br />libifcoremt.so.5   000014A9FFCA97B6  for__io_return        Unknown  Unknown<br />libifcoremt.so.5   000014A9FFCE7C00  for_read_seq_fmt      Unknown  Unknown<br />abinit             00000000015B9312  Unknown               Unknown  Unknown<br />abinit             0000000000409DEF  Unknown               Unknown  Unknown<br />abinit             0000000000409B22  Unknown               Unknown  Unknown<br />libc-2.27.so       000014A9FD6E1B97  __libc_start_main     Unknown  Unknown<br />abinit             0000000000409A0A  Unknown               Unknown  Unknown<br /><br />If I compile with the Intel tools and MPI enabled and run &quot;runtests.py fast --force-mpirun&quot;, then abinit is run with &quot;mpirun -np 1&quot; and all tests succeed.<br /><br />My understanding is that executables compiled with mpiifort must be run with mpirun even if np=1.<br /><br />It seems that runtests.py tries to run serial tests without mpirun. This seems to work when abinit is compiled with the gnu tools, but not when compiled with the intel tools.<br /><br />Is this a known difference in behavior for mpi executables compiled with the gnu tools vs the intel tools? If so, why doesn't runtests.py use mpirun for the intel compiled executable even for serial tests. Or am I doing something wrong?<br /><br />Also, when compiling with Intel and MPI, setting with_mpi_incs and with_mpi_libs has no effect. They are not used in the compilation. I assume this is because mpiifort is a wrapper that is supplying these. Is that correct?<br /><br />I am using Intel Parallel Studio XE and source psxevars.sh to set the environment before compiling/running with intel.<br /><br />Thanks for any suggestions.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12194" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12194">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content12194">

						<h3 ><a href="#p12194">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting87ca.html?mode=quote&amp;f=3&amp;p=12194" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic180e.html?p=12194#p12194" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Thu Mar 07, 2019 5:24 pm
			</p>
			
			
			
			<div class="content">Dear Frodo,<br />You can type &quot;./runtests.py -h&quot; to see all the available options.<br />For the parallel tests, you have the option runtests.py paral -n XX with XX the number of CPU on which you want to run the mpi. See the other options to force some executable, etc.<br />Best wishes,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12195" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12195">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12195">

						<h3 ><a href="#p12195">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting87ba.html?mode=quote&amp;f=3&amp;p=12195" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicd50c.html?p=12195#p12195" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Thu Mar 07, 2019 7:52 pm
			</p>
			
			
			
			<div class="content">Hi Eric,<br /><br />Thank you for the reply.<br /><br />Yes, I know about runtests.py and use it all the time.<br /><br />My question was why running &quot;make check&quot; fails with the indicated error when abinit is compiled with Intel 19.0 (mpiifort), where &quot;make check&quot; does not fail when abinit is compiled with gnu (mpif90). In both cases, &quot;make check&quot; invokes runtests.py to run abinit directly, i.e., without mpirun. This works for the gnu compiled version but fails with the error I indicated for the Intel compiled version.<br /><br />Let me try to make what I am saying more clear:<br /><br /><strong class="text-strong">Compiling with GNU:</strong><br /><br />I compile abinit with the following config.ac:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_debug=&quot;no&quot;<br />enable_avx_safe_mode=&quot;no&quot;<br />prefix=&quot;/usr/local/abinit&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_inplace=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />enable_gpu=&quot;no&quot;</code></pre></div><br /><br />Configure automatically sets CC=mpicc and FC=mpif90.<br /><br />I run &quot;abinit &lt; test.stdin &gt; test.sdtout 2&gt; test.stderr&quot;. This executes normally.<br /><br /><strong class="text-strong">Compiling with Intel 19.0:</strong><br /><br />I compile abinit with the following config.ac:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_debug=&quot;no&quot;<br />enable_avx_safe_mode=&quot;no&quot;<br />prefix=&quot;/usr/local/abinit&quot;<br />CC=&quot;mpiicc&quot;<br />CXX=&quot;mpiicpc&quot;<br />FC=&quot;mpiifort&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_inplace=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />enable_gpu=&quot;no&quot;</code></pre></div><br /><br />I run &quot;abinit &lt; test.stdin &gt; test.stdout 2&gt; test.stderr&quot;. This fails with the following error:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>forrtl: severe (24): end-of-file during read, unit 5, file /proc/19230/fd/0<br />Image PC Routine Line Source<br />libifcoremt.so.5 000014A9FFCA97B6 for__io_return Unknown Unknown<br />libifcoremt.so.5 000014A9FFCE7C00 for_read_seq_fmt Unknown Unknown<br />abinit 00000000015B9312 Unknown Unknown Unknown<br />abinit 0000000000409DEF Unknown Unknown Unknown<br />abinit 0000000000409B22 Unknown Unknown Unknown<br />libc-2.27.so 000014A9FD6E1B97 __libc_start_main Unknown Unknown<br />abinit 0000000000409A0A Unknown Unknown Unknown<br /></code></pre></div><br /><br />However, if I run &quot;mpirun -np 1 abinit &lt; test.stdin &gt; test.stdout 2&gt; test.stderr&quot;, it execute normally.<br /><br />In other words, the intel compiled version has to be executed with mpirun, even when np=1. But the gnu compiled version can be executed directly, without mpirun.<br /><br />I know I can force runtests.py to use mpirun to invoke abinit (--force-mpirun) but why do I have to do this even for np=1 when I am testing an intel compiled executabe but I do not have to do this (i.e., don't have to use --force-mpirun) for a gnu compiled executable?<br /><br />What is the reason for this difference in behavior?</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12196" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12196">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content12196">

						<h3 ><a href="#p12196">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting8d8a.html?mode=quote&amp;f=3&amp;p=12196" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic73ee.html?p=12196#p12196" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Fri Mar 08, 2019 11:07 am
			</p>
			
			
			
			<div class="content">Hi,<br /><br />quickly: I don't reproduce the behavior you observe  <img class="smilies" src="images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /> <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;root@yquem fast_t01&#93;# mpiifort -V<br />Intel(R) Fortran Intel(R) 64 Compiler for applications running on Intel(R) 64, Version 17.0.4.196 Build 20170411<br />Copyright (C) 1985-2017 Intel Corporation.&nbsp; All rights reserved.<br />FOR NON-COMMERCIAL USE ONLY</code></pre></div><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../src/98_main/abinit &lt; t01.stdin &gt; OUT<br /><br />tail t01.out<br />- Comment : the original paper describing the ABINIT project.<br />- DOI and bibtex : see https://docs.abinit.org/theory/bibliography/#gonze2002<br />-<br />- Proc.&nbsp; &nbsp;0 individual time (sec): cpu=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1&nbsp; wall=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1<br /><br />================================================================================<br /><br />&nbsp;Calculation completed.<br />.Delivered&nbsp; &nbsp;6 WARNINGs and&nbsp; 10 COMMENTs to log file.<br />+Overall time at end (sec) : cpu=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1&nbsp; wall=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1</code></pre></div><br /><br /><br />my .ac file :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CC=&quot;mpiicc&quot;<br />CXX=&quot;mpiicpc&quot;<br />FC=&quot;mpiifort&quot;<br />FCFLAGS_EXTRA=&quot;-g -O3 -align all&quot;<br /><br />enable_mpi=&quot;yes&quot;<br />enable_mpi_inplace=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_trio_flavor=none<br />with_dft_flavor=none<br /><br />#I_MPI_ROOT=/opt/intel/compilers_and_libraries_2017.4.196/linux/mpi/<br />with_mpi_incs=&quot;-I${I_MPI_ROOT}/include64&quot;<br />with_mpi_libs=&quot;-L${I_MPI_ROOT}/lib64 -lmpi&quot;<br /><br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_fft_incs=&quot;-I${MKLROOT}/include&quot;<br />with_fft_libs=&quot;-L${MKLROOT}/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_incs=&quot;-I${MKLROOT}/include&quot;<br />with_linalg_libs=&quot;-L${MKLROOT}/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl&quot;</code></pre></div><br /><br />jmb</div>
			
			
			
									
									<div id="sig12196" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12205" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12205">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12205">

						<h3 ><a href="#p12205">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting20ca.html?mode=quote&amp;f=3&amp;p=12205" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc7fa.html?p=12205#p12205" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Sun Mar 10, 2019 7:02 pm
			</p>
			
			
			
			<div class="content">Hi,<br /><br />Thanks for the reply.<br /><br />My mpiifort:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpiifort -V<br />Intel(R) Fortran Intel(R) 64 Compiler for applications running on Intel(R) 64, Version 19.0.1.144 Build 20181018<br />Copyright (C) 1985-2018 Intel Corporation.&nbsp; All rights reserved.</code></pre></div><br /><br /><br />I recompiled using exactly your config.ac <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CC=&quot;mpiicc&quot;<br />CXX=&quot;mpiicpc&quot;<br />FC=&quot;mpiifort&quot;<br />FCFLAGS_EXTRA=&quot;-g -O3 -align all&quot;<br /><br />enable_mpi=&quot;yes&quot;<br />enable_mpi_inplace=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_trio_flavor=none<br />with_dft_flavor=none<br /><br />#I_MPI_ROOT=/opt/intel/compilers_and_libraries_2017.4.196/linux/mpi/<br />with_mpi_incs=&quot;-I${I_MPI_ROOT}/include64&quot;<br />with_mpi_libs=&quot;-L${I_MPI_ROOT}/lib64 -lmpi&quot;<br /><br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_fft_incs=&quot;-I${MKLROOT}/include&quot;<br />with_fft_libs=&quot;-L${MKLROOT}/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_incs=&quot;-I${MKLROOT}/include&quot;<br />with_linalg_libs=&quot;-L${MKLROOT}/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl&quot;<br /></code></pre></div><br /><br />A comment on this is that apparently Intel 19 changed the library structure for MPI. MPI Libs are in $[I_MPI_ROOT]/intel64/lib, not ${I_MPI_ROOT}lib64. Also, the mpi library is now in a subdirectory of this: ${I_MPI_ROOT}/intel64/lib/release. See: <a href="https://github.com/spack/spack/issues/9913" class="postlink">https://github.com/spack/spack/issues/9913</a><br /><br />Also, with_mpi_incs and with_mpi_libs are not used. Here is the actual compilation line emitted by make:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpiifort -DHAVE_CONFIG_H -I. -I../../../src/98_main -I../..&nbsp; -I../../src/incs -I../../../src/incs -I/home/dierker/abinit-8.10.2/build/fallbacks/exports/include&nbsp; -I/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/include -I/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/include&nbsp; &nbsp;-free -module /home/dierker/abinit-8.10.2/build/src/mods&nbsp; &nbsp;-O3 -g -extend-source -noaltparam -nofpscomp -g -O3 -align all&nbsp; &nbsp;-g -extend-source -noaltparam -nofpscomp -g -O3 -align all&nbsp; -c -o abinit-abinit.o `test -f 'abinit.F90' || echo '../../../src/98_main/'`abinit.F90<br />mpiifort -free -module /home/dierker/abinit-8.10.2/build/src/mods&nbsp; &nbsp;-O3 -g -extend-source -noaltparam -nofpscomp -g -O3 -align all&nbsp; &nbsp;-g -extend-source -noaltparam -nofpscomp -g -O3 -align all&nbsp; -static-intel -static-libgcc&nbsp; -static-intel -static-libgcc&nbsp; -o abinit abinit-abinit.o -static-intel -static-libgcc&nbsp; ../../src/95_drive/lib95_drive.a ../../src/94_scfcv/lib94_scfcv.a ../../src/79_seqpar_mpi/lib79_seqpar_mpi.a ../../src/78_effpot/lib78_effpot.a ../../src/78_eph/lib78_eph.a ../../src/77_ddb/lib77_ddb.a ../../src/77_suscep/lib77_suscep.a ../../src/72_response/lib72_response.a ../../src/71_bse/lib71_bse.a ../../src/71_wannier/lib71_wannier.a ../../src/70_gw/lib70_gw.a ../../src/69_wfdesc/lib69_wfdesc.a ../../src/68_dmft/lib68_dmft.a&nbsp; ../../src/68_recursion/lib68_recursion.a ../../src/68_rsprc/lib68_rsprc.a&nbsp; ../../src/67_common/lib67_common.a ../../src/66_vdwxc/lib66_vdwxc.a ../../src/66_wfs/lib66_wfs.a ../../src/66_nonlocal/lib66_nonlocal.a ../../src/65_paw/lib65_paw.a&nbsp; ../../src/64_psp/lib64_psp.a ../../src/62_iowfdenpot/lib62_iowfdenpot.a ../../src/62_wvl_wfs/lib62_wvl_wfs.a ../../src/62_poisson/lib62_poisson.a ../../src/62_cg_noabirule/lib62_cg_noabirule.a ../../src/62_ctqmc/lib62_ctqmc.a ../../src/61_occeig/lib61_occeig.a ../../src/59_ionetcdf/lib59_ionetcdf.a ../../src/57_iovars/lib57_iovars.a ../../src/57_iopsp_parser/lib57_iopsp_parser.a ../../src/56_recipspace/lib56_recipspace.a ../../src/56_xc/lib56_xc.a ../../src/56_mixing/lib56_mixing.a ../../src/56_io_mpi/lib56_io_mpi.a ../../src/55_abiutil/lib55_abiutil.a ../../src/54_spacepar/lib54_spacepar.a ../../src/53_ffts/lib53_ffts.a&nbsp; ../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a ../../src/51_manage_mpi/lib51_manage_mpi.a ../../src/49_gw_toolbox_oop/lib49_gw_toolbox_oop.a ../../src/46_diago/lib46_diago.a ../../src/45_xgTools/lib45_xgTools.a ../../src/45_geomoptim/lib45_geomoptim.a ../../src/44_abitypes_defs/lib44_abitypes_defs.a ../../src/44_abitools/lib44_abitools.a ../../src/43_wvl_wrappers/lib43_wvl_wrappers.a ../../src/43_ptgroups/lib43_ptgroups.a ../../src/42_parser/lib42_parser.a ../../src/42_nlstrain/lib42_nlstrain.a ../../src/42_libpaw/lib42_libpaw.a ../../src/41_xc_lowlevel/lib41_xc_lowlevel.a ../../src/41_geometry/lib41_geometry.a ../../src/32_util/lib32_util.a ../../src/29_kpoints/lib29_kpoints.a ../../src/28_numeric_noabirule/lib28_numeric_noabirule.a ../../src/27_toolbox_oop/lib27_toolbox_oop.a ../../src/21_hashfuncs/lib21_hashfuncs.a ../../src/18_timing/lib18_timing.a ../../src/17_libtetra_ext/lib17_libtetra_ext.a ../../src/16_hideleave/lib16_hideleave.a&nbsp; ../../src/14_hidewrite/lib14_hidewrite.a ../../src/12_hide_mpi/lib12_hide_mpi.a ../../src/11_memory_mpi/lib11_memory_mpi.a ../../src/10_dumpinfo/lib10_dumpinfo.a ../../src/10_defs/lib10_defs.a ../../src/02_clib/lib02_clib.a&nbsp; -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl -lrt -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/lib/release -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/lib -L/opt/intel/clck/2019.0/lib/intel64 -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib -L/opt/intel/compilers_and_libraries_2019.1.144/linux/ipp/lib/intel64 -L/opt/intel/compilers_and_libraries_2019.1.144/linux/compiler/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/tbb/lib/intel64/gcc4.7 -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/../tbb/lib/intel64_lin/gcc4.4 -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib/../lib/ -L/usr/lib/gcc/x86_64-linux-gnu/7/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../../lib/ -L/lib/x86_64-linux-gnu/ -L/lib/../lib64 -L/lib/../lib/ -L/usr/lib/x86_64-linux-gnu/ -L/usr/lib/../lib/ -L/opt/intel/clck/2019.0/lib/intel64/ -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/ipp/lib/intel64/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/compiler/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/tbb/lib/intel64/gcc4.7/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/../tbb/lib/intel64_lin/gcc4.4/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../ -L/lib64 -L/lib/ -L/usr/lib -L/usr/lib/i386-linux-gnu -lmpifort -lmpi -ldl -lrt -lpthread -lifport -lifcoremt -limf -lsvml -lm -lipgo -lirc -lirc_s -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/lib/release -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/lib -L/opt/intel/clck/2019.0/lib/intel64 -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib -L/opt/intel/compilers_and_libraries_2019.1.144/linux/ipp/lib/intel64 -L/opt/intel/compilers_and_libraries_2019.1.144/linux/compiler/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/tbb/lib/intel64/gcc4.7 -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/lib/intel64_lin -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/../tbb/lib/intel64_lin/gcc4.4 -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib/../lib/ -L/usr/lib/gcc/x86_64-linux-gnu/7/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../../lib/ -L/lib/x86_64-linux-gnu/ -L/lib/../lib64 -L/lib/../lib/ -L/usr/lib/x86_64-linux-gnu/ -L/usr/lib/../lib/ -L/opt/intel/clck/2019.0/lib/intel64/ -L/opt/intel//compilers_and_libraries_2019.1.144/linux/mpi/intel64/libfabric/lib/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/ipp/lib/intel64/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/compiler/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/mkl/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/tbb/lib/intel64/gcc4.7/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/lib/intel64_lin/ -L/opt/intel/compilers_and_libraries_2019.1.144/linux/daal/../tbb/lib/intel64_lin/gcc4.4/ -L/usr/lib/gcc/x86_64-linux-gnu/7/../../../ -L/lib64 -L/lib/ -L/usr/lib -L/usr/lib/i386-linux-gnu -lmpifort -lmpi -ldl -lrt -lpthread -lifport -lifcoremt -limf -lsvml -lm -lipgo -lirc -lirc_s </code></pre></div><br /><br />It appears that the mpiifort wrapper has set the libraries to link against and the with_mpi_libs specified in the config.ac file has been ignored.<br /><br />Here is what I get when I run abinit directly:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../src/98_main/abinit &lt; t01.stdin &gt; OUT<br />forrtl: severe (24): end-of-file during read, unit 5, file /proc/33337/fd/0<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />libifcoremt.so.5&nbsp; &nbsp;00007F49529B97B6&nbsp; for__io_return&nbsp; &nbsp; &nbsp; &nbsp; Unknown&nbsp; Unknown<br />libifcoremt.so.5&nbsp; &nbsp;00007F49529F7C00&nbsp; for_read_seq_fmt&nbsp; &nbsp; &nbsp; Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;00000000018A6119&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0000000000407C49&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0000000000407942&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc-2.27.so&nbsp; &nbsp; &nbsp; &nbsp;00007F49503F1B97&nbsp; __libc_start_main&nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;000000000040782A&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br /><br />tail -25 OUT<br />&nbsp; ABINIT 8.10.2<br />&nbsp; <br />&nbsp; Give name for formatted input file: <br /></code></pre></div><br /><br />Here is what I get when I run abinit via mpirun:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpirun -np 1 ../../../src/98_main/abinit &lt; t01.stdin &gt; OUT<br /><br />tail -25 OUT<br />- Computational Materials Science 25, 478-492 (2002). http://dx.doi.org/10.1016/S0927-0256(02)00325-7<br />- Comment : the original paper describing the ABINIT project.<br />- DOI and bibtex : see https://docs.abinit.org/theory/bibliography/#gonze2002<br />&nbsp;Proc.&nbsp; &nbsp;0 individual time (sec): cpu=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1&nbsp; wall=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1<br />&nbsp;<br />&nbsp;Calculation completed.<br />.Delivered&nbsp; &nbsp;6 WARNINGs and&nbsp; &nbsp;8 COMMENTs to log file.<br /><br />--- !FinalSummary<br />program: abinit<br />version: 8.10.2<br />start_datetime: Sun Mar 10 09:32:31 2019<br />end_datetime: Sun Mar 10 09:32:31 2019<br />overall_cpu_time:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.1<br />overall_wall_time:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.1<br />exit_requested_by_user: no <br />timelimit: 0<br />pseudos: <br />&nbsp; &nbsp; H&nbsp; &nbsp;: eb3a1fb3ac49f520fd87c87e3deb9929<br />usepaw: 0<br />mpi_procs: 1<br />omp_threads: 1<br />num_warnings: 6<br />num_comments: 8<br />...<br /></code></pre></div><br /><br />So maybe this is a difference between Intel 19 and Intel 17? Unfortunately, I don't have Intel 17 installed on my system to test that.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12206" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12206">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12206">

						<h3 ><a href="#p12206">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingeff1.html?mode=quote&amp;f=3&amp;p=12206" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6718.html?p=12206#p12206" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Sun Mar 10, 2019 8:04 pm
			</p>
			
			
			
			<div class="content">I added -traceback to FC_FLAGS_EXTRA and now get the file and linenumber where abinit is failing:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../src/98_main/abinit &lt; t01.stdin &gt; OUT-traceback<br />forrtl: severe (24): end-of-file during read, unit 5, file /proc/26824/fd/0<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />libifcoremt.so.5&nbsp; &nbsp;00007F0847FAC7B6&nbsp; for__io_return&nbsp; &nbsp; &nbsp; &nbsp; Unknown&nbsp; Unknown<br />libifcoremt.so.5&nbsp; &nbsp;00007F0847FEAC00&nbsp; for_read_seq_fmt&nbsp; &nbsp; &nbsp; Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;000000000187BC1F&nbsp; m_dtfil_mp_iofn1_&nbsp; &nbsp; &nbsp; &nbsp; 1363&nbsp; m_dtfil.F90<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0000000000407C49&nbsp; MAIN__&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 251&nbsp; abinit.F90<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0000000000407942&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc-2.27.so&nbsp; &nbsp; &nbsp; &nbsp;00007F08459E4B97&nbsp; __libc_start_main&nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;000000000040782A&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown</code></pre></div><br /><br />Line 1363 in m_dtfil.F90 is just a straightforward read (the preceeding write succeeds, as you can see in the OUT file I posted)<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>!&nbsp; Read name of input file (std_in):<br />&nbsp; &nbsp;write(std_out,*,err=10,iomsg=errmsg)' Give name for formatted input file: '<br />&nbsp; &nbsp;read(std_in, '(a)',err=10,iomsg=errmsg ) filnam(1)<br /></code></pre></div></div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12207" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12207">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12207">

						<h3 ><a href="#p12207">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postinge75b.html?mode=quote&amp;f=3&amp;p=12207" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic060e.html?p=12207#p12207" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Mon Mar 11, 2019 4:51 am
			</p>
			
			
			
			<div class="content">I tried upgrading to from Intel Parallel Studio XE Cluster Edition 2019 Update 1 to Intel Parallel Studio XE Cluster Edition 2019 Update 3.<br /><br />Now:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpiifort -V<br />Intel(R) Fortran Intel(R) 64 Compiler for applications running on Intel(R) 64, Version 19.0.3.199 Build 20190206<br />Copyright (C) 1985-2019 Intel Corporation.&nbsp; All rights reserved.</code></pre></div><br /><br />I also tried compiling with enable_mpi_io=&quot;no&quot;.<br /><br />Neither change made any difference. I still get forrtl severe (24) unless I run abinit with mpirun.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12209" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12209">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content12209">

						<h3 ><a href="#p12209">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting016d.html?mode=quote&amp;f=3&amp;p=12209" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic237b.html?p=12209#p12209" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Wed Mar 13, 2019 11:51 am
			</p>
			
			
			
			<div class="content">Hi Frodo,<br />So, unless somebody else can comment on that, it sounds like we don't really know what's wrong here, but since it works by calling mpirun -np 1, in the meantime just run it like that (it'll probably the same for all other exec, e.g. anaddb, etc)... Otherwise recompile another exec in sequential...<br />Best wishes,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12323" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12323">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12323">

						<h3 ><a href="#p12323">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting099b.html?mode=quote&amp;f=3&amp;p=12323" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic48b7.html?p=12323#p12323" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Wed May 01, 2019 10:13 pm
			</p>
			
			
			
			<div class="content">I discovered that there are a couple of comments on the Intel Developer Forum from others who noticed similar behavior.<br /><br />Starting with Intel 19, you need to execute a program with mpirun (even for np=1) if it reads or writes stdin AFTER calling MPI_Init, otherwise the program will fail, as I noted earlier. If you do i/o to stdin BEFORE calling MPI_Init, the program succeeds.<br /><br />For example:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>program test_mpi_1<br />read(5,*)n<br />write(6,*)n<br />call MPI_Init(ierr)<br />call MPI_Finalize(ierr)<br />end program test_mpi_1</code></pre></div><br />can be successfully run as &quot;test_mpi_1 1&quot;<br /><br />However,<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>program test_mpi_2<br />call MPI_Init(ierr)<br />read(5,*)n<br />write(6,*)n<br />call MPI_Finalize(ierr)<br />end program test_mpi_2</code></pre></div><br />fails if you try to run &quot;test_mpi_2 1&quot; but succeeds if you run &quot;mpirun -n 1 test_mpi_2 1&quot;.<br /><br />Abinit calls xmpi_init (a wrapper for MPI_Init) before doing i/o to stdin, so if it is compiled with Intel 19, it can't be run without mpirun. This breaks &quot;make check&quot; and requires that all tests be run with &quot;runtests.py --force-mpirun&quot;.<br /><br />I installed Intel Parallel Studio XE 2018 and recompiled abinit (with mpi enabled) and verified that it CAN be run directly (without mpirun) and does not fail when doing i/o to stdin.<br /><br />In summary, Intel 19 works fine with abinit but requires that you always use mpirun.<br /><br />Another smaller point relates to the fortran compiler flag to enable openmp code. Before 19, either fopenmp or qopenmp were accepted. As of Intel 19, only qopenmp is accepted and fopenmp is no longer recognized.<br /><br />These changes in behavior should be taken into account in future releases of abinit.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12379" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12379">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content12379">

						<h3 ><a href="#p12379">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcecb.html?mode=quote&amp;f=3&amp;p=12379" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0838.html?p=12379#p12379" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Thu Jun 06, 2019 10:03 am
			</p>
			
			
			
			<div class="content">Dear Frodo,<br />Thanks for your reply and reporting the details regarding this problem, this will help future users and developers.<br />Best wishes,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12381" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12381">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12381">

						<h3 ><a href="#p12381">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0397.html?mode=quote&amp;f=3&amp;p=12381" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6ef6.html?p=12381#p12381" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Thu Jun 06, 2019 5:30 pm
			</p>
			
			
			
			<div class="content">In addition to making the &quot;make check&quot; tests fail, this problem also makes abipy scripts that invoke abinit or anaddb fail since they expect to be able to invoke abinit or anaddb without using mpirun. Using &quot;runtests.py --force-mpirun&quot; is a simple work around for not being able to use &quot;make check&quot;. However, I couldn't see any built-in way to make the abipy scripts work.<br /><br />This was a big issue since it prevents use of the excellent abipy library. So I came up with the following simple shell script as a workaround until a future abinit release that addresses this issue is available.<br /><br />I renamed the abinit executable to &quot;abinit-mpi&quot; and created the following shell script named &quot;abinit&quot;:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#!/bin/bash<br />PARENT=`ps --no-heading -o %c -p $PPID`<br />parentstr=${PARENT:0:4}<br />if &#91; ${parentstr} = &quot;hydr&quot; &#93;<br />then<br />&nbsp; &nbsp;abinit-mpi &quot;$@&quot;<br />else<br />&nbsp; &nbsp;mpirun -n 1 abinit-mpi &quot;$@&quot;<br />fi</code></pre></div><br /><br />With intel19, invoking abinit via &quot;mpirun -n m abinit ...arguments...&quot; passes the &quot;abinit&quot; command to a &quot;hydra_pmi_proxy&quot; script, which invokes it. The bash script above checks for this, and passes &quot;abinit-mpi&quot; to the hydra_pmi_proxy script along with any command line arguments (...arguments...). On the other hand, if abinit is invoked directly via &quot;abinit ...arguments...&quot;, then the bash script invokes it with &quot;mpirun -n 1 abinit-mpi ...arguments...&quot;.<br /><br />anaddb suffers from the same issue, so I wrote a similar script for invoking it.<br /><br />With these scripts, &quot;make check&quot;, and especially the abipy library, all work normally.<br /><br />Perhaps these scripts will be useful to others who run into this problem with intel19.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12419" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12419">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12419">

						<h3 ><a href="#p12419">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd19b.html?mode=quote&amp;f=3&amp;p=12419" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic4bd0.html?p=12419#p12419" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Tue Jul 02, 2019 6:06 pm
			</p>
			
			
			
			<div class="content">Update: I received confirmation from Intel that this behavior is indeed a bug. They claim it will be fixed in one of the Intel MPI 2020 updates.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12439" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12439">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content12439">

						<h3 ><a href="#p12439">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd333.html?mode=quote&amp;f=3&amp;p=12439" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicd672.html?p=12439#p12439" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Fri Jul 12, 2019 4:37 pm
			</p>
			
			
			
			<div class="content">OK, good to know!<br />Thanks a lot,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12685" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12685">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search48de.html?author_id=2246&amp;sr=posts">13</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Feb 11, 2019 7:35 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12685">

						<h3 ><a href="#p12685">Re: Compiling with MPI and Intel 19.0&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc40f.html?mode=quote&amp;f=3&amp;p=12685" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic4547.html?p=12685#p12685" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd38b.html?mode=viewprofile&amp;u=2246" class="username">frodo</a></strong> &raquo; </span>Sat Nov 30, 2019 6:57 pm
			</p>
			
			
			
			<div class="content">Hi,<br>
<br>
Intel released 2019 Update 6 for the Intel MPI library on Nov 6. I tested it and it does indeed fix the problem I reported above.<br>
<br>
Abinit executables compiled with the Intel MPI library Update 6 can now be run without mpirun.<br>
<br>
Intel has not yet released an update for the full Parallel Studio XE Suite that includes update 6 for the MPI library component, so you currently have to install the MPI update 6 library separately. It gets installed in a parallel_studio_xe_2020 directory instead of a parallel_studio_xe_2019 directory, so I suspect the next update of the full suite will be a 2020 version instead of a 2019 update release. Until the 2020 version of the full suite is released, you can include the standalone update 6 mpi library by sourcing mpivars.sh from its directory tree after sourcing psxevars.sh from the 2019 parallel studio directory tree.<br>
<br>
Cheers</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12849" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12849">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist030a.html?mode=viewprofile&amp;u=2615" class="username">Olivier.5590</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search8b3b.html?author_id=2615&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Nov 29, 2019 5:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content12849">

						<h3 ><a href="#p12849">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd514.html?mode=quote&amp;f=3&amp;p=12849" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6fa1.html?p=12849#p12849" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist030a.html?mode=viewprofile&amp;u=2615" class="username">Olivier.5590</a></strong> &raquo; </span>Thu Feb 27, 2020 8:17 pm
			</p>
			
			
			
			<div class="content">And do we have an ETA for the 2020 version, or did I miss it? Thanks in advance!</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p12858" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile12858">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content12858">

						<h3 ><a href="#p12858">Re: Compiling with MPI and Intel 19.0</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf38b.html?mode=quote&amp;f=3&amp;p=12858" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicbe0e.html?p=12858#p12858" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Tue Mar 03, 2020 4:46 pm
			</p>
			
			
			
			<div class="content"><a href="https://wiki.abinit.org/doku.php?id=developers:planning" class="postlink">see Planning on wiki</a></div>
			
			
			
									
									<div id="sig12858" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingd95a.html?mode=reply&amp;f=3&amp;t=4057" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic0830-2.html?f=3&amp;t=4057&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=4057">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			16 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?t=4057 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:32:37 GMT -->
</html>
