<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2695&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:20:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Abinit 7.6.3 ./runtests.py problem</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Abinit 7.6.3 ./runtests.py problem</h2>
		<p><a href="viewtopic569d.html?f=3&amp;t=2695">https://forum.abinit.org/viewtopic.php?f=3&amp;t=2695</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Abinit 7.6.3 ./runtests.py problem</h3>
				<div class="date">Posted: <strong>Wed Jun 11, 2014 7:27 pm</strong></div>
				<div class="author">by <strong>sheng</strong></div>
				<div class="content">I have managed to compile Abinit 7.6.3 with gcc version 4.9.0 on a rocks cluster node. The prefix for the components' libraries (such as Atlas, netcdf etc) is a non-standard library path: /share/apps/...<br />The program can be successfully executed when called, but error arises when I wish to run ./runtests to verify my compilation:<br /><br />[sheng@comsics tests]$ ./runtests.py -j 4 fast<br />-bash: ./runtests.py: No such file or directory<br /><br />I suspect that I have not added all the needed libraries to the system library paths, any idea on how to fix this? I have already added all the paths for the softwares I choose in configure step.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 7.6.3 ./runtests.py problem</h3>
				<div class="date">Posted: <strong>Thu Jun 12, 2014 8:58 am</strong></div>
				<div class="author">by <strong>sheng</strong></div>
				<div class="content">I have noticed this is simply a directory linking and i have fix it by refering the directory in source file containing runtests.py. <br />The tests can be completed, but there is some other timeout error before the test is started.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;sheng@comsics tests&#93;$ ../../tests/runtests.py paral -n 2 -j 2<br />/home/sheng/Desktop/Program/abinit-7.6.3/tests/pymods/testsuite.py:802: UserWarning: Cannot find path of bin_name timeout, neither in the build directory nor in PATH &#91;'/share/apps/fftw/3.3.4/bin', '/share/apps/netcdf/4.3.2/bin', '/share/apps/abinit/7.6.3gcc/bin', '/share/apps/gcc/4.9.0/bin', '/share/apps/openmpi/1.8.1/gcc4.9.0/bin', '/opt/gridengine/bin/lx26-amd64', '/usr/kerberos/bin', '/usr/java/latest/bin', '/share/apps/gcc/4.9.0/bin', '/share/apps/openmpi/1.8.1/gcc4.9.0/bin', '/usr/local/bin', '/bin', '/usr/bin', '/opt/ganglia/bin', '/opt/ganglia/sbin', '/opt/openmpi/bin/', '/opt/rocks/bin', '/opt/rocks/sbin', '/home/sheng/.sage/bin', '/opt/sun-ct/bin', '/home/sheng/bin'&#93;<br />&nbsp; warn(err_msg)<br />/home/sheng/Desktop/Program/abinit-7.6.3/tests/pymods/testsuite.py:762: UserWarning: Cannot find timeout executable!<br />&nbsp; warn(&quot;Cannot find timeout executable!&quot;)<br />../../tests/runtests.py:213: UserWarning: Cannot find timeout executable at: <br />&nbsp; warn(&quot;Cannot find timeout executable at: %s&quot; % build_env.path_of_bin(&quot;timeout&quot;))<br />Test_suite directory already exists! Old files will be removed<br />Running ntests = 93, MPI_nprocs = 2, py_nthreads = 2...<br />&#91;paral&#93;&#91;t01_MPI1&#93;: Skipped<br />...(more)<br /></code></pre></div><br /><br />Is this error significant?<br /><br />Another problem is that when I run sequential tests as described in <a href="viewtopicc17f.html?f=2&amp;t=2639" class="postlink">http://forum.abinit.org/viewtopic.php?f=2&amp;t=2639</a>, the run_etime is about 2000, which is significantly larger than the value in the link above (44 only). However the run time for the parallel test is comparable to value in the link (718.25 to 815.67).<br /><br />Thank you.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 7.6.3 ./runtests.py problem</h3>
				<div class="date">Posted: <strong>Thu Jun 12, 2014 9:50 am</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Running the test suite with the &quot;-t 0&quot; option will remove the warning. The timeout utility allows for the interruption of a test if it lasts too long. It is thus not an issue if you don't have it compiled.<br /><br />Regarding the execution times of the tests, you will experience large differences depending on the architecture/OS/compiler/build flags/parallel environment you have. You may use them to check your build parameters.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 7.6.3 ./runtests.py problem</h3>
				<div class="date">Posted: <strong>Thu Jun 12, 2014 4:43 pm</strong></div>
				<div class="author">by <strong>sheng</strong></div>
				<div class="content">Thank you for your reply, but the same error still persists even after I have appended the &quot;-t 0&quot; flag.<br /><br />Regarding the computation time, I think it is weird for my calculation time to differ so much to the link <a href="viewtopicc17f.html?f=2&amp;t=2639" class="postlink">http://forum.abinit.org/viewtopic.php?f=2&amp;t=2639</a> (my time = 2000+, link = 44).<br />I have compiled with almost same configuration as the recipe in the link suggests.<br />The libraries are updated to the newest version supported by abinit. My gcc version is 4.9.0 and openmpi version is  1.8.1, which is both updated versions. However my Pyhton version is the old 2.4.3.<br /><br />I am building abinit on a Rocks cluster and plan to run parallel using mpi and openmp.<br /><br />Attached is my processor info:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>processor&nbsp; &nbsp; &nbsp; &nbsp;: 0<br />vendor_id&nbsp; &nbsp; &nbsp; &nbsp;: GenuineIntel<br />cpu family&nbsp; &nbsp; &nbsp; : 6<br />model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 30<br />model name&nbsp; &nbsp; &nbsp; : Intel(R) Core(TM) i5 CPU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;750&nbsp; @ 2.67GHz<br />stepping&nbsp; &nbsp; &nbsp; &nbsp; : 5<br />cpu MHz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2660.080<br />cache size&nbsp; &nbsp; &nbsp; : 8192 KB<br />physical id&nbsp; &nbsp; &nbsp;: 0<br />siblings&nbsp; &nbsp; &nbsp; &nbsp; : 4<br />core id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu cores&nbsp; &nbsp; &nbsp; &nbsp;: 4<br />apicid&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />fpu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes<br />fpu_exception&nbsp; &nbsp;: yes<br />cpuid level&nbsp; &nbsp; &nbsp;: 11<br />wp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr sse4_1 sse4_2 popcnt lahf_lm<br />bogomips&nbsp; &nbsp; &nbsp; &nbsp; : 5320.16<br />clflush size&nbsp; &nbsp; : 64<br />cache_alignment : 64<br />address sizes&nbsp; &nbsp;: 36 bits physical, 48 bits virtual<br />power management: &#91;8&#93;<br /><br />processor&nbsp; &nbsp; &nbsp; &nbsp;: 1<br />vendor_id&nbsp; &nbsp; &nbsp; &nbsp;: GenuineIntel<br />cpu family&nbsp; &nbsp; &nbsp; : 6<br />model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 30<br />model name&nbsp; &nbsp; &nbsp; : Intel(R) Core(TM) i5 CPU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;750&nbsp; @ 2.67GHz<br />stepping&nbsp; &nbsp; &nbsp; &nbsp; : 5<br />cpu MHz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2660.080<br />cache size&nbsp; &nbsp; &nbsp; : 8192 KB<br />physical id&nbsp; &nbsp; &nbsp;: 0<br />siblings&nbsp; &nbsp; &nbsp; &nbsp; : 4<br />core id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1<br />cpu cores&nbsp; &nbsp; &nbsp; &nbsp;: 4<br />apicid&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 2<br />fpu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes<br />fpu_exception&nbsp; &nbsp;: yes<br />cpuid level&nbsp; &nbsp; &nbsp;: 11<br />wp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr sse4_1 sse4_2 popcnt lahf_lm<br />bogomips&nbsp; &nbsp; &nbsp; &nbsp; : 5319.89<br />clflush size&nbsp; &nbsp; : 64<br />cache_alignment : 64<br />address sizes&nbsp; &nbsp;: 36 bits physical, 48 bits virtual<br />power management: &#91;8&#93;<br /><br />processor&nbsp; &nbsp; &nbsp; &nbsp;: 2<br />vendor_id&nbsp; &nbsp; &nbsp; &nbsp;: GenuineIntel<br />cpu family&nbsp; &nbsp; &nbsp; : 6<br />model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 30<br />model name&nbsp; &nbsp; &nbsp; : Intel(R) Core(TM) i5 CPU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;750&nbsp; @ 2.67GHz<br />stepping&nbsp; &nbsp; &nbsp; &nbsp; : 5<br />cpu MHz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2660.080<br />cache size&nbsp; &nbsp; &nbsp; : 8192 KB<br />physical id&nbsp; &nbsp; &nbsp;: 0<br />siblings&nbsp; &nbsp; &nbsp; &nbsp; : 4<br />core id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2<br />cpu cores&nbsp; &nbsp; &nbsp; &nbsp;: 4<br />apicid&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4<br />fpu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes<br />fpu_exception&nbsp; &nbsp;: yes<br />cpuid level&nbsp; &nbsp; &nbsp;: 11<br />wp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr sse4_1 sse4_2 popcnt lahf_lm<br />bogomips&nbsp; &nbsp; &nbsp; &nbsp; : 5319.96<br />clflush size&nbsp; &nbsp; : 64<br />cache_alignment : 64<br />address sizes&nbsp; &nbsp;: 36 bits physical, 48 bits virtual<br />power management: &#91;8&#93;<br /><br />processor&nbsp; &nbsp; &nbsp; &nbsp;: 3<br />vendor_id&nbsp; &nbsp; &nbsp; &nbsp;: GenuineIntel<br />cpu family&nbsp; &nbsp; &nbsp; : 6<br />model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 30<br />model name&nbsp; &nbsp; &nbsp; : Intel(R) Core(TM) i5 CPU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;750&nbsp; @ 2.67GHz<br />stepping&nbsp; &nbsp; &nbsp; &nbsp; : 5<br />cpu MHz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2660.080<br />cache size&nbsp; &nbsp; &nbsp; : 8192 KB<br />physical id&nbsp; &nbsp; &nbsp;: 0<br />siblings&nbsp; &nbsp; &nbsp; &nbsp; : 4<br />core id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 3<br />cpu cores&nbsp; &nbsp; &nbsp; &nbsp;: 4<br />apicid&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 6<br />fpu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes<br />fpu_exception&nbsp; &nbsp;: yes<br />cpuid level&nbsp; &nbsp; &nbsp;: 11<br />wp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr sse4_1 sse4_2 popcnt lahf_lm<br />bogomips&nbsp; &nbsp; &nbsp; &nbsp; : 5319.97<br />clflush size&nbsp; &nbsp; : 64<br />cache_alignment : 64<br />address sizes&nbsp; &nbsp;: 36 bits physical, 48 bits virtual<br />power management: &#91;8&#93;<br /></code></pre></div><br /><br />I don't think my pc specs are so outdated until my calculation to be so slow. My parallel test time is almost the same as the link, so there may be problems in the serial test. Thanks you for your time.<br /><br />ps. sometimes there is directory lock error when I run abinit in one of the cluster nodes (I install it in the main pc and share the executable bin and libraries to all the cluster node).<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;sheng@compute-0-18 tests&#93;$ ../../tests/runtests.py paral -t 0 -n 4 -j 2<br />/home/sheng/Desktop/Program/abinit-7.6.3/tests/pymods/testsuite.py:802: UserWarning: Cannot find path of bin_name timeout, neither in the build directory nor in PATH &#91;'/share/apps/fftw/3.3.4/bin', '/share/apps/netcdf/4.3.2/bin', '/share/apps/abinit/7.6.3gcc/bin', '/share/apps/gcc/4.9.0/bin', '/share/apps/openmpi/1.8.1/gcc4.9.0/bin', '/opt/gridengine/bin/lx26-amd64', '/usr/kerberos/bin', '/usr/java/latest/bin', '/usr/local/bin', '/bin', '/usr/bin', '/opt/ganglia/bin', '/opt/ganglia/sbin', '/opt/openmpi/bin/', '/opt/rocks/bin', '/opt/rocks/sbin', '/opt/sun-ct/bin', '/home/sheng/bin'&#93;<br />&nbsp; warn(err_msg)<br />/home/sheng/Desktop/Program/abinit-7.6.3/tests/pymods/testsuite.py:762: UserWarning: Cannot find timeout executable!<br />&nbsp; warn(&quot;Cannot find timeout executable!&quot;)<br />../../tests/runtests.py:213: UserWarning: Cannot find timeout executable at:<br />&nbsp; warn(&quot;Cannot find timeout executable at: %s&quot; % build_env.path_of_bin(&quot;timeout&quot;))<br />Test_suite directory already exists! Old files will be removed<br />Running ntests = 93, MPI_nprocs = 4, py_nthreads = 2...<br />/home/sheng/Desktop/Program/abinit-7.6.3/tests/pymods/testsuite.py:2599: UserWarning: Timeout occured while trying to acquire the directory lock in /home/sheng/Desktop/Program/abinit-7.6.3/build/tests/Test_suite.<br />&nbsp;Returning<br />&nbsp; warn(&quot;Timeout occured while trying to acquire the directory lock in %s.\n Returning&quot; % self.workdir)<br /></code></pre></div></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2695&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:20:22 GMT -->
</html>
