<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1034&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:14:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; [SOLVED] mpif90 v.6.6.2 failed</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>[SOLVED] mpif90 v.6.6.2 failed</h2>
		<p><a href="viewtopic62b0.html?f=3&amp;t=1034">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1034</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>[SOLVED] mpif90 v.6.6.2 failed</h3>
				<div class="date">Posted: <strong>Mon Apr 18, 2011 3:23 pm</strong></div>
				<div class="author">by <strong>mmikami</strong></div>
				<div class="content">Dear all, <br /><br />Thanks to Alain and Yann for their advice on the compilation of the serial version of v.6.6.2. It was fine.<br />BTW, when I tried to compile v.6.6.2 with mpif90 (as follows, it worked with v.6.4.x):<br />mkdir tmp-mpi &amp;&amp; cd tmp-mpi &amp;&amp; ../configure --enable-mpi --with-mpi-prefix=/usr/local/mpich-intel91 --program-suffix=&quot;-mpi&quot; --prefix=&quot;$HOME/hpc&quot; &amp;&amp; make &amp;&amp; cd src/98_main &amp;&amp; make install<br /><br />I had the following error message (config.log attached in this post):<br /> (snip)<br />Making all in 98_main<br />make[3]: Entering directory `/misc/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/src/98_main'<br />/usr/local/mpich-intel91/bin/mpif90 -free -module /home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/src/mods -O3 -arch pn4 -tune pn4 -xT -g -extend-source -vec-report0 -noaltparam -nofpscomp   -g -extend-source -vec-report0 -noaltparam -nofpscomp  -static-intel -static-libgcc  -static-intel -static-libgcc  -o abinit abinit-abinit.o -static-intel -static-libgcc  ../../src/95_drive/lib95_drive.a ../../src/93_rdm/lib93_rdm.a ../../src/79_seqpar_mpi/lib79_seqpar_mpi.a ../../src/77_ddb/lib77_ddb.a ../../src/77_suscep/lib77_suscep.a ../../src/72_response/lib72_response.a ../../src/71_bse/lib71_bse.a ../../src/70_gw/lib70_gw.a ../../src/69_wfdesc/lib69_wfdesc.a ../../src/68_dmft/lib68_dmft.a ../../src/68_recursion/lib68_recursion.a ../../src/68_rsprc/lib68_rsprc.a ../../src/67_common/lib67_common.a ../../src/66_paw/lib66_paw.a ../../src/66_wfs/lib66_wfs.a ../../src/65_psp/lib65_psp.a ../../src/65_nonlocal/lib65_nonlocal.a ../../src/64_atompaw/lib64_atompaw.a ../../src/62_occeig/lib62_occeig.a ../../src/62_iowfdenpot/lib62_iowfdenpot.a ../../src/62_wvl_wfs/lib62_wvl_wfs.a ../../src/62_poisson/lib62_poisson.a ../../src/62_cg_noabirule/lib62_cg_noabirule.a ../../src/61_ionetcdf/lib61_ionetcdf.a ../../src/59_io_mpi/lib59_io_mpi.a ../../src/57_iovars/lib57_iovars.a ../../src/56_recipspace/lib56_recipspace.a ../../src/56_xc/lib56_xc.a ../../src/53_abiutil/lib53_abiutil.a ../../src/53_spacepar/lib53_spacepar.a ../../src/53_ffts/lib53_ffts.a ../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a ../../src/51_manage_mpi/lib51_manage_mpi.a  ../../src/49_gw_toolbox_oop/lib49_gw_toolbox_oop.a ../../src/47_xml/lib47_xml.a ../../src/45_psp_parser/lib45_psp_parser.a ../../src/43_ptgroups/lib43_ptgroups.a ../../src/42_nlstrain/lib42_nlstrain.a ../../src/42_geometry/lib42_geometry.a ../../src/42_geomoptim/lib42_geomoptim.a ../../src/42_parser/lib42_parser.a  ../../src/32_util/lib32_util.a ../../src/28_numeric_noabirule/lib28_numeric_noabirule.a ../../src/27_toolbox_oop/lib27_toolbox_oop.a ../../src/18_timing/lib18_timing.a ../../src/16_hideleave/lib16_hideleave.a ../../src/14_hidewrite/lib14_hidewrite.a  ../../src/12_hide_mpi/lib12_hide_mpi.a ../../src/10_defs/lib10_defs.a  ../../src/01_qespresso_ext/lib01_qespresso_ext.a ../../src/01_interfaces_ext/lib01_interfaces_ext.a  -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/wannier90 -lwannier -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/bigdft -lbigdft -lpoissonsolver -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/libxc -lxc  -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/etsf_io -letsf_io_low_level -letsf_io_utils -letsf_io -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/netcdf -lnetcdf -L/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/plugins/linalg -llapack -lblas -L/usr/local/mpich-intel91/lib -lmpichf90 -lmpich -lpthread -lrt -L/opt/intel/mkl/9.1/lib/em64t -L/opt/intel/fce/9.1/lib -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6/ -L/usr/lib64 -lsvml -lifport -lifcore -limf -lm -lipgo -lirc -lirc_s -ldl -L/usr/local/mpich-intel91/lib -lmpichf90 -lmpich -lpthread -lrt -L/opt/intel/mkl/9.1/lib/em64t -L/opt/intel/fce/9.1/lib -L/usr/lib/gcc/x86_64-redhat-linux/3.4.6/ -L/usr/lib64 -lsvml -lifport -lifcore -limf -lm -lipgo -lirc -lirc_s -ldl <br />ifort: Command line warning: ignoring option '-static'; no argument required<br />ifort: Command line warning: ignoring option '-static'; no argument required<br />ifort: Command line warning: ignoring option '-static'; no argument required<br />../../src/12_hide_mpi/lib12_hide_mpi.a(m_xmpi.o)(.text+0x454a1): In function `xmpio_check_frmarkers':<br />../../../src/12_hide_mpi/m_xmpi.F90:1788: undefined reference to `mpi_type_create_struct_'<br />../../src/12_hide_mpi/lib12_hide_mpi.a(m_xmpi.o)(.text+0x46e54): In function `xmpio_write_frmarkers':<br />../../../src/12_hide_mpi/m_xmpi.F90:1964: undefined reference to `mpi_type_create_struct_'<br />../../src/12_hide_mpi/lib12_hide_mpi.a(m_xmpi.o)(.text+0x489f4): In function `xmpio_create_fherm_packed':<br />../../../src/12_hide_mpi/m_xmpi.F90:2183: undefined reference to `mpi_type_create_struct_'<br />../../src/12_hide_mpi/lib12_hide_mpi.a(m_xmpi.o)(.text+0x49541): In function `xmpio_create_coldistr_from_fherm_packed':<br />../../../src/12_hide_mpi/m_xmpi.F90:2323: undefined reference to `mpi_type_create_struct_'<br />make[3]: *** [abinit] Error 1<br />make[3]: Leaving directory `/misc/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/src/98_main'<br />make[2]: *** [all-recursive] Error 1<br />make[2]: Leaving directory `/misc/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi/src'<br />make[1]: *** [all-recursive] Error 1<br />make[1]: Leaving directory `/misc/home/mmikami/ABINIT/abinit-6.6.2/tmp-mpi'<br />make: *** [all] Error 2<br /><br />Any suggestions would be highly appreciated,<br />Masayoshi <br />(P.S. I was back home yesterday, safe and sound...)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpif90 v.6.6.2 failed</h3>
				<div class="date">Posted: <strong>Mon Apr 18, 2011 4:13 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello Masayoshi,<br /><br />Glad to know that the travel went alright.<br /><br />A possible explanation for the problem you encounter with version 6.6.2 is that your implementation of MPICH2 - quite outdated now - is incompatible with MPI-IO. This is enabled by default now when MPI is requested. May I suggest to restart from scratch i.e. reconfigure by adding --disable-mpi-io to your options to return back to the former bahavior. Any improvement?<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>[SOLVED] Re: mpif90 v.6.6.2 failed</h3>
				<div class="date">Posted: <strong>Tue Apr 19, 2011 4:24 pm</strong></div>
				<div class="author">by <strong>mmikami</strong></div>
				<div class="content">Bonjour Alain,<br /><br />Merci! The compilation was completed with your suggestion (adding &quot;--disable-mpi-io&quot;).<br /><br />Best wishes,<br />Masayoshi</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1034&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:14:25 GMT -->
</html>
