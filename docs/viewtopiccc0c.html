<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3835&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:41:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h2>
		<p><a href="viewtopic330b.html?f=3&amp;t=3835">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3835</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Sat May 05, 2018 1:13 pm</strong></div>
				<div class="author">by <strong>Jianz</strong></div>
				<div class="content">Hello everyone：<br />I find a strange phenomenon:<br />With the same compiling parameters, the abinit 8.8.1 is much slower than abinit 8.6.3.<br />e.g  for  Al with vacumn slabs, the abinit 8.6.3 is about ~6 min, but the abinit 8.8.1 needs near 30+ min.<br />Why?<br />PS: virtual machine, 4 cores, 8 GB, CentOS 7.3 with openmpi paralel.<br />Thanks a lot！</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Sat May 05, 2018 9:32 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Jianz,<br />Are you really using the OpenMP parallelism or just MPI? If you are just running MPI, I advise to switch off the OpenMP.<br />Please also have a look what is discussed here about OMP_NUM_THREADS, etc:<br /><a href="viewtopicbed5.html?f=3&amp;t=3829" class="postlink">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3829</a><br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Sun May 06, 2018 3:31 am</strong></div>
				<div class="author">by <strong>Jianz</strong></div>
				<div class="content">Dear Eric:<br /><br />Thanks for your answer.<br />My meaning is, with the same compiling parameters, and the same running command, the New version is much slower than the old ones.<br />Usually the two version should give the nearly same running result, I think.<br /><br />I also find it is the same fast for very small computation, but the difference is large for a little heavy computation.<br /><br />I wonder if the newer version change some development structure ?<br />hence the compiling parameters is OK for the old one, but not for the newer one ?<br />Maybe before I find out the reason, I have to return back the old version.<br /><br />Thanks again.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Mon May 07, 2018 12:53 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Jianz,<br />Could you send your config.log file such as we can have a look and see what can be the problem?<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Wed May 09, 2018 3:21 pm</strong></div>
				<div class="author">by <strong>Jianz</strong></div>
				<div class="content"><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/filee088.php?id=1556">Al-04.in</a></dt>
			<dd><em>Convergence test for Al+Vacumn Slab</em></dd>			<dd>(2.42 KiB) Downloaded 357 times</dd>
		</dl>
		
		
			</div>Dear Eric,<br />Thanks first for you kind help.<br />My main compiling parameters are as following:<br />./configure  FC=mpif90 CC=mpicc CXX=mpicxx --prefix=&quot;/opt/ABINIT-Simple&quot;  --with-arch=x86_64 --enable-64bit-flags=&quot;yes&quot;  --enable-mpi=&quot;yes&quot;  --with-mpi-libs=&quot;-L/opt/MPICH3/lib -lmpi&quot;  --with-mpi-incs=&quot;-I/opt/MPICH3/include&quot;  --enable-mpi-io=&quot;yes&quot;  --enable-openmp=&quot;yes&quot;  --with-openmp-prefix=&quot;/opt/OPENMP3/bin&quot;   --with-openmp-libs=&quot;-L/opt/OPENMPI3/lib -lmpi&quot;  --with-openmp-incs=&quot;-I/opt/OPENMPI3/include&quot;  --enable-fftw3=&quot;yes&quot;  --with-fft-incs=&quot;-I/opt/FFTW3/include/&quot;  --with-fft-libs=&quot;-L/opt/FFTW3/lib -lfftw3_omp -lfftw3_mpi -lfftw3&quot;  --enable-libxc=&quot;yes&quot;  --with-libxc-incs=&quot;-I/opt/LIBXC4/include&quot;  --with-libxc-libs=&quot;-L/opt/LIBXC4/lib -lxcf03 -lxcf90 -lxc&quot;  --enable-atompaw=&quot;yes&quot;  --with-atompaw-bins=&quot;/opt/ATOMPAW4/bin&quot;  --with-atompaw-libs=&quot;-L/opt/ATOMPAW4/lib -latompaw&quot;  --enable-gw-dpc=&quot;yes&quot;<br />The compiling is OK for both ABINIT 8.6.3 and 8.8.1.<br />The test input file is Al-04.in.<br /><br />For ABINIT 8.6.3, it needs 6'08'', but for ABINIT 8.8.1, the running needs over 30+ min.<br /><br />All the works are under VMWare Machinies, with CentOS 7.3, 4 cores, 8 GB.<br /><br />I have change some compiling parameters, but the running results are the same.<br />So I don't know why!<br /><br />Thanks.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Fri May 11, 2018 3:42 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Jianz,<br />I've made a quick test on my machine (Linux Ubuntu 2*6 cores Xeon, gfortran compilation) and I have more or less the same calculation time on the input you sent for 8.8.1 and 8.6.3.<br />So far I don't see what can be your problem, could you re-test by enforcing <em class="text-italics">export OMP_NUM_THREADS=1</em> to check if this can be the source of the problem?<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: ABINIT 8.8.1 is much slower than ABINIT 8.6.3 ？？？</h3>
				<div class="date">Posted: <strong>Wed May 16, 2018 5:07 pm</strong></div>
				<div class="author">by <strong>Jianz</strong></div>
				<div class="content">Thanks Eric.<br />I have reinstall my virtual machine with the newest CentOS-1804 and re-compiling my ABINIT-8.6.3 and ABINIT-8.8.1 under Windows 10 system.<br />This time, I don't use the shared folder. All files are within the virtual machine.<br />With the same input file, the ABINIT 8.6.3 takes 6'26'', but the 8.8.1 takes 10'22'' .<br />To my knowledge, the only perhaps reason is the virtual machine???<br />Next time, I will install these two editions on the real CentOS 7.4 system and compare them.<br />OK, till then I will post the result.<br />If the result is the same, maybe I have to wait for the next new edition.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3835&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:41:11 GMT -->
</html>
