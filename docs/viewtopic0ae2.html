<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=946&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:11:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Band convergence in the d/dk calculation with occopt=7</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Band convergence in the d/dk calculation with occopt=7</h2>
		<p><a href="viewtopica3a4-2.html?f=10&amp;t=946">https://forum.abinit.org/viewtopic.php?f=10&amp;t=946</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Band convergence in the d/dk calculation with occopt=7</h3>
				<div class="date">Posted: <strong>Wed Mar 09, 2011 3:06 am</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content">Dear all,<br /><br />I'm performing several calculations on phonon frequencies in CdS. Following what Matthieu said <a href="viewtopic7502.html?f=10&amp;t=240#p865" class="postlink">in this post</a>, I used occopt= 7 with a low tsmear (0.005 Ha) in order to improve the convergence in the d/dk calculation.<br /><br />This indeed improved the convergence but triggered another problem: my last two bands are not converged, whatever the number of bands in my calculations (I tried nband=18, 40 and 45). This can be seen on the &quot;res&quot; block in the ouput file:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Mean square residual over all n,k,spin=&nbsp; -4.4444E-03; max=&nbsp; 9.9832E-21<br />&nbsp; &nbsp;0.0000&nbsp; 0.0000&nbsp; 0.0833&nbsp; &nbsp; 1&nbsp; 8.82866E-21 kpt; spin; max resid(k); each band:<br />&nbsp; 1.51E-21 8.18E-21 4.06E-21 5.17E-21 5.17E-21 4.58E-21 4.58E-21 1.50E-21<br />&nbsp; 1.50E-21 3.00E-21 3.00E-21 1.99E-21 7.97E-21 8.78E-21 8.78E-21 5.62E-21<br />&nbsp; 2.97E-21 2.97E-21 5.66E-21 1.89E-21 7.40E-21 7.40E-21 4.03E-21 1.62E-21<br />&nbsp; 3.26E-21 3.26E-21 3.83E-21 3.83E-21 3.95E-21 6.61E-21 8.08E-21 8.08E-21<br />&nbsp; 1.98E-21 3.94E-21 6.46E-21 6.46E-21 8.51E-21 5.61E-21 5.61E-21 5.73E-21<br />&nbsp; 5.73E-21 8.83E-21 3.64E-21-1.00E-01-1.00E-01<br /></code></pre></div><br /><br />You can see that the last two bands are not converged, at all.<br /><br />When I use 18 bands (only filled bands), with occopt=1, the convergence is a bit slower but:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Mean square residual over all n,k,spin=&nbsp; &nbsp;5.2588E-21; max=&nbsp; 9.9991E-21<br />&nbsp; &nbsp;0.0000&nbsp; 0.0000&nbsp; 0.0833&nbsp; &nbsp; 1&nbsp; 9.51723E-21 kpt; spin; max resid(k); each band:<br />&nbsp; 3.34E-21 6.98E-21 3.24E-21 8.02E-21 7.93E-21 2.40E-21 8.06E-21 7.28E-21<br />&nbsp; 4.27E-21 3.24E-21 3.57E-21 2.93E-21 8.55E-21 3.72E-21 9.46E-21 9.52E-21<br />&nbsp; 4.04E-21 6.50E-21<br /></code></pre></div><br /><br />Now all the bands are converged.<br /><br />Is that a problem? <br /><br />Thank you for your anwers<br /><br />Boris</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Band convergence in the d/dk calculation with occopt=7</h3>
				<div class="date">Posted: <strong>Wed May 25, 2011 5:34 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hi Boris,<br /><br />no - looks ok, the last bands in the first calculation are probably degenerate with further bands you do not take into account. Remove them and the lower bands converge normally. Add a few bands more and they should be able to converge normally as well (you need the full degenerate subspace).<br /><br />Another possibility is neglecting the last bands in the convergence criterion (nbdbuf)<br /><br />Matthieu</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=946&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:11:11 GMT -->
</html>
