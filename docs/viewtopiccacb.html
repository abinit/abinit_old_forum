<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=856&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:27:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; segment fault (bug?) in ABINIT v6.4.2</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>segment fault (bug?) in ABINIT v6.4.2</h2>
		<p><a href="viewtopic1419.html?f=9&amp;t=856">https://forum.abinit.org/viewtopic.php?f=9&amp;t=856</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>segment fault (bug?) in ABINIT v6.4.2</h3>
				<div class="date">Posted: <strong>Sun Jan 23, 2011 9:07 pm</strong></div>
				<div class="author">by <strong>chen</strong></div>
				<div class="content">The code crashes in the first iteration, no problem with ABINIT 6.0.3<br /><br />here is the messages from the crash <br /><br />  ITER STEP NUMBER     1<br />  vtorho : nnsclo_now=  2, note that nnsclo,dbl_nnsclo,istep=  0 0  1<br />   ****  In vtorho for isppol=           1<br />  starting lobpcg, with nblockbd,mpi_enreg%nproc_band          22           2<br /> forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /> Image              PC                Routine            Line        Source<br /> libblas.so.3       00002B4A063DC6F5  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B4A063DC6C1  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B4A05EFDE25  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B4A06633049  Unknown               Unknown  Unknown<br /> abinit             00000000006C18C3  Unknown               Unknown  Unknown<br /> abinit             00000000006971A7  Unknown               Unknown  Unknown<br /> abinit             00000000005F5C2E  Unknown               Unknown  Unknown<br /> abinit             00000000005C5D5F  Unknown               Unknown  Unknown<br /> abinit             0000000000509FF0  Unknown               Unknown  Unknown<br /> abinit             00000000004264E9  Unknown               Unknown  Unknown<br /> abinit             0000000000416748  Unknown               Unknown  Unknown<br /> abinit             000000000040AD5A  Unknown               Unknown  Unknown<br /> abinit             0000000000406592  Unknown               Unknown  Unknown<br /> libc.so.6          00002B4A0937F994  Unknown               Unknown  Unknown<br /> abinit             00000000004064B9  Unknown               Unknown  Unknown<br /> forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /> Image              PC                Routine            Line        Source<br /> libblas.so.3       00002B5B203706F5  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B5B203706C1  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B5B1FE91E25  Unknown               Unknown  Unknown<br /> libblas.so.3       00002B5B205C7049  Unknown               Unknown  Unknown<br /> abinit             00000000006C18C3  Unknown               Unknown  Unknown<br /> abinit             00000000006971A7  Unknown               Unknown  Unknown<br /> abinit             00000000005F5C2E  Unknown               Unknown  Unknown<br /> abinit             00000000005C5D5F  Unknown               Unknown  Unknown<br /> abinit             0000000000509FF0  Unknown               Unknown  Unknown<br /> abinit             00000000004264E9  Unknown               Unknown  Unknown<br /> abinit             0000000000416748  Unknown               Unknown  Unknown<br /> abinit             000000000040AD5A  Unknown               Unknown  Unknown<br /><br />and the input is as<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># input for a BCC K<br />#============================<br /><br />chkprim 0<br /><br />#=====================<br /># spin related<br />nsppol&nbsp; 2<br />spinat<br />&nbsp; 0 0 4<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br /><br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br /><br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; 0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br /><br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br />&nbsp; &nbsp;0 0 0<br /><br />&nbsp;occopt&nbsp; &nbsp;3<br />&nbsp;tsmear&nbsp; &nbsp;0.1 eV<br />&nbsp;nsym&nbsp; &nbsp; &nbsp;1<br /><br />&nbsp;accesswff&nbsp; &nbsp;1&nbsp; # mpi-IO<br />&nbsp;nline&nbsp; &nbsp; &nbsp; 10<br />&nbsp;iscf&nbsp; &nbsp; &nbsp; &nbsp; 7<br />&nbsp;npulayit&nbsp; &nbsp; 4<br />&nbsp;diemixmag&nbsp; -4.0<br />&nbsp;prtwf&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp;prtden&nbsp; &nbsp; &nbsp; 0<br /><br />&nbsp;nband&nbsp; &nbsp; &nbsp; &nbsp;44<br />&nbsp;#---------------------------------<br />&nbsp;# parallel<br />&nbsp;paral_kgb 1&nbsp; &nbsp;# parallel activated over kpt, fft and bands, contain spin<br />&nbsp;npkpt&nbsp; &nbsp; 20&nbsp; &nbsp;# CPUs for kpt<br />&nbsp;npfft&nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;# CPUs for fft<br />&nbsp;npband&nbsp; &nbsp; 2&nbsp; &nbsp;# CPUs for bands<br />&nbsp;wfoptalg 14&nbsp; &nbsp;# Locally Optimal Block Preconditioned Conjugate Gradient (lobpcg) method of Knyazev.<br />&nbsp;nloalg&nbsp; &nbsp; 4<br />fftalg&nbsp; &nbsp; 401<br />intxc&nbsp; &nbsp; &nbsp;0<br />fft_opt_lob&nbsp; 2<br />istwfk&nbsp; &nbsp; 200*1<br /><br />#------------ fix atom positions ---------<br />#natfix&nbsp; &nbsp; 36<br />#iatfix&nbsp; &nbsp; 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 3<br /><br />#-------- cell optimizatoin -------<br />#optcell 0<br />#ionmov&nbsp; 3<br />#tolmxf&nbsp; 1.0d-4<br />#ntime&nbsp; &nbsp;50<br /><br />#============ below are in terms of Angstrom ===========<br /># K surface 3x3x1 10 Angstrom Vacc<br />acell&nbsp; 3*1.0 angstrom<br />rprim<br />&nbsp; &nbsp;7.949999999999999&nbsp; &nbsp; &nbsp; -7.949999999999998&nbsp; &nbsp; &nbsp; &nbsp;7.950000000000000<br />&nbsp; &nbsp;7.949999999999999&nbsp; &nbsp; &nbsp; -7.949999999999998&nbsp; &nbsp; &nbsp; -7.949999999999998<br />&nbsp; &nbsp;15.021067811865478&nbsp; &nbsp; &nbsp; 15.021067811865478&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000000<br /><br />ntypat 2<br />znucl&nbsp; 26&nbsp; 19&nbsp; &nbsp;# K<br />natom&nbsp; 37<br />typat&nbsp; 1&nbsp; 36*2<br />xcart<br />### Cartesian coordinates (bohr)<br />&nbsp; 3.28778025355234E+01&nbsp; 2.83171187844130E+00 -4.36387110966763E-03 ## &lt;------ Fe atom<br />&nbsp; 5.00777425210000E+00 -5.00777425210000E+00 -8.43769498715119E-15<br />&nbsp; 1.00155485040000E+01 -1.00155485040000E+01 -5.00777425210000E+00<br />&nbsp; 1.50233227560000E+01 -1.50233227560000E+01 -1.00155485040000E+01<br />&nbsp; 1.00155485040000E+01 -1.00155485040000E+01&nbsp; 5.00777425210000E+00 1.00155485040000E+01 -1.00155485040000E+01&nbsp; 5.00777425210000E+00<br />&nbsp;1.50233227560000E+01 -1.50233227560000E+01 -4.44089209850063E-15<br />&nbsp;2.00310970090000E+01 -2.00310970090000E+01 -5.00777425210000E+00<br />&nbsp;1.50233227560000E+01 -1.50233227560000E+01&nbsp; 1.00155485040000E+01<br />&nbsp;2.00310970090000E+01 -2.00310970090000E+01&nbsp; 5.00777425210000E+00<br />&nbsp;2.50388712610000E+01 -2.50388712610000E+01 -7.10542735760100E-15<br />&nbsp;5.00777425210000E+00&nbsp; 5.00777425210000E+00 -6.00932910260000E-15<br />&nbsp;1.00155485040000E+01&nbsp; 9.76996261670138E-15 -5.00777425210000E+00<br />&nbsp;1.50233227560000E+01 -5.00777425210000E+00 -1.00155485040000E+01<br />&nbsp;1.00155485040000E+01&nbsp; 7.10542735760100E-15&nbsp; 5.00777425210000E+00<br />&nbsp;1.50233227560000E+01 -5.00777425210000E+00 -4.44089209850063E-15<br />&nbsp;2.00310970090000E+01 -1.00155485040000E+01 -5.00777425210000E+00<br />&nbsp;1.50233227560000E+01 -5.00777425210000E+00&nbsp; 1.00155485040000E+01<br />&nbsp;2.00310970090000E+01 -1.00155485040000E+01&nbsp; 5.00777425210000E+00<br />&nbsp;2.50388712610000E+01 -1.50233227560000E+01 -3.55271367880050E-15<br />&nbsp;1.50233227560000E+01&nbsp; 5.00777425210000E+00&nbsp; 4.44089209850063E-16<br />&nbsp;2.00310970090000E+01 -8.88178419700125E-15 -5.00777425210000E+00<br />&nbsp;2.50388712610000E+01 -5.00777425210000E+00 -1.00155485040000E+01<br />&nbsp;2.00310970090000E+01 -7.10542735760100E-15&nbsp; 5.00777425210000E+00<br />&nbsp;2.50388712610000E+01 -5.00777425210000E+00 -1.77635683940025E-15<br />&nbsp;3.00466455130000E+01 -1.00155485040000E+01 -5.00777425210000E+00<br />&nbsp;2.50388712610000E+01 -5.00777425210000E+00&nbsp; 1.00155485040000E+01<br />&nbsp;3.00466455130000E+01 -1.00155485040000E+01&nbsp; 5.00777425210000E+00<br />&nbsp;3.50544197650000E+01 -1.50233227560000E+01 -3.55271367880050E-15<br />&nbsp;1.50233227560000E+01&nbsp; 1.50233227560000E+01&nbsp; 0.00000000000000E+00<br />&nbsp;2.00310970090000E+01&nbsp; 1.00155485040000E+01 -5.00777425210000E+00<br />&nbsp;2.50388712610000E+01&nbsp; 5.00777425210000E+00 -1.00155485040000E+01<br />&nbsp;2.00310970090000E+01&nbsp; 1.00155485040000E+01&nbsp; 5.00777425210000E+00<br />&nbsp;2.50388712610000E+01&nbsp; 5.00777425210000E+00&nbsp; 2.66453525910038E-15<br />&nbsp;3.00466455130000E+01 -1.77635683940025E-15 -5.00777425210000E+00<br />&nbsp;2.50388712610000E+01&nbsp; 5.00777425210000E+00&nbsp; 1.00155485040000E+01<br />&nbsp;3.00466455130000E+01 -1.77635683940025E-15&nbsp; 5.00777425210000E+00<br />&nbsp;3.50544197650000E+01 -5.00777425210000E+00&nbsp; 7.10542735760100E-15<br />ecut&nbsp; 1200 eV<br /><br />ixc&nbsp; &nbsp; 11 #pbe<br />kptopt 1<br />ngkpt<br />&nbsp;4 4 1<br />nshiftk<br />&nbsp; 1<br />shiftk<br />&nbsp; 0 0 0<br /><br />nstep&nbsp; &nbsp;150&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Maximal number of SCF cycles<br />tolvrs&nbsp; 1e-2<br />diemix&nbsp; 0.5<br />diemac&nbsp; 100000.0&nbsp; &nbsp; &nbsp; &nbsp; # Although this is not mandatory, it is worth to</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segment fault (bug?) in ABINIT v6.4.2</h3>
				<div class="date">Posted: <strong>Mon Jan 24, 2011 11:12 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Dear Chen,<br /><br />It looks like that libblas crashes. Did you compile Abinit with an external BLAS/LAPACK? You can check this in config.log and config.dump. If this is your case, try to re- configure/compile with --disable-linalg option.<br />Would you be so kind to provide more info about the binary (compiled on what? output of ldd abinit, ...)<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segment fault (bug?) in ABINIT v6.4.2</h3>
				<div class="date">Posted: <strong>Fri Jan 28, 2011 11:20 pm</strong></div>
				<div class="author">by <strong>chen</strong></div>
				<div class="content">Hi Alain,<br /><br />this is what I did for the configure<br /><br />./configure FC=mpif90 CC=mpicc  --enable-mpi-io  --enable-mpi<br /><br />it is on Intel Nehalem with OpenMPI. <br /><br />chen</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=856&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:27:13 GMT -->
</html>
