<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=4004&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:37:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Compilation of Abinit-8.10.1 fails on SL 7.6</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Compilation of Abinit-8.10.1 fails on SL 7.6</h2>
		<p><a href="viewtopic0db0.html?f=3&amp;t=4004">https://forum.abinit.org/viewtopic.php?f=3&amp;t=4004</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Compilation of Abinit-8.10.1 fails on SL 7.6</h3>
				<div class="date">Posted: <strong>Sat Jan 05, 2019 6:09 pm</strong></div>
				<div class="author">by <strong>letuan</strong></div>
				<div class="content">I am facing with this error many times in my Scientific Linux v.7.6 distro and I cannot fix it : <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make&#91;3&#93;: Entering directory `/home/letuan/Programs/abinit-8.10.1/src/98_main'<br />/usr/local/bin/mpif90 -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/incs -I../../src/incs -I/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/include&nbsp; -I/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/include -I/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/home/letuan/Programs/abinit-8.10.1/src/mods&nbsp; &nbsp; -g -O3 --free-line-length-none&nbsp; -g -O3 --free-line-length-none -c -o abinit-abinit.o `test -f 'abinit.F90' || echo './'`abinit.F90<br />/usr/local/bin/mpif90 -ffree-form -J/home/letuan/Programs/abinit-8.10.1/src/mods&nbsp; &nbsp; -g -O3 --free-line-length-none&nbsp; -g -O3 --free-line-length-none&nbsp; &nbsp;-o abinit abinit-abinit.o&nbsp; ../../src/95_drive/lib95_drive.a ../../src/94_scfcv/lib94_scfcv.a ../../src/79_seqpar_mpi/lib79_seqpar_mpi.a ../../src/78_effpot/lib78_effpot.a ../../src/78_eph/lib78_eph.a ../../src/77_ddb/lib77_ddb.a ../../src/77_suscep/lib77_suscep.a ../../src/72_response/lib72_response.a ../../src/71_bse/lib71_bse.a ../../src/71_wannier/lib71_wannier.a ../../src/70_gw/lib70_gw.a ../../src/69_wfdesc/lib69_wfdesc.a ../../src/68_dmft/lib68_dmft.a&nbsp; ../../src/68_recursion/lib68_recursion.a ../../src/68_rsprc/lib68_rsprc.a&nbsp; ../../src/67_common/lib67_common.a ../../src/66_vdwxc/lib66_vdwxc.a ../../src/66_wfs/lib66_wfs.a ../../src/66_nonlocal/lib66_nonlocal.a ../../src/65_paw/lib65_paw.a&nbsp; ../../src/64_psp/lib64_psp.a ../../src/62_iowfdenpot/lib62_iowfdenpot.a ../../src/62_wvl_wfs/lib62_wvl_wfs.a ../../src/62_poisson/lib62_poisson.a ../../src/62_cg_noabirule/lib62_cg_noabirule.a ../../src/62_ctqmc/lib62_ctqmc.a ../../src/61_occeig/lib61_occeig.a ../../src/59_ionetcdf/lib59_ionetcdf.a ../../src/57_iovars/lib57_iovars.a ../../src/57_iopsp_parser/lib57_iopsp_parser.a ../../src/56_recipspace/lib56_recipspace.a ../../src/56_xc/lib56_xc.a ../../src/56_mixing/lib56_mixing.a ../../src/56_io_mpi/lib56_io_mpi.a ../../src/55_abiutil/lib55_abiutil.a ../../src/54_spacepar/lib54_spacepar.a ../../src/53_ffts/lib53_ffts.a&nbsp; ../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a ../../src/51_manage_mpi/lib51_manage_mpi.a ../../src/49_gw_toolbox_oop/lib49_gw_toolbox_oop.a ../../src/46_diago/lib46_diago.a ../../src/45_xgTools/lib45_xgTools.a ../../src/45_geomoptim/lib45_geomoptim.a ../../src/44_abitypes_defs/lib44_abitypes_defs.a ../../src/44_abitools/lib44_abitools.a ../../src/43_wvl_wrappers/lib43_wvl_wrappers.a ../../src/43_ptgroups/lib43_ptgroups.a ../../src/42_parser/lib42_parser.a ../../src/42_nlstrain/lib42_nlstrain.a ../../src/42_libpaw/lib42_libpaw.a ../../src/41_xc_lowlevel/lib41_xc_lowlevel.a ../../src/41_geometry/lib41_geometry.a ../../src/32_util/lib32_util.a ../../src/29_kpoints/lib29_kpoints.a ../../src/28_numeric_noabirule/lib28_numeric_noabirule.a ../../src/27_toolbox_oop/lib27_toolbox_oop.a ../../src/21_hashfuncs/lib21_hashfuncs.a ../../src/18_timing/lib18_timing.a ../../src/17_libtetra_ext/lib17_libtetra_ext.a ../../src/16_hideleave/lib16_hideleave.a&nbsp; ../../src/14_hidewrite/lib14_hidewrite.a ../../src/12_hide_mpi/lib12_hide_mpi.a ../../src/11_memory_mpi/lib11_memory_mpi.a ../../src/10_dumpinfo/lib10_dumpinfo.a ../../src/10_defs/lib10_defs.a ../../src/02_clib/lib02_clib.a&nbsp; -L/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/lib -lwannier90 -L/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/lib -lnetcdf -L/home/letuan/Programs/abinit-8.10.1/fallbacks/exports/lib -lxcf90 -lxc -llapack&nbsp; -lblas -lrt -L/usr/local/lib -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../.. -lmpi_usempi -lmpi_mpifh -lmpi -lgfortran -lm -lquadmath -lpthread -L/usr/local/lib -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../.. -lmpi_usempi -lmpi_mpifh -lmpi -lgfortran -lm -lquadmath -lpthread <br />../../src/12_hide_mpi/lib12_hide_mpi.a(m_xmpi.o): In function `__m_xmpi_MOD_xmpi_init':<br />/home/letuan/Programs/abinit-8.10.1/src/12_hide_mpi/m_xmpi.F90:638: undefined reference to `mpi_attr_get_'<br />collect2: error: ld returned 1 exit status<br />make&#91;3&#93;: *** &#91;abinit&#93; Error 1<br />make&#91;3&#93;: Leaving directory `/home/letuan/Programs/abinit-8.10.1/src/98_main'<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/home/letuan/Programs/abinit-8.10.1/src'<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `/home/letuan/Programs/abinit-8.10.1'<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br />The compilation was with GNU compilers (v. 4.8.5). The similar compilation on OpenSuSE Leap 42 subsystem for Windows 10 went smoothly, without any difficulty.<br />This is the compilation receipt for Abinit:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --with-dft-flavor=&quot;libxc+atompaw+wannier90&quot; --enable-mpi --enable-mpi-io=&quot;yes&quot; F77=/usr/local/bin/mpif77 FC=/usr/local/bin/mpif90 CC=/usr/local/bin/mpicc CXX=/usr/local/bin/mpic++ --with-mpi-incs=&quot;-I/usr/local/include&quot; --with-mpi-libs=&quot;-L/usr/local/lib -lmpi&quot; --with-fft-incs=&quot;-I/usr/include&quot; --with-fft-libs=&quot;-L/usr/lib64 -lfftw3l&quot; --with-math-flavor=&quot;none&quot; --enable-optim=&quot;aggressive&quot; --with-trio-flavor=&quot;netcdf&quot; --with-enable-64bit-flags=&quot;yes&quot; FCFLAGS=&quot;-g -O3 --free-line-length-none&quot;<br /></code></pre></div> <br />(The key <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>-free-line-length-none</code></pre></div> was introduced for overcoming the break at the step with &quot;27_toolbox_oop&quot; compilation.)<br /><br />Any help will be highly appreciated.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation of Abinit-8.10.1 fails on SL 7.6</h3>
				<div class="date">Posted: <strong>Wed Jan 30, 2019 9:48 pm</strong></div>
				<div class="author">by <strong>admin</strong></div>
				<div class="content">Hi,<br /><br />2 remarks :<br />- gnu 4.8.5 is obsolete and it is no more supported with ABINIT<br />- it seems you compile yourself the MPI package ( /usr/local/ ) : right ? <br /><br />what the outputs of theses commands <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>which mpif90<br />mpif90 -show<br />mpif90 --version<br />nm /usr/local/lib/lib*.* | grep mpi_attr_get_</code></pre></div><br /><br />regards<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compilation of Abinit-8.10.1 fails on SL 7.6</h3>
				<div class="date">Posted: <strong>Fri Apr 26, 2019 8:48 am</strong></div>
				<div class="author">by <strong>letuan</strong></div>
				<div class="content">Dear JMB,<br />Yes, I compile openmpi v. 4.0 and fftw v. 3.3.8 for all computers before installing Abinit. The computers are on various platforms: Ubuntu v. 18.04 and OpenSuSE in Linux Subsystems for MS Windows 10 (for the first Abinit installation failed), on true SL, CentOS and OpenSuSE Leap and TumbleWeed distributions, etc, with also some versions of GNU C and Fortran compilers. Because our students's machines are not with the same OS. <br />From this forum I have got a lot.  <br />Regards,</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=4004&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:37:32 GMT -->
</html>
