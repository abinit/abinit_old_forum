<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1477&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; [SOLVED] undefined reference to `omp_get_num_threads_'</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>[SOLVED] undefined reference to `omp_get_num_threads_'</h2>
		<p><a href="viewtopic747d.html?f=3&amp;t=1477">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1477</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>[SOLVED] undefined reference to `omp_get_num_threads_'</h3>
				<div class="date">Posted: <strong>Wed Dec 28, 2011 10:39 am</strong></div>
				<div class="author">by <strong>serzz</strong></div>
				<div class="content">Hi all,<br /><br />I am triing to install abinit-6.10.3 on ubuntu server 11.10. I prepared ubuntu.ac<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=&quot;/usr/local&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_netcdf_incs=&quot;-I/usr/include&quot;<br />with_netcdf_libs=&quot;-L/usr/lib -lnetcdf -lnetcdff&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/include/&quot;<br />with_fft_libs=&quot;-L/usr/lib -lfftw3&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib -llapack -lf77blas -lcblas -latlas&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_maintainer_checks=&quot;no&quot;<br />enable_test_timeout=&quot;yes&quot;<br />enable_gui_build=&quot;no&quot;</code></pre></div><br /><br />and run ./configure  --with-config-file=&quot;./ubuntu.ac&quot; <br /> <br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>==============================================================================<br />&nbsp;=== Final remarks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br /><br />Summary of important options:<br /><br />&nbsp; * C compiler&nbsp; &nbsp; &nbsp; : gnu version 4.6<br />&nbsp; * Fortran compiler: gnu version 4.6<br />&nbsp; * architecture&nbsp; &nbsp; : intel xeon (64 bits)<br /><br />&nbsp; * debugging&nbsp; &nbsp; &nbsp; &nbsp;: basic<br />&nbsp; * optimizations&nbsp; &nbsp;: standard<br /><br />&nbsp; * MPI&nbsp; &nbsp; enabled&nbsp; : yes<br />&nbsp; * MPI-IO enabled&nbsp; : yes<br />&nbsp; * GPU&nbsp; &nbsp; enabled&nbsp; : no (none)<br /><br />&nbsp; * TRIO&nbsp; &nbsp;flavor = netcdf+etsf_io<br />&nbsp; * TIMER&nbsp; flavor = abinit (libs: ignored)<br />&nbsp; * LINALG flavor = atlas (libs: user-defined)<br />&nbsp; * FFT&nbsp; &nbsp; flavor = fftw3 (libs: user-defined)<br />&nbsp; * MATH&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * DFT&nbsp; &nbsp; flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)<br /></code></pre></div><br /><br /> make -mj4  abinit, i find this message :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../src/53_ffts/lib53_ffts.a(sg_fftrisc.o): In function `sg_fftrisc_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc.F90:203: undefined reference to `omp_get_num_threads_'<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc_2.o): In function `sg_fftrisc_2_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc_2.F90:249: undefined reference to `omp_get_num_threads_'<br />collect2: ld returned 1 exit status<br />make&#91;3&#93;: *** &#91;cut3d&#93; Error 1<br />make&#91;3&#93;: *** Waiting for unfinished jobs....<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc.o): In function `sg_fftrisc_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc.F90:203: undefined reference to `omp_get_num_threads_'<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc_2.o): In function `sg_fftrisc_2_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc_2.F90:249: undefined reference to `omp_get_num_threads_'<br />collect2: ld returned 1 exit status<br />make&#91;3&#93;: *** &#91;fftprof&#93; Error 1<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc.o): In function `sg_fftrisc_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc.F90:203: undefined reference to `omp_get_num_threads_'<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc_2.o): In function `sg_fftrisc_2_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc_2.F90:249: undefined reference to `omp_get_num_threads_'<br />collect2: ld returned 1 exit status<br />make&#91;3&#93;: *** &#91;kss2wfk&#93; Error 1<br />../../src/56_xc/lib56_xc.a(rhohxc.o): In function `rhohxc_':<br />/home/serzz/abinit/abinit-6.10.3/src/56_xc/rhohxc.F90:658: undefined reference to `omp_get_num_threads_'<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc.o): In function `sg_fftrisc_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc.F90:203: undefined reference to `omp_get_num_threads_'<br />../../src/53_ffts/lib53_ffts.a(sg_fftrisc_2.o): In function `sg_fftrisc_2_':<br />/home/serzz/abinit/abinit-6.10.3/src/53_ffts/sg_fftrisc_2.F90:249: undefined reference to `omp_get_num_threads_'<br />collect2: ld returned 1 exit status<br />make&#91;3&#93;: *** &#91;abinit&#93; Error 1<br />make&#91;3&#93;: Leaving directory `/home/serzz/abinit/abinit-6.10.3/src/98_main'<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/home/serzz/abinit/abinit-6.10.3/src'<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `/home/serzz/abinit/abinit-6.10.3'<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br />what may be wrong?<br /><br />Sergei</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: undefined reference to `omp_get_num_threads_'</h3>
				<div class="date">Posted: <strong>Wed Dec 28, 2011 1:26 pm</strong></div>
				<div class="author">by <strong>serzz</strong></div>
				<div class="content">The problem was solved by adding  -lgomp in with_fft_libs=&quot;-L/usr/lib -lfftw3&quot;</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1477&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:37 GMT -->
</html>
