<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=4481 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Automatic parallelising over datasets (jdtset) - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopicef61-3.html?t=1449">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="4"><a href="viewforum31e6.html?f=4" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Running Abinit</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="9"><a href="viewforumfdc5.html?f=9" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Ground state</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic5b54-2.html?f=9&amp;t=1449">Automatic parallelising over datasets (jdtset)</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Total energy, geometry optimization, DFT+U, spin....<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista146.html?mode=viewprofile&amp;u=2687" class="username">bguster</a>
</p>


<div class="action-bar bar-top">
	
			<a href="postingc37d.html?mode=reply&amp;f=9&amp;t=1449" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicdb93.html?f=9&amp;t=1449&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="1449" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			7 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p4478" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4478">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdfb2.html?author_id=777&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 09, 2011 2:52 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4478">

						<h3 class="first"><a href="#p4478">Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7166.html?mode=quote&amp;f=9&amp;p=4478" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicee4d.html?p=4478#p4478" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a></strong> &raquo; </span>Tue Nov 29, 2011 12:05 am
			</p>
			
			
			
			<div class="content">Hello,<br />I have been running a loop over various positions of atoms in a crystal (input file can be found here: <!-- m --><a class="postlink" href="http://dl.dropbox.com/u/21305328/fe-pnic.in">http://dl.dropbox.com/u/21305328/fe-pnic.in</a><!-- m -->). And I have access to many hundreds of processors.  However, I noticed in the log file after one of the runs that it was only using as many processors as there were k-points being used.<br />Is there away I can make ABINIT run some of the different datasets (with difference values of jdtset) at the same time?  This would massively cut down on runtime.  Any suggestions on how to do this would be greatly appreciated.  Thanks<br />Jack</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4479" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4479">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">david.waroquiers</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4b32.html?author_id=59&amp;sr=posts">138</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Aug 15, 2009 12:45 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4479">

						<h3 ><a href="#p4479">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1a6d-3.html?mode=quote&amp;f=9&amp;p=4479" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6bb1-2.html?p=4479#p4479" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">david.waroquiers</a></strong> &raquo; </span>Tue Nov 29, 2011 12:37 am
			</p>
			
			
			
			<div class="content">Hello,<br /><br />Look at the new tutorials on parallelism, in particular the one on &quot;ground state with plane waves&quot; (<a href="http://www.abinit.org/documentation/helpfiles/for-v6.10/tutorial/lesson_paral_gspw.html" class="postlink">http://www.abinit.org/documentation/helpfiles/for-v6.10/tutorial/lesson_paral_gspw.html</a>) and the one on &quot;images&quot; which you might use for the different positions of the atoms in your crystal instead of using datasets (<a href="http://www.abinit.org/documentation/helpfiles/for-v6.10/tutorial/lesson_paral_string.html" class="postlink">http://www.abinit.org/documentation/helpfiles/for-v6.10/tutorial/lesson_paral_string.html</a>). Note that images are need not necessarily to be used with the string method as in this tutorial.<br /><br />David</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4480" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4480">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdfb2.html?author_id=777&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 09, 2011 2:52 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4480">

						<h3 ><a href="#p4480">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting5174.html?mode=quote&amp;f=9&amp;p=4480" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6b7d.html?p=4480#p4480" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a></strong> &raquo; </span>Tue Nov 29, 2011 1:23 am
			</p>
			
			
			
			<div class="content">Can't believe I didn't find that myself I've been trying to figure this out for hours.  Thank you!</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4481" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4481">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdfb2.html?author_id=777&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 09, 2011 2:52 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4481">

						<h3 ><a href="#p4481">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting1dc3.html?mode=quote&amp;f=9&amp;p=4481" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic671c.html?p=4481#p4481" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a></strong> &raquo; </span>Tue Nov 29, 2011 2:58 am
			</p>
			
			
			
			<div class="content">Oh yes one other quick question; You dont happen to know if there are any GPU flags that need to be included in the input file to force the code to use a graphics card? I compiled ABINIT on a machine correctly on a GPU  machine but when i ran a rest it took exactly the same time?  Thanks in advance<br />Jack</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4489" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4489">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">david.waroquiers</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4b32.html?author_id=59&amp;sr=posts">138</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Aug 15, 2009 12:45 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4489">

						<h3 ><a href="#p4489">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7fc3.html?mode=quote&amp;f=9&amp;p=4489" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic77be.html?p=4489#p4489" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd179.html?mode=viewprofile&amp;u=59" class="username">david.waroquiers</a></strong> &raquo; </span>Tue Nov 29, 2011 10:49 am
			</p>
			
			
			
			<div class="content">Hello,<br /><br />The GPU enabled part will only be available in the next few weeks/months.<br /><br />David</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4506" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4506">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdfb2.html?author_id=777&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 09, 2011 2:52 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4506">

						<h3 ><a href="#p4506">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0821.html?mode=quote&amp;f=9&amp;p=4506" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic92cd-2.html?p=4506#p4506" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistac77.html?mode=viewprofile&amp;u=777" class="username">JackMedley</a></strong> &raquo; </span>Thu Dec 01, 2011 6:41 pm
			</p>
			
			
			
			<div class="content">Hello,<br />OK i've read through all that material and have started trying to run it in the  more parallel way, however when i try and run the code with the following added to my input file:<br /><br />paral_kgb 24<br />npkpt 3<br />npband 8<br />npfft 1<br />bandpp 1<br /><br />(running it on 6 nodes each with four processors) I get errors like:<br /><br /><br /> Subroutine Unknown:0:WARNING<br />   The second and third dimension of the FFT grid,    0    0  were imposed to be multiple of the number of processors for the FFT,   24<br /> For input ecut=  2.500000E+01 best grid ngfft=      36      48     120<br />       max ecut=  2.753148E+01<br /> However, must be changed due to symmetry =&gt;      48      48     120<br />       with max ecut=  0.325545E+02<br /><br /> ==== FFT mesh ====<br />  FFT mesh divisions ........................    48   48  120<br />  Augmented FFT divisions ...................    49   49  120<br />  FFT algorithm .............................   401<br />  FFT cache size ............................    16<br /> getmpw: optimal value of mpw=     709<br /><br /> getdim_nloc : deduce lmnmax  =  15, lnmax  =   3,<br />                      lmnmaxso=  15, lnmaxso=   3.<br /> setmqgrid : COMMENT -<br />  The number of points &quot;mqgrid&quot; in reciprocal space used for the<br />  description of the pseudopotentials has been set automatically<br />  by abinit to :     5258.<br /> memory : analysis of memory needs<br />================================================================================<br /> Values of the parameters that define the memory need for DATASET  1.<br />   intxc =         0  ionmov =         0    iscf =         7 xclevel =         1<br />  lmnmax =         3   lnmax =         3   mband =        52  mffmem =         1<br />P  mgfft =       120   mkmem =         1 mpssoang=         4     mpw =       709<br />  mqgrid =      5258   natom =        16    nfft =     11520    nkpt =         3<br />  nloalg =         4  nspden =         1 nspinor =         1  nsppol =         1<br />    nsym =        32  n1xccc =      2501  ntypat =         4  occopt =         3<br />================================================================================<br />P This job should need less than                      19.391 Mbytes of memory.<br />  Rough estimation (10% accuracy) of disk space for files :<br />  WF disk file :     40.506 Mbytes ; DEN or POT disk file :      0.090 Mbytes.<br />================================================================================<br /><br /> Biggest array : f_fftgr(disk), with      1.4083 MBytes.<br />-P-0000  leave_test : synchronization done...<br /> memana : allocated an array of      1.408 Mbytes, for testing purposes.<br /> memana : allocated      19.391 Mbytes, for testing purposes.<br /> The job will continue.<br />[node064:3504] *** An error occurred in MPI_Comm_free<br />[node064:3504] *** on communicator MPI_COMM_WORLD<br />[node064:3504] *** MPI_ERR_COMM: invalid communicator<br />[node064:3504] *** MPI_ERRORS_ARE_FATAL (your MPI job will now abort)<br />--------------------------------------------------------------------------<br />mpirun has exited due to process rank 13 with PID 18197 on<br />node node065.ic.cluster exiting without calling &quot;finalize&quot;. This may<br />have caused other processes in the application to be<br />terminated by signals sent by mpirun (as reported here).<br />--------------------------------------------------------------------------<br />[node059:25307] 23 more processes have sent help message help-mpi-errors.txt / mpi_errors_are_fatal<br />[node059:25307] Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages<br /><br /><br />I have also tried having paral_kgb -24 (as seems to be suggested by the variable list) but then I get:<br /><br /> symkpt : found identity, with number  1<br /> getkgrid : length of smallest supercell vector (bohr)=    2.155448E+01<br />       Simple Lattice Grid<br /> symkpt : found identity, with number  1<br /> getkgrid : length of smallest supercell vector (bohr)=    4.310897E+01<br />       Simple Lattice Grid<br /> symkpt : found identity, with number  1<br /> getkgrid : length of smallest supercell vector (bohr)=    6.466345E+01<br />       Simple Lattice Grid<br /> symkpt : found identity, with number  1<br /> getkgrid : length of smallest supercell vector (bohr)=    3.048264E+01<br />       Simple Lattice Grid<br /> symkpt : found identity, with number  1<br /> mpi_enreg%sizecart(1),np_fft           1           1<br /> mpi_enreg%sizecart(2),np_band           8           8<br /> mpi_enreg%sizecart(3),np_kpt           3           3<br /> in initmpi_grid : me_fft, me_band, me_kpt are           0           0           0<br /> invars1: mkmem  undefined in the input file. Use default mkmem  = nkpt<br /> invars1: With nkpt_me=    1 and mkmem  =     3, ground state wf handled in core.<br /> Resetting mkmem  to nkpt_me to save memory space.<br /> invars1: mkqmem undefined in the input file. Use default mkqmem = nkpt<br /> invars1: With nkpt_me=    1 and mkqmem =     3, ground state wf handled in core.<br /> Resetting mkqmem to nkpt_me to save memory space.<br /> invars1: mk1mem undefined in the input file. Use default mk1mem = nkpt<br /> invars1: With nkpt_me=    1 and mk1mem =     3, ground state wf handled in core.<br /> Resetting mk1mem to nkpt_me to save memory space.<br /><br /> COMMENT in invars1m For dataset=  10  a possible choice for less than   24 processors is:<br />  nproc    npkpt    npband     npfft    bandpp    weight<br />    24       3        8         1          1           1.00<br />    24       3        4         2          2           0.50<br />    18       3        3         2          4           0.25<br />    18       3        6         1          4           1.00<br />    12       3        4         1          2           1.00<br />    12       3        2         2          4           0.25<br />     9       3        3         1          4           1.00<br />     6       3        2         1          4           1.00<br /><br /> invars1m :  launch a parallel version of ABINIT with a number of processors among the above list, and the associated input variables npkpt, npband, npfft and bandpp.  The optimal weight is close to 1.<br />-P-0000<br />-P-0000  leave_new : decision taken to exit ...<br /><br />Am I doing something wrong in here?  Cheers<br />Jack</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4511" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4511">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist53cc.html?mode=viewprofile&amp;u=278" class="username">nleconte</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9de0.html?author_id=278&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Apr 17, 2010 6:52 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4511">

						<h3 ><a href="#p4511">Re: Automatic parallelising over datasets (jdtset)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcae1.html?mode=quote&amp;f=9&amp;p=4511" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopica1c3.html?p=4511#p4511" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist53cc.html?mode=viewprofile&amp;u=278" class="username">nleconte</a></strong> &raquo; </span>Fri Dec 02, 2011 3:16 pm
			</p>
			
			
			
			<div class="content">From what I understand, if you type : paral_kgb -24, it will give you the different combinations you can use to parallelize over 24 processors. What it does, see the list at the end of your file (you should chose one with a weight close to 1). <br /><br />Once you actually want to do the parallelization, you should put paral_kgb 1, which activates the parallelization over bands, fft, kpt and spinor. You should not put paral_kgb 24.<br /><br />But I may not be the reference in this, as I have some problem doing something similar myself, cfr another thread in this forum...</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingc37d.html?mode=reply&amp;f=9&amp;t=1449" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicdb93.html?f=9&amp;t=1449&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=9&amp;t=1449">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			7 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforumfdc5.html?f=9" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Ground state”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=4481 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:58 GMT -->
</html>
