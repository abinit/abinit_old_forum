<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=2726&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:58:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; segmentation fault occurred with tutorial input file</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>segmentation fault occurred with tutorial input file</h2>
		<p><a href="viewtopica717.html?f=19&amp;t=2726">https://forum.abinit.org/viewtopic.php?f=19&amp;t=2726</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Wed Jul 09, 2014 12:35 am</strong></div>
				<div class="author">by <strong>khoa</strong></div>
				<div class="content">Hello,<br />I got the segmentation fault message while I was doing the tutorial with input file tbase3_1.in. I hope you can give me some hints to correct it.<br />Below is the mesage from the log file:<br />================================================================================<br /> <br /> getcut: wavevector=  0.0000  0.0000  0.0000  ngfft=  20  20  20<br />         ecut(hartree)=      8.000   =&gt; boxcut(ratio)=   2.18216<br /> <br /> ITER STEP NUMBER     1<br /> vtorho : nnsclo_now=  2, note that nnsclo,dbl_nnsclo,istep=  0 0  1<br />forrtl: severe (174): SIGSEGV, segmentation fault occurred<br />Image              PC                Routine            Line        Source             <br />libirc.so          00007FE99CF9D2C9  Unknown               Unknown  Unknown<br />libirc.so          00007FE99CF9BB9E  Unknown               Unknown  Unknown<br />libifcore.so.5     00007FE99E67AF3F  Unknown               Unknown  Unknown<br />libifcore.so.5     00007FE99E5E2D7F  Unknown               Unknown  Unknown<br />libifcore.so.5     00007FE99E5F3F43  Unknown               Unknown  Unknown<br />libpthread.so.0    00007FE99CD83BB0  Unknown               Unknown  Unknown<br />libatlas.so.3      00007FE99F6EB450  Unknown               Unknown  Unknown</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Thu Jul 10, 2014 7:24 pm</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">Hi,<br /><br />Do you have the log file (standard output)?<br />Can you provide the configure file (.ac) used to configure and compile abinit ?<br />What is the OS/distribution you are using ?<br /><br />The more information we have, the better.<br /><br />Cheers,<br /><br />Jordan</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Sat Jul 12, 2014 4:39 am</strong></div>
				<div class="author">by <strong>khoa</strong></div>
				<div class="content">Thanks for your help. Below is my config file<br />    prefix=&quot;/home/khoa/abinit_781&quot;<br />    enable_mpi=&quot;yes&quot;<br />    enable_mpi_io=&quot;yes&quot;<br />    with_mpi_prefix=&quot;/usr/local&quot;<br />    with_netcdf_incs=&quot;-I/usr/include&quot;<br />    with_netcdf_libs=&quot;-L/usr/lib -lnetcdf -lnetcdff&quot;<br />    with_fft_flavor=&quot;fftw3&quot;<br />    with_fft_incs=&quot;-I/usr/include/&quot;<br />    with_fft_libs=&quot;-L/usr/lib/x86_64-linux-gnu/ -lfftw3 -lfftw3f&quot;<br />    #with_trio_flavor=&quot;netcdf+etsf_io&quot;<br />    #with_etsf_io_incs=&quot;-I/usr/include&quot;<br />    #with_etsf_io_libs=&quot;-L/usr/lib -letsf_io_low_level -letsf_io_utils -letsf_io&quot;<br />    with_linalg_flavor=&quot;atlas&quot;<br />    with_linalg_libs=&quot;-L/usr/lib -llapack -lf77blas -lcblas -latlas&quot;<br />    #with_dft_flavor=&quot;atompaw+libxc&quot;<br />    with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />    enable_gw_dpc=&quot;yes&quot;<br />    #enable_maintainer_checks=&quot;no&quot;<br />    #enable_test_timeout=&quot;yes&quot;<br />    #enable_gui_build=&quot;no&quot;<br />Intel Compiler and Openmpi were used on Linux Ubuntu 13.10 64bit<br />Also, attached is the log file.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Sat Jul 12, 2014 3:28 pm</strong></div>
				<div class="author">by <strong>khoa</strong></div>
				<div class="content">Attached is the config.log for your convenience. Thanks.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Sat Jul 12, 2014 8:36 pm</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">Here is my suggestion.<br /><br />A few weeks ago I encoutered the same problem and solved it as explained now.<br />1) You are using the intel compiler which includes the MKL library optimized for intel cpu therefore you should use it.<br />2) I think the seg fault occures because of the fftw3 that uses the libfftw3 instead of the fftw3 in the MKL (don't ask me why).<br />I could get the libfftw3 working with intel compiler only if I configure and compile first with MKL as linalg and FFT and then reconfigure with the MKL and remaking what has changed (not much). (Or something like this I don't remerber the sequence, it's a bit confusing sorry)<br /><br />Anyway,  my suggestion is configure with<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_incs=&quot;with_linalg_incs=&quot;-I${MKLROOT}/include/&quot;<br />with_linalg_libs=&quot;-L${MKLROOT}/lib/intel64/ -lmkl_blas95_lp64 -lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_core -lmkl_sequential -lpthread -lm&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot;-L${MKLROOT}/lib/intel64/ -Wl,--start-group -lmkl_intel_lp64 -lmkl_core -lmkl_sequential -Wl,--end-group&quot;<br /></code></pre></div><br /><br />You may need to change the incs and libs options according to your installation but those are what I use on Ubuntu 13.10 with the intel14 compiler, like you.<br /><br />This should result in a more efficient and faster executable than the one you got.<br />Tell me if it solves the problem.<br /><br />Cheers,<br /><br />Jordan</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Sun Jul 13, 2014 1:58 am</strong></div>
				<div class="author">by <strong>khoa</strong></div>
				<div class="content">Problem solved!!!<br />Thanks for your help, Jordan.<br /><br />Cheers,<br />Khoa</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: segmentation fault occurred with tutorial input file</h3>
				<div class="date">Posted: <strong>Tue Aug 26, 2014 11:49 am</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">There is a namespace conflict between FFTW3 and MKL. The latter is using identical routine names than the former but with a different way of handling the parameters. This means that you cannot mix FFTW3 and MKL.<br /><br />This will be fixed in the build system of Abinit 8.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=2726&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:58:39 GMT -->
</html>
