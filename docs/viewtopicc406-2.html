<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=11438 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:12:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>defective inter-node parallelism with 2017 Intel compilers - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopic32f9.html?t=3801">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic19fb.html?f=3&amp;t=3801">defective inter-node parallelism with 2017 Intel compilers</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="postingdd23.html?mode=reply&amp;f=3&amp;t=3801" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic0d4b-2.html?f=3&amp;t=3801&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="3801" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			10 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p11438" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11438">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search97d3.html?author_id=846&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Nov 09, 2011 2:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11438">

						<h3 class="first"><a href="#p11438">defective inter-node parallelism with 2017 Intel compilers</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting8f6f-2.html?mode=quote&amp;f=3&amp;p=11438" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc406-2.html?p=11438#p11438" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a></strong> &raquo; </span>Tue Mar 20, 2018 1:20 pm
			</p>
			
			
			
			<div class="content">Hello!<br /><br />After trying a lot to solve this, I thought to ask help on this forum as well. Thank you in advance for your advice.<br /><br />I would like to start using a system that only has the compilers from Intel Composer 2017. Have configured as suggested by the Intel MKL advisor and I can get the abinit executables. The behavior I notice is that abinit calculates OK when running with processors of a single node, but whenever I to use &gt;1 nodes, either the geometry relaxation refuses to converge after a few Broyden steps, crashes after a few Broyden steps, or the calculation completes, but in a longer time than in case of using a single node. So, intra-node parallelism is OK, but inter-node parallelism is not. The behavior is essentially the same with abinit versions 7.8.1, 8.2.2 and 8.6.3.<br /><br />If I compile same versions of abinit using compilers of Intel Composer 2013 (on another platform that accepts both 2013 and 2017 versions) , it is all OK: my test calculations converge and the time reasonably scales with the number of processors used. And the 2017 compilers still don't provide me with executables that run well on more than 1 node on that platform too.<br /><br />It might also be relevant to mention that I always need to do some tricks to allow the ./configure to recognize the Intel compilers. In addition to specifying the MPI prefix, I have to manually replace mpif90-&gt; mpiiforc etc (similar for C and C++) inside the configure file, and also specify with_fc_vendor=&quot;intel&quot;, with_fc_version=&quot;17.0.5&quot; etc (similar for C and C++) in the .ac file. If I don't do the above, either the configuration fails or I must manually copy all the .mod files gradually generated in /src directories in the src/mods or src/incs directory in order for the compilation to succeed. I wonder if some irregular behavior is not caused by the configure script being unable to recognize the compilers by itself as it should... though again, using 2013 compilers it always runs OK.<br /><br />I can provide more details (log files or specific build options used) if someone has an idea about what could be done in order to make inter-node parallelism work with 2017 Intel compilers. <br /><br />I have seen that someone reported some issues when using more than 1 node back in 2012, though that was for 2013 Intel compilers that in my case work fine, and also I don't always get job crashes. Thus the cause is probably different.<br /><br /><!-- l --><a class="postlink-local" href="viewtopicff1d.html?f=3&amp;t=1851">viewtopic.php?f=3&amp;t=1851</a><!-- l --><br /><br />Many thanks for reading and for any clues.<br />Dan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11440" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11440">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content11440">

						<h3 ><a href="#p11440">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf8a8.html?mode=quote&amp;f=3&amp;p=11440" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic5317.html?p=11440#p11440" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Tue Mar 20, 2018 8:17 pm
			</p>
			
			
			
			<div class="content">Dear danric,<br />This is probably related to compilation flags you are using. Could you send your config.ac file or the list of config flags you are using?<br />On which architecture/processors are you running on?<br />Best wishes,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11441" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11441">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content11441">

						<h3 ><a href="#p11441">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb0f9.html?mode=quote&amp;f=3&amp;p=11441" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic47d5.html?p=11441#p11441" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Tue Mar 20, 2018 9:35 pm
			</p>
			
			
			
			<div class="content">This post might help in solving your problem:<br /><a href="viewtopic6d33.html?f=3&amp;t=3391&amp;p=10348#p10348" class="postlink">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3391&amp;p=10348#p10348</a><br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11443" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11443">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search97d3.html?author_id=846&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Nov 09, 2011 2:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11443">

						<h3 ><a href="#p11443">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6e5b.html?mode=quote&amp;f=3&amp;p=11443" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic3133.html?p=11443#p11443" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a></strong> &raquo; </span>Wed Mar 21, 2018 5:56 pm
			</p>
			
			
			
			<div class="content">Thank you, Eric, for your kindness.<br /><br />I was indeed very hopeful to try the enable_avx_safe_mode option as suggested in that post, but unfortunately the behavior is still not right. For abinit v863, it's OK when running on 1 node (18 processors), and refuses to converge while doing even the first relaxation step of my test case, when running with 36 processors on 2 nodes. <br /><br />I run abinit on a Intel Xeon E5-2670v2 cluster and also trying one with Intel Xeon Gold 6126 processors. For first one I can run OK with 2013 Intel compilers, but only have 2017 compilers for the 2nd, which means that I can only use 1 node there. <br /><br />Here are the key options in my .ac file that I usually set. These build options are the result of my reading of internet and experience with compiling abinit (some of these might be overkill, but probably they don't harm). I have also used -O2 instead of -O3, with no improvement in the described behavior.<br /><br />enable_optim=&quot;yes&quot;<br />CFLAGS_OPTIM='-O3 -mtune=native -march=native -xHost'<br />CXXFLAGS_OPTIM='-O3 -mtune=native -march=native -xHost'<br />FCFLAGS_OPTIM='-O3 -mtune=native -march=native -xHost'<br />enable_mpi=&quot;yes&quot;<br />with_mpi_prefix=&quot;...... etc /intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot; -lmkl_scalapack_ilp64 -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot; -lmkl_scalapack_ilp64 -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />FCFLAGS_EXTRA=&quot; -mkl=parallel&quot;<br />CFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br />CXXFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br />with_fc_vendor=&quot;intel&quot;<br />with_fc_version=&quot;17.0.5&quot;<br />with_cc_vendor=&quot;intel&quot;<br />with_cc_version=&quot;17.0.5&quot;<br />with_cxx_vendor=&quot;intel&quot;<br />with_cxx_version=&quot;17.0.5&quot;<br />  <br />And here is some build information as printed in the log file of a calculation job.<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /> <br /> === Build Information === <br />  Version       : 8.6.3<br />  Build target  : x86_64_linux_intel17.0<br />  Build date    : 20180307<br /> <br /> === Compiler Suite === <br />  C compiler       : gnu<br />  C++ compiler     : gnu17.0<br />  Fortran compiler : intel17.0<br />  CFLAGS           :  -g -O3 -mtune=native -march=native -xHost   -DMKL_ILP64 -mkl=parallel<br />  CXXFLAGS         :  -g -O3 -mtune=native -march=native -xHost   -DMKL_ILP64 -mkl=parallel<br />  FCFLAGS          :  -g   -mkl=parallel<br />  FC_LDFLAGS       : <br /> <br /> === Optimizations === <br />  Debug level        : basic<br />  Optimization level : yes<br />  Architecture       : intel_xeon<br /> <br /> === Multicore === <br />  Parallel build : yes<br />  Parallel I/O   : auto<br />  openMP support : no<br />  GPU support    : no<br /> <br /> === Connectors / Fallbacks === <br />  Connectors on : yes<br />  Fallbacks on  : yes<br />  DFT flavor    : none<br />  FFT flavor    : fftw3<br />  LINALG flavor : mkl<br />  MATH flavor   : none<br />  TIMER flavor  : abinit<br />  TRIO flavor   : none<br /> <br /> === Experimental features === <br />  Bindings            : @enable_bindings@<br />  Exports             : no<br />  GW double-precision : no<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /> Default optimizations:<br />   -O3 -mtune=native -march=native -xHost<br /><br /> Optimizations for 20_datashare:<br />   -O0<br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /> CPP options activated during the build:<br />                    CC_GNU                   CXX_GNU                  FC_INTEL<br /> HAVE_FC_ALLOCATABLE_DT...             HAVE_FC_ASYNC  HAVE_FC_COMMAND_ARGUMENT<br />      HAVE_FC_COMMAND_LINE        HAVE_FC_CONTIGUOUS           HAVE_FC_CPUTIME<br />             HAVE_FC_ETIME              HAVE_FC_EXIT             HAVE_FC_FLUSH<br />             HAVE_FC_GAMMA            HAVE_FC_GETENV            HAVE_FC_GETPID<br />   HAVE_FC_IEEE_EXCEPTIONS             HAVE_FC_IOMSG     HAVE_FC_ISO_C_BINDING<br />  HAVE_FC_ISO_FORTRAN_2008        HAVE_FC_LONG_LINES        HAVE_FC_MOVE_ALLOC<br />           HAVE_FC_PRIVATE         HAVE_FC_PROTECTED         HAVE_FC_STREAM_IO<br />            HAVE_FC_SYSTEM                  HAVE_FFT            HAVE_FFT_FFTW3<br />              HAVE_FFT_MPI           HAVE_FFT_SERIAL        HAVE_LIBPAW_ABINIT<br />      HAVE_LIBTETRA_ABINIT               HAVE_LINALG         HAVE_LINALG_AXPBY<br />        HAVE_LINALG_GEMM3M  HAVE_LINALG_MKL_IMATCOPY   HAVE_LINALG_MKL_OMATADD<br />  HAVE_LINALG_MKL_OMATCOPY   HAVE_LINALG_MKL_THREADS           HAVE_LINALG_MPI<br />        HAVE_LINALG_SERIAL                  HAVE_MPI                 HAVE_MPI2<br />       HAVE_MPI_IALLREDUCE        HAVE_MPI_IALLTOALL       HAVE_MPI_IALLTOALLV<br />        HAVE_MPI_INTEGER16               HAVE_MPI_IO HAVE_MPI_TYPE_CREATE_S...<br />             HAVE_OS_LINUX         HAVE_TIMER_ABINIT              USE_MACROAVE<br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br />One thing I don't get is why the C and C++ compilers are recognized as GNU variety even though I think that I did everything to ensure they are seen as Intel's (which should perhaps be done automatically, but never mind). Probably this is not the cause of the defective inter-node paralelism, though I am not sure. <br /><br />Many thanks again if you, Eric, or someone else could share some ideas about what I may be doing wrong or could try to solve the inter-node parallelism issue.<br /><br />Dan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11444" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11444">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search82c3.html?author_id=682&amp;sr=posts">469</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 19, 2011 11:13 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> University of Liege, Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content11444">

						<h3 ><a href="#p11444">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0d94.html?mode=quote&amp;f=3&amp;p=11444" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopice366.html?p=11444#p11444" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist58ee.html?mode=viewprofile&amp;u=682" class="username">ebousquet</a></strong> &raquo; </span>Wed Mar 21, 2018 8:09 pm
			</p>
			
			
			
			<div class="content">Dear Dan,<br />We'll try to solve this problem. Intel17 has more optimizations than 2013 by default, which speedup the calculations but also can add noise that make the code diverging, mostly the relaxations is indeed affected (also observed on other codes)... <br />It is indeed strange that it does not recognize your intel C compiler, maybe you could force him by specifying the compiler directly, for example:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CC=mpiicc <br />CXX=mpiicpc <br />FC=mpiifort</code></pre></div><br /><br />Could you try to compile with the following compilation flags, it helped in my case with intel17 and Xeon:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FCFLAGS=&quot;-O2 -axCORE-AVX2 -xavx -mkl -fp-model precise&quot; <br />FFLAGS=&quot;-O2 -axCORE-AVX2 -xavx -mkl -fp-model precise&quot; <br />CFLAGS=&quot;-O2 -axCORE-AVX2 -xavx -mkl -fp-model precise&quot; <br />CXXFLAGS=&quot;-O2 -axCORE-AVX2 -xavx -mkl -fp-model precise&quot; </code></pre></div><br /><br />And in my case I'm using the following (sounds similar to yours):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;<br />--with-fc-vendor=intel <br />--with-fft-flavor=fftw3-mkl <br />--with-fft-libs=&quot;-lmkl_intel_lp64 -lmkl_sequential -lmkl_core&quot; <br />--with-linalg-flavor=&quot;mkl+scalapack&quot; <br />--with-linalg-libs=&quot;-lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_lp64 -lpthread -lm -ldl&quot; <br />--enable-mpi --enable-mpi-inplace --enable-mpi-io <br />--enable-zdot-bugfix --enable-avx-safe-mode --enable-fallbacks </code></pre></div><br /><br />Let me know how it goes, mostly with the compilation flags.<br />Best wishes,<br />Eric</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11447" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11447">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search97d3.html?author_id=846&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Nov 09, 2011 2:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11447">

						<h3 ><a href="#p11447">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcab4.html?mode=quote&amp;f=3&amp;p=11447" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc73b.html?p=11447#p11447" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a></strong> &raquo; </span>Thu Mar 22, 2018 6:09 pm
			</p>
			
			
			
			<div class="content">Hello again, Eric, and thank you.<br /><br />First, the only thing that works so that I can access mpiifort and the others (instead of mpif90, mpicc and mpicxx) is to directly change those inside the &quot;configure&quot; file. As mentioned, it does not apparently recognize mpiicc and mpiicpc as Intel compilers, but I think that these are the ones that are used for compiling. And the fortran compiler is seen as Intel's (though if I don't use the &quot;with-vendor=intel&quot; flag I still run into trouble with not copying the mods file in their directory and the build stops).<br /><br />I have tried, today, and years ago, to do the same using FC=mpiifort etc, but for some reason doing so still wraps to the GNU variety of compilers . Technically, the FC is listed as wrap-mpifc in config.log, and inside that I see the FC= as set by me, followed by &quot;export FC&quot; which then goes to the mpif90. So I concluded that it can't be helped using FC=, CC= and CXX=, and I was happy to find the solution to modify those inside &quot;configure&quot;.<br /><br />Now, back to the parallelization issue. I have tried the flags you suggested and although there are other combinations of them to try if inspiration dries out, unfortunately the one silver bullet that would solve this issue is still elusive. Although not using the exact linear algebra and fft library options that you suggested, I compiled with the flags that apparently worked in your case. Though there are some complaints/warnings when compiling many F90 programs during &quot;make&quot;, the build doesn't stop and I can get the executables. <br /><br />The single node calculation runs OK though a bit slower than before, and the 2-node still doesn't converge (perhaps I should mention that when going from 1 node to 2 nodes the variable that is doubled is the one related to the band parallelization &quot;npband&quot;).<br /><br />Here is proof that the executables obtained have indeed used the flags that worked for you.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;<br />&nbsp;=== Build Information === <br />&nbsp; Version&nbsp; &nbsp; &nbsp; &nbsp;: 8.6.3<br />&nbsp; Build target&nbsp; : x86_64_linux_intel17.0<br />&nbsp; Build date&nbsp; &nbsp; : 20180322<br />&nbsp;<br />&nbsp;=== Compiler Suite === <br />&nbsp; C compiler&nbsp; &nbsp; &nbsp; &nbsp;: gnu<br />&nbsp; C++ compiler&nbsp; &nbsp; &nbsp;: gnu17.0<br />&nbsp; Fortran compiler : intel17.0<br />&nbsp; CFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: -O2 -axCORE-AVX2 -xavx -mkl -fp-model precise<br />&nbsp; CXXFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: -O2 -axCORE-AVX2 -xavx -mkl -fp-model precise<br />&nbsp; FCFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : -O2 -axCORE-AVX2 -xavx -mkl -fp-model precise<br />&nbsp; FC_LDFLAGS&nbsp; &nbsp; &nbsp; &nbsp;: <br />&nbsp;<br />&nbsp;=== Optimizations === <br />&nbsp; Debug level&nbsp; &nbsp; &nbsp; &nbsp; : basic<br />&nbsp; Optimization level : yes<br />&nbsp; Architecture&nbsp; &nbsp; &nbsp; &nbsp;: intel_xeon<br />&nbsp;<br />&nbsp;=== Multicore === <br />&nbsp; Parallel build : yes<br />&nbsp; Parallel I/O&nbsp; &nbsp;: auto<br />&nbsp; openMP support : no<br />&nbsp; GPU support&nbsp; &nbsp; : no<br />&nbsp;<br />&nbsp;=== Connectors / Fallbacks === <br />&nbsp; Connectors on : yes<br />&nbsp; Fallbacks on&nbsp; : yes<br />&nbsp; DFT flavor&nbsp; &nbsp; : none<br />&nbsp; FFT flavor&nbsp; &nbsp; : fftw3<br />&nbsp; LINALG flavor : mkl<br />&nbsp; MATH flavor&nbsp; &nbsp;: none<br />&nbsp; TIMER flavor&nbsp; : abinit<br />&nbsp; TRIO flavor&nbsp; &nbsp;: none<br />&nbsp;<br />&nbsp;=== Experimental features === <br />&nbsp; Bindings&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : @enable_bindings@<br />&nbsp; Exports&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: no<br />&nbsp; GW double-precision : no<br />&nbsp;<br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;<br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;Default optimizations:<br />&nbsp; &nbsp;--- None ---<br /><br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;CPP options activated during the build:<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CC_GNU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CXX_GNU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FC_INTEL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_AVX_SAFE_MODE HAVE_FC_ALLOCATABLE_DT...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_ASYNC<br />&nbsp;<br />&nbsp; HAVE_FC_COMMAND_ARGUMENT&nbsp; &nbsp; &nbsp; HAVE_FC_COMMAND_LINE&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_CONTIGUOUS<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_CPUTIME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_ETIME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_EXIT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_FLUSH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_GAMMA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_GETENV<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_GETPID&nbsp; &nbsp;HAVE_FC_IEEE_EXCEPTIONS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_IOMSG<br />&nbsp;<br />&nbsp; &nbsp; &nbsp;HAVE_FC_ISO_C_BINDING&nbsp; HAVE_FC_ISO_FORTRAN_2008&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_LONG_LINES<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_MOVE_ALLOC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_PRIVATE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_PROTECTED<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_STREAM_IO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_SYSTEM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT_FFTW3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT_MPI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FFT_SERIAL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LIBPAW_ABINIT&nbsp; &nbsp; &nbsp; HAVE_LIBTETRA_ABINIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG_AXPBY&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LINALG_GEMM3M&nbsp; HAVE_LINALG_MKL_IMATCOPY<br />&nbsp;<br />&nbsp; &nbsp;HAVE_LINALG_MKL_OMATADD&nbsp; HAVE_LINALG_MKL_OMATCOPY&nbsp; &nbsp;HAVE_LINALG_MKL_THREADS<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG_MPI&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LINALG_SERIAL&nbsp; &nbsp; &nbsp;HAVE_LINALG_ZDOTC_B*G<br />&nbsp;<br />&nbsp; &nbsp; &nbsp;HAVE_LINALG_ZDOTU_B*G&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI2<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI2_INPLACE&nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IALLREDUCE&nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI_IALLTOALL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IALLTOALLV&nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI_INTEGER16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IO<br />&nbsp;<br />&nbsp;HAVE_MPI_TYPE_CREATE_S...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_OS_LINUX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_TIMER_ABINIT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; USE_MACROAVE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /></code></pre></div><br /><br />And I also tried a combination with my original compilation flags (there were some complaints in config.log about using -xHost and -march=native together with your suggested flags, so I removed those), with same behavior as with above options. <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>=== Build Information === <br />&nbsp; Version&nbsp; &nbsp; &nbsp; &nbsp;: 8.6.3<br />&nbsp; Build target&nbsp; : x86_64_linux_intel17.0<br />&nbsp; Build date&nbsp; &nbsp; : 20180322<br />&nbsp;<br />&nbsp;=== Compiler Suite === <br />&nbsp; C compiler&nbsp; &nbsp; &nbsp; &nbsp;: gnu<br />&nbsp; C++ compiler&nbsp; &nbsp; &nbsp;: gnu17.0<br />&nbsp; Fortran compiler : intel17.0<br />&nbsp; CFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; -g -O2 -mtune=native -axCORE-AVX2 -xavx -mkl -fp-model precise&nbsp; &nbsp;-DMKL_ILP64 -mkl=parallel<br />&nbsp; CXXFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:&nbsp; -g -O2 -mtune=native -axCORE-AVX2 -xavx -mkl -fp-model precise&nbsp; &nbsp;-DMKL_ILP64 -mkl=parallel<br />&nbsp; FCFLAGS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :&nbsp; -g&nbsp; &nbsp;-mkl=parallel<br />&nbsp; FC_LDFLAGS&nbsp; &nbsp; &nbsp; &nbsp;: <br />&nbsp;<br />&nbsp;=== Optimizations === <br />&nbsp; Debug level&nbsp; &nbsp; &nbsp; &nbsp; : basic<br />&nbsp; Optimization level : yes<br />&nbsp; Architecture&nbsp; &nbsp; &nbsp; &nbsp;: intel_xeon<br />&nbsp;<br />&nbsp;=== Multicore === <br />&nbsp; Parallel build : yes<br />&nbsp; Parallel I/O&nbsp; &nbsp;: auto<br />&nbsp; openMP support : no<br />&nbsp; GPU support&nbsp; &nbsp; : no<br />&nbsp;<br />&nbsp;=== Connectors / Fallbacks === <br />&nbsp; Connectors on : yes<br />&nbsp; Fallbacks on&nbsp; : yes<br />&nbsp; DFT flavor&nbsp; &nbsp; : none<br />&nbsp; FFT flavor&nbsp; &nbsp; : fftw3<br />&nbsp; LINALG flavor : mkl<br />&nbsp; MATH flavor&nbsp; &nbsp;: none<br />&nbsp; TIMER flavor&nbsp; : abinit<br />&nbsp; TRIO flavor&nbsp; &nbsp;: none<br />&nbsp;<br />&nbsp;=== Experimental features === <br />&nbsp; Bindings&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : @enable_bindings@<br />&nbsp; Exports&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: no<br />&nbsp; GW double-precision : no<br />&nbsp;<br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;<br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;Default optimizations:<br />&nbsp; &nbsp;-O2 -mtune=native -axCORE-AVX2 -xavx -mkl -fp-model precise<br /><br /><br />&nbsp;Optimizations for 20_datashare:<br />&nbsp; &nbsp;-O0<br /><br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /><br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />&nbsp;CPP options activated during the build:<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CC_GNU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CXX_GNU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FC_INTEL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_AVX_SAFE_MODE HAVE_FC_ALLOCATABLE_DT...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_ASYNC<br />&nbsp;<br />&nbsp; HAVE_FC_COMMAND_ARGUMENT&nbsp; &nbsp; &nbsp; HAVE_FC_COMMAND_LINE&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_CONTIGUOUS<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_CPUTIME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_ETIME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_EXIT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_FLUSH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_GAMMA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_GETENV<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_GETPID&nbsp; &nbsp;HAVE_FC_IEEE_EXCEPTIONS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_IOMSG<br />&nbsp;<br />&nbsp; &nbsp; &nbsp;HAVE_FC_ISO_C_BINDING&nbsp; HAVE_FC_ISO_FORTRAN_2008&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_LONG_LINES<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_MOVE_ALLOC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_PRIVATE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_PROTECTED<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FC_STREAM_IO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FC_SYSTEM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT_FFTW3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_FFT_MPI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_FFT_SERIAL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LIBPAW_ABINIT&nbsp; &nbsp; &nbsp; HAVE_LIBTETRA_ABINIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG_AXPBY&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LINALG_GEMM3M&nbsp; HAVE_LINALG_MKL_IMATCOPY<br />&nbsp;<br />&nbsp; &nbsp;HAVE_LINALG_MKL_OMATADD&nbsp; HAVE_LINALG_MKL_OMATCOPY&nbsp; &nbsp;HAVE_LINALG_MKL_THREADS<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_LINALG_MPI&nbsp; &nbsp; &nbsp; &nbsp; HAVE_LINALG_SERIAL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI2&nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IALLREDUCE&nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI_IALLTOALL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IALLTOALLV&nbsp; &nbsp; &nbsp; &nbsp; HAVE_MPI_INTEGER16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_MPI_IO<br />&nbsp;<br />&nbsp;HAVE_MPI_TYPE_CREATE_S...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_OS_LINUX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HAVE_TIMER_ABINIT<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; USE_MACROAVE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /></code></pre></div><br /><br />I value your continued advice, with the hope that perhaps we could still identify some compilation flags that could, as a first step at least, essentially &quot;downgrade&quot; the optimized vectorization or whatever of 2017 version compilers to an earlier version such as 2013. If you can't think of other obvious things to try, learning more about the compilation flags you suggested might be a good starting point for me to find others that could help.<br /><br />On the other hand, I worry if my issues are not due to the architecture or OS etc implementation on the system I use, which could reduce the chance of finding a solution in a reasonable time. You mention that there are similar issues with other codes too, but if you and apparently most of everyone else have found solutions (otherwise there would probably be more outcry about the performance of recent Intel compilers), I guess that either the solution should soon be found in my case too, or not at all...<br /><br />Many thanks for spending your precious time to help me and I will try anything you suggest could work.<br /><br />best wishes,<br />Dan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11450" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11450">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11450">

						<h3 ><a href="#p11450">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6984.html?mode=quote&amp;f=3&amp;p=11450" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc29b.html?p=11450#p11450" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Mon Mar 26, 2018 11:04 am
			</p>
			
			
			
			<div class="content">Hi,<br /><br />My opinion is that there is something with you MPI installation.<br />0) Remove optimization and scalapack<br />1) Check that the MPI you use was compiled with intel 17 and not an other version of intel nor gnu.<br />2) Check the optimizations of the MPI with your admin. There might be some variables used to accelerate communication and thus decrease accuracy.<br />3) Don't use you fancy flags, try the basic one (which make the configure fail) and send us the config.log file<br /><br />cheers</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11451" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11451">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search97d3.html?author_id=846&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Nov 09, 2011 2:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11451">

						<h3 ><a href="#p11451">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting3086.html?mode=quote&amp;f=3&amp;p=11451" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic1496.html?p=11451#p11451" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a></strong> &raquo; </span>Mon Mar 26, 2018 1:35 pm
			</p>
			
			
			
			<div class="content">Hi and thank you for taking this on systematically.<br /><br />Well, I think that doing some of what you are suggesting kinda sets us back to issues I thought I found solutions for and might take even more time to figure out, but let's try.<br /><br />Alright, I removed all optimization flags (and everything that Eric suggested), and scalapack (not sure if you wanted me to give up Intel MKL and FFTW3 altogether, so for now I kept some of the options indicated by the MKL advisory), so now the .ac looks as follows:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FC=mpiifort<br />CC=mpiicc<br />CXX=mpiicpc<br />enable_mpi=&quot;yes&quot;<br />with_mpi_prefix=&quot;/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot; -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot; -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />FCFLAGS_EXTRA=&quot; -mkl=parallel&quot;<br />CFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br />CXXFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br /></code></pre></div><br /><br />With this, the ./configure fails at the point where it realizes that the GNU compilers (yes, Intel's are not recognized) don't have an iso_C_binding_module. The config.log in this case is here:<br /><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file0b3e.php?id=1539">configGNU.log</a></dt>
						<dd>(168.33 KiB) Downloaded 407 times</dd>
		</dl>
		
		
			</div><br /><br />I mentioned before that I can make the ./configure recognize the mpi Intel compilers if I manually modify the &quot;configure&quot; file (instead of FC=mpiifort, CC=mpiicc, CXX=mpiicpc, I just do mpif90-&gt;mpiifort etc). Then, with the .ac below:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_mpi=&quot;yes&quot;<br />with_mpi_prefix=&quot;/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot; -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot; -lmkl_cdft_core -lmkl_blacs_intelmpi_ilp64 -liomp5 -lpthread -lm -ldl&quot;<br />FCFLAGS_EXTRA=&quot; -mkl=parallel&quot;<br />CFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br />CXXFLAGS_EXTRA=&quot; -DMKL_ILP64 -mkl=parallel&quot;<br /></code></pre></div><br /><br />I get the following config.log file:<br /><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/filec252.php?id=1540">configINTEL.log</a></dt>
						<dd>(182.12 KiB) Downloaded 420 times</dd>
		</dl>
		
		
			</div><br /><br />In this case, the ./configure completes. According to the config.log file, the mpiicc, mpiifort and mpiicpc are apparently used as intended, yet the compiler type is mistaken: GNU type for C and C++ and Generic0.0 for Fortran. <br /><br />It is particularly critical, I think,  that the fortran compiler type is not recognized at Intel's, because the &quot;make&quot; stops soon after starting, at the point below:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;...&#93;<br />ranlib lib14_hidewrite.a<br />make&#91;1&#93;: ?????? `/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/src/14_hidewrite' ?????<br />cd src/16_hideleave &amp;&amp; make lib16_hideleave.a<br />make&#91;1&#93;: ?????? `/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/src/16_hideleave' ?????<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/10_dumpinfo -I../../src/10_dumpinfo -I../../src/12_hide_mpi -I../../src/12_hide_mpi -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/10_defs -I../../src/10_defs -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o leave_new.o leave_new.F90<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/10_dumpinfo -I../../src/10_dumpinfo -I../../src/12_hide_mpi -I../../src/12_hide_mpi -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/10_defs -I../../src/10_defs -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o m_xieee.o m_xieee.F90<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/10_dumpinfo -I../../src/10_dumpinfo -I../../src/12_hide_mpi -I../../src/12_hide_mpi -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/10_defs -I../../src/10_defs -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o interfaces_16_hideleave.o interfaces_16_hideleave.F90<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/10_dumpinfo -I../../src/10_dumpinfo -I../../src/12_hide_mpi -I../../src/12_hide_mpi -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/10_defs -I../../src/10_defs -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o m_errors.o m_errors.F90<br />rm -f lib16_hideleave.a<br />ar rc lib16_hideleave.a leave_new.o m_xieee.o m_errors.o interfaces_16_hideleave.o<br />ranlib lib16_hideleave.a<br />make&#91;1&#93;: ?????? `/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/src/16_hideleave' ?????<br />cd src/17_libtetra_ext &amp;&amp; make lib17_libtetra_ext.a<br />make&#91;1&#93;: ?????? `/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/src/17_libtetra_ext' ?????<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/16_hideleave -I../../src/16_hideleave -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o m_kptrank.o m_kptrank.F90<br />/octfs/apl/intel/compilers_and_libraries_2017.5.239/linux/mpi/intel64/bin/mpiifort -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/11_memory_mpi -I../../src/11_memory_mpi -I../../src/16_hideleave -I../../src/16_hideleave -I../../src/14_hidewrite -I../../src/14_hidewrite -I../../src/incs -I../../src/incs -I/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/fallbacks/exports/include&nbsp; &nbsp; -g&nbsp; &nbsp;-mkl=parallel&nbsp; -c -o interfaces_17_libtetra_ext.o interfaces_17_libtetra_ext.F90<br />m_kptrank.F90(29): ??? #7002: ????????????????????????????INCLUDE ????????????&nbsp; &nbsp;&#91;DEFS_BASIS&#93;<br />&nbsp;use m_profiling_abi<br />-----^<br />m_kptrank.F90(30): ??? #6580: ??????????????????&nbsp; &nbsp;&#91;MSG_HNDL&#93;<br />&nbsp;use m_errors, only : msg_hndl<br />----------------------^<br />m_kptrank.F90(160): ??? #6632: ?????????????????????????????&nbsp; &nbsp;&#91;FILE&#93;<br />&nbsp; &nbsp; &nbsp;call msg_hndl(msg,&quot;ERROR&quot;, &quot;PERS&quot; ,file=&quot;m_kptrank.F90&quot;, line=160)<br />----------------------------------------^<br />m_kptrank.F90(160): ??? #6632: ?????????????????????????????&nbsp; &nbsp;&#91;LINE&#93;<br />&nbsp; &nbsp; &nbsp;call msg_hndl(msg,&quot;ERROR&quot;, &quot;PERS&quot; ,file=&quot;m_kptrank.F90&quot;, line=160)<br />--------------------------------------------------------------^<br />m_kptrank.F90(171): ??? #6632: ?????????????????????????????&nbsp; &nbsp;&#91;FILE&#93;<br />&nbsp; &nbsp; &nbsp;call msg_hndl(msg,&quot;ERROR&quot;, &quot;PERS&quot; ,file=&quot;m_kptrank.F90&quot;, line=171)<br />----------------------------------------^<br />m_kptrank.F90(171): ??? #6632: ?????????????????????????????&nbsp; &nbsp;&#91;LINE&#93;<br />&nbsp; &nbsp; &nbsp;call msg_hndl(msg,&quot;ERROR&quot;, &quot;PERS&quot; ,file=&quot;m_kptrank.F90&quot;, line=171)<br />--------------------------------------------------------------^<br />m_kptrank.F90(288): ??? #6406: ?????????????????????????&nbsp; &nbsp;&#91;MSG_HNDL&#93;<br />&nbsp; &nbsp;call msg_hndl(msg,&quot;ERROR&quot;, &quot;PERS&quot; ,file=&quot;m_kptrank.F90&quot;, line=288)<br />--------^<br />?????? m_kptrank.F90 ????????? (??? 1)?<br />make&#91;1&#93;: *** &#91;m_kptrank.o&#93; ??? 1<br />make&#91;1&#93;: ?????? `/octfs/home/d45678/abinit/v863_octG/abinit-8.6.3/src/17_libtetra_ext' ?????<br />make: *** &#91;abinit&#93; ??? 2<br /></code></pre></div><br /><br />Several years ago I figured out that I can still obtain the executables if I manually copy all the .mod files that are created in each directory of /src to /incs or /mods directory. So doing allows me to obtain the executables, yet the compile type of &quot;abinit&quot; will be marked as &quot;prepared for a x86_64_linux_Generic0.0 computer&quot;<br /><br />I have learned to avoid the hassle of copying all those files manually (and have the &quot;abinit&quot; recognized as compiler under Intel compilers) simply by adding the below entries to the .ac file (it might be enough to do this for Fortran, but haven't tried; naturally the version number changes according to the one actually used):<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_fc_vendor=&quot;intel&quot;<br />with_fc_version=&quot;17.0.5&quot;<br />with_cc_vendor=&quot;intel&quot;<br />with_cc_version=&quot;17.0.5&quot;<br />with_cxx_vendor=&quot;intel&quot;<br />with_cxx_version=&quot;17.0.5&quot;<br /></code></pre></div><br /><br />Doing the latter, allows me to obtain the executables with behavior as described in the previous posts. (Well, I have yet to try without any optimizations for the latest version of abinit, and will report the result soon, but I somehow doubt that simply removing the optimizations and scalapack is likely to be the solution that I was looking for... could be wrong though, will try and report)<br /><br />Please advise further when you have a moment to consider these. <br />Thank you and best,<br />Dan<br /><br />PS I have also asked my admin's help, but didn't get very far yet, which is why I decided to ask here as well. Will confirm the other MPI-related questions with them soon too.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11453" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11453">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content11453">

						<h3 ><a href="#p11453">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting18b1.html?mode=quote&amp;f=3&amp;p=11453" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc65c.html?p=11453#p11453" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Mon Mar 26, 2018 5:21 pm
			</p>
			
			
			
			<div class="content">Hi,<br /><br />I successfully run on a cluster with 1, 2, 4 and 8 nodes ( 16 cores each ) with version 8.4.2, 8.5.0 and 8.7.3<br />the version of intel compiler is clusterstudio 2017.3.191<br /><br />this is my ac file :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># clusterstudio&nbsp; &nbsp;ifort 17<br /><br /># Fortran compiler<br /># ================<br />FC=&quot;mpiifort&quot;<br />CC=&quot;mpiicc&quot;<br />CXX=&quot;mpiicpc&quot;<br />AR=ar<br /><br /># Fortran optimization flags<br /># ==========================<br />FCFLAGS_EXTRA=&quot;-g -O3 -align all&quot;<br />enable_optim=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_64bit_flags=&quot;yes&quot;<br /><br />enable_openmp=&quot;yes&quot;<br />FCFLAGS_OPENMP=&quot;-openmp&quot;<br /><br /># Parallel compilation flags<br /># ==========================<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br /># I_MPI_ROOT=/opt/software/intel/impi/2017.2.191<br />with_mpi_incs=&quot;-I${I_MPI_ROOT}/include64&quot;<br />with_mpi_libs=&quot;-L${I_MPI_ROOT}/lib64 -lmpi&quot;<br /><br /># Linear Algebra library links (ScaLAPACK)<br /># ========================================<br />with_linalg_flavor=&quot;mkl+scalapack&quot;<br />with_linalg_incs=&quot;-I${MKLROOT}/include&quot;<br />with_linalg_libs=&quot;-L${MKLROOT}/lib/intel64 -lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -lmkl_blacs_intelmpi_lp64 -liomp5 -lpthread -lm -ldl&quot;<br /><br /># FFTW3 / MKL <br /># ========================================<br />with_fft_flavor=&quot;dfti&quot;<br />with_fft_libs=&quot;-L${MKLROOT}/lib/intel64 -lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -lmkl_blacs_intelmpi_lp64 -liomp5 -lpthread -lm -ldl&quot;<br />with_fft_incs=&quot;-I${MKLROOT}/include&quot;<br /><br /># Plugins additionels<br /># ===================<br />with_dft_flavor=&quot;libxc&quot;<br />with_libxc_incs=&quot;-I${HOME}/local/libxc/include&quot;<br />with_libxc_libs=&quot;-L${HOME}/local/libxc/lib -lxcf90 -lxc&quot;<br /><br />with_trio_flavor=&quot;netcdf&quot;<br />with_netcdf_incs=&quot;-I${HOME}/local/netcdf/include -I${HOME}/local/hdf5/include&quot;<br />with_netcdf_libs=&quot;-L${HOME}/local/netcdf/lib -lnetcdff -lnetcdf -L${HOME}/local/hdf5/lib -lhdf5_hl -lhdf5&quot;<br />enable_netcdf_default=&quot;yes&quot;<br /><br /></code></pre></div><br /><br /><br />and , this is a part of my input file ( UO2 54 Atoms )<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#ABINIT - INPUT FILE<br />#UO2 54 ATOMS<br /><br />#Process distribution (parallelism) - TO BE ADAPTED<br /># autoparal 1<br /># npkpt 2 npband 4 npfft 4 # 32 processeurs<br /># npkpt 2 npband 8 npfft 4 # 64 processeurs -1<br /># npkpt 2 npband 4 npfft 8 # 64 processeurs -2<br />&nbsp;npkpt 2 npband 8 npfft 8 # 128 processeurs<br />paral_kgb 1<br />bandpp 2<br /><br />#fftalg 512<br /><br />#Plane wave basis<br />ecut 6.<br />pawecutdg 10.<br /><br />#Self-consistent cycle parameters<br />toldfe 1.d-5<br />nstep 30<br />nline 6<br />diemac 10.<br /><br />#K-points and symetries<br />nkpt 1<br />kpt 0.5 0.5 0.5<br />kptopt 0<br />nsym 0<br />maxnsym 2048<br />chksymbreak 0<br /><br />#Electronic configuration<br />nsppol 2<br />nband 256<br />occopt 3<br />tsmear 0.0005 hartree<br /><br />...</code></pre></div><br /><br />my 5¢<br /><br />regards<br /><br />jmb</div>
			
			
			
									
									<div id="sig11453" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p11454" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile11454">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search97d3.html?author_id=846&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Nov 09, 2011 2:01 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content11454">

						<h3 ><a href="#p11454">Re: defective inter-node parallelism with 2017 Intel compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6086.html?mode=quote&amp;f=3&amp;p=11454" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicf005-2.html?p=11454#p11454" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist752d.html?mode=viewprofile&amp;u=846" class="username">danric</a></strong> &raquo; </span>Mon Mar 26, 2018 6:05 pm
			</p>
			
			
			
			<div class="content">Dear JMB<br /><br />Thank you. There are a few things worth trying there, so I will and report if I can get it to work.<br /><br />Many thanks again,<br />Dan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingdd23.html?mode=reply&amp;f=3&amp;t=3801" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic0d4b-2.html?f=3&amp;t=3801&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=3801">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			10 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=11438 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:12:31 GMT -->
</html>
