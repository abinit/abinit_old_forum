<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2642&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:49:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; mpirun has exited due to process rank 4 abinit-7.6.3</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>mpirun has exited due to process rank 4 abinit-7.6.3</h2>
		<p><a href="viewtopic0c3e.html?f=9&amp;t=2642">https://forum.abinit.org/viewtopic.php?f=9&amp;t=2642</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sat Apr 19, 2014 11:11 pm</strong></div>
				<div class="author">by <strong>Chem</strong></div>
				<div class="content">Dear All<br /><br />I have succesfully installed abinit-7.6.3 with :<blockquote class="uncited"><div>prefix=&quot;/home/ipc/bin&quot;<br />enable_openmp=&quot;yes&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr/local/openmpi-1.6.i13&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot;-L/opt/intel/composer_xe_2013.2.146/mkl/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot;-L/opt/intel/composer_xe_2013.2.146/mkl/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group &quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot; <br /><br />enable_gw_dpc=&quot;yes&quot;<br />enable_test_timeout=&quot;yes&quot;<br /></div></blockquote> <br />I calculated the Screening W in the GW part, but when doing the Sigma calculation, an error appear :<br /><blockquote class="uncited"><div>kpt= (  5.00000000E-01  5.00000000E-01  5.00000000E-01) spin= 1:<br />  ib vxc       vxcval    vhartree<br />   8 -20.69528 -20.69528  71.76299<br />   9 -21.47060 -21.47060  77.47514<br />  10 -21.47060 -21.47060  77.47514<br />  11 -19.28888 -19.28888  56.38010<br />  12 -19.28888 -19.28888  56.38010<br />  13 -19.28888 -19.28888  56.38010<br />  14 -22.87249 -22.87249  72.66752<br />  15 -22.87249 -22.87249  72.66752<br />  16 -22.87249 -22.87249  72.66752<br />  17 -20.24221 -20.24221  84.66368<br />  18 -20.24221 -20.24221  84.66368<br />  19 -20.24221 -20.24221  84.66368<br />  20 -22.75802 -22.75802  97.20710<br />  21 -22.75802 -22.75802  97.20710<br />  22  -4.80397  -4.80397 -35.62484<br />  23 -10.09755 -10.09755  11.72995<br />  24 -10.09755 -10.09755  11.72995<br />  25 -10.09755 -10.09755  11.72995<br /> Er%ID:           4<br /> Er%Hscr%ID:           4<br /> Memory needed for Er%epsm1 =        627.9 [Mb]<br />mkdump_Erread_screening with MPI_IO<br />Killed<br /> Imaginary frequency for fit located at:   26.1527 [eV]<br />--------------------------------------------------------------------------<br />mpirun has exited due to process rank 4 with PID 8834 on<br />node hpc-n265 exiting improperly. There are two reasons this could occur:<br /><br />1. this process did not call &quot;init&quot; before exiting, but others in<br />the job did. This can cause a job to hang indefinitely while it waits<br />for all processes to call &quot;init&quot;. By rule, if one process calls &quot;init&quot;,<br />then ALL processes must call &quot;init&quot; prior to termination.<br /><br />2. this process called &quot;init&quot;, but exited without calling &quot;finalize&quot;.<br />By rule, all processes that call &quot;init&quot; MUST call &quot;finalize&quot; prior to<br />exiting or it will be considered an &quot;abnormal termination&quot;<br /><br />This may have caused other processes in the application to be<br />terminated by signals sent by mpirun (as reported here).<br /></div></blockquote><br />The code crashes even within gwmem 0, but when reducing the number of bands and the cutoff energy, the calculations are well completed.<br />BTW: number of nodes :4 and number of procs/node : 16<br />Can someone help me to overcome this problem.<br /><br />Kind regards.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sat Apr 19, 2014 11:16 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Could you post the input file and the log file of the run?<br /><br />How many MPI processes and how many OpenMP threads are you using? <br />Note that if the env variables OMP_NUM_THREADS is not defined, the OMP runtime library<br />will use all the CPUS available!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sat Apr 19, 2014 11:38 pm</strong></div>
				<div class="author">by <strong>Chem</strong></div>
				<div class="content">Thank you gmatteo for your prompt answer.<br /><br />I am not using OPENMP Threads;just :<br /><blockquote class="uncited"><div>module load mpi/openmpi-1.6.i13<br />module load compilers/intel13<br />module load libs/mkl13<br />module load libs/fftw3</div></blockquote><br />I cannot upload the log file, but the code stops after reading the Matrix elements in the KS basis set.<br />Cheers.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sat Apr 19, 2014 11:44 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content"><blockquote class="uncited"><div>I am not using OPENMP Threads;just :<br /></div></blockquote><br /><br />Actually you are because you are using<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_openmp=&quot;yes&quot;<br /></code></pre></div><br /><br />in the configuration file.<br /><br />Set the number of threads to 1  with: <br /><br />$ export OMP_NUM_THREADS=1<br /><br />Increase the stack size with<br /><br />$ ulimit -s unlimited<br /><br />and try to rerun the calculation with mpirun</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sun Apr 20, 2014 12:05 am</strong></div>
				<div class="author">by <strong>Chem</strong></div>
				<div class="content">Unfortunately? I have the same error in the same step even with :<br />export OMP_NUM_THREADS=1<br />ulimit -s unlimited<br /><br />is there another solution?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sun Apr 20, 2014 12:13 am</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Disable OMP: <br /><br />enable_openmp=&quot;no&quot;<br /><br />and recompile the code from scratch:<br /><br />make clean &amp;&amp; make -j4<br /><br />You are linking against the sequential version of MKL thus it does not make <br />sense to enable OpenMP only in abinit.<br /><br />Rerun the calculation and let me know if this solves the problem.<br /><br /><blockquote class="uncited"><div>I cannot upload the log file<br /></div></blockquote><br /><br />change the extension of the file (.F90 should work if I remember correctly)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sun Apr 20, 2014 1:44 am</strong></div>
				<div class="author">by <strong>Chem</strong></div>
				<div class="content">Dear  gmatteo <br /><br />I disabled the OPENMP as you proposed and I recompiled the code, but the problem persists.<br />attached my log file:<br /><br />Kind regards.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: mpirun has exited due to process rank 4 abinit-7.6.3</h3>
				<div class="date">Posted: <strong>Sun Apr 20, 2014 7:49 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />theses two versions of intel 13<br /><br />13.0.1.117 ( 2013.0.028 )  <br />or<br />13.1.3 ( 2013.5.192 )<br /><br />are known as compiling a &quot;good&quot; binary<br /><br />13.1.0, 13.1.1, 13.1.2 are not<br /><br />regards<br /><br />my 5Â¢</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2642&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:49:49 GMT -->
</html>
