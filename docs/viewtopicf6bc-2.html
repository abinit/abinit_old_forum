<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=4028&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:19:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Troubles with relaxation when using ABINIT 8.8.4</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Troubles with relaxation when using ABINIT 8.8.4</h2>
		<p><a href="viewtopic52a4.html?f=9&amp;t=4028">https://forum.abinit.org/viewtopic.php?f=9&amp;t=4028</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Wed Jan 30, 2019 10:55 am</strong></div>
				<div class="author">by <strong>CHILL</strong></div>
				<div class="content">Hello,<br /><br />I have encountered a problem with my relaxation calculations.<br />When I run the job using 2018 version of ABINIT (8.8.4) the whole relaxation procedure gives the exact opposite effect: starting from nearly relaxed structure I get something very much worse and eventually the calculations just crashed.<br />I completed the same job using 2016 version of ABINIT and everything went smoothly.<br /><br />I've had problems with several different materials, which implies that there can be something different in the newest version of ABINIT. <br />I have attached the '.out' files for both unstable (2018 version) and stable (2016 version) relaxations.<br />Could you please tell me if there have been big changes between the versions? Some input that must be added or something else...<br /><br />Thank you!<br />Best regards, Mikhail</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Fri Feb 01, 2019 5:40 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear CHILL,<br />Did you compile the two versions with exactly the same compiler version and same compilation flags?<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Sun Feb 03, 2019 3:22 pm</strong></div>
				<div class="author">by <strong>CHILL</strong></div>
				<div class="content">Dear Eric,<br /><br />Yes, the input was exactly the same. I just changed the ABINIT version in my submit script.<br />If you want, I can provide all the input!<br /><br />Best regards, Mikhail</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Mon Feb 04, 2019 9:50 am</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Mikhail,<br />I was asking for the compiler version and the related flgas, in my case I had this problem when compiling with intel17 instead of intel15.<br />Could you return the output of the following command &quot;abinit -b&quot; for your two different versions (the one working and the one not working?)<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Mon Feb 04, 2019 10:36 am</strong></div>
				<div class="author">by <strong>CHILL</strong></div>
				<div class="content">Dear Eric,<br /><br />Thank you for your response!<br />That is the output for the <strong class="text-strong">working version</strong>:<br /><br />=== Compiler Suite ===<br />  C compiler       : intel16.0<br />  C++ compiler     : gnu16.0<br />  Fortran compiler : intel0.0<br />  CFLAGS           : -O2 -xHost -ftz -fp-speculation=safe -fp-model source<br />  CXXFLAGS         : -O2 -xHost -ftz -fp-speculation=safe -fp-model source<br />  FCFLAGS          : -O2 -xHost -ftz -fp-speculation=safe -fp-model source -mcmodel=large -shared-intel<br />  FC_LDFLAGS       :<br /><br />That is the output of the <strong class="text-strong">not working version</strong>:<br /><br />=== Compiler Suite ===<br />  C compiler       : intel18.0<br />  C++ compiler     : gnu18.0<br />  Fortran compiler : intel0.0<br />  CFLAGS           : -O2 -xHost -ftz -fp-speculation=safe -fp-model source<br />  CXXFLAGS         : -O2 -xHost -ftz -fp-speculation=safe -fp-model source<br />  FCFLAGS          : -O2 -xHost -ftz -fp-speculation=safe -fp-model source -mcmodel=large -shared-intel<br />  FC_LDFLAGS       :<br /><br />The compilers are indeed different. Only my versions do not match yours. So the remedy for that would be to change the compiler version?<br /><br />Best regards, Mikhail</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Mon Feb 04, 2019 12:20 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Yes, in the meantime you can re-compile with intel16.<br />I'm going to ask some Yoda master to see what can be done for this problem...<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Mon Feb 04, 2019 3:59 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Dear Mikhail,<br /><br />Here is the environment used in our testfarm to test 8.10.2  with intel 18 ( same with intel 15.x/16.x/17.x/19.x )<br /><br /><blockquote class="uncited"><div>=== Build Information ===<br />  Version       : 8.10.2<br />  Build target  : x86_64_linux_intel18.0<br />  Build date    : 20190117<br /><br /> === Compiler Suite ===<br />  C compiler       : intel18.0<br />  C++ compiler     : intel18.0<br />  Fortran compiler : intel18.0<br />  CFLAGS           :  -g -O2 -vec-report0<br />  CXXFLAGS         :  -g -O2 -vec-report0<br />  FCFLAGS          :  -g -O3 -extend-source -noaltparam -nofpscomp<br />  FC_LDFLAGS       :    -static-intel -static-libgcc<br />  <br /> === Optimizations ===<br />  Debug level        : basic<br />  Optimization level : standard</div></blockquote><br /><br />Our builders run on server with pretty old cpus ( Xeon(R) CPU E5-2623 v4 and Xeon(R) CPU E5-2670 v3 )<br />On which types of cpu do you run your simulations?<br /><br />We have noticed for some time now, that there are some &quot;stability&quot; problems in some functions with the new INTEL compilers with the recent cpus...  <img class="smilies" src="images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very Sad" /> <br /><br />We have added a new option to &quot;manage&quot; this problem (which is not always enough  <img class="smilies" src="images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />  )  : <br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--enable-avx-safe-mode&nbsp; Disable vectorization in problematic procedures</code></pre></div><br />the version of mkl library is also problematic sometimes  <img class="smilies" src="images/smilies/icon_e_surprised.gif" alt=":o" title="Surprised" /><br /><br />I'd suggest you at first test :<br />- replaced mkl by netlib as linalg flavour<br />- use --enable-avx-safe-mode<br /><br />Best Regards<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Fri Feb 15, 2019 3:57 pm</strong></div>
				<div class="author">by <strong>CHILL</strong></div>
				<div class="content">Dear jbeuken,<br /><br />I have consulted the responsible person on our cluster.<br />He ran some tests and the result was still unsuccessful, so now he is interested in more detailed information:<br /><br /><ul>1. Which combination of Intel compilers + MKL (exact version) do you recommend<br />2. Which is your preferred ABINIT environment: which compiler, which libraries etc., i.e. what do you use when publishing results.</ul><br />Could you please provide us this information?<br />I also believe that the newest version of ABINIT crashed in this type of calculation (that I described in the first message) as well.<br /><br />Thank you!<br />Best regards, Mikhail</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Troubles with relaxation when using ABINIT 8.8.4</h3>
				<div class="date">Posted: <strong>Thu Feb 21, 2019 5:02 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">dear Mikhail,<br />In the meantime, did you try to compile with the intel16 as for your 8.8.4, which was working?<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=4028&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:19:18 GMT -->
</html>
