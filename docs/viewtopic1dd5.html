<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=338&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Tutorial ex. 3.1 takes forever. Wrong configuration?</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Tutorial ex. 3.1 takes forever. Wrong configuration?</h2>
		<p><a href="viewtopica5ea.html?f=3&amp;t=338">https://forum.abinit.org/viewtopic.php?f=3&amp;t=338</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Thu May 20, 2010 4:27 am</strong></div>
				<div class="author">by <strong>spamrefuse</strong></div>
				<div class="content">Hi,<br /><br />I have a sequential version of abinit compiled on an up-to-date<br />Linux Fedora 12 system (32bits). It's a 8-core CPU, hence fairly fast<br />for the moderate examples in the tutorial.<br /><br />I can run the tutorial examples of chapters 1 and 2, all about hydrogen.<br />However, when I run example 3.1 from the tutorial, the calculation never<br />seems to finish (I've waited more than 24 hours, whereas all previous<br />tutorial examples finished within seconds).<br /><br />I wonder if there's something wrong with my compilation configuration for<br />the abinit executable. This is what I do:<br /><br />$ ./configure --prefix=/opt/abinit --disable-netcdf --disable-bigdft --disable-wannier90<br />&lt;...snip...&gt;<br /> ==============================================================================<br /> === Connectors                                                             ===<br /> ==============================================================================<br /><br />checking whether MPI is usable... no<br />configure: disabling MPI support<br />checking whether to build MPI code... no<br />checking whether to use the CUDA Library... no<br />checking whether to use the FFTW library... no<br />checking whether to use the GNU Scientific Library... no<br />configure: applying linear algebra tricks (type: abinit)<br />checking whether to build the LINALG library... yes<br />checking whether to activate ScaLAPACK support... no<br />checking whether to use the PAPI library... no<br />&lt;...snip...&gt;<br />&lt;see below for the full output&gt;<br /><br />$ make multi multi_nprocs=8<br /><br /># make install<br /><br /><br /><br />The library dependencies of the abinit executable:<br />$ ldd /opt/abinit/bin/abinit<br />	linux-gate.so.1 =&gt;  (0x00421000)<br />	libgfortran.so.3 =&gt; /usr/lib/libgfortran.so.3 (0x00983000)<br />	libm.so.6 =&gt; /lib/libm.so.6 (0x00ab3000)<br />	libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x005eb000)<br />	libc.so.6 =&gt; /lib/libc.so.6 (0x00110000)<br />	/lib/ld-linux.so.2 (0x008f8000)<br /><br /><br /><br />$ /opt/abinit/bin/abinit &lt; t3x.files &gt; log<br />&lt;takes for ever......eventually I have to kill abinit&gt;<br /><br /><br /><br />The last couple of lines in the log file are these:<br /><br /> chkinp: machine precision is   2.2204460492503131E-16<br /><br /> chkinp: Checking input parameters for consistency.<br />dtsetcopy : copying area  algalch    the actual size (     1) of the index (     1)  differs from its standard size (     0)<br />dtsetcopy : copying area  atvshift   the actual size (     0) of the index (     3)  differs from its standard size (     2)<br />dtsetcopy : copying area  kberry     the actual size (    20) of the index (     2)  differs from its standard size (     1)<br /><br /><br /><br />The last couple of lines in the t3x.out file are these:<br /><br />== DATASET  1 ==================================================================<br /><br /> Exchange-correlation functional for the present dataset will be:<br />  LDA: new Teter (4/93) with spin-polarized option - ixc=1<br /> Citation for XC functional:<br /><br /><br />$ cat t3x_STATUS<br /><br /> Status file, with repetition rate  49, status number    10<br /><br />  Level abinit         : call outvars(1<br /><br /><br /><br />Any idea why abinit seems to &quot;hang&quot; on tutorial example 3.1?<br /><br />Thank you!<br />Rob.<br /><br /><br /><br /><br /><br /># THE FULL CONFIGURE OUTPUT<br /><br /> ==============================================================================<br /> === Overall startup                                                        ===<br /> ==============================================================================<br /><br />checking build system type... i686-pc-linux-gnu<br />checking host system type... i686-pc-linux-gnu<br />checking target system type... i686-pc-linux-gnu<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking whether make sets $(MAKE)... (cached) yes<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether ln -s works... yes<br />checking for a sed that does not truncate output... /bin/sed<br />checking for gawk... (cached) gawk<br />checking for grep that handles long lines and -e... /bin/grep<br />checking for egrep... /bin/grep -E<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br /><br /> ==============================================================================<br /> === Build-system information                                               ===<br /> ==============================================================================<br /><br />configure: ABINIT version: 6.0.3<br />configure: M4 010413 - Autoconf 026300 - Automake 011100 - Libtool 020204<br />configure: reporting user interface changes:<br />configure:  * new option --enable-cuda is available<br />configure:  * --enable-debug has a new meaning<br />configure:    please check that --enable-debug=&quot;yes&quot; is OK for you<br />configure:  * new option --enable-etsf-io-test is available<br />configure:  * --enable-tricks renamed --enable-hints<br />configure:  * --enable-etsf-xc renamed --enable-libxc<br />configure:  * --enable-mpi has a new meaning<br />configure:    please check that --enable-mpi=&quot;&quot; is OK for you<br />configure:  * --enable-mpi-io-buggy renamed --enable-mpi-io-test<br />configure:  * --enable-optlevel renamed --enable-optim<br />configure:  * --enable-xmlf90 removed<br />configure:  * new option --with-cuda-includes is available<br />configure:  * new option --with-cuda-libs is available<br />configure:  * new option --with-etsf-io-test-includes is available<br />configure:  * new option --with-etsf-io-test-libs is available<br />configure:  * --with-etsf-xc-includes renamed --with-libxc-includes<br />configure:  * --with-etsf-xc-libs renamed --with-libxc-libs<br />configure:  * --with-mpi-cc-ldflags removed<br />configure:  * --with-mpi-cc-libs removed<br />configure:  * --with-mpi-cflags removed<br />configure:  * --with-mpi-cppflags removed<br />configure:  * --with-mpi-cxx-ldflags removed<br />configure:  * --with-mpi-cxx-libs removed<br />configure:  * --with-mpi-cxxflags removed<br />configure:  * --with-mpi-fc-ldflags removed<br />configure:  * --with-mpi-fc-libs removed<br />configure:  * --with-mpi-fcflags removed<br />configure:  * --with-mpi-prefix has a new meaning<br />configure:    please check that --with-mpi-prefix=&quot;&quot; is OK for you<br />configure:  * --with-xmlf90-includes removed<br />configure:  * --with-xmlf90-libs removed<br /><br /> ==============================================================================<br /> === Option consistency checking                                            ===<br /> ==============================================================================<br /><br />configure: checking consistency of external prerequisite options<br />configure:  |---&gt; all OK<br />configure: <br />configure: checking consistency of plug-in options<br />configure:  |---&gt; disabling ETSF I/O support (as you don't want NetCDF)<br />configure: <br />configure: parsing command-line options<br /><br /> ==============================================================================<br /> === Connector startup                                                      ===<br /> ==============================================================================<br /><br />configure: Initializing MPI support<br />checking for mpirun... no<br />checking for mpiexec... no<br />checking for dmpirun... no<br />configure: compiler checks deferred<br /><br /> ==============================================================================<br /> === Utilities                                                              ===<br /> ==============================================================================<br /><br />checking for sh... /bin/sh<br />checking for perl... /usr/bin/perl<br />checking for rm... /bin/rm<br />checking for mv... /bin/mv<br />checking for tar... /bin/tar<br />checking for latex... /bin/false<br />checking for dvips... /bin/false<br />checking for dvipdf... /usr/bin/dvipdf<br />checking for ps2pdf... /usr/bin/ps2pdf<br />checking for markdown... no<br />checking for wget... /usr/bin/wget<br />configure: using internal version of MarkDown<br /><br /> ==============================================================================<br /> === C support                                                              ===<br /> ==============================================================================<br /><br />checking for gcc... gcc<br />checking for C compiler default output file name... a.out<br />checking whether the C compiler works... yes<br />checking whether we are cross compiling... no<br />checking for suffix of executables... <br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether gcc accepts -g... yes<br />checking for gcc option to accept ISO C89... none needed<br />checking for style of include used by make... GNU<br />checking dependency style of gcc... gcc3<br />checking how to run the C preprocessor... gcc -E<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking which type of compiler we have... gnu 4.4<br />checking stddef.h usability... yes<br />checking stddef.h presence... yes<br />checking for stddef.h... yes<br />checking stdarg.h usability... yes<br />checking stdarg.h presence... yes<br />checking for stdarg.h... yes<br />checking stdio.h usability... yes<br />checking stdio.h presence... yes<br />checking for stdio.h... yes<br />checking malloc.h usability... yes<br />checking malloc.h presence... yes<br />checking for malloc.h... yes<br />checking math.h usability... yes<br />checking math.h presence... yes<br />checking for math.h... yes<br />checking termios.h usability... yes<br />checking termios.h presence... yes<br />checking for termios.h... yes<br />checking for abort... yes<br />checking size of int... 4<br />checking size of unsigned int... 4<br />checking size of float... 4<br />checking size of double... 8<br />checking size of long... 4<br />checking size of unsigned long... 4<br />checking size of long long... 8<br />checking size of unsigned long long... 8<br />checking size of size_t... 4<br />checking size of ptrdiff_t... 4<br />checking for an ANSI C-conforming const... yes<br />checking for size_t... yes<br />checking whether byte ordering is bigendian... no<br /><br /> ==============================================================================<br /> === C++ support                                                            ===<br /> ==============================================================================<br /><br />checking for g++... g++<br />checking whether we are using the GNU C++ compiler... yes<br />checking whether g++ accepts -g... yes<br />checking dependency style of g++... gcc3<br />checking which type of C++ compiler we have... gnu 4.4<br /><br /> ==============================================================================<br /> === Fortran support                                                        ===<br /> ==============================================================================<br /><br />checking for gfortran... gfortran<br />checking whether we are using the GNU Fortran compiler... yes<br />checking whether gfortran accepts -g... yes<br />configure: Fortran source will be preprocessed using C preprocessor<br />checking which type of Fortran compiler we have... gnu 4.4<br />checking fortran 90 modules extension... mod<br />checking for Fortran flag to compile .F90 files... none<br />checking whether the Fortran compiler accepts exit()... yes<br />checking whether the Fortran compiler accepts flush()... yes<br />checking whether the Fortran compiler accepts flush_()... no<br />checking whether the Fortran compiler accepts gamma()... yes<br />checking whether the Fortran compiler accepts get_environment_variable... yes<br />checking whether the Fortran compiler accepts quadruple integers... no<br />checking whether the Fortran compiler accepts long lines... no<br />checking whether the Fortran compiler accepts the null() intrinsic... yes<br />checking how to get verbose linking output from gfortran... -v<br />checking for Fortran libraries of gfortran...  -L/usr/lib/gcc/i686-redhat-linux/4.4.3 -L/usr/lib/gcc/i686-redhat-linux/4.4.3/../../.. -lgfortranbegin -lgfortran -lm<br />checking for dummy main to link with Fortran libraries... none<br />checking for Fortran name-mangling scheme... lower case, underscore, no extra underscore<br /><br /> ==============================================================================<br /> === Python support                                                         ===<br /> ==============================================================================<br /><br />checking for python... python<br />checking for python-config... python-config<br />checking for Python CPPFLAGS... -I/usr/include/python2.6 -I/usr/include/python2.6<br />checking for bzr... bzr<br />checking for Python NumPy headers... found<br /><br /> ==============================================================================<br /> === Libraries and linking                                                  ===<br /> ==============================================================================<br /><br />checking for ar... ar<br />checking for ranlib... ranlib<br /><br /> ==============================================================================<br /> === Hints                                                                  ===<br /> ==============================================================================<br /><br />checking for cpp... cpp<br />checking which cpp hints to apply... default/default/default<br />checking which cc hints to apply... gnu/default/default<br />checking which xpp hints to apply... none/none/none<br />checking which cxx hints to apply... gnu/default/default<br />checking which fpp hints to apply... none/none/none<br />checking which fc hints to apply... gnu/default/default<br />checking which ar hints to apply... none/none/none<br /><br /> ==============================================================================<br /> === Debugging                                                              ===<br /> ==============================================================================<br /><br />checking debugging status... enabled (custom flags are allowed)<br />configure: setting C debug flags to '-g'<br />configure: setting C++ debug flags to '-g'<br />configure: setting Fortran debug flags to '-g'<br />checking whether to activate debug mode in source files... no<br /><br /> ==============================================================================<br /> === Optimizations                                                          ===<br /> ==============================================================================<br /><br />checking optimization status... enabled (profile mode: standard)<br />checking which cc optimizations to apply... gnu/default/default<br />checking which cxx optimizations to apply... gnu/default/default<br />checking which fc optimizations to apply... gnu/default/default<br />checking whether to apply per-directory optimizations... yes<br /><br /> ==============================================================================<br /> === 64-bit support                                                         ===<br /> ==============================================================================<br /><br />checking for a 64-bit architecture... unknown<br />checking whether to use 64-bit flags... no<br />checking for user-defined 64-bit flags... none<br /><br /> ==============================================================================<br /> === Connectors                                                             ===<br /> ==============================================================================<br /><br />checking whether MPI is usable... no<br />configure: disabling MPI support<br />checking whether to build MPI code... no<br />checking whether to use the CUDA Library... no<br />checking whether to use the FFTW library... no<br />checking whether to use the GNU Scientific Library... no<br />configure: applying linear algebra tricks (type: abinit)<br />checking whether to build the LINALG library... yes<br />checking whether to activate ScaLAPACK support... no<br />checking whether to use the PAPI library... no<br /><br /> ==============================================================================<br /> === Plug-ins                                                               ===<br /> ==============================================================================<br /><br />configure: using tarball repository /home/lahaye/.abinit/tarballs<br />checking whether to enable the FOX plug-in... no<br />checking whether to build the FOX plug-in... no<br />checking whether to enable the NETCDF plug-in... no<br />checking whether to build the NETCDF plug-in... no<br />checking whether to enable the ETSF_IO plug-in... no<br />checking whether to build the ETSF_IO plug-in... no<br />checking whether to enable the ETSF_IO_TEST plug-in... no<br />checking whether to build the ETSF_IO_TEST plug-in... no<br />checking for a source tarball of LIBXC... yes<br />configure: applying LIBXC tricks<br />checking whether to enable the LIBXC plug-in... yes<br />checking whether to build the LIBXC plug-in... yes<br />checking whether to enable the BIGDFT plug-in... no<br />checking whether to build the BIGDFT plug-in... no<br />checking whether to enable the WANNIER90 plug-in... no<br />checking whether to build the WANNIER90 plug-in... no<br /><br /> ==============================================================================<br /> === Nightly builds                                                         ===<br /> ==============================================================================<br /><br />checking whether to build Nightly code... no<br /><br /> ==============================================================================<br /> === Experimental developments                                              ===<br /> ==============================================================================<br /><br />checking whether to enable bindings... no<br />checking whether to use C clock for timings... no<br />checking whether to enable error handlers... no<br />checking whether to build exports... no<br />checking whether to enable GW double-precision calculations... no<br />checking whether to test abirules... <br />checking whether to use macroave... yes<br />checking whether to read input from stdin... yes<br /><br /> ==============================================================================<br /> === Output                                                                 ===<br /> ==============================================================================<br /><br />configure: creating ./config.status<br />config.status: creating config.mk<br />config.status: creating config.dump<br />config.status: creating config.pc<br />config.status: creating config.py<br />config.status: creating config.sh<br />config.status: creating config/wrappers/wrap-fc<br />config.status: creating src/incs/Makefile<br />config.status: creating src/mods/Makefile<br />config.status: creating src/16_hideleave/m_build_info.F90<br />config.status: creating src/98_main/abinis<br />config.status: creating src/98_main/abinip<br />config.status: creating tests/tests.env<br />config.status: creating tests/tests-install.env<br />config.status: creating Makefile<br />config.status: creating src/Makefile<br />config.status: creating src/01_gsl_ext/Makefile<br />config.status: creating src/01_interfaces_ext/Makefile<br />config.status: creating src/01_macroavnew_ext/Makefile<br />config.status: creating src/10_defs/Makefile<br />config.status: creating src/12_hide_mpi/Makefile<br />config.status: creating src/14_hidewrite/Makefile<br />config.status: creating src/16_hideleave/Makefile<br />config.status: creating src/18_timing/Makefile<br />config.status: creating src/27_toolbox_oop/Makefile<br />config.status: creating src/28_numeric_noabirule/Makefile<br />config.status: creating src/32_contract/Makefile<br />config.status: creating src/32_util/Makefile<br />config.status: creating src/42_geometry/Makefile<br />config.status: creating src/42_nlstrain/Makefile<br />config.status: creating src/42_parser/Makefile<br />config.status: creating src/45_psp_parser/Makefile<br />config.status: creating src/47_xml/Makefile<br />config.status: creating src/49_gw_toolbox_oop/Makefile<br />config.status: creating src/50_abitypes_defs/Makefile<br />config.status: creating src/51_manage_cuda/Makefile<br />config.status: creating src/51_manage_mpi/Makefile<br />config.status: creating src/52_fft_mpi_noabirule/Makefile<br />config.status: creating src/53_abiutil/Makefile<br />config.status: creating src/53_ffts/Makefile<br />config.status: creating src/53_spacepar/Makefile<br />config.status: creating src/56_recipspace/Makefile<br />config.status: creating src/56_xc/Makefile<br />config.status: creating src/57_iovars/Makefile<br />config.status: creating src/59_io_mpi/Makefile<br />config.status: creating src/61_ionetcdf/Makefile<br />config.status: creating src/62_cg_noabirule/Makefile<br />config.status: creating src/62_iowfdenpot/Makefile<br />config.status: creating src/62_occeig/Makefile<br />config.status: creating src/62_poisson/Makefile<br />config.status: creating src/62_wvl_wfs/Makefile<br />config.status: creating src/63_bader/Makefile<br />config.status: creating src/64_atompaw/Makefile<br />config.status: creating src/65_nonlocal/Makefile<br />config.status: creating src/65_psp/Makefile<br />config.status: creating src/66_paw/Makefile<br />config.status: creating src/66_wfs/Makefile<br />config.status: creating src/67_common/Makefile<br />config.status: creating src/68_dmft/Makefile<br />config.status: creating src/68_gw/Makefile<br />config.status: creating src/68_recursion/Makefile<br />config.status: creating src/68_rsprc/Makefile<br />config.status: creating src/69_bse/Makefile<br />config.status: creating src/72_geomoptim/Makefile<br />config.status: creating src/72_response/Makefile<br />config.status: creating src/77_ddb/Makefile<br />config.status: creating src/77_lwf/Makefile<br />config.status: creating src/77_suscep/Makefile<br />config.status: creating src/79_seqpar_mpi/Makefile<br />config.status: creating src/83_cut3d/Makefile<br />config.status: creating src/93_rdm/Makefile<br />config.status: creating src/95_drive/Makefile<br />config.status: creating src/98_main/Makefile<br />config.status: creating src/libs/Makefile<br />config.status: creating tests/Nightly/Makefile<br />config.status: creating prereqs/Makefile<br />config.status: creating prereqs/linalg/Makefile<br />config.status: creating plugins/Makefile<br />config.status: creating plugins/bigdft/Makefile<br />config.status: creating plugins/etsf_io/Makefile<br />config.status: creating plugins/etsf_io_test/Makefile<br />config.status: creating plugins/fox/Makefile<br />config.status: creating plugins/libxc/Makefile<br />config.status: creating plugins/netcdf/Makefile<br />config.status: creating plugins/wannier90/Makefile<br />config.status: creating bindings/Makefile<br />config.status: creating bindings/parser/Makefile<br />config.status: creating doc/Makefile<br />config.status: creating tests/Makefile<br />config.status: creating config.h<br />config.status: executing depfiles commands<br />config.status: executing script-perms commands<br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)<br /><br /><br /># END CONFIGURE OUTPUT</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Thu May 20, 2010 5:39 pm</strong></div>
				<div class="author">by <strong>spamrefuse</strong></div>
				<div class="content">Here is some more info on this problem:<br /><br />When I compile abinit 5.8.4p in a similar fashion<br /><br />$ ./configure --prefix=/opt/abinit --disable-netcdf --disable-bigdft --disable-wannier90 --disable-libxc<br />&lt;snip&gt;<br />$ make<br />&lt;snip&gt;<br /># make install<br /><br />and run abinit on Tutorial example 3.1, it finishes in seconds.<br /><br />For some reason, compiling 6.0.3 generates an executable<br />which hangs on this very same example.<br /><br />Any ideas what's wrong here?<br />Or what else I can do to resolve this?<br /><br />Rob.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Tue May 25, 2010 9:50 am</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hello Rob,<br /><br />the courageous thing to do would be to run the debugger. In 10 seconds it will tell you where the code is stopping.<br /><br />1) make sure you have gdb installed (sudo yum install gdb)<br /><br />2) go to the tutorial directory with the t3x.files file<br /><br />3)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>gdb ../&lt;path&gt;/abinit<br />run &lt; t3x.files<br />.<br />.<br />.<br /></code></pre></div><br />once it hangs you can hit control-C and it should tell you in which routine you are stalling, as well as give you the very last bits of stdout. The log file may not have everything because the system needs to buffer a certain amount of text before writing it to the log, which of course never happens.<br /><br />You can also try <br /><br />valgrind ../&lt;path&gt;/abinit &lt; t3x.files<br /><br />and wait a while to see if valgrind complains about somthing in particular at the stalling bit. Then kill it of course. No use waiting more than a minute or 2 for the tutorial examples.<br /><br />Did you change the input variables in t31.in? In a few cases, eg if you don't have a value for ecut, there are platforms where I have seen a hang instead of the error message you should be getting.<br /><br />I don't think your configure is the problem, but we'll see.<br /><br />have fun<br /><br />Matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Tue May 25, 2010 9:54 am</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hi again - I notice the previous thread has the same content, and you have already used the debugger to good effect and gotten an answer from Matteo. Any reason for the second post?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Sun Jul 25, 2010 10:13 am</strong></div>
				<div class="author">by <strong>sathishpon</strong></div>
				<div class="content">Hello,<br />         I too have the same problem from tutorial example 3.1 onwards, the execution of abinit hangs. My system is suse linux 32bit installed in X86_64 intel core2 duo machines. I have tried different configure option ranging from<br /><br />./configure<br /><br />./configure --enable-mpi --enable-mpi-io=yes --enable-mpi-trace=yes<br /><br />./configure --enable-mpi --enable-mpi-io=yes --enable-mpi-trace=yes --enable-bigdft=yes --enable-etsf-xc=yes --enable-netcdf=yes --enable-wannier90=yes --enable-xmlf90=yes --enable-fox=yes --with-mpi-prefix=/usr/local<br /><br />./configure --enable-mpi -enable-mpi-fft=yes --enable-mpi-io=yes --enable-mpi-trace=yes --enable-bigdft=yes --enable-etsf-xc=yes --enable-netcdf=yes --enable-wannier90=yes --enable-xmlf90=yes --enable-fox=yes --enable-fft=yes --with-fft-libs=&quot;-l/usr/local/lib/&quot; --enable-bse-unpacked=yes --enable-dft=yes --enable-gw-cutoff=yes --enable-gw-optimal=yes --enable-gw-wrapper=yes --enable-linalg=yes --with-linalg-libs=&quot;-L/home/user/SW/ATLAS/ATLAS_BLD/lib -latlas -lcblas -lf77blas -lf77refblas -llapack -lptcblas -lptf77blas -ltstatlas&quot; --enable-optlevel=standard --with-mpi-prefix=/usr/local<br /><br />./configure --enable-mpi -enable-mpi-fft=yes --enable-mpi-io=yes --enable-mpi-trace=yes --enable-bigdft=yes --enable-etsf-xc=yes --enable-netcdf=yes --enable-wannier90=yes --enable-xmlf90=yes --enable-fox=yes --enable-fft=yes --with-fft-libs=&quot;-l/usr/local/lib/&quot; --enable-bse-unpacked=yes --enable-dft=yes --enable-gw-cutoff=yes --enable-gw-optimal=yes --enable-gw-wrapper=yes --enable-linalg=yes --with-linalg-libs=&quot;-L/opt/intel/Compiler/11.1/072/mkl/lib/32 -lmkl_scalapack_core  -lmkl_blacs -lmkl_blacs_intempi -lmkl_blacs_openmpi -lmkl_blas95 -lmkl_intel -lmkl_intel_thread -lmkl_lapack95 -lmkl_solver -lmkl_solver_sequential -lmkl_cdft_core -lmkl_core -lmkl_gf -lmkl_gnu_thread -lmkl_sequential -lmkl_pgi_thread&quot; --enable-optlevel=standard --with-mpi-prefix=/usr/local <br /><br />I compiled the code with default gcc, gfortran compilers and openmpi libraries.<br /><br />finally, I tried the gdb advice given in this thread and got the following result where the execution hung again.<br /><br />================================================================================<br />== DATASET  1 ==================================================================<br /><br />dtsetcopy : copying area  algalch    the actual size (     1) of the index (     1)  differs f                                                               rom its standard size (     0)<br />dtsetcopy : copying area  atvshift   the actual size (     0) of the index (     3)  differs f                                                               rom its standard size (     2)<br />dtsetcopy : copying area  kberry     the actual size (    20) of the index (     2)  differs f                                                               rom its standard size (     1)<br />dtsetcopy : copying area  nband      the actual size (     2) of the index (     1)  differs f                                                               rom its standard size (     1)<br />dtsetcopy : copying area  mixalch    the actual size (     1) of the index (     1)  differs f                                                               rom its standard size (     0)<br />dtsetcopy : copying area  mixalch    the actual size (     1) of the index (     2)  differs f                                                               rom its standard size (     0)<br />dtsetcopy : copying area  shiftk     the actual size (     8) of the index (     2)  differs f                                                               rom its standard size (     1)<br />  getdim_nloc : enter<br />  pspheads(1)%nproj(0:3)=           1           1           0           0<br /><br /> getdim_nloc : deduce lmnmax  =   4, lnmax  =   2,<br />                      lmnmaxso=   4, lnmaxso=   2.<br /> Exchange-correlation functional for the present dataset will be:<br />  LDA: new Teter (4/93) with spin-polarized option - ixc=1<br /> Citation for XC functional:<br />  S. Goedecker, M. Teter, J. Huetter, PRB 54, 1703 (1996)<br /><br /> Unit cell volume ucvol=  2.6374446E+02 bohr^3<br /> Angles (23,13,12)=  6.00000000E+01  6.00000000E+01  6.00000000E+01 degrees<br /><br /> getcut: wavevector=  0.0000  0.0000  0.0000  ngfft=  20  20  20<br />         ecut(hartree)=      8.000   =&gt; boxcut(ratio)=   2.18216<br />- pspatm: opening atomic psp file    /home/user/SW/espresso-4.1.1/2_ab-init/abinit-6.2.1/tests                                                               /Psps_for_tests/14si.pspnc<br />  Troullier-Martins psp for element  Si        Thu Oct 27 17:31:21 EDT 1994<br />  14.00000   4.00000    940714                znucl, zion, pspdat<br />    1    1    2    2      2001   0.00000      pspcod,pspxc,lmax,lloc,mmax,r2well<br />    0   5.907  14.692    1   2.0872718        l,e99.0,e99.9,nproj,rcpsp<br />   0.00000000   0.00000000   0.00000000   0.00000000     rms, ekb1, ekb2, epsatm<br />    1   2.617   4.181    1   2.0872718        l,e99.0,e99.9,nproj,rcpsp<br />   0.00000000   0.00000000   0.00000000   0.00000000     rms, ekb1, ekb2, epsatm<br />    2   0.000   0.000    0   2.0872718        l,e99.0,e99.9,nproj,rcpsp<br />   0.00000000   0.00000000   0.00000000   0.00000000     rms, ekb1, ekb2, epsatm<br />    1.80626423934776    0.22824404341771    1.17378968127746   rchrg,fchrg,qchrg<br /> pspatm: epsatm=    1.43386982<br />         --- l  ekb(1:nproj) --&gt;<br />             0    3.287949<br />             1    1.849886<br /> pspatm: atomic psp has been read  and splines computed<br /><br />   2.29419171E+01                                ecore*ucvol(ha*bohr**3)<br /> wfconv:     5 bands initialized randomly with npw=   283, for ikpt=     1<br /> wfconv:     5 bands initialized randomly with npw=   289, for ikpt=     2<br /><br /> setup2: Arith. and geom. avg. npw (full set) are     284.500     284.488<br /> symatm: atom number    1 is reached starting at atom<br />   1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2<br />   1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2<br /> symatm: atom number    2 is reached starting at atom<br />   2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1<br />   2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1  2  1<br /> initro : for itypat=  1, take decay length=      1.1000,<br /> initro : indeed, coreel=     10.0000, nval=  4 and densty=  0.0000E+00.<br /><br />================================================================================<br /><br /> getcut: wavevector=  0.0000  0.0000  0.0000  ngfft=  20  20  20<br />         ecut(hartree)=      8.000   =&gt; boxcut(ratio)=   2.18216<br />  scfcv : before setvtr, energies%e_hartree=   0.0000000000000000<br /><br /> ewald : nr and ng are    3 and   11<br />  mklocl_recipspace : will add potential with strength vprtrb(:)=   0.0000000000000000                                                                       0.0000000000000000<br />  setvtr : istep,n1xccc,moved_rhor=           1        2501           0<br />  scfcv : after setvtr, energies%e_hartree=   0.0000000000000000<br /><br /> ITER STEP NUMBER     1<br /> vtorho : nnsclo_now=  2, note that nnsclo,dbl_nnsclo,istep=  0 0  1<br /><br /> Non-SCF iterations; k pt #    1  k= -0.25000  0.50000  0.00000  band residuals:<br /> res:  2.20E-02  2.77E-02  2.68E-02  4.76E-02  1.55E-02<br /><br /><br />-------------------------------------------------------------------------------------<br /><br />I even tried to compile with available intel ifort and icc compiler but the 'make' failed giving error about no intel fast memcpy<br /><br /><br />Any hints on troubleshooting will be greatly appreciated.<br /><br />Thanks,<br />Sathish</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Tutorial ex. 3.1 takes forever. Wrong configuration?</h3>
				<div class="date">Posted: <strong>Wed Aug 18, 2010 2:28 am</strong></div>
				<div class="author">by <strong>Ngeah</strong></div>
				<div class="content"><blockquote><div><cite>sathishpon wrote:</cite>Hello,<br />         I too have the same problem from tutorial example 3.1 onwards, the execution of abinit hangs. My system is suse linux 32bit installed in X86_64 intel core2 duo machines. I have tried different configure option ranging from<br /><br /></div></blockquote><br /><br />I had the same problem as well here at my school.  Since I'm the only person on campus using ABINIT, I had to go back and forth with our IT guy to figure out what was wrong with it, so I don't have 100% of the details.  As far as I understand, ABINIT is kind of picky when it comes to which version of GCC you're using, and if you don't have the right one, it causes issues.  When we updated to the &quot;newest&quot; version of GCC (Red Hat's auto update), it didn't work, but there's a newer version of GCC availible that isn't availible on the auto update.  After we installed it, the problem was fixed.  <br /><br />Also, after you do the &quot;make&quot; command, you can test to see whether or not it was a valid installation by running the internal tests.<br /><br />make testin_1 (This test worked for me every time)<br />make testin_2 (The rest of the tests failed until I got things sorted out.)<br />make testin_3<br /><br />make testin_bigdft<br />make testin_etst-io<br />make testin_libxc<br />make testin_wannier90<br /><br />Check out the installation notes on the website and the README file for more info<br />~abinit/tests/built-in/README<br /><br />I hope that helped.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=338&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:53 GMT -->
</html>
