<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=3829 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:54:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>abinit 6.8.1 + gfortran + mpich2 = no compile - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopice498.html?t=1206">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic0700.html?f=3&amp;t=1206">abinit 6.8.1 + gfortran + mpich2 = no compile</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="posting2c00.html?mode=reply&amp;f=3&amp;t=1206" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic3207.html?f=3&amp;t=1206&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="1206" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			8 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p3811" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3811">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3223.html?mode=viewprofile&amp;u=751" class="username">l0rd_hex</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search55ce.html?author_id=751&amp;sr=posts">3</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 07, 2011 10:28 pm</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Edmonton, Alberta</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content3811">

						<h3 class="first"><a href="#p3811">abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting88cf.html?mode=quote&amp;f=3&amp;p=3811" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopiccbb7.html?p=3811#p3811" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3223.html?mode=viewprofile&amp;u=751" class="username">l0rd_hex</a></strong> &raquo; </span>Thu Jul 07, 2011 10:57 pm
			</p>
			
			
			
			<div class="content">Hi abiniters, <br /><br />I'm having an issue compiling abinit 6.8.1 in parallel, I was able to compile it with no issues in serial.<br /><br />I've cleaned the directory, and running configure like so:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --enable-mpi --with-mpi-prefix=/usr </code></pre></div><br /><br />I'm getting positive results regarding MPI from the configure log:<br /><br />checking whether the C compiler supports MPI... yes<br />checking whether the C++ compiler supports MPI... yes<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... yes<br />configure: enabling MPI I/O support<br />checking whether to build MPI code... yes<br />checking whether to build MPI I/O code... yes<br /><br />when I run <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make mj4</code></pre></div> or just <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make</code></pre></div><br /><br />It eventually fails with this error:<br /><br />Making all in 12_hide_mpi<br />make[3]: Entering directory `/home/XXX/Download/abinit-6.8.1/src/12_hide_mpi'<br />/usr/bin/mpif90 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs   -ffree-form -J/home/XXX/Download/abinit-6.8.1/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none  -c -o m_xmpi.o m_xmpi.F90<br />m_xmpi.F90:2193.28:<br /><br /> call MPI_Type_hvector(ny,1,stride_x,column_type,plane_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />m_xmpi.F90:2195.28:<br /><br /> call MPI_Type_hvector(nz,1,ldy*stride_x,plane_type,vol_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />m_xmpi.F90:2197.28:<br /><br /> call MPI_Type_hvector(na,1,ldz*ldy*stride_x,vol_type,new_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />m_xmpi.F90:2113.28:<br /><br /> call MPI_Type_hvector(ny,1,stride_x,column_type,plane_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />m_xmpi.F90:2115.28:<br /><br /> call MPI_Type_hvector(nz,1,ldy*stride_x,plane_type,new_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />m_xmpi.F90:2036.28:<br /><br /> call MPI_Type_hvector(ny,1,stride_x,column_type,new_type,mpi_err)<br />                           1<br />Error: Type mismatch in argument 'v2' at (1); passed INTEGER(4) to INTEGER(8)<br />make[3]: *** [m_xmpi.o] Error 1<br />make[3]: Leaving directory `/home/XXX/Download/abinit-6.8.1/src/12_hide_mpi'<br />make[2]: *** [all-recursive] Error 1<br />make[2]: Leaving directory `/home/XXX/Download/abinit-6.8.1/src'<br />make[1]: *** [all-recursive] Error 1<br />make[1]: Leaving directory `/home/XXX/Download/abinit-6.8.1'<br />make: *** [all] Error 2<br /><br />I'm not too sure what the problem is, I was wondering maybe if it was a 32-bit vs 64-bit problem (just because of the integer size mismatch). <br /><br />Has anyone seen this or can offer some advice?<br /><br />The machine is an Intel Xeon 64-bit install of Fedora 10 (yes, I know it's out of date but I'm hoping that's not the issue) with 16 GB of RAM.<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>uname -a = Linux XXX 2.6.27.41-170.2.117.fc10.x86_64 #1 SMP Thu Dec 10 10:36:29 EST 2009 x86_64 x86_64 x86_64 GNU/Linux</code></pre></div><br /><br />EDIT: I forgot to mention, that I also tried it with  --enable-64bit-flags in the configure settings, no dice.<br /><br />Thanks for taking the time to read, <br /><br />John</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p3813" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3813">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3223.html?mode=viewprofile&amp;u=751" class="username">l0rd_hex</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search55ce.html?author_id=751&amp;sr=posts">3</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 07, 2011 10:28 pm</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Edmonton, Alberta</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content3813">

						<h3 ><a href="#p3813">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting7ad9.html?mode=quote&amp;f=3&amp;p=3813" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicbd7a.html?p=3813#p3813" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3223.html?mode=viewprofile&amp;u=751" class="username">l0rd_hex</a></strong> &raquo; </span>Thu Jul 07, 2011 11:53 pm
			</p>
			
			
			
			<div class="content">Hmm, I've got it compiled with --with-mpi-level=1 this should work for now.<br /><br /><br />Thanks, <br />John</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p3820" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3820">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content3820">

						<h3 ><a href="#p3820">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingdd98.html?mode=quote&amp;f=3&amp;p=3820" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc63b.html?p=3820#p3820" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Fri Jul 08, 2011 10:32 pm
			</p>
			
			
			
			<div class="content">Hi John,<br /><br />I just encountered the same problem (not yet understood) with the development version 6.9.1 of abinit,  mpich2 1.4.0  and  gcc 4.6.1   <img class="smilies" src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /> <br /><br />it still works with version 6.9.1, mpich2 1.3.1  and gcc 4.5.3  !<br /><br />What versions of mpich2 and gcc are you using ?<br /><br />regards<br /><br />jmb</div>
			
			
			
									
									<div id="sig3820" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p3821" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3821">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content3821">

						<h3 ><a href="#p3821">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0f42.html?mode=quote&amp;f=3&amp;p=3821" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic2dc4-2.html?p=3821#p3821" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Fri Jul 08, 2011 11:13 pm
			</p>
			
			
			
			<div class="content">it compiles with 6.9.1, mpich2  <strong class="text-strong">1.3.2p1</strong>  and gcc 4.6.1    <img class="smilies" src="images/smilies/icon_cool.gif" alt="8-)" title="Cool" /> <br /><br />there is something in mpich2 1.4.0...<br /><br />to follow...<br /><br />jmb</div>
			
			
			
									
									<div id="sig3821" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p3829" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3829">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content3829">

						<h3 ><a href="#p3829">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb564.html?mode=quote&amp;f=3&amp;p=3829" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicb76d.html?p=3829#p3829" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Sun Jul 10, 2011 9:10 am
			</p>
			
			
			
			<div class="content">Hi,<br /><br />the explaination :<br /><br /><blockquote class="uncited"><div>mpich2-1.4's explicitly defines MPI_Type_hvector in fortran90 module<br />as follows:<br /><br />       SUBROUTINE MPI_TYPE_HVECTOR(v0,v1,v2,v3,v4,ierror)<br />       USE MPI_CONSTANTS,ONLY:MPI_ADDRESS_KIND<br />       INTEGER v0, v1<br />       INTEGER(KIND=MPI_ADDRESS_KIND) v2<br />       INTEGER v3, v4<br />       INTEGER ierror<br />       END SUBROUTINE MPI_TYPE_HVECTOR<br /><br />While in mpich2-1.3.2p1, there isn't explicit prototype<br />for MPI_Type_hvector in fortran90 module.<br /></div></blockquote><br /><br />there were some updates to f90 &quot;mpi&quot; module ( if we use &quot;use mpi&quot; ) in 1.4 which probably do a better job of catching these errors.<br /><br />it's the reason why, with &quot; --with-mpi-level=1&quot; , it works...<br /><br />now, until abinit's developpers solve the problem, we can use the mpich2 1.3.2p1 version<br /><br />jmb</div>
			
			
			
									
									<div id="sig3829" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p3883" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile3883">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7b97.html?mode=viewprofile&amp;u=443" class="username">Steven Miller</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1622.html?author_id=443&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Jul 30, 2010 10:39 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content3883">

						<h3 ><a href="#p3883">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingfbea.html?mode=quote&amp;f=3&amp;p=3883" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicc67b.html?p=3883#p3883" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7b97.html?mode=viewprofile&amp;u=443" class="username">Steven Miller</a></strong> &raquo; </span>Wed Jul 27, 2011 6:38 pm
			</p>
			
			
			
			<div class="content">If you look at this page:<br /><br /><!-- m --><a class="postlink" href="http://www.mpi-forum.org/docs/mpi22-report/node327.htm#Node327">http://www.mpi-forum.org/docs/mpi22-rep ... tm#Node327</a><!-- m --><br /><br />It appears that the MPICH2-1.4 implementation is in error. The third parameter (stride) should be INTEGER, not INTEGER(KIND=MPI_ADDRESS_TYPE) as it is prototyped in the 1.4 version of MPICH2. This subroutine (MPI_TYPE_HVECTOR) is a legacy MPI-1 function which is deprecated in MPI-2, precisely because of this issue. The third parameter is defined differently for Fortran than for C or C++. I believe that the abinit code correctly uses the function according to the MPI standard.<br /><br />However, the problem is easy enough to fix. I have a patch that corrects the prototype generation code in mpich2. I'm currently running abinit 6.8.1 with mpich2-1.4 using this modification and so far it seems fine. It patches the mpich2-1.4/src/binding/f90/buildiface script. I'd attach it, but the forum won't let me.  <img class="smilies" src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" />  But here is the text:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>diff -ur mpich2-1.4.1p1/src/binding/f90/buildiface ../mpipatch/mpich2-1.4.1p1/src/binding/f90/buildiface<br />--- mpich2-1.4.1p1/src/binding/f90/buildiface&nbsp; &nbsp;2011-08-05 12:59:41.000000000 -0400<br />+++ ../mpipatch/mpich2-1.4.1p1/src/binding/f90/buildiface&nbsp; &nbsp;2011-10-11 13:28:20.298986134 -0400<br />@@ -117,9 +117,13 @@<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_hindexed-3' =&gt; 'int&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_indexed-2' =&gt; 'int&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_indexed-3' =&gt; 'int&#91;&#93;',<br />+&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_hvector-3' =&gt; 'int',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_struct-2' =&gt; 'int&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_struct-3' =&gt; 'int&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_struct-4' =&gt; 'MPI_Datatype&#91;&#93;',<br />+&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_extent-2' =&gt; 'int',<br />+&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_lb-2' =&gt; 'int',<br />+&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_ub-2' =&gt; 'int',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Waitall-2' =&gt; 'MPI_Request&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Waitall-3' =&gt; 'MPI_Status&#91;&#93;',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Waitany-2' =&gt; 'MPI_Request&#91;&#93;',<br />diff -ur mpich2-1.4.1p1/src/binding/f90/mpi_base.f90.in ../mpipatch/mpich2-1.4.1p1/src/binding/f90/mpi_base.f90.in<br />--- mpich2-1.4.1p1/src/binding/f90/mpi_base.f90.in&nbsp; &nbsp;2011-09-01 14:53:13.000000000 -0400<br />+++ ../mpipatch/mpich2-1.4.1p1/src/binding/f90/mpi_base.f90.in&nbsp; &nbsp;2011-10-11 13:28:27.970862078 -0400<br />@@ -15,9 +15,7 @@<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_COMM_FREE_KEYVAL<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBROUTINE MPI_TYPE_EXTENT(v0,v1,ierror)<br />-&nbsp; &nbsp; &nbsp; &nbsp;USE MPI_CONSTANTS,ONLY:MPI_ADDRESS_KIND<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER(KIND=MPI_ADDRESS_KIND) v1<br />+&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0, v1<br />&nbsp; &nbsp; &nbsp; &nbsp; INTEGER ierror<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_TYPE_EXTENT<br />&nbsp;<br />@@ -114,9 +112,7 @@<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_OP_COMMUTATIVE<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBROUTINE MPI_TYPE_LB(v0,v1,ierror)<br />-&nbsp; &nbsp; &nbsp; &nbsp;USE MPI_CONSTANTS,ONLY:MPI_ADDRESS_KIND<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER(KIND=MPI_ADDRESS_KIND) v1<br />+&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0, v1<br />&nbsp; &nbsp; &nbsp; &nbsp; INTEGER ierror<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_TYPE_LB<br />&nbsp;<br />@@ -562,9 +558,7 @@<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_TYPE_CREATE_RESIZED<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBROUTINE MPI_TYPE_UB(v0,v1,ierror)<br />-&nbsp; &nbsp; &nbsp; &nbsp;USE MPI_CONSTANTS,ONLY:MPI_ADDRESS_KIND<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER(KIND=MPI_ADDRESS_KIND) v1<br />+&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0, v1<br />&nbsp; &nbsp; &nbsp; &nbsp; INTEGER ierror<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_TYPE_UB<br />&nbsp;<br />@@ -822,10 +816,7 @@<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_GET_VERSION<br />&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUBROUTINE MPI_TYPE_HVECTOR(v0,v1,v2,v3,v4,ierror)<br />-&nbsp; &nbsp; &nbsp; &nbsp;USE MPI_CONSTANTS,ONLY:MPI_ADDRESS_KIND<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0, v1<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER(KIND=MPI_ADDRESS_KIND) v2<br />-&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v3, v4<br />+&nbsp; &nbsp; &nbsp; &nbsp;INTEGER v0, v1, v2, v3, v4<br />&nbsp; &nbsp; &nbsp; &nbsp; INTEGER ierror<br />&nbsp; &nbsp; &nbsp; &nbsp; END SUBROUTINE MPI_TYPE_HVECTOR<br /></code></pre></div><br /><br />I'm going to try to submit this to the mpich2 devs, but in the meantime, this patch seems to work.<br /><br />UPDATE: (11 OCT 2011)<br />I updated the patch in the above code block. There were some things missing. See post below. Also, I tested with the newer mpich2-1.4.1p1 release, and it seems to work, but should work with any 1.4.x release. Let's hope they include it in 1.5.x!<br /><br />Cut and paste the patch into a file (patchfile.txt) and then apply within the mpich2-1.4.x/ directory using<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>patch -p1 &lt;patchfile.txt<br /></code></pre></div><br /><br />Please let me know if you have any problems with it.</div>
			
			
			
													<div class="notice">
					Last edited by <a href="memberlist7b97.html?mode=viewprofile&amp;u=443" class="username">Steven Miller</a> on Tue Oct 11, 2011 9:02 pm, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4221" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4221">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content4221">

						<h3 ><a href="#p4221">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd4f5.html?mode=quote&amp;f=3&amp;p=4221" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6fc6.html?p=4221#p4221" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Mon Oct 10, 2011 3:44 pm
			</p>
			
			
			
			<div class="content">Hi Steven,<br /><br />sorry for this long delay of in my reaction...<br /><br /><blockquote><div><cite>Steven Miller wrote:</cite><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--- src/binding/f90/buildiface&nbsp; &nbsp;2011-03-20 15:37:51.000000000 -0400<br />+++ ../../mpich2-1.4/src/binding/f90/buildiface&nbsp; &nbsp;2011-07-25 19:12:52.529963846 -0400<br />@@ -189,6 +189,7 @@<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Op_commutative-2' =&gt; 'bool',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'File_set_atomicity-2' =&gt; 'bool',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'File_get_atomicity-2' =&gt; 'bool',<br />+&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 'Type_hvector-3' =&gt; 'int',<br />&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;);<br />&nbsp;<br />&nbsp;# Some routines must be skipped (custom code is provided for them)<br /></code></pre></div><br /><br />I'm going to try to submit this to the mpich2 devs, but in the meantime, this patch seems to work.</div></blockquote><br /><br />but, I don't known how you succeeded to compile with this patch but for me, it doesn't work...<br /><br />with the version mpich2 1.4.1p1 , it doesn't yet work... because the patch was not included...<br /><br />but with the svn version, everything works  <img class="smilies" src="images/smilies/icon_cool.gif" alt="8-)" title="Cool" /><br /><br />we can see in trac that , your patch was been integrated  but it was not enough :<br /><br /><a href="http://trac.mcs.anl.gov/projects/mpich2/changeset/8809/mpich2/trunk/src/binding/f90/buildiface#file0" class="postlink">http://trac.mcs.anl.gov/projects/mpich2/changeset/8809/mpich2/trunk/src/binding/f90/buildiface#file0</a><br /><br /><a href="http://trac.mcs.anl.gov/projects/mpich2/log/mpich2/trunk/src/binding/f90/buildiface?rev=9009" class="postlink">http://trac.mcs.anl.gov/projects/mpich2/log/mpich2/trunk/src/binding/f90/buildiface?rev=9009</a><br /><br /><br />we must wait for 1.5.x version...<br /><br />regards<br /><br />jmb</div>
			
			
			
									
									<div id="sig4221" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p4228" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile4228">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist7b97.html?mode=viewprofile&amp;u=443" class="username">Steven Miller</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1622.html?author_id=443&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Jul 30, 2010 10:39 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content4228">

						<h3 ><a href="#p4228">Re: abinit 6.8.1 + gfortran + mpich2 = no compile</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting078d.html?mode=quote&amp;f=3&amp;p=4228" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic3804-2.html?p=4228#p4228" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist7b97.html?mode=viewprofile&amp;u=443" class="username">Steven Miller</a></strong> &raquo; </span>Tue Oct 11, 2011 9:26 pm
			</p>
			
			
			
			<div class="content">Hey Jean-Michel,<br /><br />I forgot to mention in my earlier post: if you use the version of the patch I originally posted, you need to run the patched version of the &quot;src/binding/f90/buildiface&quot; script before running the &quot;./configure&quot; script. It generates some input files for the configure script, which configure uses to generate some of the header files. Ordinarily, this is something that is already done by the developers prior to releasing the source package (I mistakenly thought it was invoked during the configure script). I apologize for the omission.<br /><br />I went ahead and updated my original post so that all files needed to be patched are patched. With this version of the patch, users do not need to re-run &quot;buildiface&quot; (but it won't hurt either). Also, as you mentioned, the trac website shows an expanded patch file over what I posted. Those additions are meant to address several other functions that were buggy in the mpich2-1.4.x releases (MPI_Type_extent, MPI_Type_lb and MPI_Type_ub), but ABINIT does not currently use these functions and was not affected by those bugs. Only MPI_Type_hvector was causing ABINIT problems, and that was the only one I addressed in the patch I originally posted.<br /><br />But, I went ahead and included those other bug fixes in the updated patch (perhaps it will help other programs besides ABINIT). And further, I tested it with the current version, mpich2-1.4.1p1, and it seems to compile ABINIT 6.8.1 just fine. It should work with any of the 1.4.x versions. Give it a try and let me know if there's any further issues.<br /><br />I see, as you mention, they fixed it in SVN, but while we wait for the next major release, users can hopefully continue to use the production 1.4.x releases with this patch.<br /><br />-Steve</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting2c00.html?mode=reply&amp;f=3&amp;t=1206" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic3207.html?f=3&amp;t=1206&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=1206">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			8 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=3829 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:54:58 GMT -->
</html>
