<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2161&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Problem emerged after successful configuring</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Problem emerged after successful configuring</h2>
		<p><a href="viewtopic9a98.html?f=3&amp;t=2161">https://forum.abinit.org/viewtopic.php?f=3&amp;t=2161</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Problem emerged after successful configuring</h3>
				<div class="date">Posted: <strong>Wed May 29, 2013 7:29 am</strong></div>
				<div class="author">by <strong>Serge</strong></div>
				<div class="content">Hello once more.<br /><br />Configuring Abinit on a Linux system of 64 bits passes successfully but building fails. Here are the latest command lines of the process:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/usr/bin/mpif90 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/usr/include -I/home/phys450/abinit-7.2.1/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/home/phys450/abinit-7.2.1/src/mods&nbsp; -O2 -mtune=native -march=native -g -ffree-line-length-none&nbsp; &nbsp;-c -o timana.o timana.F90<br />rm -f lib95_drive.a<br />ar rc lib95_drive.a abi_init_globals.o afterscfloop.o bethe_salpeter.o defs_scfcvargs.o driver.o dtfil_init1.o dtfil_init2.o dtfil_init_img.o elpolariz.o gstate.o gstateimg.o gw_driver.o iofn1.o loop3dte.o loper3.o mover.o nonlinear.o outscfcv.o pawuj_drive.o respfn.o scfcv.o scfcv_new.o scfcv_new2.o scfcv_init.o scfcv_init2.o scphon.o scphon_build_qsym_map.o scphon_check_fcart.o scphon_dynmat_to_freq2.o scphon_free_energy.o scphon_freq_to_dynmat.o scphon_freq_to_normmode.o scphon_ft_fcart.o scphon_interpolate_phonon_and_dos.o scphon_make_phonon_dos.o scphon_new_frequencies.o scphon_supercell_vectors_init.o scphon_update_xcart.o scphon_phonon_init.o scphon_qpoint_init.o screening.o sigma.o testfi.o timana.o interfaces_95_drive.o <br />ranlib lib95_drive.a<br />make&#91;3&#93;: Leaving directory `/home/phys450/abinit-7.2.1/src/95_drive'<br />Making all in 98_main<br />make&#91;3&#93;: Entering directory `/home/phys450/abinit-7.2.1/src/98_main'<br />/usr/bin/mpif90 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/home/phys450/abinit-7.2.1/fallbacks/exports/include&nbsp; &nbsp;-I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/usr/include -I/home/phys450/abinit-7.2.1/fallbacks/exports/include -I/usr/include/&nbsp; &nbsp;-ffree-form -J/home/phys450/abinit-7.2.1/src/mods&nbsp; -O2 -mtune=native -march=native -g -ffree-line-length-none&nbsp; &nbsp; -g -ffree-line-length-none&nbsp; &nbsp;-c -o abinit-abinit.o `test -f 'abinit.F90' || echo './'`abinit.F90<br />/usr/bin/mpif90 -ffree-form -J/home/phys450/abinit-7.2.1/src/mods&nbsp; -O2 -mtune=native -march=native -g -ffree-line-length-none&nbsp; &nbsp; -g -ffree-line-length-none&nbsp; &nbsp; &nbsp;-o abinit abinit-abinit.o&nbsp; ../../src/95_drive/lib95_drive.a ../../src/79_seqpar_mpi/lib79_seqpar_mpi.a ../../src/77_ddb/lib77_ddb.a ../../src/77_suscep/lib77_suscep.a ../../src/72_response/lib72_response.a ../../src/71_bse/lib71_bse.a ../../src/70_gw/lib70_gw.a ../../src/69_wfdesc/lib69_wfdesc.a ../../src/68_dmft/lib68_dmft.a ../../src/68_recursion/lib68_recursion.a ../../src/68_rsprc/lib68_rsprc.a ../../src/67_common/lib67_common.a ../../src/66_paw/lib66_paw.a ../../src/66_wfs/lib66_wfs.a ../../src/65_psp/lib65_psp.a ../../src/65_nonlocal/lib65_nonlocal.a ../../src/64_atompaw/lib64_atompaw.a ../../src/62_occeig/lib62_occeig.a ../../src/62_iowfdenpot/lib62_iowfdenpot.a ../../src/62_wvl_wfs/lib62_wvl_wfs.a ../../src/62_poisson/lib62_poisson.a ../../src/62_cg_noabirule/lib62_cg_noabirule.a ../../src/61_ionetcdf/lib61_ionetcdf.a ../../src/59_io_mpi/lib59_io_mpi.a ../../src/57_iovars/lib57_iovars.a ../../src/56_recipspace/lib56_recipspace.a ../../src/56_xc/lib56_xc.a ../../src/56_mixing/lib56_mixing.a ../../src/53_abiutil/lib53_abiutil.a ../../src/53_spacepar/lib53_spacepar.a ../../src/53_ffts/lib53_ffts.a&nbsp; ../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a ../../src/51_manage_mpi/lib51_manage_mpi.a ../../src/49_gw_toolbox_oop/lib49_gw_toolbox_oop.a ../../src/47_xml/lib47_xml.a ../../src/45_psp_parser/lib45_psp_parser.a ../../src/45_geomoptim/lib45_geomoptim.a ../../src/44_abitypes_defs/lib44_abitypes_defs.a ../../src/43_wvl_wrappers/lib43_wvl_wrappers.a ../../src/43_ptgroups/lib43_ptgroups.a ../../src/42_nlstrain/lib42_nlstrain.a ../../src/42_parser/lib42_parser.a ../../src/41_geometry/lib41_geometry.a ../../src/32_util/lib32_util.a ../../src/28_numeric_noabirule/lib28_numeric_noabirule.a ../../src/27_toolbox_oop/lib27_toolbox_oop.a ../../src/18_timing/lib18_timing.a ../../src/16_hideleave/lib16_hideleave.a&nbsp; ../../src/14_hidewrite/lib14_hidewrite.a ../../src/12_hide_mpi/lib12_hide_mpi.a ../../src/11_qespresso_ext/lib11_qespresso_ext.a ../../src/11_memory_mpi/lib11_memory_mpi.a ../../src/10_defs/lib10_defs.a&nbsp; ../../src/01_linalg_ext/lib01_linalg_ext.a ../../src/01_interfaces_ext/lib01_interfaces_ext.a&nbsp; -L/home/phys450/abinit-7.2.1/fallbacks/exports/lib -lwannier90 -L/home/phys450/abinit-7.2.1/fallbacks/exports/lib -lbigdft -ldft_common -labinit -L/home/phys450/abinit-7.2.1/fallbacks/exports/lib -letsf_io_low_level -letsf_io_utils -letsf_io -L/usr/lib -lnetcdf -lnetcdff -L/home/phys450/abinit-7.2.1/fallbacks/exports/lib -lxc -L/usr/x86_64-linux-gnu/ -lfftw3 -L/usr/lib -llapack -lf77blas -lcblas -latlas -lrt -L/usr/lib/openmpi/lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../.. -lmpi_f90 -lmpi_f77 -lmpi -lopen-rte -lopen-pal -ldl -lnsl -lutil -lgfortran -lm -lquadmath -lpthread -L/usr/lib/openmpi/lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../.. -lmpi_f90 -lmpi_f77 -lmpi -lopen-rte -lopen-pal -ldl -lnsl -lutil -lgfortran -lm -lquadmath -lpthread <br />../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a(m_fftw3.o): In function `__m_fftw3_MOD_cplan_many_dft':<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:2909: undefined reference to `sfftw_plan_many_dft_'<br />../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a(m_fftw3.o): In function `__m_fftw3_MOD_fftw3_c2c_op_spc':<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:1803: undefined reference to `sfftw_execute_dft_'<br />../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a(m_fftw3.o): In function `__m_fftw3_MOD_fftw3_execute_dft_spc':<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:3216: undefined reference to `sfftw_execute_dft_'<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:3216: undefined reference to `sfftw_execute_dft_'<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:3216: undefined reference to `sfftw_execute_dft_'<br />/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:3216: undefined reference to `sfftw_execute_dft_'<br />../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a(m_fftw3.o):/home/phys450/abinit-7.2.1/src/52_fft_mpi_noabirule/m_fftw3.F90:3216: more undefined references to `sfftw_execute_dft_' follow<br />collect2: Error: ld execution failed with return code 1<br />make&#91;3&#93;: *** &#91;abinit&#93; Error 1<br />make&#91;3&#93;: Leaving directory `/home/phys450/abinit-7.2.1/src/98_main'<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/home/phys450/abinit-7.2.1/src'<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `/home/phys450/abinit-7.2.1'<br />make: *** &#91;all&#93; Error 2<br />phys450@phys450-System-Product-Name /home/phys450/abinit-7.2.1 $ </code></pre></div><br /><br />Here is the config.ac file:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=&quot;/opt/abinit-7.2.1&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_netcdf_incs=&quot;-I/usr/include&quot;<br />with_netcdf_libs=&quot;-L/usr/lib -lnetcdf -lnetcdff&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/include/&quot;<br />with_fft_libs=&quot;-L/usr/x86_64-linux-gnu/ -lfftw3&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib -llapack -lf77blas -lcblas -latlas&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_maintainer_checks=&quot;no&quot;<br />enable_test_timeout=&quot;yes&quot;<br />enable_gui_build=&quot;no&quot;</code></pre></div><br />Please, help me.<br /><br />Thanks once more,<br /><br />Serge.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Problem emerged after successful configuring&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Thu May 30, 2013 9:41 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi Serge,<br /><br />your fftw3 package seems not support float <br /><br />for example, on ubuntu, there are the float(single) ( libfftw3f.a ) and real ( libfftw3.a) libraries :<br />then the ac file contains :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_fft_flavor = fftw3<br />with_fft_incs = -I/usr/include/<br />with_fft_libs = -L/usr/lib64 -lfftw3 -lfftw3f</code></pre></div><br /><br />you must compile fftw3 with float support :  ./configure --enable-float<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Problem emerged after successful configuring</h3>
				<div class="date">Posted: <strong>Sun Oct 06, 2013 7:29 pm</strong></div>
				<div class="author">by <strong>gryko</strong></div>
				<div class="content">I had the same problem - indeed, the FFTW3 must be compiled with the --enable-float option. <br /> In fact, the FFTW3 must be compiled twice, without the --enable-float option to <br /> make libfftw3  library, and then with the --enable-float option to make libfftw3f library.  <br /><br /> Thank you,<br /> Jan Gryko</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Problem emerged after successful configuring</h3>
				<div class="date">Posted: <strong>Mon Oct 07, 2013 9:55 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">of course...<br /><br />sorry for my &quot;inaccuracy&quot;...<br /><br />jmb</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2161&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:17 GMT -->
</html>
