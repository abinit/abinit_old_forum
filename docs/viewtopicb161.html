<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=704&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:36:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; fix large namber of atoms!</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>fix large namber of atoms!</h2>
		<p><a href="viewtopicc036.html?f=9&amp;t=704">https://forum.abinit.org/viewtopic.php?f=9&amp;t=704</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Sun Oct 31, 2010 9:30 am</strong></div>
				<div class="author">by <strong>fariba</strong></div>
				<div class="content">Hi <br />I want to relax 2 of 98 atoms, so I should fix 96 atoms.<br />I have tested every way but It didn't work : <br />iatfix 96*1 <br />or <br />iatfix 1 2 3 4 5 6 7 ......<br />now I'm confused and was wondering if someone can tell me<br />how I can fix 96 atom?!<br /><br />best regards<br />fariba</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Sun Oct 31, 2010 9:23 pm</strong></div>
				<div class="author">by <strong>david.waroquiers</strong></div>
				<div class="content">Hello,<br /><br />I guess you set natfix 96 ?<br />Then you have to specify which atoms you want to fix. If you want to fix all the atoms except the two last ones for example, you have to put<br />iatfix 1 2 3 4 5 6 7 ......... 93 94 95 96<br />Of course, you have to type the indices of all the atoms you want to fix !<br /><br />David</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Mon Nov 01, 2010 7:23 am</strong></div>
				<div class="author">by <strong>fariba</strong></div>
				<div class="content">Hi <br />thanks a lot for your sincerely attention!<br />yes,I let the two last atoms to fix but in this way:<br /><br />iatfix 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18<br />       19 20 21 22 23 24 25 26 27 28 29 30 31 32 33<br />       34 35 36 37 38 39 40 41 42 43 44 45 46 47 48<br />       49 50 51 52 53 54 55 56 57 58 59 60 61 62 63<br />       64 65 66 67 68 69 70 71 72 73 74 75 76 77 78<br />       79 80 81 82 83 84 85 86 87 88 89 90 91 92 93<br />       94 95 96<br /><br />is it true? or I should go at the end of the line?<br /><br />best regards <br />fariba</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Mon Nov 01, 2010 4:11 pm</strong></div>
				<div class="author">by <strong>david.waroquiers</strong></div>
				<div class="content">Hello,<br /><br />If you could post the error that you get in the log file (part of it, usually the end of the log file is enough), it would be easier to tell you what's wrong there.<br />Did you specify the natfix variable explicitely ? (indicates how many atoms are fixed, otherwise abinit considers natfix as 0  !)<br /><br />David</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Tue Nov 02, 2010 7:50 am</strong></div>
				<div class="author">by <strong>fariba</strong></div>
				<div class="content">Hello<br />I specified natfix as well, (natfix=96) and I got these :<br /><br />WARNING - These should obey zval-nelect_occ=charge to better than 0.10E-10<br />   Action : check input file for occ,wtk, and charge.<br />   Note that wtk is NOT automatically normalized when occopt=2,<br />   but IS automatically normalized otherwise.<br /><br /><br />memana : ERROR -<br />  Test failed to allocate  839745.910 Mbytes<br />  It is not worth to continue<br />  Action : modify input variable to fit the available memory.<br />  or increase limit on available memory.<br />  leave_new : decision taken to exit ...symbrav : COMMENT -<br />  The Bravais lattice determined from modified primitive<br />  vectors, bravais(1)=  3, has a lower symmetry than before,<br />  but is still more symmetric than the real one, iholohedry=  1<br />  obtained by taking into account the atomic positions.<br /><br /><br /><br />symbrav : COMMENT -<br />  The Bravais lattice determined from modified primitive<br />  vectors, bravais(1)=  3, has a lower symmetry than before,<br />  but is still more symmetric than the real one, iholohedry=  1<br />  obtained by taking into account the atomic positions.<br /><br />I think it can't understand the fixed atoms and It is going to relax all the atoms !!!<br />I don't know, I did my best but nothing worked!! <img class="smilies" src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /><br /> <br />Here is my input file:<br /><br />acell 17.21657000 17.21657000 10.00000000 angstrom<br />angdeg 90 90 120<br />nsym 1<br />kptopt 1<br />wtk 1<br />ngkpt 15 24 9<br />nshiftk 1<br />shiftk 0.0 0.0 0.5<br />nband 394<br />occopt 1<br />getwfk -1<br />enunit 2<br />natom 98<br />ntypat 1<br />typat 98*1<br />znucl 6.0<br />xred<br />     0.047619 0.095238 0.500000<br />      ........<br />      ........<br />     0.047619 0.238095 0.500000 (I wrote hear the all xreds)<br />nstep 20         <br />tolmxf 1.85d-7<br />tolwfr 1.0d-13<br />ionmov 2     <br />ntime 10<br />natfix 96<br />iatfix 1 2 3 4 5 6........ 92 93 94 95 96<br />ecutsm 0.5 ev<br />dilatmx 1.05<br />intxc 0<br />ixc 11            <br />iscf 3<br />iprcel 45<br />ecut  2.0d01<br /><br />really sorry....<br />best regards<br /><br />fariba</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Tue Nov 02, 2010 2:04 pm</strong></div>
				<div class="author">by <strong>david.waroquiers</strong></div>
				<div class="content">Hello,<br /><br />It seems that your system is way too big. You are using a LOT of k-points, with a very big unit cell. You will definitely not be able to do your simulations with these parameters. Abinit tells you that you need 800 GB of memory for the wavefunction and does not go beyond (because it tried to allocate this amount of memory and could not do it). You should try to reduce the number of k points or the size of your supercell (maybe a lesser number of atoms if possible ?).<br /><br />David</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: fix large namber of atoms!</h3>
				<div class="date">Posted: <strong>Wed Nov 03, 2010 7:22 am</strong></div>
				<div class="author">by <strong>fariba</strong></div>
				<div class="content">Dear David<br />thanks a lot.It is working now!!!!! I just corrected the ngkpt! that you said !! <img class="smilies" src="images/smilies/icon_e_biggrin.gif" alt=":D" title="Very Happy" /><br />thank you!! I didn't pay attention to it.<br />I never forget you.I wish the bests for you!! Thank you......  <img class="smilies" src="images/smilies/icon_razz.gif" alt=":P" title="Razz" />  <img class="smilies" src="images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /> <br /><br />best regards<br />fariba</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=704&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:36:15 GMT -->
</html>
