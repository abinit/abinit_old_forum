<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1851&p=5817 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:39:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>abinit6.12.3 crashes in more than 1 node (Intel Comp) - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopic9522.html?t=1851">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopicff1d.html?f=3&amp;t=1851">abinit6.12.3 crashes in more than 1 node (Intel Comp)</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="posting196e.html?mode=reply&amp;f=3&amp;t=1851" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic4825.html?f=3&amp;t=1851&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="1851" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			9 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p5816" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5816">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5816">

						<h3 class="first"><a href="#p5816">abinit6.12.3 crashes in more than 1 node (Intel Comp)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2630.html?mode=quote&amp;f=3&amp;p=5816" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic79d5.html?p=5816#p5816" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Tue Oct 09, 2012 12:43 pm
			</p>
			
			
			
			<div class="content">Hello Everyone,<br /><br />I have compiled abinit6.12.3 without errors and it runs properly when I am only using one computing node in our cluster (the computer node has 2 hexacore processors). The problem arises when I try to use more than one computing node: it crashes at the very beginning.<br /><br />In the attached files there is all the information I could gather:<br /><br />- File 'config.log': log file from the configuration of abinit. In brief: I used Intel MPi 4.0.3, Intel Compilers XE2013, Intel MKL BLACS and Intel MKL FFTW3<br /><br />- File 'simul.log': log file of the simulation that crashes. I used several options within mpirun to get the information related to MPI calls since it seems that the problem is there ( -v -check_mpi -genv I_MPI_DEBUG 5).<br /><br />- File 'abinit.in': the input file of the simulation I am trying to run, just in case it is meaningful. In brief, I want to generate the WFK necessary for a subsequent run to generate a KSS file. This input file works fine if I only use one computing node, so I don't think that the problem is here.<br /><br />It seems from the log that the errors are related to MPI since there are messages such as:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;23&#93; ERROR: LOCAL:MPI:CALL_FAILED: error<br />&#91;23&#93; ERROR:&nbsp; &nbsp; Null communicator.<br />&#91;23&#93; ERROR:&nbsp; &nbsp; Error occurred at:<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;mpi_comm_rank_(comm=MPI_COMM_NULL, *rank=0x29319b8, *ierr=0x7fff83fabb74)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;initmpi_grid_ (/home/ivasan/programas/abinit/abinit-6.12.3b/src/51_manage_mpi/initmpi_grid.F90:178)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;invars1_ (/home/ivasan/programas/abinit/abinit-6.12.3b/src/57_iovars/invars1.F90:1015)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;invars1m_ (/home/ivasan/programas/abinit/abinit-6.12.3b/src/57_iovars/invars1m.F90:186)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;m_ab6_invars_mp_ab6_invars_load_ (/home/ivasan/programas/abinit/abinit-6.12.3b/src/57_iovars/m_ab6_invars_f90.F90:548)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;MAIN__ (/home/ivasan/programas/abinit/abinit-6.12.3b/src/98_main/abinit.F90:260)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;main (/home/ivasan/programas/abinit/abinit-6.12.3b/bin/abinit)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;(/lib64/libc-2.5.so)<br />&#91;23&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;(/home/ivasan/programas/abinit/abinit-6.12.3b/bin/abinit)<br /></code></pre></div><br /><br />I will appreciate if anyone could give me a hint about what can I check/modify in order to solve this problem.<br /><br />Thank you very much in advance for your answers and your time.<br /><br />Kind regards,<br /><br />Iván</div>
			
			
							<dl class="attachbox">
					<dt>
						Attachments
					</dt>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file61ac.php?id=620">config.log</a></dt>
			<dd><em>Log file from ./configure &lt;options&gt;</em></dd>			<dd>(178.01 KiB) Downloaded 429 times</dd>
		</dl>
		
		
			</dd>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file07c2.php?id=622">abinit.in</a></dt>
			<dd><em>Input file of the simulation that crashes</em></dd>			<dd>(17.95 KiB) Downloaded 377 times</dd>
		</dl>
		
		
			</dd>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file946c.php?id=623">simul.log</a></dt>
			<dd><em>Log file from the simulation that crashes</em></dd>			<dd>(139.24 KiB) Downloaded 387 times</dd>
		</dl>
		
		
			</dd>
									</dl>
			
													<div class="notice">
					Last edited by <a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a> on Wed Oct 31, 2012 5:38 pm, edited 5 times in total.
									</div>
			
									<div id="sig5816" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5817" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5817">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist981e.html?mode=viewprofile&amp;u=71" class="avatar"><img class="avatar" src="download/fileb0c3.png?avatar=g8_1366628657.png" width="64" height="64" alt="User avatar" /></a>														</div>
								<a href="memberlist981e.html?mode=viewprofile&amp;u=71" style="color: #6633FF;" class="username-coloured">pouillon</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search42e4.html?author_id=71&amp;sr=posts">651</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Aug 19, 2009 10:08 am</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Spain</dd>
												
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact pouillon">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact pouillon</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="https://www.materialsevolution.es/" title="Website">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																																																<a href="skype:ypouillon80?userinfo" title="Skype" class="last-cell">
										<span class="contact-icon phpbb_skype-icon">Skype</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content5817">

						<h3 ><a href="#p5817">Re: abinit6.12.3 crashes when using several computing nodes</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf7ba.html?mode=quote&amp;f=3&amp;p=5817" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0078.html?p=5817#p5817" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist981e.html?mode=viewprofile&amp;u=71" style="color: #6633FF;" class="username-coloured">pouillon</a></strong> &raquo; </span>Tue Oct 09, 2012 1:42 pm
			</p>
			
			
			
			<div class="content">Your problem very likely comes from a bug of Intel 13.0 compilers. In general, I strongly advise against using *.0 versions of Intel compilers, as they usually contain many bugs.<br /><br />If you really need to use Intel compiilers, recompiling everything with a recent Intel 12.1 installation should solve the issue. I'm currently using it on some machines without any major issue.<br /><br />Please also remember that &quot;more recent&quot; doesn't always mean &quot;better&quot;. New major versions of any software usually have teething problems, and you should use them only if you are willing to contribute to their debugging.</div>
			
			
			
									
									<div id="sig5817" class="signature">Yann Pouillon<br /><em class="text-italics">Simune Atomistics<br />Donostia-San Sebastián, Spain</em></div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5818" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5818">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5818">

						<h3 ><a href="#p5818">Re: abinit6.12.3 crashes when using several computing nodes</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc1be.html?mode=quote&amp;f=3&amp;p=5818" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic2e53.html?p=5818#p5818" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Tue Oct 09, 2012 2:12 pm
			</p>
			
			
			
			<div class="content">Dear Yann,<br /><br />Thanks for your fast response. I will try to use the version of the Intel compilers you mention.<br /><br />I will let you know how it goes.<br /><br />Thanks!!!<br /><br />Iván</div>
			
			
			
									
									<div id="sig5818" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5872" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5872">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5872">

						<h3 ><a href="#p5872">Re: abinit6.12.3 crashes when using several computing nodes</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc102.html?mode=quote&amp;f=3&amp;p=5872" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0dbb.html?p=5872#p5872" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Fri Oct 26, 2012 4:26 pm
			</p>
			
			
			
			<div class="content">Dear Yann,<br /><br />I have been doing some more tests and somehow I managed to run the job in more than one computing node ... but I am quite surprised with the solution I found.<br /><br />It seems that the problem was in the input file, not in the configuration of my cluster. The input file of the simulation I want to run has these values for ionmov and optcell:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ionmov=2<br />optcell=2<br /></code></pre></div><br />With these values abinit only runs in one computing node (in both 6.10.3 and 6.12.3). However, if I change optcell to<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ionmov=2<br />optcell=0<br /></code></pre></div><br />it perfectly runs in more than one computing node.<br /><br />Is this behavior normal? I couldn't find any related warning in the manual about the limitations of optcell.<br /><br />Best regards,<br /><br />Iván</div>
			
			
			
									
									<div id="sig5872" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5874" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5874">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5874">

						<h3 ><a href="#p5874">Re: [SOLVED] abinit6.12.3 crashes in more than 1 node (Intel</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb798.html?mode=quote&amp;f=3&amp;p=5874" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic4ae0.html?p=5874#p5874" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Fri Oct 26, 2012 5:59 pm
			</p>
			
			
			
			<div class="content">Dear Yann,<br /><br />I managed to solve the problem. It seems that it was related to the stack.<br /><br />The solution was adding<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FCFLAGS_EXTRA=&quot; -heap-arrays&quot; CFLAGS_EXTRA=&quot;-heap-arrays&quot;</code></pre></div><br /><br />In the configure, which is now:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=&quot;/home/ivasan/programas/abinit/abinit-6.12.3&quot; CC=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiicc&quot; CXX=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiicpc&quot; FC=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiifort&quot; --enable-mpi --enable-mpi-io&nbsp; MPI_RUNNER=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpirun&quot; --with-mpi-libs=&quot;-L/opt/intel/impi/4.1.0/intel64/lib -lmpi&quot; --with-mpi-incs=&quot;-I/opt/intel/impi/4.1.0/intel64/include&quot; --with-linalg-flavor=&quot;mkl+scalapack&quot; --with-linalg-incs=&quot;-I/opt/intel/mkl/include/intel64/&quot; --with-fft-flavor=&quot;fftw3-mkl&quot; --with-fft-incs=&quot;-I/opt/intel/mkl/include/fftw&quot; --with-fft-libs=&quot;-L/opt/intel/mkl/interfaces/fftw3xf -lfftw3xf_intel&quot; --enable-gw-dpc --with-linalg-libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_blas95_lp64 -lmkl_lapack95_lp64 -lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_lp64 -lpthread -lm&quot; FCFLAGS_EXTRA=&quot; -heap-arrays&quot; CFLAGS_EXTRA=&quot;-heap-arrays&quot;</code></pre></div><br /><br />As you can see, I use:<br />- Intel Compilers XE2013 (V13.0)<br />- Intel MPI 4.1<br />- LAPACK, BLACS, SCALAPACK, FFTW from Intel MKL 11.0<br /><br />As far as I could have tested, there are no more problems.<br /><br />However, I am not quite sure about the option &quot;-heap-arrays&quot; in the compilation. I had a bad experience with other program: the jobs consumed all the memory at the computing nodes, and the nodes crashed.<br /><br />Do you think that this can also happen in abinit?<br /><br />Best regards,<br /><br />Iván</div>
			
			
			
									
									<div id="sig5874" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5880" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5880">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberliste9a7.html?mode=viewprofile&amp;u=60" class="avatar"><img class="avatar" src="download/filecff2.jpg?avatar=60_1348167350.jpg" width="92" height="92" alt="User avatar" /></a>														</div>
								<a href="memberliste9a7.html?mode=viewprofile&amp;u=60" class="username">Alain_Jacques</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1175.html?author_id=60&amp;sr=posts">279</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Aug 15, 2009 9:34 pm</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Université catholique de Louvain - Belgium</dd>
							
						
		</dl>

		<div class="postbody">
						<div id="post_content5880">

						<h3 ><a href="#p5880">Re: SOLVED-abinit6.12.3 crashes in more than 1 node (Intel C</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6cf2.html?mode=quote&amp;f=3&amp;p=5880" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic7f41.html?p=5880#p5880" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberliste9a7.html?mode=viewprofile&amp;u=60" class="username">Alain_Jacques</a></strong> &raquo; </span>Sun Oct 28, 2012 6:44 pm
			</p>
			
			
			
			<div class="content">Hi Ivan,<br /><br />I assume that you solved the problem by using the heap instead of the stack when calling functions - stack is the default for recent compilers. OK fine ... that's the former behaviour, nothing wrong here.<br />But using the stack has a few advantages (speed, sort of garbage collection, sort of protection against memory leaks, ...) so it's a bit of a pity to revert to heap before trying to extend the stacksize if your cluster nodes crash because the memory allocated to the stack is exhausted. Did you try to use <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ulimit -s unlimited</code></pre></div> - to be included in your preferred batch script. Or simply see what <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ulimit -a</code></pre></div> on one node returns? IMHO this cures half the obscure segfault cases on Unix boxes<br /><br />Kind regards,<br /><br />Alain</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5892" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5892">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5892">

						<h3 ><a href="#p5892">Re: SOLVED-abinit6.12.3 crashes in more than 1 node (Intel C</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting88a6.html?mode=quote&amp;f=3&amp;p=5892" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicb7cb.html?p=5892#p5892" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Wed Oct 31, 2012 10:06 am
			</p>
			
			
			
			<div class="content">Hi Alain,<br /><br />Thanks for your suggestion. I saw it in some other places, but in my case<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ulimit -s ulimited</code></pre></div><br />does not work. Before using the -heap-arrays option, I added this command to my .bash_profile and this is what I get with 'ulimit -a' in any of the nodes on my cluster<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>core file size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (blocks, -c) 0<br />data seg size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(kbytes, -d) unlimited<br />scheduling priority&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(-e) 0<br />file size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(blocks, -f) unlimited<br />pending signals&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(-i) 1587200<br />max locked memory&nbsp; &nbsp; &nbsp; &nbsp;(kbytes, -l) 2000000<br />max memory size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(kbytes, -m) unlimited<br />open files&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (-n) 1024<br />pipe size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (512 bytes, -p) 8<br />POSIX message queues&nbsp; &nbsp; &nbsp;(bytes, -q) 819200<br />real-time priority&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (-r) 0<br />stack size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (kbytes, -s) unlimited<br />cpu time&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(seconds, -t) unlimited<br />max user processes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (-u) 1587200<br />virtual memory&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (kbytes, -v) unlimited<br />file locks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (-x) unlimited</code></pre></div><br />but abinit was still not running in more than one node.<br /><br />I have experienced this problem with another similar program I am using, and I could solve it after some &quot;soft coding&quot;: I had to add this routine:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#include &lt;sys/time.h&gt; <br />#include &lt;sys/resource.h&gt; <br />#include &lt;stdio.h&gt; <br />void stacksize_() <br />{ <br />int res; <br />struct rlimit rlim; <br /><br />getrlimit(RLIMIT_STACK, &amp;rlim); <br />printf(&quot;Before: cur=%d,hard=%d\n&quot;,(int)rlim.rlim_cur,(int)rlim.rlim_max); <br /><br />rlim.rlim_cur=RLIM_INFINITY; <br />rlim.rlim_max=RLIM_INFINITY; <br />res=setrlimit(RLIMIT_STACK, &amp;rlim); <br /><br />getrlimit(RLIMIT_STACK, &amp;rlim); <br />printf(&quot;After: res=%d,cur=%d,hard=%d\n&quot;,res,(int)rlim.rlim_cur,(int)rlim.rlim_max); <br />} </code></pre></div><br />to the compilation, and call the function stacksize() at the very beginning of the main file of the program that had the stack problem. This worked in that case (by the way, in that case the option 'ulimit -s unlimited' didn't work either), so I didn't have to use the option '-heap-arrays' in the compilation.<br /><br />I tried to find out how to implement this method in abinit ... but I am quite new with abinit and I don't understand well its structure.<br /><br />I am aware of the 'dangers' of the option '-heap-arrays', but at the moment it is the only solution that I have. If you or anyone else can help with this in order to avoid '-heap-arrays' it will be great.<br /><br />Best regards,<br /><br />Iván</div>
			
			
			
									
									<div id="sig5892" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5894" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5894">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5894">

						<h3 ><a href="#p5894">Re: abinit6.12.3 crashes in more than 1 node (Intel Comp)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcd13.html?mode=quote&amp;f=3&amp;p=5894" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic1a8a.html?p=5894#p5894" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Wed Oct 31, 2012 5:40 pm
			</p>
			
			
			
			<div class="content">Hi all,<br /><br />I am still having the problem. When abinit compiled with &quot;-heap-arrays&quot; is about to finish, it crashes with the following message:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>m_wffile.F90:279:COMMENT<br />&nbsp; &nbsp;MPI/IO accessing FORTRAN file header: detected record mark length=4<br />&nbsp;ioarr: data written to disk file cSi216I3Jxo_TIM1_DEN<br />&nbsp;bonds_lgth_angles : about to open file cSi216I3Jxo_TIM1_GEO<br />APPLICATION TERMINATED WITH THE EXIT STRING: Bus error (signal 7)</code></pre></div><br /><br />It seems to be related with the bus of data transfer.<br /><br />Best regards,<br /><br />Iván</div>
			
			
			
									
									<div id="sig5894" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p5895" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile5895">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search1a5e.html?author_id=703&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon May 09, 2011 5:50 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content5895">

						<h3 ><a href="#p5895">Re: abinit6.12.3 crashes in more than 1 node (Intel Comp)</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting043b-2.html?mode=quote&amp;f=3&amp;p=5895" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic7ea2.html?p=5895#p5895" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist90fd.html?mode=viewprofile&amp;u=703" class="username">ivasan</a></strong> &raquo; </span>Wed Oct 31, 2012 7:20 pm
			</p>
			
			
			
			<div class="content">Hello again,<br /><br />Definitively &quot;-heap-arrays&quot; is not a solution, I still get errors.<br /><br />Coming back to the compilation without this option:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=&quot;/home/ivasan/programas/abinit/abinit-6.12.3-stack&quot; CC=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiicc&quot; CXX=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiicpc&quot; FC=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpiifort&quot; --enable-mpi --enable-mpi-io&nbsp; MPI_RUNNER=&quot;/opt/intel/impi/4.1.0/intel64/bin/mpirun&quot; --with-mpi-libs=&quot;-L/opt/intel/impi/4.1.0/intel64/lib -lmpi&quot; --with-mpi-incs=&quot;-I/opt/intel/impi/4.1.0/intel64/include&quot; --with-linalg-flavor=&quot;mkl+scalapack&quot; --with-linalg-incs=&quot;-I/opt/intel/mkl/include/intel64/&quot; --with-fft-flavor=&quot;fftw3-mkl&quot; --with-fft-incs=&quot;-I/opt/intel/mkl/include/fftw&quot; --with-fft-libs=&quot;-L/opt/intel/mkl/interfaces/fftw3xf -lfftw3xf_intel&quot; --enable-gw-dpc --with-linalg-libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_blas95_lp64 -lmkl_lapack95_lp64 -lmkl_scalapack_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -lmkl_blacs_intelmpi_lp64 -lpthread -lm&quot;</code></pre></div><br /><br />I have tried to run a very simple simulation (file abinit.2.in) of a supercell relaxation using 12 cores in two different nodes, but it crashes (I am using the LDA psp 14-Si.LDA.fhi). The very same simulation ends without problems when only one node is used.<br /><br />I have attached two different log files with some MPI information:<br />- simul.2.log: obtained with the mpirun options -v -genv I_MPI_DEBUG 100<br />- simul.2.checkmpi.log: obtained with mpirun options -check-mpi -v -genv I_MPI_DEBUG 100.<br /><br />With respect to the STATUS files after the simulation, some of them contain this information:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Status file, with repetition rate&nbsp; 49, status number&nbsp; &nbsp; 10<br />&nbsp;<br />&nbsp; Level abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: call macroin2</code></pre></div><br />while other contain this:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Status file, with repetition rate&nbsp; 49, status number&nbsp; &nbsp; 50<br />&nbsp;<br />&nbsp; Level abinit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: call driver&nbsp; &nbsp;<br />&nbsp; Level driver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: call gstateimg<br />&nbsp; Level gstateimg&nbsp; &nbsp; &nbsp; : enter&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; Level gstate&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: call mover&nbsp; &nbsp; <br />&nbsp; Level scfcv&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : call vtorho&nbsp; &nbsp;<br />&nbsp; istep&nbsp; &nbsp; &nbsp; =&nbsp; &nbsp; 1<br />&nbsp; Level vtorho(tf)&nbsp; &nbsp; &nbsp;: loop ikpt&nbsp; &nbsp; &nbsp;<br />&nbsp; isppol&nbsp; &nbsp; &nbsp;=&nbsp; &nbsp; 1<br />&nbsp; ikpt&nbsp; &nbsp; &nbsp; &nbsp;=&nbsp; &nbsp; 6</code></pre></div><br /><br />Now errors are from the processes of the slave node, and they point to gstate routine:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;6&#93; ERROR: LOCAL:EXIT:SIGNAL: fatal error<br />&#91;6&#93; ERROR:&nbsp; &nbsp; Fatal signal 11 (SIGSEGV) raised.<br />&#91;6&#93; ERROR:&nbsp; &nbsp; Signal was encountered at:<br />&#91;6&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;gstate_ (/home/ivasan/programas/abinit/abinit-6.12.3-stack/src/95_drive/gstate.F90:1041)<br />&#91;6&#93; ERROR:&nbsp; &nbsp; After leaving:<br />&#91;6&#93; ERROR:&nbsp; &nbsp; &nbsp; &nbsp;mpi_comm_rank_(comm=MPI_COMM_WORLD, *rank=0x7fff1a744870-&gt;6, *ierr=0x7fff1a744874-&gt;MPI_SUCCESS)</code></pre></div><br /><br />Does anyone see anything wrong?<br /><br />Best regards,<br /><br />Iván</div>
			
			
							<dl class="attachbox">
					<dt>
						Attachments
					</dt>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file2b7b.php?id=628">abinit.2.in</a></dt>
			<dd><em>Input file</em></dd>			<dd>(18.34 KiB) Downloaded 423 times</dd>
		</dl>
		
		
			</dd>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file325b.php?id=629">simul.2.log</a></dt>
			<dd><em>Log file from -v -genv I_MPI_DEBUG 100</em></dd>			<dd>(233.48 KiB) Downloaded 393 times</dd>
		</dl>
		
		
			</dd>
											<dd>
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file1ce3.php?id=630">simul.2.checkmpi.log</a></dt>
			<dd><em>Log file from -check-mpi -v -genv I_MPI_DEBUG 100</em></dd>			<dd>(206.4 KiB) Downloaded 376 times</dd>
		</dl>
		
		
			</dd>
									</dl>
			
									
									<div id="sig5895" class="signature">Dr. Iván Santos<br />Dpto. Electricidad y Electrónica<br />Universidad de Valladolid, Spain</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting196e.html?mode=reply&amp;f=3&amp;t=1851" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic4825.html?f=3&amp;t=1851&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=1851">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			9 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1851&p=5817 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:39:11 GMT -->
</html>
