<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3286 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:07:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>severe multiple parallel scf and optimization problems - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopica38a.html?t=3286">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="4"><a href="viewforum31e6.html?f=4" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Running Abinit</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="9"><a href="viewforumfdc5.html?f=9" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Ground state</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic0b6f.html?f=9&amp;t=3286">severe multiple parallel scf and optimization problems</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Total energy, geometry optimization, DFT+U, spin....<br /></div>
<p>
	<strong>Moderator:</strong> <a href="memberlista146.html?mode=viewprofile&amp;u=2687" class="username">bguster</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting35a1.html?mode=reply&amp;f=9&amp;t=3286" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicd0f5.html?f=9&amp;t=3286&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="3286" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			3 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p10060" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10060">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist25b1.html?mode=viewprofile&amp;u=1177" class="username">recohen</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchaf31.html?author_id=1177&amp;sr=posts">36</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 30, 2013 10:48 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10060">

						<h3 class="first"><a href="#p10060">severe multiple parallel scf and optimization problems</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting16b9.html?mode=quote&amp;f=9&amp;p=10060" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic2ba2.html?p=10060#p10060" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist25b1.html?mode=viewprofile&amp;u=1177" class="username">recohen</a></strong> &raquo; </span>Wed May 25, 2016 10:58 am
			</p>
			
			
			
			<div class="content">I have been trying to narrow down why I cannot optimize a simple 10 atom structure in abinit 7.10.5. A typical behavior shows:<br /><br />grep grad OUTFILE<br />  max grad (force/stress) = 6.0828E-02 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 4.8153E-02 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 2.5553E-02 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 1.3870E-02 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 9.2946E-03 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 5.2657E-03 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 4.4388E-03 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br />  max grad (force/stress) = 1.9831E+00 &gt; tolmxf= 1.0000E-03 ha/bohr (free atoms)<br /><br />But something is very sick. I am trying optcell=1 which should be volume only, and after a number of steps I get:<br />   Current rprimd gives negative (R1xR2).R3 . <br />    Rprimd =    1.838443E+02   -1.838443E+02   -2.672648E+02<br />               -1.838443E+02    1.838443E+02   -2.672648E+02<br />               -1.838443E+02   -1.838443E+02    2.672648E+02<br />    Action: if the cell size and shape are fixed (optcell==0),<br />            exchange two of the input rprim vectors;<br />            if you are optimizing the cell size and shape (optcell/=0),<br />            maybe the move was too large, and you might try to decrease strprecon.<br />src_file: metric.F90<br /><br />But with optcell =1 the rprimd should not be changing sign! <br /><br />I have tried many things, and the latest input looks like :<br /><br />ndtset 3<br />jdtset 1 2 3<br />paral_kgb 0 npband 1 npfft 1 npkpt 28<br />ecutsm 0.5 <br />dilatmx 1.10<br />natom 10<br />ntypat 3<br />znucl  82 22 8 <br />typat  1*1 1*2 2*3<br />#scalecart  9.73 9.73 14.036<br />scalecart 10.093073533998 10.093073533998 14.6728671828548<br />angdeg 3*90<br />spgroup 108<br />brvltt -1<br />natrd 4<br />xred<br />0.5 0 0.2515<br />0. 0. 0.5013<br />0.23 0.73 -0.04<br />0. 0. 0.75157<br />ngkpt 6 6 6<br />shiftk 0.5 0.5 0.5<br />occopt 7<br />nband 80<br />#tsmear 0.005<br />pawecutdg 56<br />pawmixdg 1<br />ecut 40<br />ixc 23<br />nstep 50 <br />diemac 10.0<br />diemix 0.3<br />kptopt 1<br />toldff 5d-7<br />iscf 14<br />ionmov1 2<br />dtion 100<br />ionmov2 7<br />ionmov3 2<br />optcell1 1<br />optcell2 0<br />optcell3 2<br />ntime1 20<br />ntime2 20<br />ntime3 30<br />tolmxf1 1d-3<br />tolmxf2 5d-6<br />tolmxf3 1d-6<br />strtarget 3*-0.000679785784544 3*0.0<br />#restartxf=-1<br />strfact 100<br />strprecon  0.1<br /><br />Occasionally by luck one of these will converge after many attempts, just by resubmitted the failed job it will sometimes not go crazy and continue OK. It seems like this must be a bug, either in abinit or the intel compiler (15.0 I believe)  . It is compiled with:<br /><br />fftw/serial/3.3 wannier90/1.2 gsl/1.16 libxc/2.0 netcdf/4.3 szip/2.1<br /><br />We ran the test suite which mostly seems oK, but there are not many tests with PAWs and optimization, and none with more than a handful of processors that I could find. I have been trying to run with :<br />paral_kgb 0 npband 1 npfft 1 npkpt 28<br />on 28 cpus<br />and<br />paral_kgb 1 npband 5 npfft 1 npkpt 28<br />on 140. The later dies after some scf steps with <br /> m_abi_linalg_mp_x         106  abi_xorthonormalize.f90<br /><br />Any help would be greatly appreciated!<br /><br />Ron Cohen</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10061" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10061">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist25b1.html?mode=viewprofile&amp;u=1177" class="username">recohen</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchaf31.html?author_id=1177&amp;sr=posts">36</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Apr 30, 2013 10:48 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10061">

						<h3 ><a href="#p10061">Re: severe multiple parallel scf and optimization problems</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcf32.html?mode=quote&amp;f=9&amp;p=10061" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic3529.html?p=10061#p10061" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist25b1.html?mode=viewprofile&amp;u=1177" class="username">recohen</a></strong> &raquo; </span>Wed May 25, 2016 6:19 pm
			</p>
			
			
			
			<div class="content">OK, the problem I guess is compiler bugs. Adding:<br />-fp-model precise -fp-model source -O2 -traceback<br />to the compile leads to correct behavior, although I still had one job crash in parallel diagonalization. Running that job on more processors fixed that. The full configure line on superMUC that works :<br /><br />/configure  --prefix=/lrz/sys/applications/abinit/7.10.5/intel \<br />       --with-mpi-libs=&quot;-ldl -lmpi -lmpigc4 -lmpigf -lmpigi -lpthread -lrt&quot; \<br />        --enable-64bit-flags --with-dft-flavor=&quot;atompaw+libxc+wannier90&quot; \<br />       --with-atompaw-bins=&quot;$ATOMPAW_BASE/bin&quot; --with-atompaw-libs=&quot;$ATOMPAW_SHLIB&quot; \<br />       --with-netcdf-incs=&quot;$NETCDF_INC&quot; --with-netcdf-libs=&quot;$NETCDF_F90_SHLIB $NETCDF_SHLIB $NETCDF_CXX_SHLIB&quot; \<br />       --with-etsf-io-incs=&quot;$ETSF_INC&quot; --with-etsf-io-libs=&quot;$ETSF_LIB&quot; \<br />       --with-libxc-incs=&quot;-I/lrz/sys/libraries/libxc/2.0.2/include&quot; \<br />       --with-libxc-libs=&quot;-L/lrz/sys/libraries/libxc/2.0.2/lib -lxc&quot; \<br />       --with-wannier90-bins=&quot;$WANNIER90_BASE/bin&quot; --with-wannier90-incs=&quot;$WANNIER90_INC&quot; \<br />       --with-wannier90-libs=&quot;$WANNIER90_LIB&quot; --enable-mpi --enable-mpi-io --with-linalg-flavor=&quot;mkl&quot; \<br />       --with-linalg-incs=&quot;$MKL_INC&quot; --with-linalg-libs=&quot;$SCALAPACK_LIB $BLACS_LIB $BLACS_LIB_C $MKL_SHLIB&quot; \<br />       --with-fft-flavor=&quot;fftw3-mkl&quot; --with-fft-incs=&quot;$FFTW_INC&quot; --with-fft-libs=&quot;$FFTW_SHLIB&quot;  \<br />        CC=mpicc FC=mpif90 CXX=mpiCC \<br />       CFLAGS=&quot;-fp-model precise -fp-model source -O2 -traceback&quot; \<br />       FCFLAGS=&quot;-fp-model precise -fp-model source -O2 -traceback&quot; \<br />       FCFLAGS_DEBUG=&quot;-g -traceback&quot; FC_LDFLAGS=&quot;-parallel&quot;  --with-trio-flavor=&quot;netcdf+etsf_io&quot; \<br />       --with-math-flavor=&quot;gsl&quot; --with-math-incs=&quot;$GSL_INC&quot; --with-math-libs=&quot;$GSL_SHLIB $GSL_BLAS_SHLIB&quot;</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10063" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10063">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="avatar"><img class="avatar" src="download/file96d1.jpg?avatar=61_1392074789.jpg" width="92" height="79" alt="User avatar" /></a>														</div>
								<a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="username">gmatteo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9f23.html?author_id=61&amp;sr=posts">291</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sun Aug 16, 2009 5:40 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10063">

						<h3 ><a href="#p10063">Re: severe multiple parallel scf and optimization problems</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting678e.html?mode=quote&amp;f=9&amp;p=10063" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic6b59.html?p=10063#p10063" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="username">gmatteo</a></strong> &raquo; </span>Wed May 25, 2016 6:39 pm
			</p>
			
			
			
			<div class="content">We have observed similar problems when running structural optimizations on intel architectures with recent intel compilers.<br />The problem seems to be related to the optimization (vectorization) performed by the compiler that leads to erratic/non-deterministic <br />behaviour on the different MPI procs.<br /><br />There are developers working on this issue.<br />For the time being, one should prevent the compiler from &quot;miscompiling&quot; the code by using safe compilation options as you did.<br /><br />In 8.0.6 there's also a new configuration option ( --enable-avx-safe-mode)  to disable AVX vectorization in problematic procedures<br /><br />M</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting35a1.html?mode=reply&amp;f=9&amp;t=3286" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicd0f5.html?f=9&amp;t=3286&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=9&amp;t=3286">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			3 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforumfdc5.html?f=9" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Ground state”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3286 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:07:55 GMT -->
</html>
