<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3376&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:52:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; POWER8 Compatibility: -march=native not available</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>POWER8 Compatibility: -march=native not available</h2>
		<p><a href="viewtopicaf15.html?f=3&amp;t=3376">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3376</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>POWER8 Compatibility: -march=native not available</h3>
				<div class="date">Posted: <strong>Fri Sep 09, 2016 2:56 pm</strong></div>
				<div class="author">by <strong>jlost</strong></div>
				<div class="content">Working around the out-of-date config.guess with &quot;./configure -build=powerpc64le-unknown-linux-gnu&quot;, I encounter the following error next:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;u0017592@sys-82824 abinit-8.0.8&#93;$ make<br />make&nbsp; all-recursive<br />make&#91;1&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8'<br />Making all in fallbacks<br />make&#91;2&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />make libxc<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of libxc has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make linalg<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of linalg has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of linalg fallback<br />test -e stamps/linalg-install-stamp<br />make netcdf<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of netcdf has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of netcdf fallback<br />test -e stamps/netcdf-install-stamp<br />make atompaw<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of atompaw has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of atompaw fallback<br />test -e stamps/atompaw-install-stamp<br />make wannier90<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of wannier90 has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />make etsf_io<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of etsf_io has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make bigdft<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />The build of bigdft has been disabled<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Checking build of bigdft fallback<br />test -e stamps/bigdft-install-stamp<br />make&#91;2&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/fallbacks'<br />Making all in src<br />make&#91;2&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/src'<br />Making all in incs<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/src/incs'<br />There is no buildable file here<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/src/incs'<br />Making all in mods<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/src/mods'<br />There is no buildable file here<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/src/mods'<br />Making all in 01_linalg_ext<br />make&#91;3&#93;: Entering directory `/home/u0017592/projects/abinit-8.0.8/src/01_linalg_ext'<br />gfortran -DHAVE_CONFIG_H -I. -I../..&nbsp; -I../../src/incs -I../../src/incs -I/home/u0017592/projects/abinit-8.0.8/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/home/u0017592/projects/abinit-8.0.8/src/mods -O2 -mtune=native -march=native -g -ffree-line-length-none&nbsp; &nbsp;-c -o m_linalg_interfaces.o m_linalg_interfaces.F90<br />gfortran: error: unrecognized command line option ‘-march=native’<br />make&#91;3&#93;: *** &#91;m_linalg_interfaces.o&#93; Error 1<br />make&#91;3&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/src/01_linalg_ext'<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8/src'<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `/home/u0017592/projects/abinit-8.0.8'<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br />&quot;-march=native&quot; is not available on this platform -- ideally, if ppc64le is specified, the build system would omit these from the Makefiles. For now this can be worked around by removing them from the Makefiles. You can use this shortcut to remove them:<br /><span style="text-decoration: underline">removemnative.sh</span><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>for line in $(find . -name 'Makefile'); do<br />&nbsp; &nbsp; &nbsp;sed -i -e 's/ \-march=native//g' $line<br />done<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: POWER8 Compatibility: -march=native not available</h3>
				<div class="date">Posted: <strong>Tue Sep 13, 2016 4:30 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">This happens because you are using an old version of GCC which is not supported anymore by the build system. Please upgrade your GCC to version 4.8 or above. We currently recommend GCC 5.4 and are working on fully supporting GCC 6.<br /><br />In the meantime, you can specify optimization flags when running configure to override the build system settings:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../configure ... CFLAGS_OPTIM=&quot;&lt;your flags here&gt;&quot; FCFLAGS_OPTIM=&quot;&lt;your flags here&gt;&quot;</code></pre></div></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3376&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:52:45 GMT -->
</html>
