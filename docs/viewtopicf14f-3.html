<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3127&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:20:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; ERROR - PAW SPHERES ARE OVERLAPPING !</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>ERROR - PAW SPHERES ARE OVERLAPPING !</h2>
		<p><a href="viewtopic3dd0.html?f=9&amp;t=3127">https://forum.abinit.org/viewtopic.php?f=9&amp;t=3127</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>ERROR - PAW SPHERES ARE OVERLAPPING !</h3>
				<div class="date">Posted: <strong>Sun Oct 18, 2015 2:51 am</strong></div>
				<div class="author">by <strong>anemonekgo</strong></div>
				<div class="content">Hi <br /><br />Thanks for your help the other day(Only 1cpu is used among multicore-cpu  [SOLVED]).<br /><br />I could start multi-core process on abinit by writing as &quot;enable_openmp=&quot;yes&quot;&quot; in the build.ac.<br /><br />But then a problem has occurred.<br /><br />While it's calculation, Abinit stops at the following error.<br /><br />#chkpawovlp : ERROR - <br />PAW SPHERES ARE OVERLAPPING ! <br />#Distance between atoms 3 and 37 is : 1.70352 <br />PAW radius of the sphere around atom 3 is: 2.32398 <br />PAW radius of the sphere around atom 37 is: 0.90083 <br />This leads to a (voluminal) overlap ratio of 90.75 % <br /><br />--From log file ------<br />++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />--- !ERROR<br />message: |<br />Action: 1- decrease cutoff radius of PAW dataset<br />OR 2- ajust &quot;pawovlp&quot; input variable to allow overlap (risky)<br />src_file: chkpawovlp.F90<br />src_line: 183<br />...<br /><br />leave_new : decision taken to exit ...<br />----------------------------------------------------------------------------------------------------------------------------------------------------<br />MPI_ABORT was invoked on rank 2 in communicator MPI_COMM_WORLD <br />with errorcode 14.<br /><br />NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.<br />You may or may not see output from other processes, depending on<br />exactly when Open MPI kills them.<br />---------------------------------------------------------------------------------------------------------------------------------------------------- <br /><br />Even if it's made pawovlp=-1, a strange calculation result is generated.<br />(Such as nuclear fusion jokingly )<br /><br />For example calculation is normally running to n = about 7, and a problem occurs critically after it.<br /><br />The error has occurred using this command. <br /><br />$　mpirun --allow-run-as-root -n 6 abinit &lt; $name.files &gt; $name.log <br /><br />I think that some kind of setting of OpenMPI is related to this problem.<br /><br />I would appreciate it if you would give me some advice.<br /><br />Best regards<br />Haruyuki Satou<br /><br /><br /><br />###############################################################################################<br />Only 1cpu is used among multicore-cpu  [SOLVED]<br />Postby anemonekgo » Sun Oct 11, 2015 2:34 am<br /><br />Hi<br /><br />I'm a beginner.<br />Recently I installed Abinit 7.10.4 on CentOS 6.7.<br />My PC is Corei7 990X_ex.(6core/12T) -RAM24G -SSD256G.<br />When look after a system manager when I perform Running of abinit; <br />I'm using only 1CPU(100%) in multicore-cpu(It is displayed 12CPU).<br />What setting will this have a problem with? <br />I'm getting good calculation results , but run time is long.<br />Please tell me what to do to.<br /><br />Best regards,<br />Haruyuki Satou<br /><br />======================================================================<br /><br />The following configuration information<br />======================================================================<br />#build.ac file<br />------------------------------------------------------------<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr/lib64/openmpi&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io&quot;<br />#with_netcdf_incs=&quot;-I/usr/include&quot;<br />#with_netcdf_libs=&quot;-L/usr/lib64 -lnetcdf -lnetcdff&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/include/&quot;<br />with_fft_libs=&quot;-L/usr/local/lib64/gnu/fftw/3.3.4/lib -lfftw3 -lfftw3f&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib64/atlas -llapack -lf77blas -lcblas -latlas&quot;<br />#with_dft_flavor=&quot;atompaw+libxc&quot;<br />#with_dft_flavor=&quot;atompaw+libxc+wannier90&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />#enable_maintainer_checks=&quot;no&quot;<br />#enable_test_timeout=&quot;yes&quot;<br />------------------------------------------------------------<br />$./configure --with-config-file=./build.ac <br />#no error<br /><br />==============================================================================<br />=== Final remarks ===<br />==============================================================================<br />Summary of important options:<br /><br />* C compiler : gnu version 4.9<br />* Fortran compiler: gnu version 4.9<br />* architecture : unknown unknown (64 bits)<br /><br />* debugging : basic<br />* optimizations : standard<br /><br />* OpenMP enabled : no (collapse: ignored)<br />* MPI enabled : yes<br />* MPI-IO enabled : yes<br />* GPU enabled : no (flavor: none)<br /><br />* TRIO flavor = netcdf-fallback+etsf_io-fallback<br />* TIMER flavor = abinit (libs: ignored)<br />* LINALG flavor = atlas (libs: user-defined)<br />* ALGO flavor = none (libs: ignored)<br />* FFT flavor = fftw3 (libs: user-defined)<br />* MATH flavor = none (libs: ignored)<br />* DFT flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)<br />==============================================================================<br />$ make mj4<br />#no error<br />==============================================================================<br />$ make install<br />#no error<br /><br />**************************************************************************************************<br />$cd tests<br />$./runtests.py -j6 fast<br />Test suite completed in 9.63 s (average time for test = 2.63 s, stdev = 2.63 s)<br />failed: 0, succeeded: 10, passed: 1, skipped: 0, disabled: 0<br />Suite failed passed succeeded skipped disabled run_etime tot_etime<br />fast 0 1 10 0 0 28.92 30.20<br /><br />$./runtests.py paral -j6<br />Test suite completed in 86.06 s (average time for test = 4.48 s, stdev = 12.80 s)<br />failed: 0, succeeded: 14, passed: 7, skipped: 69, disabled: 0<br />[paral][t06_MPI1][np=1] has run_etime 65.40 s<br />[paral][t51_MPI1-t52_MPI1-t53_MPI1] has run_etime 32.28 s<br />[paral][t59_MPI1][np=1] has run_etime 30.34 s<br />[paral][t71_MPI1][np=1] has run_etime 72.22 s<br />[paral][t73_MPI1][np=1] has run_etime 37.03 s<br />[paral][t91_MPI1][np=1] has run_etime 42.28 s<br />Suite failed passed succeeded skipped disabled run_etime tot_etime<br />paral 0 7 14 69 0 403.01 406.55<br />**************************************************************************************************<br />anemonekgo<br />###############################################################################################<br />Posts: 3<br />Joined: Tue Sep 22, 2015 3:54 am<br />Top<br />Re: Only 1cpu is used among multicore-cpu<br />Postby Jordan » Mon Oct 12, 2015 7:58 am<br /><br />You did not compile abinit with OpenMP support *threads&quot; which means that if you want to use, let say 6 cores per calculation, you have to launch abinit with mpirun like<br />CODE: SELECT ALL<br />mpirun -n 6 abinit &lt; files &gt; log<br /><br /><br />Or for the test suite, you need to specify -n 6 instead of -j 6. For the testsuite, the -j option means launch 6 tests at the same time (parallel launch of several tests, each one runs on 1 cpus) whereas -n X means run each test on X cpus.<br />So for instance, runtests.py -n 6 -j 2 means do 2 tests at the same time whit 6 mpi processes for each test. So you would use 6*2=12 cores.<br /><br />Cheers<br /><br />Jordan<br />Jordan<br />############################################################################################### <br />Posts: 186<br />Joined: Tue May 07, 2013 9:47 am<br />Top<br /> Re: Only 1cpu is used among multicore-cpu<br />Postby anemonekgo » Tue Oct 13, 2015 6:31 am<br /><br />Dear Jordan<br /><br />Thanks for all your help.<br /><br />I could start multi-core process on abinit by writing as &quot;enable_openmp=&quot;yes&quot;&quot; in the build.ac.<br /><br />I failed before when it was &quot;./configure --enable-openmp&quot;( --&gt; * OpenMP enabled : yes * MPI enabled : no * MPI-IO enabled : no).<br /><br />Then I tried &quot;mpirun -n 6 abinit &lt; files &gt; log&quot; command with &quot; --allow-run-as-root &quot; option.<br /><br />As a result of calculating in &quot;BaTiO3&quot; (ecut=15,ngkpt=8x8x8), and having tested it, I was able to shorten calculation time (90min. ---&gt; 5min.).<br /><br />What you just said really comforted me, thank you.<br /><br />Sincerely.<br />Haruyuki Satou<br />anemonekgo<br />###############################################################################################<br />Posts: 3<br />Joined: Tue Sep 22, 2015 3:54 am<br />Top<br />Re: Only 1cpu is used among multicore-cpu<br />Postby anemonekgo » Fri Oct 16, 2015 11:18 am<br /><br />Hi <br /><br />Thanks for your help the other day.<br /><br />Then a problem has happened.<br /><br />While it's calculation, Abinit stops at the following error.<br /><br />#chkpawovlp : ERROR - <br />PAW SPHERES ARE OVERLAPPING ! <br />#Distance between atoms 3 and 37 is : 1.70352 <br />PAW radius of the sphere around atom 3 is: 2.32398 <br />PAW radius of the sphere around atom 37 is: 0.90083 <br />This leads to a (voluminal) overlap ratio of 90.75 % <br /><br />--from log file ------<br />++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />--- !ERROR<br />message: |<br />Action: 1- decrease cutoff radius of PAW dataset<br />OR 2- ajust &quot;pawovlp&quot; input variable to allow overlap (risky)<br />src_file: chkpawovlp.F90<br />src_line: 183<br />...<br /><br />leave_new : decision taken to exit ...<br />----------------------------------------------------------------------------------------------------------------------------------------------------<br />MPI_ABORT was invoked on rank 2 in communicator MPI_COMM_WORLD <br />with errorcode 14.<br /><br />NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.<br />You may or may not see output from other processes, depending on<br />exactly when Open MPI kills them.<br />---------------------------------------------------------------------------------------------------------------------------------------------------- <br /><br />Even if it's made pawovlp=-1, a strange calculation result is generated.<br />(Such as nuclear fusion jokingly )<br /><br />For example calculation is normally running to n = about 7, and a problem occurs critically after it.<br /><br />The error has occurred using this command. <br /><br />$　mpirun --allow-run-as-root -n 6 abinit &lt; $name.files &gt; $name.log <br /><br />I think trouble of OpenMPI.<br /><br />I would appreciate it if you would give me some advice.<br /><br />Best regards<br />Haruyuki Satou</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3127&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:20:43 GMT -->
</html>
