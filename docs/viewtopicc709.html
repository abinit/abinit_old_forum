<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=4121&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:33:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Configuring with MPI</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Configuring with MPI</h2>
		<p><a href="viewtopic6da1.html?f=3&amp;t=4121">https://forum.abinit.org/viewtopic.php?f=3&amp;t=4121</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Configuring with MPI</h3>
				<div class="date">Posted: <strong>Tue Jun 04, 2019 4:06 pm</strong></div>
				<div class="author">by <strong>emily</strong></div>
				<div class="content">When I configure and enable MPI, on version 8.10.2 it stops at this<br /><br /> ==============================================================================<br /> === Multicore architecture support                                         ===<br /> ==============================================================================<br /><br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... no<br />checking whether the Fortran Compiler supports MPI... no<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />Can anyone help? I have attached the log file.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Configuring with MPI</h3>
				<div class="date">Posted: <strong>Tue Jun 04, 2019 4:21 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear Emily,<br />Could you send your config file .ac you used or the list of options you've put to run the configure?<br />But it sounds like there is something wrong in the installation of MPI on your machine...<br />Thanks,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Configuring with MPI</h3>
				<div class="date">Posted: <strong>Tue Jun 04, 2019 4:24 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">The error message given in config.log<br /><br /><blockquote class="uncited"><div>configure:23078: checking whether the Fortran Compiler supports MPI<br />configure:23332: gfortran -o conftest  -g -ffree-line-length-none         conftest.F90       -L/usr/lib/gcc/x86_64-linux-gnu/5 -L/usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/5/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/5/../../.. -lgfortran -lm -lquadmath  &gt;&amp;5<br />conftest.F90:3: Error: Can't open included file 'mpif.h'<br />configure:23332: $? = 1<br /></div></blockquote><br /><br />shows that you are trying to compile a parallel version with gfortran whereas one should use the mpif90 wrapper.<br /><br />First of all, are you sure that mpif90 and the MPI library are installed on your machine?<br />What is the output of the linux command: which mpif90    ?<br /><br />A user guide explaining how to configure and compile the parallel version on laptops and supercomputers is available at<br /><!-- m --><a class="postlink" href="https://wiki.abinit.org/lib/exe/fetch.php?media=build:installing_abinit.pdf">https://wiki.abinit.org/lib/exe/fetch.p ... abinit.pdf</a><!-- m --></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Configuring with MPI&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Wed Jun 05, 2019 3:48 pm</strong></div>
				<div class="author">by <strong>emily</strong></div>
				<div class="content">Hi,<br /><br />Thanks for helping me. The first one was run using ./configure --enable-mpi<br /><br />I also tried ./configure --enable-mpi FC=mpif90 and it returns this error<br /><br />==============================================================================<br />=== Multicore architecture support ===<br />==============================================================================<br /><br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... no<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />So now the Fortran Compiler supports MPI but MPI is still not usable? Does this mean there is something wrong with the MPI installation on the machine then?<br /><br />Edit: I managed to get to configured with MPI.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=4121&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 18:33:37 GMT -->
</html>
