<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3155&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:17:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Make error at wannier90</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Make error at wannier90</h2>
		<p><a href="viewtopice2c1.html?f=3&amp;t=3155">https://forum.abinit.org/viewtopic.php?f=3&amp;t=3155</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Make error at wannier90</h3>
				<div class="date">Posted: <strong>Sat Nov 21, 2015 6:11 am</strong></div>
				<div class="author">by <strong>Tsung-Lung Li</strong></div>
				<div class="content">Dear Sir:<br /><br />I am trying to install abinit 7.10.5 on debian 8.2.0 using gfortran 4.9, but encounter some error at the compilation of wannier90 fallback.<br /><br />The &quot;build-00.ac&quot; file contains<br /><br />prefix=&quot;${HOME}/SIMUcode/abinit-7.10.5&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_trio_flavor=&quot;etsf_io+netcdf&quot;<br />with_linalg_flavor=&quot;acml&quot;<br />with_linalg_incs=&quot;-I/opt/acml5.3.1/gfortran64_int64/include&quot;<br />with_linalg_libs=&quot;-L/opt/acml5.3.1/gfortran64_int64/lib -lacml&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_fallbacks=&quot;yes&quot;<br />enable_bse_unpacked=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br /><br />./configure --with-config-file=&quot;./build-00.ac&quot;<br /><br />Summary of important options:<br /><br />  * C compiler      : gnu version 4.9<br />  * Fortran compiler: gnu version 4.9<br />  * architecture    : intel xeon (64 bits)<br /><br />  * debugging       : basic<br />  * optimizations   : standard<br /><br />  * OpenMP enabled  : no (collapse: ignored)<br />  * MPI    enabled  : yes<br />  * MPI-IO enabled  : yes<br />  * GPU    enabled  : no (flavor: none)<br /><br />  * TRIO   flavor = netcdf+etsf_io-fallback<br />  * TIMER  flavor = abinit (libs: ignored)<br />  * LINALG flavor = acml (libs: user-defined)<br />  * ALGO   flavor = none (libs: ignored)<br />  * FFT    flavor = none (libs: ignored)<br />  * MATH   flavor = none (libs: ignored)<br />  * DFT    flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />Configuration complete.<br /><br />make multi multi_nprocs=6<br /><br />The last few lines of output contains the following error messages.<br /><br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... configure: error: in `/home/quantum/SIMUcode/abinit-7.10.<br />5/build/fallbacks/sources/wannier90-1.2.0.1':<br />configure: error: cannot run C compiled programs.<br />If you meant to cross compile, use `--host'.<br />See `config.log' for more details.<br />Makefile:1063: recipe for target 'stamps/wannier90-config-stamp' failed<br />make[2]: *** [stamps/wannier90-config-stamp] Error 1<br />make[2]: Leaving directory '/home/quantum/SIMUcode/abinit-7.10.5/build/fallbacks'<br />Makefile:657: recipe for target 'all-local' failed<br />make[1]: [all-local] Error 2 (ignored)<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />Makefile:657: recipe for target 'all-local' failed<br />make[1]: *** [all-local] Error 1<br />make[1]: Leaving directory '/home/quantum/SIMUcode/abinit-7.10.5/build/fallbacks'<br />Makefile:2512: recipe for target 'multi' failed<br />make: *** [multi] Error 2<br /><br />The config.log file is attached.  Can some please help?  Thanks in advance.<br /><br />Sincerely,<br />Tsung-Lung Li</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Make error at wannier90</h3>
				<div class="date">Posted: <strong>Sat Nov 21, 2015 9:39 am</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content"><blockquote><div><cite>Tsung-Lung Li wrote:</cite>checking whether we are cross compiling... configure: error: in `/home/quantum/SIMUcode/abinit-7.10.5/build/fallbacks/sources/wannier90-1.2.0.1':<br />configure: error: cannot run C compiled programs.<br />If you meant to cross compile, use `--host'.<br />See `config.log' for more details.</div></blockquote><br /><br />As the error message says, please go to <em class="text-italics">/home/quantum/SIMUcode/abinit-7.10.5/build/fallbacks/sources/wannier90-1.2.0.1/config.log</em> (the one of Wannier90, not that of Abinit) and look for the last occurrence of &quot;failed&quot;. It should give you the cause of the error.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Make error at wannier90</h3>
				<div class="date">Posted: <strong>Sat Nov 21, 2015 4:28 pm</strong></div>
				<div class="author">by <strong>Tsung-Lung Li</strong></div>
				<div class="content">Dear Yann:<br /><br />Thank you very much for your response.<br /><br />I looked at the config.log in the wannier90 directory, and found &quot;error&quot; around line 83<br /><br />configure:3358: /usr/bin/mpicc -V &gt;&amp;5<br />gcc: error: unrecognized command line option '-V'<br />gcc: fatal error: no input files<br /><br />I suppose modifying file /home/quantum/SIMUcode/abinit-7.10.5/build/fallbacks/sources/wannier90-2.0.1/configure  might fix the problem.  However, the file looks formidable to me.  Is there any other way for to fix this compilation error? <br /><br />Please note that the newly attached config.log file is the wannier90 log file. <br /><br />Sincerely,<br />Tsung-Lung Li</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Make error at wannier90&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Sun Nov 22, 2015 5:20 am</strong></div>
				<div class="author">by <strong>Tsung-Lung Li</strong></div>
				<div class="content">By adding the following line of search path for acml to my .bashrc file<br /><br />export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/acml5.3.1/gfortran64_int64/lib<br /><br />the problem is solved and wannier90 compiles.<br /><br />Thank Yann for pointing me to the right direction.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=3155&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:17:42 GMT -->
</html>
