<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2384&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:39:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded...)</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded...)</h2>
		<p><a href="viewtopic5b61-2.html?f=3&amp;t=2384">https://forum.abinit.org/viewtopic.php?f=3&amp;t=2384</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded...)</h3>
				<div class="date">Posted: <strong>Fri Jan 10, 2014 4:44 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Hi all...<br />This issue has been addressed before but in other versions of Abinit. This thread is somehow related to mine here:<br /><a href="viewtopic6f79-2.html?f=3&amp;t=589" class="postlink">http://forum.abinit.org/viewtopic.php?f=3&amp;t=589</a><br /><br />However, I think that in the new release the previous &quot;recipe&quot; does not go so well... I did a configure --with-config-file using this script&#058;<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />enable_smp=&quot;yes&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_linalg_flavor=&quot;mkl&quot;</code></pre></div><br /><br />and everything was OK (or so it seemed)... I trusted (maybe I shoudn't) the auto-detect feature of abinit in order to find libraries and includes, that's why I just declared the libraries by name and not by _libs and/or _incs. Apparently, after checking the config.log, those libraries were correctly detected by abinit.<br /><br />Afterwards, make mj4 ran for a few minutes and then this message, just in the making of wannier90<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make wannier90<br />make&#91;3&#93;: Entering directory `/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks'<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /home/amaury/.abinit/tarballs/wannier90-1.2.0.1.tar.gz | tar xf -<br />No patch to apply<br />cd sources/wannier90-1.2.0.1 &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; CPP=&quot;icc -E&quot; \<br />&nbsp; &nbsp;&nbsp; CPPFLAGS=&quot; -I/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/include&quot; \<br />&nbsp; &nbsp;&nbsp; CC=&quot;icc&quot; \<br />&nbsp; &nbsp;&nbsp; CFLAGS=&quot;-g -O2&quot; \<br />&nbsp; &nbsp;&nbsp; CXX=&quot;icpc&quot; \<br />&nbsp; &nbsp;&nbsp; CXXFLAGS=&quot;&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FCCPP=&quot;cpp -P -std=c99&quot; \<br />&nbsp; &nbsp;&nbsp; F77=&quot;ifort&quot; \<br />&nbsp; &nbsp;&nbsp; FFLAGS=&quot;-fixed -g -extend-source -vec-report0 -noaltparam -nofpscomp&nbsp; &nbsp;-O2 -xHost -g -O2 -I/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/include&quot; \<br />&nbsp; &nbsp;&nbsp; F90=&quot;ifort&quot; \<br />&nbsp; &nbsp;&nbsp; F90FLAGS=&quot;-free -g -extend-source -vec-report0 -noaltparam -nofpscomp&nbsp; &nbsp;-O2 -xHost -g -O2 -I/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/include&quot; \<br />&nbsp; &nbsp;&nbsp; FC=&quot;ifort&quot; \<br />&nbsp; &nbsp;&nbsp; FCFLAGS=&quot;-free -g -extend-source -vec-report0 -noaltparam -nofpscomp&nbsp; &nbsp;-O2 -xHost -g -O2 -I/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/include&quot; \<br />&nbsp; &nbsp;&nbsp; LDFLAGS=&quot; &quot; \<br />&nbsp; &nbsp;&nbsp; LIBS=&quot;-lmkl_intel_lp64&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core&nbsp; &nbsp;-L/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/lib -letsf_io_low_level -letsf_io_utils -letsf_io &quot; \<br />&nbsp; &nbsp;&nbsp; AR=&quot;ar&quot; \<br />&nbsp; &nbsp;&nbsp; ARFLAGS=&quot;rc&quot; \<br />&nbsp; &nbsp;&nbsp; RANLIB=&quot;ranlib&quot; \<br />&nbsp; &nbsp;&nbsp; ac_fc_srcext=&quot;F90&quot; \<br />&nbsp; &nbsp;&nbsp; /bin/sh ./configure \<br />&nbsp; &nbsp;&nbsp; &nbsp; --prefix=&quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports&quot; \<br />&nbsp; &nbsp;&nbsp; &nbsp; --bindir=&quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/bin&quot; \<br />&nbsp; &nbsp;&nbsp; &nbsp; --libdir=&quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/exports/lib&quot; \<br />&nbsp; &nbsp;&nbsp; &nbsp; --program-suffix=&quot;-abinit&quot; \<br />&nbsp; &nbsp;&nbsp; &nbsp; --disable-shared --enable-static<br />checking build system type... x86_64-unknown-linux-gnu<br />checking host system type... x86_64-unknown-linux-gnu<br />checking target system type... x86_64-unknown-linux-gnu<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking for style of include used by make... GNU<br />checking for gcc... icc<br />checking whether the C compiler works... no<br />configure: error: in `/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/sources/wannier90-1.2.0.1':<br />configure: error: C compiler cannot create executables<br />See `config.log' for more details.<br />make&#91;3&#93;: *** &#91;stamps/wannier90-config-stamp&#93; Error 77<br />make&#91;3&#93;: Leaving directory `/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks'<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks'<br />make&#91;1&#93;: *** &#91;multi&#93; Error 2<br />make&#91;1&#93;: Leaving directory `/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl'<br />make: *** &#91;mj4&#93; Error 2<br /></code></pre></div><br /><br />I tried the recipe found in <a href="viewtopic6f79-2.html?f=3&amp;t=589" class="postlink">http://forum.abinit.org/viewtopic.php?f=3&amp;t=589</a> and did not work, also compiled the wannier90-1.2 and it didn't also... however, wannier90-2.0 did compile smoothly but, when I tried to play dirty (copying the new 2.0 .a and .x files instead of the 1.2) and &quot;touching&quot; the stamps files for wannier90, the same error appeared time after time...<br /><br />Currently, I know that doing all these with the GNU environment does not make such fuss... but intel libs are worth the pain in the neck.<br /><br />Below, some info on my platform:<br />cpuinfo gives:<br /><br />Intel(R) processor family information utility, Version 4.1 Update 3 Build 20131205<br />Copyright (C) 2005-2013 Intel Corporation.  All rights reserved.<br /><br />=====  Processor composition  =====<br />Processor name    : Intel(R) Core(TM) i7  Q 720  <br />Packages(sockets) : 1<br />Cores             : 4<br />Processors(CPUs)  : 8<br />Cores per package : 4<br />Threads per core  : 2<br /><br />This is a Dell Precision M6500 running Linux Mint 16 Mate x64 with 32 GB of RAM. All my compilers are &quot;Intel(R) 64 Compiler XE for applications running on Intel(R) 64, Version 14.0.1.106 Build 20131008&quot;, the MKL is 11.0 and the MPI Library Runtime Environment for Linux is installed.<br /><br />Hope it may get solved. <br />Thanks in advance guys!!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 12:19 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Could you attach ~abinit/&lt;builddir&gt;/fallbacks/source/wannier90-1.2/config.log?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 5:25 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Thanks for yor reply Yann...<br /><br />Unfortunately, I deleted that config and tried to reconfigure and rebuild. I did it just last night... Now thigs worked with the following build.ac:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />enable_smp=&quot;yes&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_fft_libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_core -lmkl_intel_lp64 -lmkl_sequential -lpthread&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_core -lmkl_intel_lp64 -lmkl_sequential -lpthread&quot;</code></pre></div><br /><br />The output for the wannier90 config.log is attached below...<br /><br />Now, I am running the full tests using the runtests.py script and I am seeing the same &quot;returned exit_code: 174&quot; error in BIGDFT t06, t14, FOX t02, LIBXC t01, t81, TUTORIAL tbase2_5, V1 t28, t29, t19, V2 t40, t41... besides, there is a &quot;failed: erroneous lines 32 &gt; 24&quot; in BIGDFT t31...<br /><br />Maybe I built a buggy abinit?? Have to wait till the end of the Tests_Suite but, up to now, these are the news.<br /><br />Thanks in advance... any help will be appreciated.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 5:55 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Now all the Tests_Suite have finished... with 30 failed tests, most of them by the infamous 174 return code described before... Below is the txt with reports.<br />I think I will not do a &quot;make install&quot; until a &quot;convincent&quot; build of abinit has been attained... and it looks too buggy to me. I will explore another workarounds in the meantime...<br />Any idea?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 6:15 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">We need more info to pinpoint the problem.<br /><br />Each test redirects the standard error to a file named t[test_num].stderr<br />Do you have some message in these files?<br /><br />If the stderr is empty, you can try to attach a debugger to Abinit.<br />Example:<br /><br />cd tests/Test_suite/v3_t30<br /># Run abinit under the control of the GNU debugger<br />gdb path_to_abinit_executable<br /># wait for the gdb prompt ...<br />(gdb) run &lt; t30.stdin<br /># If the test fails, use the backtrace command and post the output <br />(gdb) backtrace</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 6:50 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Hi, thanks again...<br />Here are the stderr of every single &quot;failed&quot;. The HTML auto-report was very helpful and informative also... but the stderrs registered, as you may see, a SIGSEGV segmentation fault for almost every error.<br />I suspect that is an MKL issue...<br />Need more info??<br />Hugs!!<br /><br />BIGDFT Tests Suite<br /><br />(01)	Standard Error of test t06:<br />		TODO, remove me<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(02)	Standard Error of test t14:<br />		TODO, remove me<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(03)	Standard Error of test t31:<br />		TODO, remove me<br />		TODO, remove me<br /><br />FOX Tests Suite<br /><br />(04)	Standard Error of test t02:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />LIBXC Tests Suite<br /><br />(05)	Standard Error of test t01:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(06)	Standard Error of test t81:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />TUTORIAL Tests Suite<br /><br />(07)	Standard Error of test tbase2_5:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V1 Tests Suite<br /><br />(08)	Standard Error of test t19:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(09)	Standard Error of test t28:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(10)	Standard Error of test t29:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V2 Tests Suite<br /><br />(11)	Standard Error of test t40:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(12)	Standard Error of test t41:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V3 Tests Suite<br /><br />(13)	Standard Error of test t08:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(14)	Standard Error of test t16:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(15)	Standard Error of test t18:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(16)	Standard Error of test t70:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(17)	Standard Error of test t71:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(18)	Standard Error of test t72:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(19)	Standard Error of test t73:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(20)	Standard Error of test t76:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(21)	Standard Error of test t82:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V4 Tests Suite<br /><br />(22)	Standard Error of test t58:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V5 Tests Suite<br /><br />(23)	Standard Error of test t07:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(24)	Standard Error of test t29:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(25)	Standard Error of test t48:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(26)	Standard Error of test t55:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />V67MBPT Tests Suite<br /><br />(27)	Standard Error of test t03:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />(28)	Standard Error of test t14:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />VDWXC Tests Suite<br /><br />(29)	Standard Error of test t10:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred<br /><br />WANNIER90 Tests Suite<br /><br />(30)	Standard Error of test t12:<br />		forrtl: severe (174): SIGSEGV, segmentation fault occurred</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 7:06 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">And backtracing the error for the BIGDFT t06 gives:<br /><br />#0  0x000000000181f75b in xcpbe (exci=..., <br />    npts=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    nspden=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    option=0, <br />    order=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    rho_updn=..., vxci=..., ndvxci=0, ngr2=1, nd2vxci=0, d2vxci=..., <br />    dvxcdgr=..., dvxci=..., <br />    exexch=&lt;error reading variable: Cannot access memory at address 0x0&gt;, <br />    grho2_updn=...) at ../../../7.4.3/src/56_xc/xcpbe.F90:537<br />#1  0x00000000017edd9b in drivexc (exc=..., <br />    ixc=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    npts=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    nspden=0, <br />    order=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    rho_updn=..., vxcrho=..., ndvxc=0, ngr2=1, nd2vxc=0, nvxcgrho=3, dvxc=..., <br />    d2vxc=..., grho2_updn=..., vxcgrho=..., <br />    exexch=&lt;error reading variable: Cannot access memory at address 0x0&gt;, <br />    lrho_updn=..., vxclrho=..., tau_updn=..., vxctau=..., xc_tb09_c=0)<br />    at ../../../7.4.3/src/56_xc/drivexc.F90:429<br />#2  0x00000000022312a4 in MODULE_XC::xc_getvxc (<br />    npts=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    exc=..., <br />    nspden=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---<br />    rho=..., vxc=..., grho2=..., vxcgr=..., dvxci=...) at xc.f90:358<br />#3  0x0000000001f21ec4 in xc_energy_new (<br />    geocode=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    m1=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    m3=&lt;error reading variable: Cannot access memory at address 0x40&gt;, nxc=0, <br />    nwb=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    nxt=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    nwbl=36, nwbr=-1597734584, nxcl=0, nxcr=0, ixc=1, <br />    hx=4.9406564584124654e-324, hy=2.1219957963999944e-314, <br />    hz=0.15747717774047026, rho=..., gradient=..., vxci=..., <br />    exc=3.0484682560998278e-44, vxc=1.0000000000000004e-20, order=0, ndvxc=0, <br />    dvxci=..., nspden=0, <br />    wbstr=&lt;error reading variable: Cannot access memory at address 0x100&gt;, <br />    .tmp.GEOCODE.len_V$2c60=51690420) at PSolver/xcenergy.f90:875<br />#4  0x0000000001f1c2e5 in xc_potential (<br />    geocode=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    datacode=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    iproc=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    nproc=0, <br />    n01=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    n02=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    n03=&lt;error reading variable: Cannot access memory at address 0x24000000f0&gt;, ixc=&lt;error reading variable: Cannot access memory at address 0x1300000078&gt;, <br />---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---<br />    hx=&lt;error reading variable: Cannot access memory at address 0x7900000013&gt;, <br />    hy=&lt;error reading variable: Cannot access memory at address 0x53&gt;, <br />    hz=&lt;error reading variable: Cannot access memory at address 0x2400000084&gt;, <br />    rho=..., <br />    exc=&lt;error reading variable: Cannot access memory at address 0x100000024&gt;, <br />    vxc=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    nspin=&lt;error reading variable: Cannot access memory at address 0x100000000&gt;, <br />    rhocore=&lt;error reading variable: Cannot access memory at address 0x2400000024&gt;, potxc=..., xcstr=..., dvxcdrho=..., rhohat=..., .tmp.GEOCODE.len_V$2716=0, <br />    .tmp.DATACODE.len_V$2718=-41584) at PSolver/xcenergy.f90:528<br />#5  0x000000000253c4fd in updatepotential (<br />    iproc=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    nproc=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    geocode=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    ixc=0, <br />    nspin=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    hxh=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    hyh=0.17499999999999999, hzh=0.15747717774047026, glr=..., denspot=..., <br />    ehart=0, eexcu=0, vexcu=0, .tmp.GEOCODE.len_V$2796=1)<br />    at linear/energyAndForces.f90:91<br />#6  0x000000000217b205 in input_wf_diag (<br />    iproc=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---<br />    nproc=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    at=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    denspot=..., <br />    orbs=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    nvirt=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    comms=..., lzd=..., energs=..., rxyz=..., nlpspd=..., proj=..., ixc=11, <br />    psi=0x5e6ca30, hpsi=0x0, psit=0x0, g=..., nspin=1, symobj=..., gpu=..., <br />    input=..., onlywf=.FALSE., proj_g=..., <br />    paw=&lt;error reading variable: Cannot access memory at address 0x0&gt;)<br />    at init.f90:1755<br />#7  0x000000000061d896 in wvl_wfsinp_scratch (<br />    dtset=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    mpi_enreg=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    occ=..., rprimd=..., <br />    wvl=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    xred=...) at ../../../7.4.3/src/79_seqpar_mpi/wvl_wfsinp_scratch.F90:180<br />#8  0x00000000005e5a92 in inwffil (<br />    ask_accurate=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, cg=..., <br />    dtset=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    ecut=0, <br />    ecut_eff=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    eigen=..., exchn2n3d=0, formeig=0, gmet=..., hdr=..., ireadwf=0, <br />---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---<br />    istwfk=..., kg=..., kptns=..., localrdwf=1, mband=4, mcg=0, mkmem=-1, <br />    mpi_enreg=..., mpw=0, nband=..., ngfft=..., nkpt=1, npwarr=..., nsppol=1, <br />    nsym=1, occ=..., optorth=1, rprimd=..., symafm=..., symrel=..., tnons=..., <br />    unkg=17, wff1=..., wffnow=..., unwff1=1, unwfnow=11, wffnm=..., <br />    wft1nm=..., wvl=..., .tmp.WFFNM.len_V$1058a=264, <br />    .tmp.WFT1NM.len_V$1058c=264)<br />    at ../../../7.4.3/src/79_seqpar_mpi/inwffil.F90:734<br />#9  0x00000000004fe7f3 in gstate (<br />    acell=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    amu=..., <br />    codvsn=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    cpui=0, <br />    dtfil=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    dtset=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />    iexit=0, initialized=0, mpi_enreg=..., npwtot=..., occ=..., pawang=..., <br />    pawrad=..., pawtab=..., psps=..., results_gs=..., rprim=..., <br />    scf_history=..., vel=..., vel_cell=..., xred=..., <br />    .tmp.CODVSN.len_V$44ac2=6) at ../../../7.4.3/src/95_drive/gstate.F90:647<br />#10 0x0000000000423167 in gstateimg (acell_img=..., amu_img=..., <br />    codvsn=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    cpui=0, <br />    dtfil=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    dtset=&lt;error reading variable: Cannot access memory at address 0x1&gt;, <br />---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---<br />    etotal_img=..., fcart_img=..., fred_img=..., iexit=0, mixalch_img=..., <br />    mpi_enreg=..., nimage=1, npwtot=..., occ_img=..., pawang=..., pawrad=..., <br />    pawtab=..., psps=..., rprim_img=..., strten_img=..., vel_cell_img=..., <br />    vel_img=..., xred_img=..., filnam=..., filstat=..., idtset=1, jdtset=..., <br />    ndtset=0, .tmp.CODVSN.len_V$cc6b=6, .tmp.FILSTAT.len_V$ccd2=264)<br />    at ../../../7.4.3/src/95_drive/gstateimg.F90:421<br />#11 0x0000000000411700 in driver (<br />    codvsn=&lt;error reading variable: Cannot access memory at address 0x23c10&gt;, <br />    cpui=&lt;error reading variable: Cannot access memory at address 0x40&gt;, <br />    dtsets=..., filnam=..., <br />    filstat=&lt;error reading variable: Cannot access memory at address 0x8f1&gt;, <br />    mpi_enregs=..., ndtset=0, ndtset_alloc=1, npsp=2, pspheads=..., <br />    results_out=..., .tmp.CODVSN.len_V$fd04=6, .tmp.FILNAM.len_V$fd0b=264, <br />    .tmp.FILSTAT.len_V$fd0d=264) at ../../../7.4.3/src/95_drive/driver.F90:653<br />#12 0x0000000000407da5 in abinit ()<br />    at ../../../7.4.3/src/98_main/abinit.F90:440</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Fri Jan 17, 2014 7:34 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">The Intel debugger, for the same test file, gives out<br /><br />Reading symbols from /home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/src/98_main/abinit...done.<br />(idb) run &lt; t06.stdin<br />Starting program: /home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/src/98_main/abinit<br />[New Thread 18883 (LWP 18883)]<br />Program received signal SIGSEGV<br />xcpbe (exci=(...), npts=&lt;no value&gt;, nspden=&lt;no value&gt;, option=0, order=&lt;no value&gt;, rho_updn=(...), vxci=(...), ndvxci=0, ngr2=1, nd2vxci=0, d2vxci=(...), dvxcdgr=(...), dvxci=(...), exexch=&lt;no value&gt;, grho2_updn=(...)) at /home/amaury/Downloads/abinit/7.4.3/src/56_xc/xcpbe.F90:537<br />537	           if(exexch==1) cycle<br /><br />And backtracing from idb gives out:<br /><br />(idb) backtrace<br />0x000000000181f75b in xcpbe (exci=(...), npts=&lt;no value&gt;, nspden=&lt;no value&gt;, option=0, order=&lt;no value&gt;, rho_updn=(...), vxci=(...), ndvxci=0, ngr2=1, nd2vxci=0, d2vxci=(...), dvxcdgr=(...), dvxci=(...), exexch=&lt;no value&gt;, grho2_updn=(...)) &quot;/home/amaury/Downloads/abinit/7.4.3/src/56_xc/xcpbe.F90&quot;:537<br />0x00000000017edd9b in drivexc (exc=(...), ixc=&lt;no value&gt;, npts=&lt;no value&gt;, nspden=0, order=&lt;no value&gt;, rho_updn=(...), vxcrho=(...), ndvxc=0, ngr2=1, nd2vxc=0, nvxcgrho=3, dvxc=(...), d2vxc=(...), grho2_updn=(...), vxcgrho=(...), exexch=&lt;no value&gt;, lrho_updn=(...), vxclrho=(...), tau_updn=(...), vxctau=(...), xc_tb09_c=0) &quot;/home/amaury/Downloads/abinit/7.4.3/src/56_xc/drivexc.F90&quot;:429<br />0x00000000022312a4 in MODULE_XC::xc_getvxc (npts=&lt;no value&gt;, exc=(...), nspden=&lt;no value&gt;, rho=(...), vxc=(...), grho2=&lt;no value&gt;, vxcgr=(...), dvxci=(...)) &quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/sources/bigdft-abi-1.0.4/src/modules/xc.f90&quot;:358<br />0x0000000001f21ec4 in xc_energy_new (geocode=&lt;no value&gt;, m1=&lt;no value&gt;, m3=&lt;no value&gt;, nxc=0, nwb=&lt;no value&gt;, nxt=&lt;no value&gt;, nwbl=36, nwbr=-1597734584, nxcl=0, nxcr=0, ixc=1, hx=4.9406564584124654e-324, hy=2.1219957963999944e-314, hz=0.15747717774047026, rho=(...), gradient=(...), vxci=(...), exc=3.0484682560998278e-44, vxc=1.0000000000000004e-20, order=0, ndvxc=0, dvxci=(...), nspden=0, wbstr=&lt;no value&gt;) &quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/sources/bigdft-abi-1.0.4/src/PSolver/xcenergy.f90&quot;:875<br />0x0000000001f1c2e5 in xc_potential (geocode=&lt;no value&gt;, datacode=&lt;no value&gt;, iproc=&lt;no value&gt;, nproc=0, n01=&lt;no value&gt;, n02=&lt;no value&gt;, n03=&lt;no value&gt;, ixc=&lt;no value&gt;, hx=&lt;no value&gt;, hy=&lt;no value&gt;, hz=&lt;no value&gt;, rho=&lt;no value&gt;, exc=&lt;no value&gt;, vxc=&lt;no value&gt;, nspin=&lt;no value&gt;, rhocore=(...), potxc=&lt;no value&gt;, xcstr=(...), dvxcdrho=(...), rhohat=(...)) &quot;/home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/sources/bigdft-abi-1.0.4/src/PSolver/xcenergy.f90&quot;:528<br /><br />For me, I am starting to get into the &quot;advanced chinese course&quot; territory... In other words, I'm a little bit confused now.<br /><br />Hope this info could help</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 12:36 am</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">The segmentation fault is due to a wrong usage of optional arguments.<br />Strangely this bug has never triggered a SIGSEGV in our test farm (the same error is present in version 7.7!)<br /><br />Open 56_xc/drivexc.F90, go to line 429 and call xcpbe without the exexch argument if the dummy variable is not present, i.e.:<br /><br />=== modified file 'src/41_xc_lowlevel/drivexc.F90'<br />--- src/41_xc_lowlevel/drivexc.F90      2014-01-17 00:34:33 +0000<br />+++ src/41_xc_lowlevel/drivexc.F90      2014-01-17 23:28:17 +0000<br />@@ -426,8 +426,13 @@<br /> <br />    else if ((ixc &gt;= 11 .and. ixc &lt;= 15) .or. (ixc&gt;=23 .and. ixc&lt;=24)) then<br />      if (order**2 &lt;= 1) then<br />-       call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />-&amp;       dvxcdgr=vxcgrho,exexch=exexch,grho2_updn=grho2_updn)<br />+       if (present(exexch)) then<br />+         call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />+&amp;          dvxcdgr=vxcgrho,exexch=exexch,grho2_updn=grho2_updn)<br />+       else<br />+         call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />+&amp;          dvxcdgr=vxcgrho,grho2_updn=grho2_updn)<br />+       end if<br />      else if (order /=3) then<br />        if(ixc==12 .or. ixc==24)then <br /> <br /><br />Let me know if this solves the problem with the tests!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 1:32 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">same errors...<br /><br />just double-checking: I did what you said in the Bigdft drivexc.F90 file under src/56_xc of the build directory... more explicitly:<br />these are the lines from 406 to 419...<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; &nbsp;else if ((ixc &gt;= 11 .and. ixc &lt;= 15) .or. (ixc==23)) then<br />&nbsp; &nbsp; &nbsp;if (order**2 &lt;= 1) then<br />&nbsp; &nbsp; &nbsp; &nbsp;call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxc,ndvxc,ngr2,nd2vxc,dvxcdgr=vxcgr,exexch=exexch,&amp;<br />&amp;&nbsp; &nbsp; &nbsp; &nbsp;grho2_updn=grho2_updn)<br />&nbsp; &nbsp; &nbsp;if (present(exexch)) then<br />&nbsp; &nbsp; &nbsp; &nbsp;call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />&amp;&nbsp; &nbsp; &nbsp; &nbsp;dvxcdgr=vxcgrho,exexch=exexch,grho2_updn=grho2_updn)<br />&nbsp; &nbsp;else<br />&nbsp; &nbsp; &nbsp; &nbsp;call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />&amp;&nbsp; &nbsp; &nbsp; &nbsp;dvxcdgr=vxcgrho,grho2_updn=grho2_updn)<br />&nbsp; &nbsp; &nbsp;end if<br />&nbsp; &nbsp; &nbsp;else if (order /=3) then</code></pre></div><br /><br />and the file was located at /home/amaury/Downloads/abinit/Build.v1_intel14-nompi-mkl/fallbacks/sources/bigdft-abi-1.0.4/libABINIT/src/56_xc<br /><br />is it right??</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 1:36 am</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Sorry, I was posting a patch done on top of my 7.7 version. Your file comes from an old version and is slightly different <br />The new code should read:<br /><br />  else if ((ixc &gt;= 11 .and. ixc &lt;= 15) .or. (ixc==23)) then<br />     if (order**2 &lt;= 1) then<br />       if (present(exexch)) then<br />         call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />&amp;         dvxcdgr=vxcgrho,exexch=exexch,grho2_updn=grho2_updn)<br />      else<br />         call xcpbe(exc,npts,nspden,optpbe,order,rho_updn,vxcrho,ndvxc,ngr2,nd2vxc,&amp;<br />&amp;         dvxcdgr=vxcgrho,grho2_updn=grho2_updn)<br />       end if<br />     else if (order /=3) then</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 1:56 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Thanks, did it again as you said but the same remains the same<br /><img class="smilies" src="images/smilies/icon_e_sad.gif" alt=":-(" title="Sad" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 2:09 am</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Could you try version 7.6.1? The bug is still there but maybe we can reduce the number of failures and I can try <br />to fix the problems before the release of 7.6.2. It's very strange that I cannot reproduce your problem with ifort<br /><br />Could you start with the simplest configuration:<br /><br />prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br /><br />then we'll try to enable MKL and OpenMp.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 3:06 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">OK, I'll try...<br /><br />BTW, I did not know there was a 7.6.1 abinit... just cooked!!<br /><br />Thank you very very much for your kind attention<br /><br />Best regards!!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sat Jan 18, 2014 3:14 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">However, one thing is clear:<br />At least in my platform:<br />1. mixing GNU and Intel (iCompilers + ATLAS + fftw3, for instance) brings up the very same bug<br />2. working with pure Intel resources (iCompilers + MKL + fftw3-mkl) brings up the bug<br />3. working with pure GNU (gCompilers + ATLAS + fftw3) results in the most stable Abinit<br />But computation times with iCompilers + MKL improve a lot...<br />Let us try with the new baby and post the results...</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Sun Jan 19, 2014 12:55 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">I have tested the new abinit with the following config file:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />enable_smp=&quot;yes&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_linalg_flavor=&quot;mkl&quot;</code></pre></div><br /><br />./configure went well<br /><br />  * test AtomPAW   : yes<br />  * test BigDFT    : yes<br />  * test ETSF_IO   : yes<br />  * test FoX       : yes<br />  * test GPU       : no<br />  * test LibXC     : yes<br />  * test MPI       : no<br />  * test Wannier90 : yes<br /><br />  * timeout : no (0 seconds)<br /><br />  * MPI_RUNNER = <br />  * MPI_2PROCS = <br />  * MPI runner present : no<br />  * MPI runner working : unknown<br /><br />Summary of important options:<br /><br />  * C compiler      : intel version 14.0<br />  * Fortran compiler: intel version 14.0<br />  * architecture    : unknown unknown (64 bits)<br /><br />  * debugging       : basic<br />  * optimizations   : standard<br /><br />  * OpenMP enabled  : no (collapse: ignored)<br />  * MPI    enabled  : no<br />  * MPI-IO enabled  : no<br />  * GPU    enabled  : no (flavor: none)<br /><br />  * TRIO   flavor = netcdf-fallback+etsf_io-fallback+fox-fallback<br />  * TIMER  flavor = abinit (libs: ignored)<br />  * LINALG flavor = mkl (libs: auto-detected)<br />  * ALGO   flavor = none (libs: ignored)<br />  * FFT    flavor = fftw3-mkl (libs: auto-detected)<br />  * MATH   flavor = none (libs: ignored)<br />  * DFT    flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />then make mj4 also went well<br /><br />then make check, with the very same old problems...<br /><br />with returned exit_code: 174<br /><br />1 [bigdft][t06] fldiff.pl fatal error<br />2 [bigdft][t14] fldiff.pl fatal error<br />3 [fox][t02] fldiff.pl fatal error<br />4 [libxc][t01] fldiff.pl fatal error<br />5 [libxc][t81] fldiff.pl fatal error<br />6 [tutorial][tbase2_5] fldiff.pl fatal error<br />7 [v1][t28] fldiff.pl fatal error<br />8 [v1][t29] fldiff.pl fatal error<br />9 [v1][t19] fldiff.pl fatal error<br />10 [v2][t40] fldiff.pl fatal error<br />11 [v2][t41] fldiff.pl fatal error<br />12 [v3][t08] fldiff.pl fatal error<br />13 [v3][t16] fldiff.pl fatal error<br />14 [v3][t18] fldiff.pl fatal error<br />15 [v3][t72] fldiff.pl fatal error<br />16 [v3][t71] fldiff.pl fatal error:<br />17 [v3][t70] fldiff.pl fatal error<br />18 [v3][t73] fldiff.pl fatal error:<br />19 [v3][t76] fldiff.pl fatal error:<br />20 [v3][t82] fldiff.pl fatal error:<br />21 [v4][t58] fldiff.pl fatal error:<br />22 [v5][t07] fldiff.pl fatal error:<br />23 [v5][t29] fldiff.pl fatal error:<br />24 [v5][t48] fldiff.pl fatal error:<br />25 [v5][t55] fldiff.pl fatal error:<br />26 [v67mbpt][t03] fldiff.pl fatal error:<br />27 [v67mbpt][t14] fldiff.pl fatal error<br />28 [v7][t06] fldiff.pl fatal error<br />29 [vdwxc][t10] fldiff.pl fatal error:<br />30 [wannier90][t12] fldiff.pl fatal error<br /><br />Then I went again with the configuration file (in this case the mkl libs are explicitly declared)<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />enable_smp=&quot;yes&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_fft_libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_core -lmkl_intel_lp64 -lmkl_sequential -lpthread&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_libs=&quot;-L/opt/intel/mkl/lib/intel64 -lmkl_core -lmkl_intel_lp64 -lmkl_sequential -lpthread&quot;</code></pre></div><br /><br />and the result was also the same: good &quot;./configure&quot;, good &quot;make mj4&quot; but &quot;make check&quot; returned the 30 errors already reported above.<br /><br />Up to this very moment, my best results (time &amp; accuracy) are obtained mixing GNU compilers with Intel MKL libs using the following config file:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br />with_fft_flavor=&quot;fftw3-mkl&quot;<br />with_fft_libs=&quot;-L/opt/intel/composer_xe_2013_sp1.1.106/mkl/include/fftw -lmkl_gf_lp64 -lmkl_sequential -lmkl_core -lm&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_openmp=&quot;no&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_netcdf_incs=&quot;-I/usr/include&quot;<br />with_netcdf_libs=&quot;-L/usr/lib -lnetcdf -lnetcdff&quot;</code></pre></div><br /><br />A pure gnu compilation, as is well known, does not give so much headache and ran very well in my laptop.<br /><br />DELL, Precision M6500, Intel(R) Core(TM) i7  Q 720, 32 GB RAM<br />Linux Mint 13, 64 bits, 3.2.0-23-generic kernel<br />Icompilers 14.0.1.106 Build 20131008<br />GNUcompilers 4.6.3<br />MKL 11.0<br />MPI Library Runtime Environment for Linux<br /><br />I used this configuration.ac file:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_netcdf_incs=&quot;-I/usr/include&quot;<br />with_netcdf_libs=&quot;-L/usr/lib -lnetcdf -lnetcdff&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/include/&quot;<br />with_fft_libs=&quot;-L/usr/lib -lfftw3 -lfftw3f&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib -llapack -lf77blas -lcblas -latlas&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_maintainer_checks=&quot;no&quot;<br />enable_test_timeout=&quot;yes&quot;<br />enable_gui_build=&quot;no&quot;<br />enable_gpu=&quot;no&quot;</code></pre></div><br /><br />I will be backtracking some of the errors and keeping the eye on the problematic segments of the code... Hope to post something on this subject.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 7:59 am</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Dear Matteo...<br />I did this with the new abinit:<br /><br /><blockquote><div><cite>gmatteo wrote:</cite>Could you try version 7.6.1? The bug is still there but maybe we can reduce the number of failures and I can try <br />to fix the problems before the release of 7.6.2. It's very strange that I cannot reproduce your problem with ifort<br /><br />Could you start with the simplest configuration:<br /><br />prefix=/opt/abinit/7.4.3/build_no1<br />enable_64bit_flags=&quot;yes&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_mpi=&quot;no&quot;<br />CC=&quot;icc&quot;<br />CXX=&quot;icpc&quot;<br />FC=&quot;ifort&quot;<br />with_trio_flavor=&quot;netcdf+etsf_io+fox&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br /><br />then we'll try to enable MKL and OpenMp.</div></blockquote><br /><br />and errors are the same...<br />sorry!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 11:03 am</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />some infos on the post : <!-- l --><a class="postlink-local" href="viewtopic69f3.html?f=2&amp;t=2389#p7569">viewtopic.php?f=2&amp;t=2389#p7569</a><!-- l --><br /><br />I hope it can help you...<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 6:31 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Hi... thanks for your attention, jbeuken!!<br /><br />Unfortunately, the same errors...<br /><br />Just as you, I have Open MPI compiled with the intel compilers (with the last versions, by the way)...my environment variables are well defined, etc...<br />I did the same as you said, except for the paths to fftw and mkl that in my case point to /opt/intel/composer_xe_2013_sp1.1.106/mkl/lib/intel64<br />Another issue: when configuring, the MPI environment was not well understood by config so I just had to declare FC=&quot;mpif90&quot;, CC=&quot;mpicc&quot; and CXX=&quot;mpic++&quot;<br /><br />config went well, make mj4 also went well... but make check  showed the same (bad) results in the same tests:<br />bigdft_t06 is the first one: with exit code 174, segmentation fault... the same errors I have been reporting in this thread... then bigdft_t14 and so on...<br /><br />I would like to know what is going on with this setup.<br /><br />Thank you all guys for your kindness and (lot of) patience...<br /><br />Best regards.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 8:06 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hello,<br /><br />can you post the results of :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>which mpif90<br />mpif90 -show<br />mpif90 --version<br />env | sort</code></pre></div><br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 8:19 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">@Jean-Michel<br /><br />Having info on the environment is useful but I'm pretty sure that the problem is in Abinit (there are several routines that do not handle correctly optional arguments)<br />The strange thing is that intel14 passes all the tests in our test farm!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Mon Jan 20, 2014 8:57 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Here is the info as requested:<br /><br />~ $ which mpif90<br />/usr/local/bin/mpif90<br /><br />~ $ mpif90 -show<br />ifort -I/usr/local/include -I/usr/local/lib -L/usr/local/lib -lmpi_f90 -lmpi_f77 -lmpi -ldl -lm -Wl,--export-dynamic -lrt -lnsl -lutil<br /><br />~ $ mpif90 --version<br />ifort (IFORT) 14.0.1 20131008<br />Copyright (C) 1985-2013 Intel Corporation.  All rights reserved.<br /><br />~ $ env | sort<br />COLORTERM=gnome-terminal<br />CPATH=/opt/intel/composer_xe_2013_sp1.1.106/mkl/include:/opt/intel/composer_xe_2013_sp1.1.106/tbb/include<br />DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-aJmidJUws0,guid=32d68fb64c696e4fca36346700000024<br />DEFAULTS_PATH=/usr/share/gconf/default.default.path<br />DESKTOP_SESSION=default<br />DISPLAY=:0.0<br />GDB_CROSS=/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/intel64_mic/py27/bin/gdb-mic<br />GDBSERVER_MIC=/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/target/mic/bin/gdbserver<br />GJS_DEBUG_OUTPUT=stderr<br />GJS_DEBUG_TOPICS=JS ERROR;JS LOG<br />GNOME_DESKTOP_SESSION_ID=this-is-deprecated<br />GNOME_KEYRING_CONTROL=/tmp/keyring-RhX3Wb<br />GNOME_KEYRING_PID=1630<br />GPG_AGENT_INFO=/tmp/keyring-RhX3Wb/gpg:0:1<br />HOME=/home/amaury<br />IDB_HOME=/opt/intel/composer_xe_2013_sp1.1.106/bin/intel64<br />I_MPI_ROOT=/opt/intel/impi/4.1.3.045<br />INCLUDE=/opt/intel/composer_xe_2013_sp1.1.106/mkl/include<br />INTEL_LICENSE_FILE=/opt/intel/composer_xe_2013_sp1.1.106/licenses:/opt/intel/licenses:/home/amaury/intel/licenses<br />IPPROOT=/opt/intel/composer_xe_2013_sp1.1.106/ipp<br />LANG=en_US.UTF-8<br />LD_LIBRARY_PATH=/opt/intel/impi/4.1.3.045/intel64/lib:/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/mpirt/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/ipp/../compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/ipp/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/mkl/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/tbb/lib/intel64/gcc4.4:/opt/intel/impi/4.1.3.045/intel64/lib:/usr/local/lib<br />LIBGL_DRIVERS_PATH=/usr/lib/fglrx/dri:/usr/lib32/fglrx/dri<br />LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/ipp/../compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/ipp/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/mkl/lib/intel64:/opt/intel/composer_xe_2013_sp1.1.106/tbb/lib/intel64/gcc4.4<br />LOGNAME=amaury<br />MANDATORY_PATH=/usr/share/gconf/default.mandatory.path<br />MANPATH=/opt/intel/composer_xe_2013_sp1.1.106/man/en_US:/opt/intel/composer_xe_2013_sp1.1.106/man/en_US:/opt/intel/impi/4.1.3.045/man:/usr/local/man:/usr/local/share/man:/usr/share/man:<br />MDM_LANG=en_US.UTF-8<br />MDMSESSION=default<br />MDM_XSERVER_LOCATION=local<br />MIC_LD_LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/mic:/opt/intel/composer_xe_2013_sp1.1.106/mpirt/lib/mic:/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/mic:/opt/intel/composer_xe_2013_sp1.1.106/mkl/lib/mic:/opt/intel/composer_xe_2013_sp1.1.106/tbb/lib/mic<br />MIC_LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.1.106/tbb/lib/mic<br />MKLROOT=/opt/intel/composer_xe_2013_sp1.1.106/mkl<br />NLSPATH=/opt/intel/composer_xe_2013_sp1.1.106/compiler/lib/intel64/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.1.106/ipp/lib/intel64/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.1.106/mkl/lib/intel64/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/intel64_mic/py27/share/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/intel64/py27/share/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.1.106/debugger/intel64/locale/%l_%t/%N<br />PATH=/opt/intel/impi/4.1.3.045/intel64/bin:/opt/intel/composer_xe_2013_sp1.1.106/bin/intel64:/opt/intel/composer_xe_2013_sp1.1.106/mpirt/bin/intel64:/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/intel64_mic/py27/bin:/opt/intel/composer_xe_2013_sp1.1.106/debugger/gdb/intel64/py27/bin:/opt/intel/composer_xe_2013_sp1.1.106/bin/intel64:/opt/intel/composer_xe_2013_sp1.1.106/bin/intel64_mic:/opt/intel/composer_xe_2013_sp1.1.106/debugger/gui/intel64:/opt/intel/impi/4.1.3.045/intel64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/lib:/usr/local/lib<br />PWD=/home/amaury<br />SESSION_MANAGER=local/Helena-lnx:@/tmp/.ICE-unix/1707,unix/Helena-lnx:/tmp/.ICE-unix/1707<br />SHELL=/bin/bash<br />SHLVL=1<br />SSH_AGENT_PID=1786<br />SSH_AUTH_SOCK=/tmp/keyring-RhX3Wb/ssh<br />TBBROOT=/opt/intel/composer_xe_2013_sp1.1.106/tbb<br />TERM=xterm<br />USER=amaury<br />USERNAME=amaury<br />_=/usr/bin/env<br />WINDOWID=41943046<br />WINDOWPATH=8<br />XAUTHORITY=/home/amaury/.Xauthority<br />XDG_CONFIG_DIRS=/etc/xdg/xdg-default:/etc/xdg<br />XDG_CURRENT_DESKTOP=GNOME<br />XDG_DATA_DIRS=/usr/share/default:/usr/share/gnome:/usr/local/share/:/usr/share/:/usr/share/mdm/<br />XDG_SESSION_COOKIE=2b7cf3c2581d8204477753710000000a-1390247317.118983-1841456552<br /><br />and ths was not requested but it may help...<br /><br />~ $ ompi_info<br />                 Package: Open MPI root@Helena-lnx Distribution<br />                Open MPI: 1.6.5<br />   Open MPI SVN revision: r28673<br />   Open MPI release date: Jun 26, 2013<br />                Open RTE: 1.6.5<br />   Open RTE SVN revision: r28673<br />   Open RTE release date: Jun 26, 2013<br />                    OPAL: 1.6.5<br />       OPAL SVN revision: r28673<br />       OPAL release date: Jun 26, 2013<br />                 MPI API: 2.1<br />            Ident string: 1.6.5<br />                  Prefix: /usr/local<br /> Configured architecture: x86_64-unknown-linux-gnu<br />          Configure host: Helena-lnx<br />           Configured by: root<br />           Configured on: Sun Jan 19 21:40:02 CST 2014<br />          Configure host: Helena-lnx<br />                Built by: root<br />                Built on: Sun Jan 19 21:57:07 CST 2014<br />              Built host: Helena-lnx<br />              C bindings: yes<br />            C++ bindings: yes<br />      Fortran77 bindings: yes (all)<br />      Fortran90 bindings: yes<br /> Fortran90 bindings size: small<br />              C compiler: icc<br />     C compiler absolute: /opt/intel/composer_xe_2013_sp1.1.106/bin/intel64/icc<br />  C compiler family name: INTEL<br />      C compiler version: 1400.20131008<br />            C++ compiler: icpc<br />   C++ compiler absolute: /opt/intel/composer_xe_2013_sp1.1.106/bin/intel64/icpc<br />      Fortran77 compiler: ifort<br />  Fortran77 compiler abs: /opt/intel/composer_xe_2013_sp1.1.106/bin/intel64/ifort<br />      Fortran90 compiler: ifort<br />  Fortran90 compiler abs: /opt/intel/composer_xe_2013_sp1.1.106/bin/intel64/ifort<br />             C profiling: yes<br />           C++ profiling: yes<br />     Fortran77 profiling: yes<br />     Fortran90 profiling: yes<br />          C++ exceptions: no<br />          Thread support: posix (MPI_THREAD_MULTIPLE: no, progress: no)<br />           Sparse Groups: no<br />  Internal debug support: no<br />  MPI interface warnings: no<br />     MPI parameter check: runtime<br />Memory profiling support: no<br />Memory debugging support: no<br />         libltdl support: yes<br />   Heterogeneous support: no<br /> mpirun default --prefix: no<br />         MPI I/O support: yes<br />       MPI_WTIME support: gettimeofday<br />     Symbol vis. support: yes<br />   Host topology support: yes<br />          MPI extensions: affinity example<br />   FT Checkpoint support: no (checkpoint thread: no)<br />     VampirTrace support: yes<br />  MPI_MAX_PROCESSOR_NAME: 256<br />    MPI_MAX_ERROR_STRING: 256<br />     MPI_MAX_OBJECT_NAME: 64<br />        MPI_MAX_INFO_KEY: 36<br />        MPI_MAX_INFO_VAL: 256<br />       MPI_MAX_PORT_NAME: 1024<br />  MPI_MAX_DATAREP_STRING: 128<br />           MCA backtrace: execinfo (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA memory: linux (MCA v2.0, API v2.0, Component v1.6.5)<br />           MCA paffinity: hwloc (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA carto: auto_detect (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA carto: file (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA shmem: mmap (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA shmem: posix (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA shmem: sysv (MCA v2.0, API v2.0, Component v1.6.5)<br />           MCA maffinity: first_use (MCA v2.0, API v2.0, Component v1.6.5)<br />           MCA maffinity: hwloc (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA timer: linux (MCA v2.0, API v2.0, Component v1.6.5)<br />         MCA installdirs: env (MCA v2.0, API v2.0, Component v1.6.5)<br />         MCA installdirs: config (MCA v2.0, API v2.0, Component v1.6.5)<br />             MCA sysinfo: linux (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA hwloc: hwloc132 (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA dpm: orte (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA pubsub: orte (MCA v2.0, API v2.0, Component v1.6.5)<br />           MCA allocator: basic (MCA v2.0, API v2.0, Component v1.6.5)<br />           MCA allocator: bucket (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: basic (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: hierarch (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: inter (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: self (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: sm (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: sync (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA coll: tuned (MCA v2.0, API v2.0, Component v1.6.5)<br />                  MCA io: romio (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA mpool: fake (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA mpool: rdma (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA mpool: sm (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA pml: bfo (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA pml: csum (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA pml: ob1 (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA pml: v (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA bml: r2 (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA rcache: vma (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA btl: ofud (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA btl: openib (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA btl: self (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA btl: sm (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA btl: tcp (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA topo: unity (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA osc: pt2pt (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA osc: rdma (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA iof: hnp (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA iof: orted (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA iof: tool (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA oob: tcp (MCA v2.0, API v2.0, Component v1.6.5)<br />                MCA odls: default (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ras: cm (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ras: loadleveler (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ras: slurm (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: load_balance (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: rank_file (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: resilient (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: round_robin (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: seq (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA rmaps: topo (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA rml: oob (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: binomial (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: cm (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: direct (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: linear (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: radix (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA routed: slave (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA plm: rsh (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA plm: slurm (MCA v2.0, API v2.0, Component v1.6.5)<br />               MCA filem: rsh (MCA v2.0, API v2.0, Component v1.6.5)<br />              MCA errmgr: default (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: env (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: hnp (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: singleton (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: slave (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: slurm (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: slurmd (MCA v2.0, API v2.0, Component v1.6.5)<br />                 MCA ess: tool (MCA v2.0, API v2.0, Component v1.6.5)<br />             MCA grpcomm: bad (MCA v2.0, API v2.0, Component v1.6.5)<br />             MCA grpcomm: basic (MCA v2.0, API v2.0, Component v1.6.5)<br />             MCA grpcomm: hier (MCA v2.0, API v2.0, Component v1.6.5)<br />            MCA notifier: command (MCA v2.0, API v1.0, Component v1.6.5)<br />            MCA notifier: syslog (MCA v2.0, API v1.0, Component v1.6.5)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Tue Jan 21, 2014 10:05 am</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><blockquote class="uncited"><div>…<br />Another issue: when configuring, the MPI environment was not well understood by config so I just had to declare FC=&quot;mpif90&quot;, CC=&quot;mpicc&quot; and CXX=&quot;mpic++&quot;<br />...</div></blockquote><br /><br /><blockquote class="uncited"><div>...<br />LD_LIBRARY_PATH=/opt/intel/impi/4.1.3.045/intel64/lib:&lt;SNIP&gt;…&lt;/SNIP&gt;:/usr/local/lib<br />…<br />PATH=/opt/intel/impi/4.1.3.045/intel64/bin:/opt/intel/composer_xe_2013_sp1.1.106/bin/intel64:&lt;SNIP&gt;…&lt;/SNIP&gt;<br />         :/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/lib:/usr/local/lib<br /></div></blockquote><br /><br />the issue with MPI is perhaps due to the mixing of 2 (or 3 ) MPI flavors  : impi, OpenMPI/intel ( and OpenMPI/gcc   system package ? )<br /><br />even if it does not solve the problem, it's more clean to write the paths as : <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>LD_LIBRARY_PATH=/usr/local/lib:/opt/intel/impi/4.1.3.045/intel64/lib:&lt;SNIP&gt;…&lt;/SNIP&gt;<br />PATH=/usr/local/bin:/opt/intel/impi/4.1.3.045/intel64/bin:&lt;SNIP&gt;…&lt;/SNIP&gt;<br /><br />and use <br /><br />with_mpi_prefix=&quot;/usr/local/&quot;<br /><br /></code></pre></div><br /><br />alternatively, you could try with impi :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CC = mpiicc<br />CXX = mpicxx<br />FC = mpiifort<br />enable_mpi = yes<br />enable_mpi_io = yes<br />with_mpi_incs = -I/opt/intel/impi/4.1.3.045/include64<br />with_mpi_libs = -L/opt/intel/impi/4.1.3.045/lib64 -lmpi<br />...<br /></code></pre></div><br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error while MAKE MJ4 [WANNIER 90] (an old issue reloaded</h3>
				<div class="date">Posted: <strong>Tue Jan 21, 2014 4:42 pm</strong></div>
				<div class="author">by <strong>FritoPaez</strong></div>
				<div class="content">Dear jbeuken,<br /><br />In fact, I have only 2 flavors: Open MPI + GNU and Open MPI + Intel... IMPI is just installed as an environment since I don have a license for Intel MPI compilers.<br />With OpenMPI/GNU + MKL libs (incl FFTW3-MKL) abinit runs fine here.<br />With OpenMP/GNU + ATLAS libs (incl FFTW3) abinit also runs fine here but slower.<br />My pain in the neck comes when trying to compile in the environment OpenMPI/Intel + MKL (incl FFTW3-MKL)... a smoother running configuration for my native platform...</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2384&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:39:31 GMT -->
</html>
