<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=1356&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:05:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Upgrade of LibXC</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Upgrade of LibXC</h2>
		<p><a href="viewtopic4bfc.html?f=19&amp;t=1356">https://forum.abinit.org/viewtopic.php?f=19&amp;t=1356</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Thu Oct 06, 2011 12:48 pm</strong></div>
				<div class="author">by <strong>dcaliste</strong></div>
				<div class="content">Currently, BigDFT depends on libXC 1.1, but ABINIT still uses 1.0. Is it possible to upgrade (almost nothing to do, just one or two symbol change names) ? Do you expect any trouble ?<br /><br />Related question, who's ready to do it and when (I volunteer) ?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Thu Oct 06, 2011 6:12 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">I'm perfectly fine if you do it.<br /><br />In the worst case, we can discuss this when I come to Grenoble.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Fri Oct 07, 2011 3:08 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hi Damien,<br /><br />already done but not pushed yet on 6.11.0 - there are a few accuracy problems (and a dirty hack to get rid of clumsy Portuguese chars in the libxc comments).<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Fri Oct 07, 2011 3:13 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Did you report this issue to the developers of LibXC?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Fri Oct 07, 2011 3:20 pm</strong></div>
				<div class="author">by <strong>dcaliste</strong></div>
				<div class="content"><blockquote class="uncited"><div>here are a few accuracy problems</div></blockquote><br /><br />That's exactly the kind of sentence I was expecting and why I started this discussion. I spent one week with BigDFT tracking regression. If it can help here are the accuracy tests we have in BigDFT, comparing ABINIT driveXC and libXC (nosp for no spin, scol for colinear spin calculations):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2766.21488514 | scol =&nbsp; &nbsp; -2240.03581793&nbsp; &nbsp;time = 0.09250 s<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp;-20&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2766.21488083 | scol =&nbsp; &nbsp; -2240.03581374&nbsp; &nbsp;time = 0.13350 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;2&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2764.02880304 | scol =&nbsp; &nbsp; -2237.43642550&nbsp; &nbsp;time = 0.06550 s<br />&nbsp;ixc =&nbsp; &nbsp;-1009&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2764.02879847 | scol =&nbsp; &nbsp; -2237.49187260&nbsp; &nbsp;time = 0.28450 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;3&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2765.45147845 | scol =&nbsp; &nbsp; -2239.62248621&nbsp; &nbsp;time = 0.05550 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;4&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3115.62686101 | scol =&nbsp; &nbsp; -2529.22837520&nbsp; &nbsp;time = 0.05850 s<br />&nbsp;ixc =&nbsp; &nbsp;-1002&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3115.62685637 | scol =&nbsp; &nbsp; -2529.70171805&nbsp; &nbsp;time = 0.22050 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;5&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2872.14600673 | scol =&nbsp; &nbsp; -2320.88893565&nbsp; &nbsp;time = 0.08500 s<br />&nbsp;ixc =&nbsp; &nbsp;-1004&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2872.15683268 | scol =&nbsp; &nbsp; -2321.36253050&nbsp; &nbsp;time = 0.31150 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;6&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1814.17322566 | scol =&nbsp; &nbsp; -1440.08163062&nbsp; &nbsp;time = 0.05500 s<br />&nbsp;ixc =&nbsp; &nbsp;-6006&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1814.17322329 | scol =&nbsp; &nbsp; -1440.55497575&nbsp; &nbsp;time = 0.27150 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;7&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2767.10176245 | scol =&nbsp; &nbsp; -2240.49206038&nbsp; &nbsp;time = 0.12850 s<br />&nbsp;ixc =&nbsp; &nbsp;-1012&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2767.10175784 | scol =&nbsp; &nbsp; -2240.49205495&nbsp; &nbsp;time = 0.33200 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;8&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1814.17322566 | scol =&nbsp; &nbsp; -1440.55497812&nbsp; &nbsp;time = 0.08150 s<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; -1&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1814.17322329 | scol =&nbsp; &nbsp; -1440.55497575&nbsp; &nbsp;time = 0.14750 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; &nbsp;9&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3655.22471599 | scol =&nbsp; &nbsp; -3056.94510925&nbsp; &nbsp;time = 0.14300 s<br />&nbsp;ixc =&nbsp; &nbsp;-1003&nbsp; &nbsp;nosp =&nbsp; &nbsp; 45754.55630339 | scol =&nbsp; &nbsp; 65484.14723970&nbsp; &nbsp;time = 0.22350 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1005&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2764.47194298 | scol =&nbsp; &nbsp; -2218.51637483&nbsp; &nbsp;time = 0.30800 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1007&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2768.72308542 | scol =&nbsp; &nbsp; -2242.11840810&nbsp; &nbsp;time = 0.43450 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1008&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3637.33819847 | scol =&nbsp; &nbsp; -3026.08745675&nbsp; &nbsp;time = 0.42900 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1010&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2764.02879847 | scol =&nbsp; &nbsp; -2237.49187260&nbsp; &nbsp;time = 0.28400 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1011&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2762.84136401 | scol =&nbsp; &nbsp; -2232.39062452&nbsp; &nbsp;time = 0.28400 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1013&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2767.10162590 | scol =&nbsp; &nbsp; -2240.49197745&nbsp; &nbsp;time = 0.33150 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp;-1014&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2812.15317905 | scol =&nbsp; &nbsp; -2270.68646003&nbsp; &nbsp;time = 0.33500 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 11&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3214.44003433 | scol =&nbsp; &nbsp; -2562.83066924&nbsp; &nbsp;time = 0.20100 s<br />&nbsp;ixc = -101130&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3214.44010430 | scol =&nbsp; &nbsp; -2562.83071776&nbsp; &nbsp;time = 0.66500 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 12&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3189.91009343 | scol =&nbsp; &nbsp; -2545.91096900&nbsp; &nbsp;time = 0.10250 s<br />&nbsp;ixc =&nbsp; &nbsp; -101&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3189.91009064 | scol =&nbsp; &nbsp; -2545.91096621&nbsp; &nbsp;time = 0.19050 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 13&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2767.10176245 | scol =&nbsp; &nbsp; -2240.49206038&nbsp; &nbsp;time = 0.22600 s<br />&nbsp;ixc = -160012&nbsp; &nbsp;nosp =&nbsp; &nbsp; &nbsp;-952.92853455 | scol =&nbsp; &nbsp; &nbsp;-799.93707920&nbsp; &nbsp;time = 0.47400 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 14&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3939.83765965 | scol =&nbsp; &nbsp; -3150.23273351&nbsp; &nbsp;time = 0.19950 s<br />&nbsp;ixc = -102130&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3939.83772939 | scol =&nbsp; &nbsp; -3150.23278181&nbsp; &nbsp;time = 0.66600 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 15&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3247.86373506 | scol =&nbsp; &nbsp; -2584.49246457&nbsp; &nbsp;time = 0.21750 s<br />&nbsp;ixc = -117130&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3247.86380504 | scol =&nbsp; &nbsp; -2584.49251310&nbsp; &nbsp;time = 0.67600 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 16&nbsp; &nbsp;nosp =&nbsp; &nbsp; -4949.52814777 | scol =&nbsp; &nbsp; -3938.44829636&nbsp; &nbsp;time = 0.21750 s<br />&nbsp;ixc =&nbsp; &nbsp; -161&nbsp; &nbsp;nosp =&nbsp; &nbsp; -4949.52814358 | scol =&nbsp; &nbsp; -3938.44829532&nbsp; &nbsp;time = 0.85050 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 17&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2546.44585867 | scol =&nbsp; &nbsp; -1954.21497826&nbsp; &nbsp;time = 0.21750 s<br />&nbsp;ixc =&nbsp; &nbsp; -162&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2546.44585522 | scol =&nbsp; &nbsp; -1954.21497929&nbsp; &nbsp;time = 0.84800 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 23&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3203.90850303 | scol =&nbsp; &nbsp; -2562.83066924&nbsp; &nbsp;time = 0.21350 s<br />&nbsp;ixc =&nbsp; &nbsp; -118&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3179.37855934 | scol =&nbsp; &nbsp; -2538.99096955&nbsp; &nbsp;time = 0.22900 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 26&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3140.83269864 | scol =&nbsp; &nbsp; -2430.35321529&nbsp; &nbsp;time = 0.21950 s<br />&nbsp;ixc =&nbsp; &nbsp; -163&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3140.83269493 | scol =&nbsp; &nbsp; -2430.35321666&nbsp; &nbsp;time = 0.84750 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; &nbsp; 27&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1176.92556505 | scol =&nbsp; &nbsp; &nbsp;-719.23727167&nbsp; &nbsp;time = 0.21750 s<br />&nbsp;ixc =&nbsp; &nbsp; -164&nbsp; &nbsp;nosp =&nbsp; &nbsp; -1176.92556175 | scol =&nbsp; &nbsp; &nbsp;-719.23727951&nbsp; &nbsp;time = 0.84900 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -102&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3915.30771573 | scol =&nbsp; &nbsp; -3133.31303025&nbsp; &nbsp;time = 0.19150 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -103&nbsp; &nbsp;nosp =&nbsp; &nbsp; -3463.54672524 | scol =&nbsp; &nbsp; -2766.65340442&nbsp; &nbsp;time = 0.18800 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -104&nbsp; &nbsp;nosp = ***************** | scol = *****************&nbsp; &nbsp;time = 0.17800 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -105&nbsp; &nbsp;nosp =&nbsp; &nbsp; -5517.45276955 | scol =&nbsp; &nbsp; -4674.67859141&nbsp; &nbsp;time = 0.23450 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -106&nbsp; &nbsp;nosp =&nbsp; &nbsp;-21314.23000832 | scol =&nbsp; &nbsp;-20397.88167685&nbsp; &nbsp;time = 0.24350 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -107&nbsp; &nbsp;nosp = -2055131.19113725 | scol = -2304024.37004162&nbsp; &nbsp;time = 0.18650 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -108&nbsp; &nbsp;nosp =&nbsp; &nbsp; -7031.32396038 | scol =&nbsp; &nbsp; -6101.52065424&nbsp; &nbsp;time = 0.27050 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -109&nbsp; &nbsp;nosp =&nbsp; &nbsp; &nbsp;-628.09086418 | scol =&nbsp; &nbsp; &nbsp;-410.60793637&nbsp; &nbsp;time = 0.37950 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -110&nbsp; &nbsp;nosp =&nbsp; &nbsp; -4494.87325445 | scol =&nbsp; &nbsp; -3600.81871942&nbsp; &nbsp;time = 0.18950 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br />&nbsp;ixc =&nbsp; &nbsp; -406&nbsp; &nbsp;nosp =&nbsp; &nbsp; -2416.96258164 | scol =&nbsp; &nbsp; -1926.35297621&nbsp; &nbsp;time = 0.62650 s<br />&nbsp;-----------------------------------------+--------------------------------------------<br /></code></pre></div><br />I can send you the Fortran routine to generate this Alain if you're interested.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Mon Oct 10, 2011 4:07 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Here is the comment from Miguel:<br /><blockquote class="uncited"><div>Several of the comparisons that give errors are meaningless. For <br />example, you are comparing ixc=13=&gt; GGA potential of van <br />Leeuwen-Baerends, while for energy, Perdew-Wang 92 functional, with a <br />calculation for the energy with van Leeuwen-Baerends (that does not have <br />an energy). The Gill functional gives wild errors, I guess because it is <br />wild (divergent), etc. There a couple of things that worry me, in any <br />case, the RPA functional (even if again you are comparing two different <br />things), and the wc functionals. I will take a closer look when I have <br />time...<br />Then, the small numerical differences are to be expected, as abinit <br />and libxc use different thresholds, different number of significant <br />digits in the constants and different orders of operations.</div></blockquote></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC</h3>
				<div class="date">Posted: <strong>Tue Oct 11, 2011 9:36 am</strong></div>
				<div class="author">by <strong>dcaliste</strong></div>
				<div class="content">Hello Miguel,<br /><br />   If you read this... Don't worry, I'm not saying that LibXC is less precise or buggy in comparison to ABINIT, I'm happy with it, following its developments and we plan in near future to switch to it as default in BigDFT (we've already abandonned the drivexc wrapper). Some comparisons in my tab are not adequat, I know and I'm not trying to make them match, sorry for the bad presentation.<br /><br />   Regarding my sentence about tracking regressions, it's indeed something I've done because for one or two functionals the results were diverging while they should have not. I've commited patches to libXC for this and discuss with Micael about them. So now, I'm providing this array to show to Alain that there's no regressions so far compared to ABINIT results, so he can include libXC1.1 as far as I'm concerned.<br /><br />   Sorry, it was not clear at the beginning.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Upgrade of LibXC&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Tue Oct 11, 2011 1:26 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello Damien, Yann and Miguel,<br /><br />Miguel ... don't worry at all <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /> I simply wanted to check to impact - on Abinit I assumed this has been done for long and on Atompaw, my main concern. And I certainly don't imply that libXC is less accurate, simply slightly different. Very fine for me to update to 1.1 - that was my original intention.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=1356&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:05:03 GMT -->
</html>
