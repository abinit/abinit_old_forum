<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1223&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:55:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Abinit 6.8.1 compile errors with libxc_mod.F90</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Abinit 6.8.1 compile errors with libxc_mod.F90</h2>
		<p><a href="viewtopiceda8-2.html?f=3&amp;t=1223">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1223</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Abinit 6.8.1 compile errors with libxc_mod.F90</h3>
				<div class="date">Posted: <strong>Sat Jul 16, 2011 2:40 am</strong></div>
				<div class="author">by <strong>aeftimia</strong></div>
				<div class="content">I run Ubuntu 11.4<br /><br />I have installed the latest<br />libxc: with ./configure --prefix=/usr<br />etsf_io with ./configure --prefix=/usr<br /><br />libxc is downloaded from the tddft.org because I needed the latest version of it installed for something else.<br /><br />I tried to configure abinit with<br />./configure --prefix=/usr --enable-mpi=&quot;yes&quot; --with-mpi-prefix=/usr --with-fallbacks-tardir=/opt/abinit/tarballs<br /><br />The tarballs are indeed in the suggested location.<br /><br />In short, configure does not think libxc or etsf_io &quot;work,&quot; and it used the fallback ones. Then, make failed with:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>libxc_mod.F90:137.64:<br /><br />&nbsp; if (xcstrg(ii)==&quot;XC_GGA_X_B86_R&quot;)&nbsp; &nbsp; &nbsp; &nbsp; id(ii)=XC_GGA_X_B86_R<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Symbol 'xc_gga_x_b86_r' at (1) has no IMPLICIT type<br />libxc_mod.F90:235.60:<br /><br />&nbsp; if (xcstrg(ii)==&quot;XC_LCA_LCH&quot;)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id(ii)=XC_LCA_LCH<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Symbol 'xc_lca_lch' at (1) has no IMPLICIT type<br />libxc_mod.F90:234.60:<br /><br />&nbsp; if (xcstrg(ii)==&quot;XC_LCA_OMC&quot;)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id(ii)=XC_LCA_OMC<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Symbol 'xc_lca_omc' at (1) has no IMPLICIT type<br />make&#91;7&#93;: *** &#91;libxc_mod.lo&#93; Error 1<br />make&#91;7&#93;: Leaving directory `/opt/abinit/plugins/atompaw/atompaw-3.0.1/src'<br />make&#91;6&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;6&#93;: Leaving directory `/opt/abinit/plugins/atompaw/atompaw-3.0.1'<br />make&#91;5&#93;: *** &#91;all&#93; Error 2<br />make&#91;5&#93;: Leaving directory `/opt/abinit/plugins/atompaw/atompaw-3.0.1'<br />make&#91;4&#93;: *** &#91;build-stamp&#93; Error 2<br />make&#91;4&#93;: Leaving directory `/opt/abinit/plugins/atompaw'<br />make&#91;3&#93;: *** &#91;package-ready&#93; Error 2<br />make&#91;3&#93;: Leaving directory `/opt/abinit/plugins/atompaw'<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;2&#93;: Leaving directory `/opt/abinit/plugins'<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `/opt/abinit'<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br />I would also like to build the gui, but configure tells me:<br />configure: the Abinit GUI will never be built<br /><br />I also have atlas, blas, lapack, scalapack, fftw3, and sparskit installed, if there are ways to take advantage of that, please tell me. I am trying to optimize as much as possible.<br /><br />Thank you,<br />Alex<div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file87cf.php?id=403">config.log</a></dt>
			<dd><em>configure log</em></dd>			<dd>(118.08 KiB) Downloaded 344 times</dd>
		</dl>
		
		
			</div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.8.1 compile errors with libxc_mod.F90</h3>
				<div class="date">Posted: <strong>Sat Jul 16, 2011 10:50 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />we have a bot to test abinit under ubuntu 10.4 with deb packages ( when availables )<br />then, the packages availables are :<br /><ul> - gcc 4.4.3<br /> - netcdf 4.1<br /> - openmpi 1.4.1<br /> - fftw3 3.2<br /> - atlas 3.6</ul><br />I download the libxc 1.1.0 from tddtf.org , configure it and install it under /opt/etsf/<br /><br />the others plugins ( atompaw, bigdft, etsf_io, fox, wannier ) are download automatically from abinit website ( by default, the fallback folder is in  ~/.abinit/tarballs )<br /><br />I run this command :<br /><br />./configure --with-config-file=config.ac<br /><br />with config.ac  file contains :<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_prefix=&quot;/usr&quot;<br />with_netcdf_incs=&quot;-I/usr/include&quot;<br />with_netcdf_libs=&quot;-L/usr/lib64 -lnetcdf -lnetcdff&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/usr/include/&quot;<br />with_fft_libs=&quot;-L/usr/lib64 -lfftw3&quot;<br />with_linalg_flavor=&quot;atlas&quot;<br />with_linalg_libs=&quot;-L/usr/lib64 -llapack -lf77blas -lcblas -latlas&quot;<br />with_dft_flavor=&quot;atompaw+bigdft+libxc+wannier90&quot;<br />with_libxc_incs=&quot;-I/opt/etsf/include&quot;<br />with_libxc_libs=&quot;-L/opt/etsf/lib -lxc&quot;<br />enable_gw_dpc=&quot;yes&quot;<br />enable_maintainer_checks=&quot;no&quot;<br />enable_test_timeout=&quot;yes&quot;<br />enable_gui_build=&quot;no&quot;<br /></code></pre></div><br /><br />and the configure works : <br /><br /><blockquote class="uncited"><div>Summary of important options:<br /><br />  * C compiler      : gnu version 4.4<br />  * Fortran compiler: gnu version 4.4<br />  * architecture    : unknown unknown (64 bits)<br /><br />  * debugging       : basic<br />  * optimizations   : standard<br /><br />  * MPI    enabled  : yes<br />  * MPI-IO enabled  : yes<br />  * GPU    enabled  : no (none)<br /><br />  * TRIO   flavor = netcdf+etsf_io-fallback<br />  * TIMER  flavor = abinit (libs: ignored)<br />  * LINALG flavor = atlas (libs: user-defined)<br />  * FFT    flavor = fftw3 (libs: user-defined)<br />  * MATH   flavor = none (libs: ignored)<br />  * DFT    flavor = libxc+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /></div></blockquote><br /><br />you see : libxc is not the fallback one<br /><br />but &quot;make&quot; fails with an error during compilation of atompaw :<br /><br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>cd atompaw-3.0.1 &amp;&amp; make<br />make&#91;5&#93;: Entering directory `/home/buildbot/ABINIT_OD/ktulu_gcc44/trunk_6.9.1-private/plugins/atompaw/atompaw-3.0.1'<br />...<br />libtool: compile:&nbsp; /usr/bin/mpif90 -DHAVE_CONFIG_H -I. -I.. -I/opt/etsf/include -ffree-form -g -ffree-line-length-none -O2 -mtune=native -march=native -mfpmath=sse -c libxc_mod.F90 -o libxc_mod.o<br />libxc_mod.F90:137.64:<br /><br />&nbsp; if (xcstrg(ii)==&quot;XC_GGA_X_B86_R&quot;)&nbsp; &nbsp; &nbsp; &nbsp; id(ii)=XC_GGA_X_B86_R<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Symbol 'xc_gga_x_b86_r' at (1) has no IMPLICIT type<br />....<br /></code></pre></div><br /><br />when I try with the libxc 1.0 ( the fallback one ), the make works !<br /><br />next I try with version  of libxc 1.1.0 but without atompaw<br /><br />change in config.ac <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_dft_flavor=&quot;bigdft+libxc+wannier90&quot;</code></pre></div><br /><br />configure and make work but the internal tests of libxc with abinit failed  ( cd tests; make Tlibxc )  <img class="smilies" src="images/smilies/icon_e_confused.gif" alt=":?" title="Confused" /> <br /><blockquote class="uncited"><div>Case_01            failed (too large absolute error : 1.71404536928321e-05 , accepted 0.0 ) <br />Case_02            failed (too large absolute error : 1.33706899987374e-05 , accepted 0.0 ) <br />Case_03            failed (too large absolute error : 4535.3 , accepted 1.1e-1 ) <br />Case_04            failed (too large absolute error : 2382999434.6 , accepted 1.1e-5 ) <br />Case_05            failed (too large absolute error : 24780.9 , accepted 0.0 ) <br />Case_06            failed (too large absolute error : 2633 , accepted 0.0 ) <br />Case_07            failed (too large absolute error : 1719.2 , accepted 0.0 ) <br />Case_08            failed (too large absolute error : 58460.1 , accepted 81.0 ) <br />Case_09            failed (too large absolute error : 33.3 , accepted 1.1e-7 ) <br />Case_10 succeeded<br />Case_13            failed (too large absolute error : 12430 , accepted 1.1e-4 ) <br />Case_21 passed<br />Case_22 succeeded<br /></div></blockquote><br /><br />then, it seems there is a big problem with libxc 1.1 with abinit 6.8<br /><br />sorry but I can't do more<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.8.1 compile errors with libxc_mod.F90</h3>
				<div class="date">Posted: <strong>Mon Jul 18, 2011 5:44 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Here is a little additional remark: configuring Abinit and/or any of its dependencies with --prefix=/usr on Debian-based systems might not be a very good idea, since we are preparing binary packages to be installed with apt-get. Using the default prefix (/usr/local) will ensure that the package manager does not overwrite your custom libraries and programs.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.8.1 compile errors with libxc_mod.F90</h3>
				<div class="date">Posted: <strong>Mon Jul 18, 2011 6:07 pm</strong></div>
				<div class="author">by <strong>aeftimia</strong></div>
				<div class="content">I had searched the web for weather to install in /usr or /usr/local, and what I found indicated that /usr is the usual standard for linux. You say however, that apt-get installs to /usr/local. Am I to conclude that I should install to /usr/local as a rule-of-thumb?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.8.1 compile errors with libxc_mod.F90</h3>
				<div class="date">Posted: <strong>Tue Jul 19, 2011 12:17 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">To be clear: apt-get installs things in /usr, thus if you do so as well, what you install might be partly or totally overwritten whenever you run apt-get. Moreover, you will not be able to tell whether a file belongs to a binary package or a custom install of yours. In the worst case, this could even prevent the programs to work properly, because of the presence of conflicting data. that's why I consider it is a bad idea.<br /><br />There are very detailed rules on where to put what under Unix-compliant systems. This is called the Filesystem Hierarchy Standard (FHS). you can access a summary and the full document by following these links:<br /><ul><li><a href="http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" class="postlink">http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard</a></li><li><a href="http://www.pathname.com/fhs/" class="postlink">http://www.pathname.com/fhs/</a></li></ul></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1223&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:55:20 GMT -->
</html>
