<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=8418 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:00:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Abinit +intel compilators wierd issue while opt geom - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopic22ac.html?t=2728">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic50ec.html?f=3&amp;t=2728">Abinit +intel compilators wierd issue while opt geom</a>&nbsp;
<a href="viewtopic9d5c.html?f=3&amp;t=2728&amp;p=8397#p8397" style="color: #006600;">
	[SOLVED]
</a>
</h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="postingcb6a.html?mode=reply&amp;f=3&amp;t=2728" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic401e.html?f=3&amp;t=2728&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="2728" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			9 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p8397" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8397">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche23d.html?author_id=549&amp;sr=posts">75</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Dec 02, 2010 10:36 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8397">

						<h3 class="first"><a href="#p8397">Abinit +intel compilators wierd issue while opt geom&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting9ba9.html?mode=quote&amp;f=3&amp;p=8397" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0b47-2.html?p=8397#p8397" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a></strong> &raquo; </span>Wed Jul 09, 2014 4:35 pm
			</p>
			
			
			
			<div class="content">I have a vary strange situation. On the same machine (2 xenon e5-2340 processor based) I've compiled abinit 7.8.1 with both intel and gcc compilators. The configuration is as follows:<br />For intel (intel mpi used):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export FC=$MPICH/bin/mpiifort&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />export CC=$MPICH/bin/mpiicc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />export CXX=$MPICH/bin/mpiicpc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />./configure --prefix=/opt/abinit-$VER --enable-mpi --enable-mpi-io \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp;--with-linalg-incs=&quot;-I$INTEL_COMP/mkl/include&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp;--with-fft-flavor=&quot;fftw3-mkl&quot; --with-fft-incs=&quot;-I$INTEL_COMP/mkl/include/fftw&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp;--with-fft-libs=&quot;-L$INTEL_COMP/mkl/lib/intel64 -lfftw3xf_intel&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp;--with-linalg-flavor=&quot;mkl&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp;--with-linalg-libs=&quot;-L$INTEL_COMP/mkl/lib/intel64&nbsp; -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -Wl,--end-group -liomp5 -lpthread -limf -lsvml -lirc&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp;--with-linalg-incs=&quot;-I$INTEL_COMP/mkl/include&quot; \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp;--with-dft-flavor=&quot;atompaw+bigdft+libxc+wannier90&quot; </code></pre></div><br />For gcc (mpich used):<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=/opt/abinit-$VER --with-mpich=$MPICH2 \&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp;--with-dft-flavor=&quot;atompaw+bigdft+libxc+wannier90&quot; </code></pre></div><br /><br />And while optimizing the structure with abinit compiled by intel compilators it fails at some step, while optimizing with gcc abinit it finishes smooth. Here is the input I have:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;acell 5.88 5.88 57.1<br />&nbsp; &nbsp;angdeg 90.000&nbsp; 90.000 120.000<br /><br />rprim sqrt(0.75)&nbsp; 0.5&nbsp; 0.0<br />&nbsp; &nbsp; &nbsp;-sqrt(0.75)&nbsp; 0.5&nbsp; 0.0&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; 0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0&nbsp; 1.0&nbsp; &nbsp;<br />&nbsp; &nbsp;ntypat 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;znucl 31 7 13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;natom 24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp;typat 1 2 1 2 1 2 1 2 1 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2&nbsp; &nbsp; &nbsp; <br />xred&nbsp; &nbsp; <br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.0000000000<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.0637500000<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.0841584158<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.1479084158<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.1683168317<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.2320668317<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.2524752475<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.3162252475<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.3366336634<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.4003836634<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.4207920792<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.4845420792<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.5049504950<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.5687004950<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.5923283505<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.6536028603<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.6732187925<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.7344933023<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.7541092345<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.8153837443<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.8349996764<br />1/3&nbsp; &nbsp;2/3&nbsp; &nbsp; &nbsp;0.8962741862<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.9158901184<br />2/3&nbsp; &nbsp;1/3&nbsp; &nbsp; &nbsp;0.9771646282<br /><br />&nbsp;ixc&nbsp; &nbsp; &nbsp; &nbsp;7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Teter XC functional<br />&nbsp; &nbsp;ecut&nbsp; &nbsp; &nbsp; 25&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Kinetic energy cut-off (in Ha)<br />&nbsp; &nbsp;ecutsm&nbsp; &nbsp; 0.5<br />&nbsp; &nbsp;dilatmx&nbsp; &nbsp;1.25<br /><br /><br />&nbsp; &nbsp;kptopt&nbsp; &nbsp; 1<br /><br />&nbsp; &nbsp;ngkpt&nbsp; &nbsp; &nbsp;6 6 4<br />&nbsp; &nbsp;nshiftk&nbsp; &nbsp;1<br />&nbsp; &nbsp;shiftk&nbsp; &nbsp; 0.0 0.0 0.5<br /><br />&nbsp; &nbsp;iscf&nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; # Pulay mixing (default for norm-conserving PSP)<br />&nbsp; &nbsp;nstep&nbsp; &nbsp; &nbsp;150&nbsp; &nbsp; # Modify default<br /><br />&nbsp; &nbsp;ionmov 3<br />&nbsp; &nbsp;ntime 150<br /><br />&nbsp; &nbsp;toldff&nbsp; &nbsp; 1.0d-4<br />&nbsp; &nbsp;tolmxf&nbsp; &nbsp; 1.0d-3<br />optforces 1<br />&nbsp; optcell 0<br />use_gpu_cuda 0<br />AUTOPARAL=0<br /></code></pre></div><br /><br />ABINIT fails with warning<br /><blockquote class="uncited"><div> Potential-based CG line minimization not converged after13 restarts.                                                                                                  <br />    Action : read the eventual warnings about lack of convergence.                                                                                                        <br />    Some might be relevant. Otherwise, raise nband. Returning                                                                                                             <br />src_file: scfcge.F90                                                                                                                                                      <br />src_line: 375<br /></div></blockquote><br /><br />Moreover if I use abinit compiled with intel compilator on another machine (cluster) it whent smooth also. The optimization process goes absolutle the same way up to 4th step 5th step differs and the 6th fails.<br /><br />There is somthing different with reduced forces they all goes to zero in basis at the fifth (pre fails) step of optimisation.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Cartesian forces (fcart) &#91;Ha/bohr&#93;; max,rms= 9.03107E-03 2.51165E-03 (free atoms)<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 1.54667733343065E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -2.06600109156256E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -9.83194404385286E-04<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -4.16727320416967E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 1.68339746419727E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -1.72370601891689E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 5.67865482140431E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 4.59214632078102E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 4.48469221935451E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -1.97601745013876E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 8.04770880797129E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 6.86837849770853E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -1.29830590065030E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -9.03107255582250E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 8.13504889824362E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -2.12193114733188E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -5.56983517030434E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -4.53171312473877E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 5.62000940042989E-04<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -1.60093617041179E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00&nbsp; 9.81585503490430E-04<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -2.38942398773797E-03<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -8.33702492019031E-04<br />&nbsp; 0.00000000000000E+00&nbsp; 0.00000000000000E+00 -4.28717808843490E-03<br /></code></pre></div><br />While in previous step its of order -4.30318458033374E-33<br /><br />Maybe there is somekind of precision issure? Is there paramiter I should pass to intel compilator to rise precision of calculations.<br /><br />In cluster (Xeon Processor X5550) where abinit compiled by intel the compilator set is 2013 upd 1. I was trying the set in my machine (Xenon E5-2340) to compile good abinit binary with no succes, but I can use the binary compiled in cluster on my E5-2340 based computer with full success. I've tried to use mpich and openmpi with no success also. Maybe I should add some additional flags to intel compilator?</div>
			
			
			
													<div class="notice">
					Last edited by <a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a> on Thu Jul 10, 2014 3:54 pm, edited 1 time in total.
									</div>
			
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8400" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8400">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist194b.html?mode=viewprofile&amp;u=69" class="avatar"><img class="avatar" src="download/file2b59.jpg?avatar=69_1334683785.jpg" width="78" height="92" alt="User avatar" /></a>														</div>
								<a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search2ddf.html?author_id=69&amp;sr=posts">365</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 18, 2009 9:24 pm</dd>		
		
											
							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact jbeuken">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact jbeuken</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="http://www.uclouvain.be/jean-michel.beuken" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>
									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content8400">

						<h3 ><a href="#p8400">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting3a4e.html?mode=quote&amp;f=3&amp;p=8400" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopiccf92.html?p=8400#p8400" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist194b.html?mode=viewprofile&amp;u=69" style="color: #33CC00;" class="username-coloured">jbeuken</a></strong> &raquo; </span>Thu Jul 10, 2014 12:45 pm
			</p>
			
			
			
			<div class="content">Hi,<br /><br />which version of ifort ?<br /><br />here , a part of my configure working with ifort 13.1.3 ( without parallel MKL ) :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--with-fft-flavor=&quot;fftw3&quot;&nbsp; \<br />--with-fft-libs=&quot;-L/opt/intel/mkl/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group&quot;&nbsp; \<br />--with-linalg-flavor=&quot;mkl&quot;&nbsp; \<br />--with-linalg-libs=&quot;-L/opt/intel/mkl/lib/intel64 -Wl,--start-group&nbsp; -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group&quot;&nbsp; \<br /></code></pre></div><br /><br />can you try this ?<br /><br />regards<br /><br />jmb</div>
			
			
			
									
									<div id="sig8400" class="signature">------<br>
Jean-Michel Beuken<br>
Computer Scientist</div>
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8402" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8402">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche23d.html?author_id=549&amp;sr=posts">75</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Dec 02, 2010 10:36 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8402">

						<h3 ><a href="#p8402">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd4e4.html?mode=quote&amp;f=3&amp;p=8402" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic82cf.html?p=8402#p8402" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a></strong> &raquo; </span>Thu Jul 10, 2014 3:53 pm
			</p>
			
			
			
			<div class="content">I've tried 13.0.1 (2013 update 1) and 14.1.3 (sp1 upd3) and 14.0.1 I suppose. It all does not seems to be a compilator version issue. But the issue of platform I am using to compile the code. Yesterday I have compiled the code on the same distro (centos 6.5) with the same intel compilator on my home slow machine based on  pentium G2120 processor. Compilation was smooth and the binary abinit file works just fine on my Xenon E5-2340 based machine. So I don't think my configure script is bad. It produces good binary compiled in other machine than Xenon E5-2340. It is very very strange. The distro is the same the compilators is the same also but compilation process makes different results for different CPU. Maybe I should reinstall OS to make sure it is not software problem, but I am not ready for that. There is a lot of setups I've already made. Thx in advance, anyway!<br /><br />p.s. While searching arround I have found my swap partition was not attached to system, reattach and start compilation procedure again. Not sure this is a problem (I have 16Gb of memory installed), but will try.<br />p.p.s. Forgot to say that I was trying to compile without mkl at all, using internal abinit math library. And tha same result here, it fails at fifth or sixth step.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8405" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8405">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8405">

						<h3 ><a href="#p8405">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting607d.html?mode=quote&amp;f=3&amp;p=8405" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic8599.html?p=8405#p8405" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Thu Jul 10, 2014 7:34 pm
			</p>
			
			
			
			<div class="content">The intel compiler for intel cpu can cause some issues with advance intel cpu features (sse/avx) <br />I have recently experienced this kind of problem with the latest abinit with intel14 on avx and avx2 cpus.<br /><br />Can you try to compile abinit on your faulty system with absolutly no optimization at all and no &quot;cpu dependant&quot; features (check there is no -march or -mtune option when compiling)?<br /><br />In addition to that, if you have exactly the same OS and libraries (and same directories tree) you can try to run abinit compiled for your PC on the E5 (assuming there no special instruction used by intel). <br /><br /><br />Jordan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8407" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8407">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche23d.html?author_id=549&amp;sr=posts">75</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Dec 02, 2010 10:36 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8407">

						<h3 ><a href="#p8407">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting0636.html?mode=quote&amp;f=3&amp;p=8407" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic4f3d.html?p=8407#p8407" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a></strong> &raquo; </span>Fri Jul 11, 2014 1:10 am
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>Jordan wrote:</cite>The intel compiler for intel cpu can cause some issues with advance intel cpu features (sse/avx) <br />I have recently experienced this kind of problem with the latest abinit with intel14 on avx and avx2 cpus.<br /><br />Can you try to compile abinit on your faulty system with absolutly no optimization at all and no &quot;cpu dependant&quot; features (check there is no -march or -mtune option when compiling)?<br /></div></blockquote><br />Sure I can, but how? I do not add -march -mtune by myself. There is some script required (not strongly indeed) to run before compilation compilervars.sh, iccvars.sh and so on. Should I check them to figure out if the one adds -mtune?<br /><br /><blockquote><div><cite>Jordan wrote:</cite>In addition to that, if you have exactly the same OS and libraries (and same directories tree) you can try to run abinit compiled for your PC on the E5 (assuming there no special instruction used by intel). <br />Jordan</div></blockquote><br /><br />Well, I'am telling you, compiled binaries on pentium G2120 processor platforms works like a charm on E5. Actually there is no need in the same directry structure. The only dependence is glibc version. The other dependencies is intel one. And binaries from the other cluster with xenon X5670 work on E5-2630 just fine too. And that is really wierd.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8412" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8412">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8412">

						<h3 ><a href="#p8412">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2bad.html?mode=quote&amp;f=3&amp;p=8412" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic93d8.html?p=8412#p8412" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Fri Jul 11, 2014 5:23 pm
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>roginovicci wrote:</cite>Sure I can, but how? I do not add -march -mtune by myself. There is some script required (not strongly indeed) to run before compilation compilervars.sh, iccvars.sh and so on. Should I check them to figure out if the one adds -mtune?<br /></div></blockquote><br />Juste be sure that in your configure file *.ac you have enable_optim=no or --enable-optim=&quot;no&quot; in your command line to disable any kind of optimization (testing purpose). At the end of the configuration you should read &quot;optimizations : no&quot; in the summary of important options.<br />During compilation you should see something that looks like<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpif90 -DHAVE_CONFIG -I. -I../-O0 -g&nbsp; file.F90 -c -o file.o<br /></code></pre></div><br /><br />If you do not see -O0 it means you use -O2 (default value) and thus ask for optimizations)<br /><br />For speed up compilation purpose, also remove the dft_flavors. Can you try to compile with both gcc and intel compilers using the mkl for linalg and fftw (I use fftw3 instead of fftw3-mkl even if I use the mkl implementation) ? (You might need to use --enable-zdot-bugfix for gcc+mkl if a segfault occures when running the code). <br />You will end with two identical abinits and NO optimizations. Compare both. If they behave the same, compile again removing the --enable-optim or set it to &quot;yes&quot; for both compilers. Compare the new version generated by gcc with the previous one and make sure they give the same result. Now compare with the new intel generated abinit. <br /><br />This is just to figure out where the problem is.<br /><br />If I'm not clear, let me not.<br /><br />Jordan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8415" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8415">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche23d.html?author_id=549&amp;sr=posts">75</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Dec 02, 2010 10:36 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8415">

						<h3 ><a href="#p8415">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting885a.html?mode=quote&amp;f=3&amp;p=8415" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic1d44.html?p=8415#p8415" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a></strong> &raquo; </span>Sat Jul 12, 2014 9:26 am
			</p>
			
			
			
			<div class="content">It seems I should make my apologies to you. For some odd reason the one single symbol was lost in my script. And the one is dot. Thus my environment was not changed while compilation process. What I am saying is:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>. ${INTEL_COMP}/bin/compilervars.sh intel64<br /></code></pre></div><br />Has transformed to<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>${INTEL_COMP}/bin/compilervars.sh intel64<br /></code></pre></div><br /><br />That is critical error for some xenon processors  in fact. Now I'm going to recompile abinit and recheck the functionality, I am pretty sure the problem would be set as solved.<br /><br /><br />But talking about optimization... Hmmm I really not sure lowering optimization is a good idea. It is probably better to increase optimization level to -O3 to produce more optimized code for the processor and increase precision or whatever. I'm not sure this is the case, just my thoughts. But here is some small question. Compiling abinit with higher optimization level -O3 fails at fallback step. Is it possible to configure abinit to use -O2 for fallbacks and -O3 for main abinit code?<br />And Thank to anyone in the thread for help!</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8418" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8418">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8418">

						<h3 ><a href="#p8418">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6da8-2.html?mode=quote&amp;f=3&amp;p=8418" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicb35f.html?p=8418#p8418" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Sat Jul 12, 2014 7:55 pm
			</p>
			
			
			
			<div class="content">Hi<br /><br />Hope that the missing &quot;.&quot; solve your problem.<br />But if you were not sourcing the intel compiler, what compiler did you use ??? So I guess there was a conflict between compilation time and runtime dynamic libraries...<br /><br />Anyways.<br />Of course turning on optimizations is better for production, but it can be convenient for debugging purpose to turn them off.<br />So yes you can use -O3.<br />what fallback fails to compile with -O3 ?<br />You can use any of <br />fcflags_opt_algo=''<br />fcflags_opt_atompaw=''<br />fcflags_opt_bigdft=''<br />fcflags_opt_etsf_io=''<br />fcflags_opt_fox=''<br />fcflags_opt_libpspio=''<br />fcflags_opt_libxc=''<br />fcflags_opt_linalg=''<br />fcflags_opt_netcdf=''<br />fcflags_opt_wannier90=''<br />fcflags_opt_yaml=''<br /> to change the optimizations used for each fallback.<br /><br />Hope that helps.<br /><br />Jordan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8420" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8420">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searche23d.html?author_id=549&amp;sr=posts">75</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Dec 02, 2010 10:36 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8420">

						<h3 ><a href="#p8420">Re: Abinit +intel compilators wierd issue while opt geom</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting4d45.html?mode=quote&amp;f=3&amp;p=8420" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic66e9-2.html?p=8420#p8420" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist3c3b.html?mode=viewprofile&amp;u=549" class="username">roginovicci</a></strong> &raquo; </span>Sat Jul 12, 2014 9:45 pm
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>But if you were not sourcing the intel compiler, what compiler did you use ??? So I guess there was a conflict between compilation time and runtime dynamic libraries...</div></blockquote><br />Using ldd command I have found the binary was linked to intel libraries only. no libgfortran in the list.<br /><br /><blockquote class="uncited"><div>what fallback fails to compile with -O3 ?</div></blockquote><br />atompow I suppose. Don't remember for sure. I've compiled abinit without fallbacks and with O3 optimization level. And started geomopt procedure to if there is a difference to O2 optimized binary.<br /><br /><blockquote class="uncited"><div>You can use any of<br />fcflags_opt_algo=''<br />fcflags_opt_atompaw=''<br /></div></blockquote><br />This is all lower case variables I should set with export? Smthg like:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export fcflags_opt_algo=''-fp-model precise -fp-model source -O2&quot;<br /><br />./configure --prefix=/opt/abintit ....</code></pre></div><br /><br /><br />UPD. I have compiled source code without fallbacks with -O3 optimization and found no difference with the code compiled with -O2 thus I dont see the reason to use -O3.  I've posted my configuration script in neighborhood topic, just in a case.</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingcb6a.html?mode=reply&amp;f=3&amp;t=2728" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopic401e.html?f=3&amp;t=2728&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=2728">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			9 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=8418 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:00:29 GMT -->
</html>
