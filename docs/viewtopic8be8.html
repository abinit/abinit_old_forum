<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=498&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Memory usage openmpi configuration</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Memory usage openmpi configuration</h2>
		<p><a href="viewtopic7e56.html?f=3&amp;t=498">https://forum.abinit.org/viewtopic.php?f=3&amp;t=498</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Memory usage openmpi configuration</h3>
				<div class="date">Posted: <strong>Sat Jul 17, 2010 9:11 pm</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">I'm not sure if this is the right forum to put this in, but it seems like a good first shot.  I've been running abinit 6.0.3 on an x86_64_gnu_4.4 quad-core 8gb machine, compiled with mpirun, and everything works well for small systems.  For systems that require larger than 2gb of memory with 4 processors, my jobs get killed due to an out of memory issue.  When I top on a job that should take 2.5GB of memory, I see that there are 4 abinit processes, each of which has allocated 2.5 GB of virtual memory, and my job crashes during the first iteration.  Do I need to have enough memory so that each processor has access to 2.5gb of memory, or is something misconfigured?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Memory usage openmpi configuration</h3>
				<div class="date">Posted: <strong>Sun Jul 18, 2010 12:17 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hello,<br /><br />in practice, yes:<br /><br />1) abinit uses a bit more memory than announced (only the biggest arrays are counted) - in some exotic cases the estimation is completely off (not for normal ground state or DFPT though)<br /><br />2) almost always, the memory must be _real_ - no counting on linux swap spaces etc... which are usually for programs which are not actively running. If you want to reduce your footprint, check <a href="http://www.abinit.org/documentation/helpfiles/for-v6.0/input_variables/varfil.html#mkmem" class="postlink">mkmem</a>, or distribute over more processors (not on your machine, though).<br /><br />matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Memory usage openmpi configuration</h3>
				<div class="date">Posted: <strong>Mon Jul 19, 2010 4:33 am</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">Thanks for the quick response.  So then as I understand it, having 8gb on my machine, if I want to use all 4 processors, I'm limited to jobs which require less than 2gb for the largest array, correct?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Memory usage openmpi configuration</h3>
				<div class="date">Posted: <strong>Wed Jul 21, 2010 9:05 pm</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">bump</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Memory usage openmpi configuration</h3>
				<div class="date">Posted: <strong>Mon Jul 26, 2010 8:14 am</strong></div>
				<div class="author">by <strong>pmanglade</strong></div>
				<div class="content">Yes in case your &quot;jobs&quot; meant processes : you send one job that splits into 4 processes ; each of those uses less than 2 GB of RAM.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=498&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:32:55 GMT -->
</html>
