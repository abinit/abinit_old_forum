<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1019&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:39:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Segmentation faults in parallel version of abinit</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Segmentation faults in parallel version of abinit</h2>
		<p><a href="viewtopic57db.html?f=3&amp;t=1019">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1019</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Tue Apr 12, 2011 12:19 am</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content">Dear all<br /><br />I am facing several issues with the parallel version of abinit 6.1 and 6.2. When I use kpoint parallelisation only (paral_kgb=0), abinit crashes with a segmentation fault each time I use a number of cpus that is not a multiple of nkpt*nsppol (abinit denotes this as an inefficient parallelisation). <br /><br />The segmentation fault error is as follows:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;Biggest array : cg(disk), with&nbsp; &nbsp; 248.1758 MBytes.<br />-P-0000&nbsp; leave_test : synchronization done...<br />&nbsp;memana : allocated an array of&nbsp; &nbsp; 248.176 Mbytes, for testing purposes.<br />&nbsp;memana : allocated&nbsp; &nbsp; &nbsp;652.902 Mbytes, for testing purposes.<br />&nbsp;The job will continue.<br />--------------------------------------------------------------------------<br />MPI_ABORT was invoked on rank 35 in communicator MPI_COMM_WORLD<br />with errorcode 14.<br /><br />NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.<br />You may or may not see output from other processes, depending on<br />exactly when Open MPI kills them.<br />--------------------------------------------------------------------------<br />--------------------------------------------------------------------------<br />mpirun has exited due to process rank 35 with PID 15321 on<br />node cja614 exiting without calling &quot;finalize&quot;. This may<br />have caused other processes in the application to be<br />terminated by signals sent by mpirun (as reported here).<br />--------------------------------------------------------------------------<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B7FCE839212&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libmpi.so.0&nbsp; &nbsp; &nbsp; &nbsp; 00002B7FCC13ACE5&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libpthread.so.0&nbsp; &nbsp; 00002B7FCE55673D&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B7FCE83FF6D&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002B9E9F4CF32F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B9E9E9CE673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B9E9E95385F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B9E9F6FA994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002B211AA0632F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B2119F05673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B2119E8A85F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B211AC31994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002AE3655D632F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002AE364AD5673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002AE364A5A85F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002AE365801994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002AD826E3D32F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002AD82633C673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002AD8262C185F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002AD827068994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002B1A3DFDC32F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B1A3D4DB673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B1A3D46085F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B1A3E207994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002B8B96A3A32F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B8B95F39673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002B8B95EBE85F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002B8B96C65994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />forrtl: error (78): process killed (SIGTERM)<br />Image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Routine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Line&nbsp; &nbsp; &nbsp; &nbsp; Source<br />libpthread.so.0&nbsp; &nbsp; 00002ADA5BC6C32F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002ADA5B16B673&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libifcore.so.5&nbsp; &nbsp; &nbsp;00002ADA5B0F085F&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000014F44F6&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000F49462&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;00000000004057C1&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;000000000040510C&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />libc.so.6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00002ADA5BE97994&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />abinit-6.6.2&nbsp; &nbsp; &nbsp; &nbsp;0000000000405019&nbsp; Unknown&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown&nbsp; Unknown<br />&#91;cja557.localdomain:18525&#93; 4 more processes have sent help message help-mpi-api.txt / mpi-abort<br />&#91;cja557.localdomain:18525&#93; Set MCA parameter &quot;orte_base_help_aggregate&quot; to 0 to see all help / error messages<br /></code></pre></div><br /><br />Then, if I switch the paral_kgb keyword to 1, whatever the number of cpus allocated for kpoint, abinit crashes with another segmentation fault. The only difference is that abinit starts the first SCF step but crashes during the lobpgc procedure.<br /><br />I don't have much information about this. Could that be related to my MPI implementation? Also, I compiled abinit using --with-linalg-flavor=mkl but it also occurs with the linalg plugin that can be downloaded from the abinit website.<br /><br />Thank you very much for your help<br /><br />Boris</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Fri Apr 22, 2011 2:35 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hello,<br /><br />1) please try a more recent version (6.6) - the parallelism has been improved significantly<br /><br />2) this can happen for certain compilers (in particular ifort), but not systematically, if you use a number of processors with an idle proc: 3 k-points and 4 processors, or 6 k-points and 4 processors (which will be filled as 2 2 2 0)<br /><br />You should be able to choose a number of procs which is suited to your number of k-points, can't you?<br /><br />Matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Fri Apr 22, 2011 4:28 pm</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content">Hello Matthieu,<br /><br />When I wrote I was using the 6.1 and 6.2 versions of abinit, I actually meant 6.6.1 and 6.6.2 <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /> Sorry about that.<br /><br />I compiled abinit using mpif90. And I cannot always chose a number of procs suited to the number of kpoints because all nodes from the computer has 8 cores, so to be efficient the number of kpoints has to be a multiple of 8, right?<br /><br />Thank you<br /><br />Bors</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Fri Apr 22, 2011 7:11 pm</strong></div>
				<div class="author">by <strong>hicpalm</strong></div>
				<div class="content">Hi,<br /><blockquote class="uncited"><div>the number of kpoints has to be a multiple of 8<br /></div></blockquote><br />I think with mpirun you have the possibility to specify the number of processors to be used. Even if you have 8 core you are not constrained to use all of them at a time. something like mpirun -np 3 will run with only 3 procs.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Fri Apr 22, 2011 8:14 pm</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content"><blockquote><div><cite>hicpalm wrote:</cite>Hi,<br /><blockquote class="uncited"><div>the number of kpoints has to be a multiple of 8<br /></div></blockquote><br />I think with mpirun you have the possibility to specify the number of processors to be used. Even if you have 8 core you are not constrained to use all of them at a time. something like mpirun -np 3 will run with only 3 procs.</div></blockquote><br /><br />I thought that once you had a node allocated, all the cores were constrained to be used at the same time.<br /><br />Thanks for that<br /><br />Boris</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Thu Apr 28, 2011 5:12 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">it depends on the mpi implementation. In general you add the -np #proc argument yourself, and then you can choose whatever. For slurm, for instance, once you have submitted a script for 47 processors you just run srun and it launches with those processors. Normally you can specify any number (not just multiples of 8) and the rest should work. Don't know about your machine...<br /><br />Matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in parallel version of abinit</h3>
				<div class="date">Posted: <strong>Sun Jun 05, 2011 3:45 pm</strong></div>
				<div class="author">by <strong>hhwj340</strong></div>
				<div class="content">I also meet this problem.<br />I have publised a post which gives detailed  information about my problem.<br /><br />Hi,Boris! Have you solved this problem. Could you tell me how you deal with this problem?<br /><br />Dear Matthieu,I have use your suggention, however,it doesn't work.<br />I also use ifort to compile abinit. The version of ifort is 11.1.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1019&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:39:34 GMT -->
</html>
