<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=4095&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:25:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Structural optimization</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Structural optimization</h2>
		<p><a href="viewtopice0e0.html?f=9&amp;t=4095">https://forum.abinit.org/viewtopic.php?f=9&amp;t=4095</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Structural optimization</h3>
				<div class="date">Posted: <strong>Fri Apr 12, 2019 1:33 pm</strong></div>
				<div class="author">by <strong>jlwindy</strong></div>
				<div class="content">Dear all<br />I want to get the structures under different pressures along the z axis.Can i use the in.file to get it?<br /><br />#Structural optimization run<br />ndtset 5<br />strtarget1   0.00000d0 0.00000d0 -0.00001d0<br />             0.00000d0 0.00000d0 0.00000d0 <br />strtarget2   0.00000d0 0.00000d0 -0.00002d0<br />             0.00000d0 0.00000d0 0.00000d0<br />strtarget3   0.00000d0 0.00000d0 -0.00003d0<br />             0.00000d0 0.00000d0 0.00000d0<br />strtarget4   0.00000d0 0.00000d0 -0.00004d0<br />             0.00000d0 0.00000d0 0.00000d0<br />strtarget5   0.00000d0 0.00000d0 -0.00005d0<br />             0.00000d0 0.00000d0 0.00000d0<br />chkdilatmx  0<br />dilatmx   1.5    # Maximum scaling allowed for lattice parameters<br /> getxred   -1      # Start with relaxed coordinates from dataset 1<br />  getwfk   -1      # Start with wave functions from dataset 1<br />  ionmov   2       # Use BFGS algorithm<br />   ntime   120      # Maximum number of optimization steps<br /> optcell   2       # Fully optimize unit cell geometry, keeping symmetry<br />  tolmxf   1.0e-6  # Convergence limit for forces as above<br /> strfact   100     # Test convergence of stresses (Hartree/bohr^3) by<br />                    # multiplying by this factor and applying force<br />                    # convergence test<br /><br />#Common input data<br />strtarget   0.0000d0 0.0000d0 0.0003d0<br />            0.0000d0 0.0000d0 0.0000d0 <br />#Starting approximation for the unit cell<br />acell     7.6897611419E+00  7.6897611419E+00  7.9699927278E+00          #this is a guess, with the c/a<br />                                        #ratio based on ideal tetrahedral<br />                                        #bond angles<br /><br />  rprim   1.0000000000         0.0000000000         0.0000000000<br />          0.0000000000         1.0000000000         0.0000000000<br />          0.0000000000         0.0000000000         1.0000000000<br />#Definition of the atom types and atoms<br /> npsp    4<br /> znucl   82 8 40 22<br />ntypat   3 <br />ntypalch 1<br /><br /> <br />mixalch  0.52 0.48 <br />natom    5<br />  <br />typat   1 2 2 2 3<br /><br />#Starting approximation for atomic positions in REDUCED coordinates<br />#based on ideal tetrahedral bond angles<br />xred     0.0000000000E+00  0.0000000000E+00 -8.8515205616E-02<br />         5.0000000000E-01  0.0000000000E+00  5.3440017247E-01<br />         0.0000000000E+00  5.0000000000E-01  5.3440017247E-01<br />         5.0000000000E-01  5.0000000000E-01  1.2291109060E-02<br />         5.0000000000E-01  5.0000000000E-01  4.6742375162E-01<br /> #Gives the number of bands, explicitely (do not take the default)<br />             # For an insulator (if described correctly as an <br />                         # insulator by DFT), conduction bands should not<br />                         # be included in response-function calculations<br /><br />#Definition of the plane wave basis set<br />   ecut   25            # Maximum kinetic energy cutoff (Hartree)<br /> ecutsm   0.5            # Smoothing energy needed for lattice paramete<br />                         # optimization.  This will be retained for<br />                         # consistency throughout.<br />pawecutdg  30<br />#Definition of the k-point grid<br />  ngkpt   6 6 6          # 4x4x4 Monkhorst-Pack grid<br />nshiftk   1              # Use one copy of grid only (default)<br /> shiftk   0.0 0.0 0.0    # This choice of origin for the k point grid<br />                         # preserves the hexagonal symmetry of the grid,<br />                         # which would be broken by the default choice.<br /><br />#Definition of the self-consistency procedure<br /> diemac   4.0            # Model dielectric preconditioner<br />  nstep   300             # Maxiumum number of SCF iterations<br /> tolvrs   1.0d-18        # Strict tolerance on (squared) residual of the<br />                         # SCF potential needed for accurate forces and<br />                         # stresses in the structural optimization, and<br />                         # accurate wave functions in the RF calculations<br /># enforce calculation of forces at each SCF step<br /> optforces 1<br /><br />Looking forward to your reply.<br />jlwindy</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Structural optimization</h3>
				<div class="date">Posted: <strong>Fri Apr 26, 2019 8:13 am</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear jlwindy,<br />This looks OK to me, it is all the same as to relax the ground state but adding the pressure flag.<br />The only comment is that you define strtargetX for each dataset (X=1, 2, 3, etc) and then you also define a general strtarget without ndtset. I would remove this general one because it could overwrite all the multidataset ones such that you will never change the pressure from dataset to dataset...<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Structural optimization</h3>
				<div class="date">Posted: <strong>Sun Apr 28, 2019 10:17 am</strong></div>
				<div class="author">by <strong>jlwindy</strong></div>
				<div class="content">Dear Eric<br />     Thank you for your reply.I find that error.Now,I was wondering whether getxred and getwfk should be -1. Whether they should be 0, but I made a calculation error when I set them to 0.<br /><br />Best wishes<br />jlwindy</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Structural optimization</h3>
				<div class="date">Posted: <strong>Fri May 10, 2019 10:33 pm</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear jlwindy,<br />getxred and getwfk ca be -1, if you want them to be zero then don't specify them (I guess).<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=4095&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:25:23 GMT -->
</html>
