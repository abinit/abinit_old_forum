<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=1120&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:05:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Positron  enhacement factor within semiconductors</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Positron  enhacement factor within semiconductors</h2>
		<p><a href="viewtopicb3ae.html?f=19&amp;t=1120">https://forum.abinit.org/viewtopic.php?f=19&amp;t=1120</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 4:01 pm</strong></div>
				<div class="author">by <strong>dr_sferrari</strong></div>
				<div class="content">Hi, I am trying to modify the code so that the Boronsky-Niemenem positron enhacement factor (in the RPA limit, that is in the zero positron limit) includes the correction for screening of positron in semiconductors. So in the code of /src/56_xc/gammapositron.F90 in lines 178-179<br />Intead of:<br />   if (rs&lt;=20._dp) gg=gg+1.23_dp*rs+0.8295_dp*sqrs**3-1.26_dp*rs**2+0.3286_dp*sqrs**5+sixth*rs**3<br /><br />I want to modify the last term in view of the article<br />Puska, MÃ¤kinen, Manninen, Nieminen, Phys. Rev.  B, 39, p. 7666 (1989) and M.J. Puska; J. Phys.: Condens. Matter (1991) 3 3455, to:<br /><br />gg=gg+1.23_dp*rs+0.8295_dp*sqrs**3-1.26_dp*rs**2+0.3286_dp*sqrs**5+sixth*scsf*rs**3<br />where scsf = 1. - 1./(dtset%diemac) ; where dtset%diemac is the value of the dielectric constant declared in the input file.<br /><br />Of course, this means that gammapositron subroutine has to have access to the value of the diemac, so have to track back where gammapositron subroutine is called and find out that is only called at src/67_common/poslifetime.F90  subroutine; and in that subroutine the set of values dtset is part of the input. So in line 220 of poslifetime where its states:<br /><br />  call gammapositron(gamma,grhocore2,grhoe2,igamma(igam),ngr,nfft,xccc3d,&amp;<br />&amp;   rhonowe(:,1,1),rhonowp(:,1),usecore)<br /><br />I just added dtset variable as a formal variable:<br /><br />  call gammapositron(gamma,grhocore2,grhoe2,igamma(igam),ngr,nfft,xccc3d,&amp;<br />&amp;   rhonowe(:,1,1),rhonowp(:,1),usecore,dtset)<br /><br />Obviusly I added in gammapositron.F90 dtset as a actual variable changing from:<br /><br />subroutine gammapositron(gamma,grhocore2,grhoe2,igamma,ngr,npt,rhocore,rhoer,rhopr,usecore)<br /><br />to<br /><br />subroutine gammapositron(gamma,grhocore2,grhoe2,igamma,ngr,npt,rhocore,rhoer,rhopr,usecore,dtset) <br /><br />I also include the use of some definitions parts:<br />use defs_abitypes<br />use defs_datatypes<br /><br />Nevertheless I find the following error when I try to compile:<br />...<br />poslifetime.F90:220.46:<br /><br />&amp;   rhonowe(:,1,1),rhonowp(:,1),usecore,dtset)<br />                                              1<br />Error: More actual arguments than formal arguments in the call of procedure in (1)<br /><br />I simply want to know how to solve this error, because I am lost. I am supposely doing all the right things nevertheless I find this problem.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 4:37 pm</strong></div>
				<div class="author">by <strong>david.waroquiers</strong></div>
				<div class="content">Hello,<br /><br />In fact the interfaces of abinit are automatically generated by a tool called abilint (you can find it in the config/script directory). In any case you can issue a */*/makemake in the root directory of abinit and it will call this tool and some others. Then you should be able to recompile abinit (the interfaces will have been changed).<br /><br />The other possibity is to change the interface by hand : it is the file interfaces_56_xc.F90.<br /><br />David</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 5:41 pm</strong></div>
				<div class="author">by <strong>torrent</strong></div>
				<div class="content">Dear ?<br />(is it possible to know to who I am speaking with?),<br /><br />I'm one the authors of the gammapositron routine.<br /><br />You have two possibilites:<br />1) you do the modification for your own usage; in that case you can do what you want.<br /><br />2) You want your modification to be later included in Abinit;<br />you cannot implement your proposal as it is.<br />a) The use of the full dtset datastructure (which is a huge datastructure) is usually forbidden for low lwvwl routines; and gammapositron is one of these routines.<br />It is definitively not &quot;object oriented&quot; and avoid all re-use of the routine in another context.<br />At least, just pass the dtset%diemac real.<br />b) I you decide to do that, I would prefer that you pass it as an &quot;optional&quot; argument....<br />This will allow us to use the gammapositron routine in several other context, not knowing the value of diemac.<br />Then, you can implement your formula by the use of the &quot;if present(diemac)&quot;statement.<br />c) diemac is not exactly the dielectric constant; it is much more a adjustable parameter used for the preconditionning scheme of the SCF cycle. So, I'm not sure your implement will work in all cases.<br /><br />Hope this helps...<br /><br />Regards,</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 5:43 pm</strong></div>
				<div class="author">by <strong>dr_sferrari</strong></div>
				<div class="content">David<br />Thanks, that tip solved all. It is fair to say that this implementation greatly improves the lifetimes  in semiconductors reaching to values very close to  experimental ones. I stronlgy suggest to include this correction in a next version of ABINIT.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 6:03 pm</strong></div>
				<div class="author">by <strong>dr_sferrari</strong></div>
				<div class="content">Dear Torrent,<br />My name is Sergio Ferrari and I am physicist working in positron lifetime calculations in the Univesidad Nacional de La Plata. Answering to your question: for the moment I just the modification for my own usage. Thanks you very much for the tip of how to implement the modification more formally and correctly. Since your one of the authors of the code gammapositron perhaps you should this implementation yourself and you would do it better than me (my programations skills are poor). As answering if this work: well, I firstly do a modification just entering the value of dielectric constant of ZnO directly by hand in gammapositron code, and after that I modify so to read dtset%diemac and the results were the same (using PAW and atompaw densities) the lifetime of ZnO went from 140 ps (BN in the RPA limit) to 151 ps (BN+correction for semiconductors in the RPA limit). The current experimental data on ZnO is 151 +/- 2 ps and ATSUP (atomic supeposition: a Not-self consistent method) leaves a value of 159 ps. So you can see from this results (and others I mean to calculate) that a great improvement has been made including this correction. This also proves that dtset%diemac has the correct value of the dielectric constant writen in the input file. I gently invite you then to implement this correction in the way you have described.<br /><br />Kind regards</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 7:33 pm</strong></div>
				<div class="author">by <strong>dr_sferrari</strong></div>
				<div class="content">Dear Torrent,<br />May I have a comment of one of your statements:<br /><blockquote class="uncited"><div>c) diemac is not exactly the dielectric constant; it is much more a adjustable parameter used for the preconditionning scheme of the SCF cycle. So, I'm not sure your implement will work in all cases.</div></blockquote><br />as abinit description of input variables says so about diemac (<a href="http://www.abinit.org/documentation/helpfiles/for-v6.6/input_variables/vargs.html#diemac" class="postlink">http://www.abinit.org/documentation/helpfiles/for-v6.6/input_variables/vargs.html#diemac</a>):<br /><blockquote class="uncited"><div>diemac<br />Mnemonics: model DIElectric MACroscopic constant<br />Characteristic:<br />Variable type: real parameter <br />Default is 10^6 (metallic damping).<br /><br />A rough knowledge of the macroscopic dielectric constant diemac of the system is a<strong class="text-strong"> useful help to speed-up the SCF procedure: a</strong> model dielectric function, see the keyword dielng, is used for that purpose. </div></blockquote><br />So, really diemac is the dielectric constant and  usally it used <blockquote class="uncited"><div>for the preconditionning scheme of the SCF cycle</div></blockquote> as yourself say. But also it is usefull for modifying the enhacement factor in the case of Boronski-Niememinen choice, so to include the screening of the positron in semiconductors. See that if the dielectric constant is high (as the default value is), when we recover metal behaviour (BN original formulae).  So instead of an optional use of diemac, I think it can be used allways (it will be user fault if he/she does not set the correct value of diemac so to obtain better values of positron lifetime. <br />Regards, Sergio</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Fri May 27, 2011 11:51 pm</strong></div>
				<div class="author">by <strong>torrent</strong></div>
				<div class="content">Dear Sergio,<br /><br />Thanks for your comments.<br />I'll certainly take time to implement your modification.<br />But I'm wondering if it is better to change the default behaviour of the enhancement factor or to add a new option for the ixcpositron keyword.<br />I'll probably choose the second solution, in order to keep a maximal number of choices for the user.<br /><br />Also, I'll probably add a new keyword for the dielectric constant: diemac is set to 10**6 by default and not automatically adjusted to the material.<br />It is probably better to let the user have the control of what he is doing.<br /><br />Regards,</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Positron  enhacement factor within semiconductors</h3>
				<div class="date">Posted: <strong>Sat May 28, 2011 12:25 am</strong></div>
				<div class="author">by <strong>dr_sferrari</strong></div>
				<div class="content">Dear Torrent,<br />Although the default value of diemac is 10^6,  you can enter by hand the value of the dielectric constant in the input file using the input variable diemac. There is now way in principle that the program could adjust the value of the dielectric constant by itself (unless it looks the composition of the material and checks the values stored in some table or database). As far as I know, theres is no  ab-initio calculation that could give the dielectric constant. So, like acell or other constants, the value of dielectric constant (diemac) is responsability of the user. Beyond that, the literature I have consulted, when calculating lifetimes with the Boronski-Niemenen enhacement factor, authors allways choose also to correct the enhacement for semiconductors; even more: as I said, the no inclusion of this correction gaves &quot;wrong&quot; values of the positron lifetime. Despite that, I can understand the decisition of expanding ixcpositron (or perhaps better, igamma=3 instead 2 for ixcpositron=1) so to user have the maximum posibilities of enhacements factors. To have this implementation can make ABINIT, as a positron lifetime calculation tool,  much more comparable to other calculation tools, because the positron lifetime  strongly depends of the enhacement factor used and for that is the importance of having the possibility of using the same enhacement factor than other programs. <br />Sorry for such extend of text, regards,<br /> Sergio</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=19&t=1120&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:05:29 GMT -->
</html>
