<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1260&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:55:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: error</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: error</h2>
		<p><a href="viewtopic7f1b.html?f=3&amp;t=1260">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1260</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: error</h3>
				<div class="date">Posted: <strong>Sun Aug 14, 2011 5:16 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi,<br /><br />I am on a MacBook Pro, with OS X 10.7 lion.<br /><br />I am trying to compile abinit using gcc/g++/gfortran 4.5.3, installed from macports. I was not able to install gcc 4.6 due to a bug in the apple linker.<br /><br />I am getting the following error while netCDF is configuring:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: error: Could not compile conftest.c<br /></code></pre></div><br /><br />Your help would be very much appreciated - if you need further details please let me know.<br /><br />Regards,<br />Anna.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Sun Aug 14, 2011 8:46 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hello,<br /><blockquote class="uncited"><div>I am getting the following error while netCDF is configuring:<br />checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: error: Could not compile conftest.c</div></blockquote><br />we need the <em class="text-italics"><strong class="text-strong">'plugins/netcdf/netcdf-4.1.1/config.log'</strong></em>   file  to understand the problem<br /><br />another solution :<br /><br />there is a port for netcdf 4.1.3 ( variant gcc 4.5 ) ( <a href="http://www.macports.org/ports.php?by=name&amp;substr=netcdf" class="postlink">http://www.macports.org/ports.php?by=name&amp;substr=netcdf</a> )<br /><br />and you can use these two options in the configure :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_netcdf_libs = -L/opt/local/netcdf/lib -lnetcdf<br />with_netcdf_incs = -I/opt/local/netcdf/include</code></pre></div><br /><br />( to verify the location of the installation of netcdf library )<br /><br />regards<br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Mon Aug 15, 2011 12:18 pm</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi jmb,<br /><br />Thanks, that did the trick (when I put the directory /opt/local/include &amp; /opt/local/lib). I am now. however, running into the following problem:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/var/folders/bl/8wb0ry9x00g8k6v3l9z293r80000gp/T//ccutkXba.s:39:no such instruction: `vmovsd 8(%rdi), %xmm5'<br /></code></pre></div><br />This goes on for many lines. Would you know what is causing this particular issue?<br /><br />Thanks,<br />Anna.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Mon Aug 15, 2011 8:54 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hello Anna,<br /><br />some questions to clear the problem :<br /><br />which version of abinit ?<br />which configure command are you using ?<br /><br />can you send me the config.log ?<br />can you send me the results of these commands :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>env<br />gcc --version<br />gfortran --version</code></pre></div><br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Tue Aug 16, 2011 1:31 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi jmb,<br /><br />To answer your questions:<br /><br />1) abinit-6.6.1_invKS, a modified version from <!-- m --><a class="postlink" href="http://www.princeton.edu/mae/people/faculty/carter/homepage/research/local-pseudopotentials/">http://www.princeton.edu/mae/people/fac ... otentials/</a><!-- m --><br />2) ../abinit-6.6.1_invKS/configure --with-fallbacks-tardir=/Users/anna/Documents/anna/1projects/simulation/PROFESS/abinit-tarballs --with-dft-flavor=none --with-trio-flavor=none --with-netcdf-libs=&quot;-L/opt/local/lib -lnetcdf&quot; --with-netcdf-inc=&quot;-I/opt/local/include&quot; &gt; out.txt 2&gt;&amp;1<br />3) config.log attached<br />4)<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>MANPATH=/sw3/share/man:/opt/local/man::/sw3/lib/perl5/5.12.3/man:/usr/X11R6/man<br />TERM_PROGRAM=Apple_Terminal<br />TERM=xterm-256color<br />SHELL=/bin/bash<br />TMPDIR=/var/folders/bl/8wb0ry9x00g8k6v3l9z293r80000gp/T/<br />PERL5LIB=/sw3/lib/perl5:/sw3/lib/perl5/darwin<br />Apple_PubSub_Socket_Render=/tmp/launch-V9BHN4/Render<br />TERM_PROGRAM_VERSION=297<br />TERM_SESSION_ID=2975E5C0-B953-4DEB-9DDF-3C662A0A4E0D<br />USER=anna<br />COMMAND_MODE=unix2003<br />SSH_AUTH_SOCK=/tmp/launch-YMzrPu/Listeners<br />__CF_USER_TEXT_ENCODING=0x1F6:0:0<br />PATH=/sw3/bin:/sw3/sbin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/X11R6/bin<br />PWD=/Users/anna/Documents/anna/1projects/simulation/PROFESS/abinit-6.6.1_invKS<br />LANG=en_AU.UTF-8<br />SHLVL=1<br />HOME=/Users/anna<br />LOGNAME=anna<br />INFOPATH=/sw3/share/info:/sw3/info:/usr/share/info<br />DISPLAY=/tmp/launch-D81DPe/org.x:0<br />GL_ENABLE_DEBUG_ATTACH=YES<br />SECURITYSESSIONID=186a5<br />_=/usr/bin/env<br />OLDPWD=/opt/local/var/macports/sources/rsync.macports.org/release/ports<br /><br /><br />gcc --version<br />gcc (GCC) 4.5.3<br />Copyright (C) 2010 Free Software Foundation, Inc.<br />This is free software; see the source for copying conditions.&nbsp; There is NO<br />warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.<br /><br /><br />gfortran --version<br />GNU Fortran (GCC) 4.5.3<br />Copyright (C) 2010 Free Software Foundation, Inc.<br /><br />GNU Fortran comes with NO WARRANTY, to the extent permitted by law.<br />You may redistribute copies of GNU Fortran<br />under the terms of the GNU General Public License.<br />For more information about these matters, see the file named COPYING<br /><br /></code></pre></div><br /><br />Thanks,<br />Anna</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Tue Aug 16, 2011 8:57 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hello Anna,<br /><br />little problem in your configure command : use &quot;--with-netcdf-incs=&quot;-I/opt/local/include&quot;  ( with 's' in &quot;incs&quot; ) <br />nothing stange in the env or in the config.log  <img class="smilies" src="images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /> <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/var/folders/bl/8wb0ry9x00g8k6v3l9z293r80000gp/T//ccutkXba.s:39:no such instruction: `vmovsd 8(%rdi), %xmm5'</code></pre></div><br />I suppose that this error appears during make ?<br />if yes , in which part ?<br />can you send me the    &quot;make.log&quot;  ( make &gt; make.log 2&gt;&amp;1 )<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Wed Aug 17, 2011 4:23 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi jmb,<br /><br />Thanks for the correction.<br /><br />Yes this error happens during make. It occurs during the first file being compiled. Please find the make.log attached.<br /><br />Regards,<br />Anna.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Thu Aug 18, 2011 2:34 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hello Anna,<br /><br />I suspect a problem of architecture (32bit vs 64bit)<br /><br />can you use this configure command with the 64bit enabled ( and a additionnal lib with netcdf option  ( netcdff =  netcdf for fortran ) ) :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../abinit-6.6.1_invKS/configure&nbsp; \<br />--with-fallbacks-tardir=/Users/anna/Documents/anna/1projects/simulation/PROFESS/abinit-tarballs \<br />--with-dft-flavor=none --with-trio-flavor=none \<br />--with-netcdf-libs=-L/opt/local/lib -lnetcdf -lnetcdff --with-netcdf-incs=-I/opt/local/include \<br />--enable-64bit-flags \<br />--enable-debug=no&nbsp; --enable-optim=aggressive \<br />CC=/opt/local/bin/gcc&nbsp; \<br />FC=/opt/local/bin/gfortran \<br />CXX=/opt/local/bin/g++ \<br />CPP=/opt/local/bin/cpp \<br />FPP=/opt/local/bin/cpp<br /></code></pre></div><br /><br />regards<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Fri Aug 19, 2011 4:30 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi jmb,<br /><br />I tried what you suggested, and I'm still getting the same errors...<br /><br />What do you suggest I try next? Should I also try the gcc mailing list as well?<br /><br />Thanks and regards,<br />Anna.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Fri Aug 19, 2011 6:07 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi,<br /><br />I also tried downloading 6.6.3, and compile against gcc4.4. configure completed successfully, but I am still getting the &quot;no such instruction&quot; error when using make.<br /><br />Regards,<br />Anna.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: checking if Fortran &quot;real&quot; is C &quot;float&quot;... configure: er</h3>
				<div class="date">Posted: <strong>Fri Sep 02, 2011 5:27 am</strong></div>
				<div class="author">by <strong>annacegu</strong></div>
				<div class="content">Hi,<br /><br />After posting to the gcc mailing list, apparently this error is popping up because my assembler is out of date compared to the one required by gfortran44 or 45.<br /><br />So I tried compiling on one of our clusters here, using ifort. I am now getting the following error during linking:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../src/95_drive/lib95_drive.a(driver.o): In function `driver_':<br />driver.F90:(.text+0x3040): undefined reference to `nonlinear_'<br />driver.F90:(.text+0x3141): undefined reference to `sigma_'<br />driver.F90:(.text+0x3227): undefined reference to `screening_'<br />driver.F90:(.text+0x3443): undefined reference to `respfn_'<br />../../src/95_drive/lib95_drive.a(gstateimg.o): In function `gstateimg_':<br />gstateimg.F90:(.text+0x2175): undefined reference to `gstate_'<br />../../src/95_drive/lib95_drive.a(gw_driver.o): In function `gw_driver_':<br />gw_driver.F90:(.text+0xb51): undefined reference to `sigma_'<br />gw_driver.F90:(.text+0x2313): undefined reference to `screening_'<br /></code></pre></div><br /><br />Would anyone have ideas on what is causing this error?<br /><br />Thanks and regards,<br />Anna.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1260&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:55:13 GMT -->
</html>
