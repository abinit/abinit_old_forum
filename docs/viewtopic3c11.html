<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2674&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:20:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; error compiling abinit 7.6.4 with intel compiler</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>error compiling abinit 7.6.4 with intel compiler</h2>
		<p><a href="viewtopicb87c-2.html?f=3&amp;t=2674">https://forum.abinit.org/viewtopic.php?f=3&amp;t=2674</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Tue May 27, 2014 7:24 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Dear users and developers I try to install abinit 7.6.4 with intel compiler but I found this error:<br />Undefined symbols for architecture x86_64:<br />  &quot;_m_profiling_mp_abi_alloc_stat_&quot;, referenced from:<br />      _drvaim_ in lib63_bader.a(drvaim.o)<br />      _m_xmpi_mp_xmpi_distab_4d_ in lib12_hide_mpi.a(m_xmpi.o)<br />      _m_xmpi_mp_xallgatherv_mpi_int1_dp1_ in lib12_hide_mpi.a(m_xmpi.o)<br />      _m_xmpi_mp_xallgatherv_mpi_coeff2d_ in lib12_hide_mpi.a(m_xmpi.o)<br />      _m_xmpi_mp_xallgatherv_mpi_coeff2d_indx_ in lib12_hide_mpi.a(m_xmpi.o)<br />      _m_xmpi_mp_xgatherv_mpi_int1_dp1_ in lib12_hide_mpi.a(m_xmpi.o)<br />      _addout_ in lib63_bader.a(addout.o)<br />      ...<br />  &quot;_m_profiling_mp_sz1_&quot;, referenced from:<br />      _m_pawrhoij_mp_symrhoij_ in lib42_libpaw.a(m_pawrhoij.o)<br />  &quot;_m_profiling_mp_sz2_&quot;, referenced from:<br />      _m_pawrhoij_mp_symrhoij_ in lib42_libpaw.a(m_pawrhoij.o)<br />ld: symbol(s) not found for architecture x86_64<br />make[5]: *** [aim] Error 1<br />make[5]: *** Waiting for unfinished jobs....<br />Undefined symbols for architecture x86_64:<br />  &quot;_m_profiling_mp_abi_alloc_stat_&quot;, referenced from:<br />      _MAIN__ in anaddb-anaddb.o<br />      _anaddb_dtset_clean_ in lib77_ddb.a(anaddb_dtset_clean.o)<br />      _asria_calc_ in lib72_response.a(asria_calc.o)<br />      _asrprs_ in lib72_response.a(asrprs.o)<br />      _chneu9_ in lib72_response.a(chneu9.o)<br />      _destroy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      ...<br />  &quot;_m_profiling_mp_sz1_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _m_pawtab_mp_pawtab_bcast_ in lib42_libpaw.a(m_pawtab.o)<br />      _complete_gkk_ in lib77_ddb.a(complete_gkk.o)<br />      _m_pawrhoij_mp_symrhoij_ in lib42_libpaw.a(m_pawrhoij.o)<br />  &quot;_m_profiling_mp_sz2_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _get_all_gkq_ in lib77_ddb.a(get_all_gkq.o)<br />      _m_pawtab_mp_pawtab_bcast_ in lib42_libpaw.a(m_pawtab.o)<br />      _complete_gkk_ in lib77_ddb.a(complete_gkk.o)<br />      _m_pawrhoij_mp_symrhoij_ in lib42_libpaw.a(m_pawrhoij.o)<br />  &quot;_m_profiling_mp_sz3_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _get_all_gkq_ in lib77_ddb.a(get_all_gkq.o)<br />  &quot;_m_profiling_mp_sz4_&quot;, referenced from:<br />      _get_all_gkq_ in lib77_ddb.a(get_all_gkq.o)<br />  &quot;_m_profiling_mp_sz5_&quot;, referenced from:<br />      _get_all_gkq_ in lib77_ddb.a(get_all_gkq.o)<br />  &quot;_m_profiling_mp_sz6_&quot;, referenced from:<br />      _get_all_gkq_ in lib77_ddb.a(get_all_gkq.o)<br />ld: symbol(s) not found for architecture x86_64<br />make[5]: *** [anaddb] Error 1<br />Undefined symbols for architecture x86_64:<br />  &quot;_m_profiling_mp_abi_alloc_stat_&quot;, referenced from:<br />      _MAIN__ in abinit-abinit.o<br />      _chkinp_ in lib57_iovars.a(chkinp.o)<br />      _destroy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _set_mpi_enreg_fft_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _driver_ in lib95_drive.a(driver.o)<br />      _m_ab7_invars_mp_ab7_invars_set_flags_ in lib57_iovars.a(m_ab7_invars_f90.o)<br />      ...<br />  &quot;_m_profiling_mp_sz1_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _m_pawang_mp_pawang_init_ in lib42_libpaw.a(m_pawang.o)<br />      _m_pawtab_mp_pawtab_bcast_ in lib42_libpaw.a(m_pawtab.o)<br />      _respfn_ in lib95_drive.a(respfn.o)<br />      _m_paw_an_mp_paw_an_gather_ in lib42_libpaw.a(m_paw_an.o)<br />      _m_paw_an_mp_paw_an_copy_ in lib42_libpaw.a(m_paw_an.o)<br />      _m_paw_an_mp_paw_an_gather_..0 in lib42_libpaw.a(m_paw_an.o)<br />      ...<br />  &quot;_m_profiling_mp_sz2_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _m_pawang_mp_pawang_init_ in lib42_libpaw.a(m_pawang.o)<br />      _m_pawtab_mp_pawtab_bcast_ in lib42_libpaw.a(m_pawtab.o)<br />      _respfn_ in lib95_drive.a(respfn.o)<br />      _d2frnl_ in lib72_response.a(d2frnl.o)<br />      _m_paw_an_mp_paw_an_gather_ in lib42_libpaw.a(m_paw_an.o)<br />      _m_paw_an_mp_paw_an_gather_..0 in lib42_libpaw.a(m_paw_an.o)<br />      ...<br />  &quot;_m_profiling_mp_sz3_&quot;, referenced from:<br />      _copy_mpi_enreg_ in lib51_manage_mpi.a(mpi_enreg_tools.o)<br />      _m_pawang_mp_pawang_init_ in lib42_libpaw.a(m_pawang.o)<br />      _d2frnl_ in lib72_response.a(d2frnl.o)<br />      _m_paw_an_mp_paw_an_gather_ in lib42_libpaw.a(m_paw_an.o)<br />      _m_paw_an_mp_paw_an_gather_..0 in lib42_libpaw.a(m_paw_an.o)<br />      _m_paw_ij_mp_paw_ij_gather_ in lib42_libpaw.a(m_paw_ij.o)<br />      _m_paw_ij_mp_paw_ij_copy_ in lib42_libpaw.a(m_paw_ij.o)<br />      ...<br />  &quot;_m_profiling_mp_sz4_&quot;, referenced from:<br />      _m_paw_ij_mp_paw_ij_gather_ in lib42_libpaw.a(m_paw_ij.o)<br />      _m_paw_ij_mp_paw_ij_copy_ in lib42_libpaw.a(m_paw_ij.o)<br />      _m_paw_ij_mp_paw_ij_gather_..0 in lib42_libpaw.a(m_paw_ij.o)<br />      _m_bandfft_kpt_mp_copy_bandfft_kpt_ in lib66_wfs.a(m_bandfft_kpt.o)<br />  &quot;_pseudo_pwscf_mp_betar_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_chi_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_dft_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_dion_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_ecutrho_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_ecutwfc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_els_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_etotps_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_ikk2_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_isus_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_lchi_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_lll_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_lmax_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_mesh_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_rhoatom_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_local_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nlcc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      ...<br />  &quot;_pseudo_pwscf_mp_nbeta_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_nlcc_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_nqf_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_nqlc_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_ntwfc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_oc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_psd_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_pseudotype_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_qfcoef_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_qfunc_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_qqq_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_r_&quot;, referenced from:<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rab_&quot;, referenced from:<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rho_at_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_rhoatom_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_rho_atc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nlcc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rinner_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_vloc0_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_local_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_zp_&quot;, referenced from:<br />      _upfheader2abi_ in lib57_iopsp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_unlink_&quot;, referenced from:<br />      _mlwfovlp_ in lib67_common.a(mlwfovlp.o)<br />ld: symbol(s) not found for architecture x86_64<br />make[5]: *** [abinit] Error 1<br />make[4]: *** [all-recursive] Error 1<br />make[3]: *** [all-recursive] Error 1<br />make[2]: *** [all] Error 2<br />make[1]: *** [multi] Error 2<br />make: *** [mj4] Error 2<br /><br />This is my simple configuration :<br /> ./configure FC=ifort CC=icc --enable-64bit-flags<br />please can you help me??<br />because I found no problem with gnu fortran but I found the error above with intel compiler..<br />thanks thanks a lots for your patience and to help me<br />Dearly lorenzo<br />I added my config.log</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Wed May 28, 2014 10:07 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />it seems that your build system is for building 32-bit target<br />some thing missing ( lib ) for 64bit target  ( intel 14  is 64bit version )<br /><br />some &quot;details&quot; in your config.log<blockquote class="uncited"><div>...<br />configure:3637: checking build system type<br />configure:3651: result: i386-apple-darwin13.2.0<br />configure:3671: checking host system type<br />configure:3684: result: i386-apple-darwin13.2.0<br />configure:3704: checking target system type<br />configure:3717: result: i386-apple-darwin13.2.0<br />...<br />configure:20379: checking for a 64-bit architecture<br />configure:20381: result: <br />configure:20383: checking whether to use 64-bit flags<br />configure:20385: result: yes<br />…<br />Undefined symbols for architecture x86_64:<br />  &quot;_foobar&quot;, referenced from:<br />      _main in iccrLaMDV.o<br />     (maybe you meant: _foobar_)<br />ld: symbol(s) not found for architecture x86_64<br />…</div></blockquote><br /><br />my 50¢<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Wed May 28, 2014 11:00 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Dear jmb can you help me to solve this problem.<br />Another problem found with intel compiler:<br />I compiled openmpi 1.8.1 with intel compiler without problem but when i try to configure abinit 7.6.4 with:<br />./configure  --enable-64bit-flags=&quot;yes&quot; --with-mpi-prefix=/Users/lorenzodona/Documents/openmpi-1.8.1 --enable-mpi=&quot;yes&quot; --enable-mpi-io=&quot;yes&quot;<br /><br />i found this problem during configuration:<br /> ==============================================================================<br /> === Multicore architecture support                                         ===<br /> ==============================================================================<br /><br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... no<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />Please can you help me to install abinit with intel compiler...<br />thanks thanks a lot.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Thu May 29, 2014 7:54 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />I need config.log to see the problem...<br /><br />but 2 thinks :<br /><br />before to run configure, setting these env variables :<br /><br />1) export FC_LDFLAGS_EXTRA = -Wl,-search_paths_first<br /><br />2) export PATH=/Users/lorenzodona/Documents/openmpi-1.8.1/bin:$PATH<br /><br />can help sometime…<br /><br />by the way, have you resolved the 64bits issue ? if yes, how ?<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Thu May 29, 2014 8:55 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Dear jmb thanks to help me really a lot <br />NO I am not able to solve the 64 bit issue i also used FC=&quot;ifort -m64&quot; and fort -m32 but the problem is always the same a lot of d: symbol(s) not found for architecture x86_64<br />Please can you help me to solce this big problem and now I try for opempi like you told me.<br />Dearly lorenzo <br />Thanks thanks a lot</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Thu May 29, 2014 9:02 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Dear jmb I tried also with mpich 3.0.4 compiled with intel compiler and i export the env variables but i found the same problem<br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... yes<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />I give you my config.log</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Fri May 30, 2014 8:41 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br />very strange  &quot;checking whether the C compiler supports MPI… no&quot; !<br /><br />how two you install mpich 3 ?<br />have you run &quot;make check&quot; after compiling mpich3 ?<br /><br />can you send the results of these commands :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>env<br />which icc<br />which ifort<br />which mpicc<br />which mpif90<br />mpicc -show<br />mpicc --version<br />mpif90 -show<br />mpif90 --version<br /></code></pre></div><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Fri May 30, 2014 11:32 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Hi and thanks to help me.<br />I installed mpich in this way:<br />./configure FC=ifort CC=icc CXX=icpc F77=ifort --prefix=/Users/lorenzodona/Desktop/mpich-3.0.4/exec/<br /><br />after make check I found:<br />MacBook-Pro-di-Lorenzo-Dona:mpich-3.0.4 lorenzodona$ make check<br /><br />make  check-recursive<br />Making check in src/mpl<br />/Applications/Xcode.app/Contents/Developer/usr/bin/make  strsep<br />  CC       strsep.o<br />  CCLD     strsep<br />ld: warning: ignoring file ./.libs/libmpl.a, file was built for archive which is not the architecture being linked (i386): ./.libs/libmpl.a<br />Undefined symbols for architecture i386:<br />  &quot;_MPL_strsep&quot;, referenced from:<br />      _main in strsep.o<br />ld: symbol(s) not found for architecture i386<br />make[3]: *** [strsep] Error 1<br />make[2]: *** [check-am] Error 2<br />make[1]: *** [check-recursive] Error 1<br />make: *** [check] Error 2<br /><br />and the other thinks are:<br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ env<br />MKLROOT=/opt/intel/composer_xe_2013_sp1.3.166/mkl<br />MANPATH=/opt/intel/composer_xe_2013_sp1.3.166/man/en_US:/opt/intel/composer_xe_2013_sp1.3.166/man/en_US:/opt/intel/composer_xe_2013_sp1.3.166/man:/opt/intel/composer_xe_2013_sp1.3.166/man/en_US:/opt/intel/composer_xe_2013_sp1.3.166/man/en_US:/opt/intel/composer_xe_2013_sp1.3.166/man:/opt/intel/composer_xe_2013_sp1.3.166/man:/usr/share/man:/usr/local/share/man:/opt/X11/share/man:/Applications/Xcode.app/Contents/Developer/usr/share/man:/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/share/man::<br />TERM_PROGRAM=Apple_Terminal<br />INTEL_LICENSE_FILE=/opt/intel/composer_xe_2013_sp1.3.166/licenses:/opt/intel/licenses:/Users/lorenzodona/intel/licenses:/Users/Shared/Library/Application Support/Intel/Licenses:/opt/intel/composer_xe_2013_sp1.3.166/licenses:/opt/intel/licenses:/Users/lorenzodona/intel/licenses:/Users/Shared/Library/Application Support/Intel/Licenses<br />IPPROOT=/opt/intel/composer_xe_2013_sp1.3.166/ipp<br />SHELL=/bin/bash<br />TERM=xterm-256color<br />TMPDIR=/var/folders/dp/24y8tzl14llgc7r_ly2c45780000gn/T/<br />LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib:/opt/intel/composer_xe_2013_sp1.3.166/tbb/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib:/opt/intel/composer_xe_2013_sp1.3.166/tbb/lib<br />CRY2K9_ROOT=/Users/lorenzodona/Crystal09<br />Apple_PubSub_Socket_Render=/tmp/launch-76ZwBo/Render<br />TERM_PROGRAM_VERSION=326<br />TERM_SESSION_ID=6DB814BC-B2F2-46D9-9A40-9F7E3EC2DE3F<br />CRY2K9_ARCH=Mac_ifort<br />USER=lorenzodona<br />CRY2K9_EXEDIR=/Users/lorenzodona/Crystal09/bin/Mac_ifort<br />CPATH=/opt/intel/composer_xe_2013_sp1.3.166/ipp/include:/opt/intel/composer_xe_2013_sp1.3.166/mkl/include:/opt/intel/composer_xe_2013_sp1.3.166/tbb/include:/opt/intel/composer_xe_2013_sp1.3.166/ipp/include:/opt/intel/composer_xe_2013_sp1.3.166/mkl/include:/opt/intel/composer_xe_2013_sp1.3.166/tbb/include<br />SSH_AUTH_SOCK=/tmp/launch-LDsXmR/Listeners<br />__CF_USER_TEXT_ENCODING=0x1F5:0:4<br />NLSPATH=/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib/locale/en_US/%N:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib/locale/en_US/%N:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64_mic/py27/share/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64/py27/share/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib/locale/en_US/%N:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib/locale/en_US/%N:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64_mic/py27/share/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64/py27/share/locale/%l_%t/%N<br />PATH=/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32:/opt/intel/composer_xe_2013_sp1.3.166/mpirt/bin/ia32:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64_mic/py27/bin:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64/py27/bin:/opt/intel/composer_xe_2013_sp1.3.166/bin:/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32:/opt/intel/composer_xe_2013_sp1.3.166/mpirt/bin/ia32:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64_mic/py27/bin:/opt/intel/composer_xe_2013_sp1.3.166/debugger/gdb/intel64/py27/bin:/opt/intel/composer_xe_2013_sp1.3.166/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:./:/Users/lorenzodona/Crystal09/bin/Mac_ifort/v1_0_1:/Users/lorenzodona/Crystal09/bin/Mac_ifort:/Users/lorenzodona/Crystal09/utils09:/Users/lorenzodona/Crystal09/crgra2006<br />__CHECKFIX1436934=1<br />GRA6_EXEDIR=/Users/lorenzodona/Crystal09/crgra2006/bin/Mac-ifort<br />CRY2K9_TEST=/Users/lorenzodona/Crystal09/testcase/inputs<br />PWD=/Users/lorenzodona<br />VERSION=v1_0_1<br />LANG=it_IT.UTF-8<br />CRY2K9_BIN=bin<br />SHLVL=1<br />HOME=/Users/lorenzodona<br />CRY2K9_UTILS=/Users/lorenzodona/Crystal09/utils09<br />DYLD_LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib/ia32:/opt/intel/composer_xe_2013_sp1.3.166/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib:/opt/intel/composer_xe_2013_sp1.3.166/tbb/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib/ia32:/opt/intel/composer_xe_2013_sp1.3.166/ipp/../compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/ipp/lib:/opt/intel/composer_xe_2013_sp1.3.166/compiler/lib:/opt/intel/composer_xe_2013_sp1.3.166/mkl/lib:/opt/intel/composer_xe_2013_sp1.3.166/tbb/lib<br />LOGNAME=lorenzodona<br />CRY2K9_SCRDIR=/Users/lorenzodona/Crystal09/tempdir<br />CRY2K6_GRA=/Users/lorenzodona/Crystal09/crgra2006<br />DISPLAY=/tmp/launch-kRG117/org.macosforge.xquartz:0<br />INCLUDE=/opt/intel/composer_xe_2013_sp1.3.166/mkl/include:/opt/intel/composer_xe_2013_sp1.3.166/mkl/include<br />_=/usr/bin/env<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which icc<br />/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32/icc<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which ifort<br />/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32/ifort<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which mpicc<br />/opt/local/bin/mpicc<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which mpif90<br />/opt/local/bin/mpif90<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpicc -show<br />/usr/bin/clang -I/opt/local/include/openmpi-mp -L/opt/local/lib/openmpi-mp -lmpi<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpicc --version<br />Apple LLVM version 5.1 (clang-503.0.40) (based on LLVM 3.4svn)<br />Target: x86_64-apple-darwin13.2.0<br />Thread model: posix<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpif90 -show<br />/opt/local/bin/gfortran-mp-4.8 -I/opt/local/include/openmpi-mp -Wl,-commons,use_dylibs -Wl,-commons,use_dylibs -I/opt/local/lib/openmpi-mp -L/opt/local/lib/openmpi-mp -lmpi_usempi -lmpi_mpifh -lmpi<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpif90 --version<br />GNU Fortran (MacPorts gcc48 4.8.2_0) 4.8.2<br />Copyright (C) 2013 Free Software Foundation, Inc.<br /><br />GNU Fortran comes with NO WARRANTY, to the extent permitted by law.<br />You may redistribute copies of GNU Fortran<br />under the terms of the GNU General Public License.<br />For more information about these matters, see the file named COPYING<br /><br />I thank you so much for this big big help.<br />Dearly lorenzo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Fri May 30, 2014 11:42 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">I recompiled now both openmpi 1.8.1 and mpich3.0.4 and I have passed all the tests<br />but abinit say that <br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... no<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />thaks a lot again excuse if I bother you.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Sat May 31, 2014 10:57 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br />your environment is not set correctly !<br /><br />I suppose you install the &quot;m_fcompxe_2013_sp1.3.166&quot; package for ifort ( and perhaps m_ccompxe_2013_sp1.3.166 for icc )<br /><br />( the output of env command is truncated  <img class="smilies" src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" />  )<br /><br />but <br /><blockquote class="uncited"><div>MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which icc<br />/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32/icc<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which ifort<br />/opt/intel/composer_xe_2013_sp1.3.166/bin/ia32/ifort</div></blockquote><br /><br />the problem with the &quot;Undefined symbols for architecture x86_64&quot;  must be resolved with the intel64   ( no doubt , you use  ia32  <img class="smilies" src="images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />  )   -&gt; see below<br /><br /><blockquote class="uncited"><div>MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which mpicc<br />/opt/local/bin/mpicc<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ which mpif90<br />/opt/local/bin/mpif90</div></blockquote><br /><br />you see that the mpif90 and mpicc  are not the cmd from your mpich3 or openmpi !<br />as I already said, you need to add paths for the binaries of MPICH3 in PATH variable before /opt/local/bin :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export PATH=/path_of_mpich3/bin:$PATH</code></pre></div><br /><br /><blockquote class="uncited"><div>MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpicc -show<br />/usr/bin/clang -I/opt/local/include/openmpi-mp -L/opt/local/lib/openmpi-mp -lmpi<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpicc --version<br />Apple LLVM version 5.1 (clang-503.0.40) (based on LLVM 3.4svn)<br />Target: x86_64-apple-darwin13.2.0<br />Thread model: posix</div></blockquote><br /><br />you see that you use the mpi from Apple which is a 64 bits version  : not icc 14 !<br /><br /><blockquote class="uncited"><div>MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpif90 -show<br />/opt/local/bin/gfortran-mp-4.8 -I/opt/local/include/openmpi-mp -Wl,-commons,use_dylibs -Wl,-commons,use_dylibs -I/opt/local/lib/openmpi-mp -L/opt/local/lib/openmpi-mp -lmpi_usempi -lmpi_mpifh -lmpi<br /><br />MacBook-Pro-di-Lorenzo-Dona:~ lorenzodona$ mpif90 --version<br />GNU Fortran (MacPorts gcc48 4.8.2_0) 4.8.2<br />Copyright (C) 2013 Free Software Foundation, Inc.</div></blockquote><br /><br />same with fortran : it's the GNU gfortran not ifort !!!<br /><br />after installation of intel compilers, you need to &quot;add&quot; these compilers in your environment, for compiling any softwares like mpich3, openmpi and abinit :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>source /opt/intel/composer_xe_2013_sp1/bin/compilervars.sh intel64</code></pre></div><br />( have you read the INSTALL note ?!? )<br /><br />after recompiling MPICH3 and/or openmpi,<br />you can rerun the set of commands that I send previously  and check that everything it's ok<br /><br />after, you can retry to compile abinit<br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Sun Jun 01, 2014 9:35 am</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Hi I recompiled mpich and openmpi with fort intel64 <br /> which ifort<br />/opt/intel/composer_xe_2013_sp1.3.166/bin/intel64/ifort<br />MacBook-Pro-di-Lorenzo-Dona:abinit-7.6.4 lorenzodona$ which mpif90<br />/Users/lorenzodona/Documents/mpich-3.1/exec/bin/mpif90<br />MacBook-Pro-di-Lorenzo-Dona:abinit-7.6.4 lorenzodona$ mpif90 --version<br />ifort (IFORT) 14.0.3 20140415<br />Copyright (C) 1985-2014 Intel Corporation.  All rights reserved.<br />MacBook-Pro-di-Lorenzo-Dona:abinit-7.6.4 lorenzodona$ mpif90 -v<br />mpif90 for MPICH version 3.1<br />ifort version 14.0.3<br /> but in the configuration:<br /> === Multicore architecture support                                         ===<br /> ==============================================================================<br /><br />checking whether to enable OpenMP support... no<br />checking whether to build MPI code... yes<br />checking whether the C compiler supports MPI... no<br />checking whether the C++ compiler supports MPI... no<br />checking whether the Fortran Compiler supports MPI... no<br />checking whether MPI is usable... no<br />configure: error: MPI support is broken - please fix your config parameters and/or MPI installation<br /><br />the error is the same i also recompiled openmpi e mpich whit intel 64 and after make check i found no errors.<br />when i compiled abinit with FC=ifort CC=icc CXX=icpc without parallel the error Undefined symbols for architecture x86_64&quot; is the same <br />I have the same error .<br />Please can you help me again.<br />I do like you told me.<br />Thanks a lot</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Sun Jun 01, 2014 7:27 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">when you are in the abinit tree, have you make<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make clean</code></pre></div><br />before to run <br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --enable-64bit-flags=&quot;yes&quot; --with-mpi-prefix=/Users/lorenzodona/Documents/mpich-3.1/exec/ --enable-mpi=&quot;yes&quot; --enable-mpi-io=&quot;yes&quot; </code></pre></div><br /><br />?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error compiling abinit 7.6.4 with intel compiler</h3>
				<div class="date">Posted: <strong>Sun Jun 01, 2014 7:47 pm</strong></div>
				<div class="author">by <strong>lorenzodona</strong></div>
				<div class="content">Hi <br />Yes of course before recompile abinit i did make clean and after the configuration but the problem is always the same<br />Or mpi is broken but not Because i compiled it with intel64 and passed all tests or if i compile abinit without parallel i found ld symbol not found for architecture 86x64 <br />Please can you tell me something more to do to compile abinit with intel??<br />Thanks a lot for your big patinece with me</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=2674&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:20:16 GMT -->
</html>
