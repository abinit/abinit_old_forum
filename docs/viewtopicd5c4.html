<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=8832 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:05:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>can not use Cut3d - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopic790e.html?t=2873">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="4"><a href="viewforum31e6.html?f=4" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Running Abinit</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="12"><a href="viewforum01c9.html?f=12" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Other tools and postprocessing in ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopic7592.html?f=12&amp;t=2873">can not use Cut3d</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">MULTIBINIT, aTDEP, ANADDB, optics, cut3d, mrg* postprocessors<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist0c7f.html?mode=viewprofile&amp;u=1909" class="username">MMNSchmitt</a>, <a href="memberlist286b.html?mode=viewprofile&amp;u=57" class="username">gonze</a>
</p>


<div class="action-bar bar-top">
	
			<a href="posting7bbe.html?mode=reply&amp;f=12&amp;t=2873" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopice150.html?f=12&amp;t=2873&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="2873" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p8812" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8812">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd3cc.html?mode=viewprofile&amp;u=1478" class="username">jiabo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search8aea.html?author_id=1478&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Nov 22, 2014 2:32 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8812">

						<h3 class="first"><a href="#p8812">can not use Cut3d</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd5bc.html?mode=quote&amp;f=12&amp;p=8812" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicd56e.html?p=8812#p8812" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd3cc.html?mode=viewprofile&amp;u=1478" class="username">jiabo</a></strong> &raquo; </span>Thu Dec 04, 2014 2:16 am
			</p>
			
			
			
			<div class="content">Dear every ABINIT user<br /><br />I got a really urgent problem that I can not use Cut3d on ARCHER (High performance computer centre in UK) to transfer my unformatted POT file into formatted one. According to what I have known, maybe the ABINIT on ARCHER is a paralleled version that leads me not to use it just typing 'cut3d', can anyone give me some instruction how to deal with this?<br /><br />The file is too big to upload, I would really appreciate if someone can do me a favour to try to transfer it for me, please leave me an email address so that I can send the file to you.<br /><br />Thank you <br /><br />Jiabo</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8814" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8814">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8814">

						<h3 ><a href="#p8814">Re: can not use Cut3d</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting2232.html?mode=quote&amp;f=12&amp;p=8814" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic9421.html?p=8814#p8814" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Thu Dec 04, 2014 9:21 am
			</p>
			
			
			
			<div class="content">This will depend on you HPC. <br />If you compiled abinit with MPI and you administrator does not allow you to run a MPI program even in sequentiel on you login node then you have at least 2 possibilites :<br />1) submit a job and put all the things you would type on the keyboard in a file - let say cut3d.file - and run cut3d as<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>cut3d &lt; cut3d.file<br /></code></pre></div><br />2) recompile abinit (with no optimization not special features so the compilation is much faster) without mpi so you can use it on the login node.<br />3) export you POT file to you local machine and do the post processing on it.<br /><br />Jordan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8817" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8817">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistd3cc.html?mode=viewprofile&amp;u=1478" class="username">jiabo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search8aea.html?author_id=1478&amp;sr=posts">11</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Nov 22, 2014 2:32 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8817">

						<h3 ><a href="#p8817">Re: can not use Cut3d</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingd1c0.html?mode=quote&amp;f=12&amp;p=8817" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic2d59.html?p=8817#p8817" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistd3cc.html?mode=viewprofile&amp;u=1478" class="username">jiabo</a></strong> &raquo; </span>Thu Dec 04, 2014 12:58 pm
			</p>
			
			
			
			<div class="content">Hi Jordan<br /><br />Thank you for your reply. I have tried the first method, it seems cut3d can be used, but still have something wrong. You can see the first and last few lines below, I do not know why it stopped after the first option.<br /><br />And there is a sequential version of ABINIT in my another account, but still not work.<br /><br />Jiabo<br /><br /> What is the name of the 3D function (density, potential or wavef) file ?<br />  =&gt; Your 3D function file is : Pt_xo_TIM3_POT<br /><br />  Does this file contain formatted 3D ASCII data (=0)<br />   or unformatted binary header + 3D data        (=1) ?<br />   or ETSF binary                                (=2) ?<br />  1 =&gt; Your file contains unformatted binary header + 3D data<br />  The information it contains should be sufficient.<br />  cut3d : read file Pt_xo_TIM3_POT from unit number 19.<br /><br /><br /> End the ECHO of the ABINIT file header<br /> ===============================================================================<br /><br /> ===========================================================<br /><br /> ECHO important input variables ...<br /><br />  Dimensional primitive vectors (ABINIT equivalent : rprimd):<br />    1.071097E+01    0.000000E+00    0.000000E+00<br />   -5.355484E+00    9.275970E+00    0.000000E+00<br />    3.233235E-15    5.600127E-15    5.280273E+01<br />  Grid density (ABINIT equivalent : ngfft):    54   54  270<br />  Number of atoms       :          16<br />  Number of atomic types:           1<br /><br />   #    Atomic positions (cartesian coordinates - Bohr)<br />   1   -1.100271E-19    6.376265E-04   -1.242070E-02<br />   2   -5.812424E-21   -9.984450E-04    1.313095E+01<br />   3    2.677742E+00    1.543855E+00    8.724622E+00<br />   4    4.700827E-17    3.094770E+00    4.393967E+00<br />   5    5.355484E+00    6.376265E-04   -1.242070E-02<br />   6    5.355484E+00   -9.984450E-04    1.313095E+01<br />   7    8.033226E+00    1.543855E+00    8.724622E+00<br />   8    5.355484E+00    3.094770E+00    4.393967E+00<br />   9   -2.677742E+00    4.638504E+00   -1.222914E-02<br />  10   -2.677742E+00    4.636737E+00    1.313073E+01<br />  11   -3.539525E-16    6.181875E+00    8.724572E+00<br />  12   -2.677742E+00    7.732728E+00    4.393732E+00<br />  13    2.677742E+00    4.638504E+00   -1.222914E-02<br />  14    2.677742E+00    4.636737E+00    1.313073E+01<br />  15    5.355484E+00    6.181875E+00    8.724572E+00<br />  16    2.677742E+00    7.732728E+00    4.393732E+00<br /><br />  This file is a Density or Potential file<br />Application 12134916 exit codes: 67<br />Application 12134916 resources: utime ~0s, stime ~0s, Rss ~6196, inblocks ~23845, outblocks ~52239</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8832" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8832">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8832">

						<h3 ><a href="#p8832">Re: can not use Cut3d</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcb01.html?mode=quote&amp;f=12&amp;p=8832" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicd5c4.html?p=8832#p8832" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Tue Dec 09, 2014 10:18 am
			</p>
			
			
			
			<div class="content">Could you check that this is not a memory problem ? If your POT file is large enough and cut3d allocates lots of arrays it might crash the code.<br /><br />In addition, could you (again, sorry) recompile the whole abinit package without optimization and debug information with for instance :<br />FCFLAGS_EXTRA=&quot;-g -O0 -traceback&quot; for intel compiler or FCFLAGS_EXTRA=&quot;-g -O0 -fbacktrace&quot; for gfortran.<br />on your ./configure command line or in your *.ac file. Don't forget to make clean before make<br /><br />Jordan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p8942" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile8942">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlista929.html?mode=viewprofile&amp;u=312" class="username">JEJohns</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search7f08.html?author_id=312&amp;sr=posts">55</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sun May 02, 2010 5:30 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content8942">

						<h3 ><a href="#p8942">Re: can not use Cut3d</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingc9b9.html?mode=quote&amp;f=12&amp;p=8942" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic3247.html?p=8942#p8942" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlista929.html?mode=viewprofile&amp;u=312" class="username">JEJohns</a></strong> &raquo; </span>Mon Feb 02, 2015 9:39 pm
			</p>
			
			
			
			<div class="content">Hi Jordan,<br /><br />I see a similar behavior, but it seems to occur only when I'm handling a large file.  For example, I'm currently working on a surface with 147 atoms, and an ~18 x 18 x75 bohr hexagonal unit cell.  When I try and load the *POT file with cut3d, I get the same error as you jiabo.  When I then try and load it using a serial version of cut3d I get the following error: <br />&quot;At line 96 of rrho.F90 (unit=19, file='e:\DFT\Abinit7.4\MoS2_Fe_POT')<br />Fortran Runtime Error:  I/O past end of record on unformatted file&quot;<br /><br />So I don't think that it's the memory that is the question because it also loads the associate *DEN file just fine.<br />So I looked at rrho.F90, and the relevant section is below in bold.<br /><br />Line 96 of the rrho.F90 is bolded below.  <br /><blockquote class="uncited"><div>!  Formatted (only one spin component is allowed)<br />   case (0)<br />     do ir3=1,nr3<br />       do ir2=1,nr2<br />         do ir1=1,nr1<br />          read(unit=wff%unwff,fmt=*) grid_full(ir1,ir2,ir3,1)<br />         end do<br />       end do<br />     end do<br /><br />!    Unformatted, on one record<br />   case (1)<br />     do ispden=1,nspden<br />       <strong class="text-strong">read(unit=wff%unwff) grid_full(1:nr1,1:nr2,1:nr3,ispden)</strong><br />     end do<br />!    ETSF case<br />  </div></blockquote><br /><br /><br />That seems pretty straightforward.  Loop over the fft grid and number of spin densities and make a grid of V((nx,ny,nz,nspden)). It does this same routine for  both DEN &amp; POT types of files.  At this point, I realized that my POT file was roughly 1/2 the size of my DEN file.  This corresponds to the number of processors I'm parallelizing the FFT over. <br /> I did some tests on a dummy system (a GAN in a giant box, doesn't really matter), and the POT file always has the size of 1/npfft * DEN file. This means that if your system is large and you need to start paralleling over the fft grid, cut3d cannot read the POT files.  I'll look more into it since this came up previously in the threads back in 2010, but if anyone else wants to that would be a great help.  I'm an experimentalist any my Fortran is iffy at best.<br /><br />Cheers,<br />James</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="posting7bbe.html?mode=reply&amp;f=12&amp;t=2873" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopice150.html?f=12&amp;t=2873&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=12&amp;t=2873">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum01c9.html?f=12" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Other tools and postprocessing in ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=8832 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:05:29 GMT -->
</html>
