<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1675&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; abinit-6.12.3 - getting a clean make check</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>abinit-6.12.3 - getting a clean make check</h2>
		<p><a href="viewtopicf268-2.html?f=3&amp;t=1675">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1675</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>abinit-6.12.3 - getting a clean make check</h3>
				<div class="date">Posted: <strong>Tue May 22, 2012 1:26 pm</strong></div>
				<div class="author">by <strong>Thomas I.</strong></div>
				<div class="content">I am trying to build abinit-6.12.3 on a cluster of AMD Opteron(TM) Processor 6274. I have tried multiple build configurations, but whatever I do, I cannot get make check to complete without error. Should this be reason for concern or is this expected?<br /><br />For example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># software versions<br />&nbsp;intel/12.1, fftw/3.3.1, mkl/12.1, openmpi/1.5.5<br /><br /># configure line<br />LAPACK=&quot;-lmkl_intel_lp64 -lmkl_sequential -lmkl_core&quot;<br />CC=mpicc CXX=mpiCC FC=mpif90 LAPACK=&quot;-lmkl_scalapack_lp64 -lmkl_blacs_openmpi_lp64 -lmkl_core -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_lapack -lmkl_solver_lp64&quot; CFLAGS=&quot;-O3&quot; FCFLAGS=&quot;-O3&quot; CXXFLAGS=&quot;-O3&quot; ./configure LIBS=&quot;-L$MKL_LIB $LAPACK&quot; --with-linalg-includes=&quot;-I$MKL_INC&quot; --with-linalg-libs=&quot;-L$MKL_LIB $LAPACK&quot; --enable-64bit-flags --prefix=/sw/atlas/applications/abinit/6.12.3-intel-mkl --enable-mpi=&quot;yes&quot; --enable-gui --enable-shared --with-fft-flavor=&quot;fftw3&quot; --with-fft-include=&quot;-I$FFTW_INC&quot; --with-fft-libs=&quot;-L$FFTW_LIB -lfftw3&quot; --with-dft-flavor=&quot;libxc&quot;<br /><br /># make mj4<br /><br /># make check end result<br /><br />make&#91;5&#93;: Leaving directory `.../abinit-6.12.3-intel-mkl-try2/tests'<br />make&#91;4&#93;: Leaving directory `.../abinit-6.12.3-intel-mkl-try2/tests'<br />etsf_io/tmp-test_Linux_20120522/report:Case_06&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />etsf_io/tmp-test_Linux_20120522/report:Case_07&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />etsf_io/tmp-test_Linux_20120522/report:Case_08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120522/report:Case_nlo_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.008489203 , accepted 0.000e+00 ) <br />tutorial/tmp-test_Linux_20120522/report:Case_gw1_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 11 , accepted 10 ) <br />tutorial/tmp-test_Linux_20120522/report:Case_gw1_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 40 , accepted 36 ) <br />tutorial/tmp-test_Linux_20120522/report:Case_gw2_3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 7.337 , accepted 5.010e-06 ) <br />tutorial/tmp-test_Linux_20120522/report:Case_gw2_4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 5.409 , accepted 1.010e-06 ) <br />v2/tmp-test_Linux_20120522/report:Case_13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v2/tmp-test_Linux_20120522/report:Case_18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v2/tmp-test_Linux_20120522/report:Case_21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.00359935108538 , accepted 2.510e-10 ) <br />v2/tmp-test_Linux_20120522/report:Case_98&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 18 , accepted 17 ) <br />v3/tmp-test_Linux_20120522/report:Case_83&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 4 , accepted 2 ) <br />v4/tmp-test_Linux_20120522/report:Case_54&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.00999999999999091 , accepted 0.000e+00 ) <br />v4/tmp-test_Linux_20120522/report:Case_68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.00457609999999997 , accepted 5.637e-05 ) <br />v4/tmp-test_Linux_20120522/report:Case_71&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v4/tmp-test_Linux_20120522/report:Case_84&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 4.032 , accepted 1.010e-03 ) <br />v4/tmp-test_Linux_20120522/report:Case_85&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 6.729 , accepted 1.001e-03 ) <br />v4/tmp-test_Linux_20120522/report:Case_86&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 11.766 , accepted 1.010e-03 ) <br />v5/tmp-test_Linux_20120522/report:Case_45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120522/report:Case_71&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 3.771 , accepted 1.010e-03 ) <br />v6/tmp-test_Linux_20120522/report:Case_37&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.6677935615 , accepted 2.0e-5 ) <br />v6/tmp-test_Linux_20120522/report:Case_40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 2.09999999993826e-05 , accepted 2.0e-7 ) <br />v6/tmp-test_Linux_20120522/report:Case_89&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large relative error : 1 , accepted 6.0e-6 ) <br />make&#91;3&#93;: *** &#91;check-local&#93; Error 1<br />make&#91;3&#93;: Leaving directory `.../abinit-6.12.3-intel-mkl-try2/tests'<br />make&#91;2&#93;: *** &#91;check-am&#93; Error 2<br />make&#91;2&#93;: Leaving directory `.../abinit-6.12.3-intel-mkl-try2/tests'<br />make&#91;1&#93;: *** &#91;check-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `.../abinit-6.12.3-intel-mkl-try2/tests'<br />make: *** &#91;check-recursive&#93; Error 1<br /></code></pre></div><br /><br />I have also tried with<br /><br /> intel/12.1, fftw/3.3.1, acml/5.1.0, openmpi/1.5.5 (even with -prec-div -prec-sqrt -O2)<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&#91;libxc&#93;&#91;t999&#93; File t*_xsf* erased<br />make&#91;5&#93;: Leaving directory `.../abinit-6.12.3-intel/tests'<br />make&#91;4&#93;: Leaving directory `.../abinit-6.12.3-intel/tests'<br />etsf_io/tmp-test_Linux_20120511/report:Case_06&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />etsf_io/tmp-test_Linux_20120511/report:Case_07&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />etsf_io/tmp-test_Linux_20120511/report:Case_08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />libxc/tmp-test_Linux_20120511/report:Case_13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 2981 , accepted 0.0 )<br />libxc/tmp-test_Linux_20120511/report:Case_19&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_nlo_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.008489203 , accepted 0.000e+00 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 5 , accepted 4 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 24 , accepted 20 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 13 , accepted 10 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 44 , accepted 36 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 31 , accepted 25 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 36 , accepted 27 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 2 , accepted 1 )<br />v2/tmp-test_Linux_20120511/report:Case_13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v2/tmp-test_Linux_20120511/report:Case_18&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v2/tmp-test_Linux_20120511/report:Case_21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.0035993510383 , accepted 2.510e-10 )<br />v2/tmp-test_Linux_20120511/report:Case_44&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 9 , accepted 6 )<br />v2/tmp-test_Linux_20120511/report:Case_88&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v4/tmp-test_Linux_20120511/report:Case_54&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.00999999999999091 , accepted 0.000e+00 )<br />v4/tmp-test_Linux_20120511/report:Case_68&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.00423949999999995 , accepted 5.637e-05 )<br />v4/tmp-test_Linux_20120511/report:Case_71&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120511/report:Case_16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120511/report:Case_45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120511/report:Case_72&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 9.99999999997669e-05 , accepted 1.001e-06 )<br />v6/tmp-test_Linux_20120511/report:Case_37&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 0.6677935615 , accepted 2.0e-5 )<br />v6/tmp-test_Linux_20120511/report:Case_40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 2.09999999993826e-05 , accepted 2.0e-7 )<br />v6/tmp-test_Linux_20120511/report:Case_89&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large relative error : 1 , accepted 6.0e-6 )<br />make&#91;3&#93;: *** &#91;check-local&#93; Error 1<br />make&#91;3&#93;: Leaving directory `.../abinit-6.12.3-intel/tests'<br />make&#91;2&#93;: *** &#91;check-am&#93; Error 2<br />make&#91;2&#93;: Leaving directory `.../abinit-6.12.3-intel/tests'<br />make&#91;1&#93;: *** &#91;check-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `.../abinit-6.12.3-intel/tests'<br />make: *** &#91;check-recursive&#93; Error 1<br /></code></pre></div><br /><br />and<br />  gcc/4.6.2 fftw/3.3.1, acml/5.1.0, openmpi/1.5.5 (even with -prec-div -prec-sqrt -O0)<br /><br />resulting in an unclean make check<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make&#91;5&#93;: Leaving directory `.../abinit-6.12.3-gcc/tests'<br />make&#91;4&#93;: Leaving directory `.../abinit-6.12.3-gcc/tests'<br />libxc/tmp-test_Linux_20120511/report:Case_13&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 2981 , accepted 0.0 )<br />libxc/tmp-test_Linux_20120511/report:Case_19&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_elast_6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_rf2_1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_rf2_3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_rf2_4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_rf2_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorespfn/tmp-test_Linux_20120511/report:Case_rf2_7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 14 , accepted 11 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large relative error : 0.0038022813688213 , accepted 2.237e-03 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 33 , accepted 27 )<br />tutorial/tmp-test_Linux_20120511/report:Case_gw1_9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 2 , accepted 1 )<br />tutorial/tmp-test_Linux_20120511/report:Case_spin_3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v2/tmp-test_Linux_20120511/report:Case_30&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 9 , accepted 8 )<br />v2/tmp-test_Linux_20120511/report:Case_44&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 8 , accepted 6 )<br />v2/tmp-test_Linux_20120511/report:Case_84&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 2 , accepted 1 )<br />v2/tmp-test_Linux_20120511/report:Case_88&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120511/report:Case_16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v5/tmp-test_Linux_20120511/report:Case_72&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too large absolute error : 9.99999999997669e-05 , accepted 1.001e-06 )<br />v6/tmp-test_Linux_20120511/report:Case_48&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v6/tmp-test_Linux_20120511/report:Case_82&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed<br />v6/tmp-test_Linux_20120511/report:Case_89&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; failed (too many erroneous lines : 18 , accepted 17 )<br />make&#91;3&#93;: *** &#91;check-local&#93; Error 1<br />make&#91;3&#93;: Leaving directory `.../abinit-6.12.3-gcc/tests'<br />make&#91;2&#93;: *** &#91;check-am&#93; Error 2<br />make&#91;2&#93;: Leaving directory `.../abinit-6.12.3-gcc/tests'<br />make&#91;1&#93;: *** &#91;check-recursive&#93; Error 1<br />make&#91;1&#93;: Leaving directory `.../abinit-6.12.3-gcc/tests'<br />make: *** &#91;check-recursive&#93; Error 1</code></pre></div><br /><br />make tests_in runs cleanly in all cases.<br /><br />Thanks, Thomas</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.12.3 - getting a clean make check</h3>
				<div class="date">Posted: <strong>Tue May 22, 2012 5:23 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Some tests are not completely portable. And for performance reasons, most input parameters are not converged. This is thus not surprising to obtain wrong outputs.<br /><br />From what I see, most of the failures you experience seem to be linked to the peculiarities of your configuration and should be harmless. However, to be sure, you should have a look at the diff.* files associated to the failing tests.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.12.3 - getting a clean make check</h3>
				<div class="date">Posted: <strong>Tue May 22, 2012 7:48 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Dear Thomas,<br /><br />first of all, use intel compilers 11.1.073 or &gt;=  12.1.<strong class="text-strong">4</strong><br />when I use intel compilers, I use fftw3 implemented under mkl like :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_fft_flavor=&quot;fftw3&quot;<br />with_fft_libs=&quot;-L/opt/intel/Compiler/11.1/current/mkl/lib/em64t -Wl,--start-group -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread&quot;<br /></code></pre></div><br /><br />you can find some configurations in &quot;config/spec/build-examples.conf&quot;<br />and some informations concerning the nightly slaves/bots in <br />- <!-- m --><a class="postlink" href="http://www.abinit.org/developers/dev-environment/buildbot/buildbot-slave-matrix">http://www.abinit.org/developers/dev-en ... ave-matrix</a><!-- m --><br />- <!-- m --><a class="postlink" href="http://www.abinit.org/developers/dev-environment/buildbot/buildbot-builder-matrix">http://www.abinit.org/developers/dev-en ... der-matrix</a><!-- m --><br /><br />two &quot;good&quot; nightly configurations tested with AMD cpu are : <br /><br />- gcc462 + mpich2-1.4.1p1 + acml 4.4.0<br />- open64 v4.2.5.2 + openmpi 1.4.3 + acml 4.4.0<br /><br />regards<br /><br />jmb</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1675&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:48:27 GMT -->
</html>
