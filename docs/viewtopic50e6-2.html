<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1514&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:17:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; abinit-6.10.3 error message with make command</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>abinit-6.10.3 error message with make command</h2>
		<p><a href="viewtopic39ff.html?f=3&amp;t=1514">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1514</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>2</strong></div>
					<div class="post">
				<h3>abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Sun Jan 29, 2012 11:13 pm</strong></div>
				<div class="author">by <strong>nikhilsd</strong></div>
				<div class="content">After using ./configure CC=/usr/local/gfortran/bin/gcc , I got the output<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Summary of important options:<br /><br />&nbsp; * C compiler&nbsp; &nbsp; &nbsp; : gnu version 4.6<br />&nbsp; * Fortran compiler: gnu version 4.6<br />&nbsp; * architecture&nbsp; &nbsp; :&nbsp; &nbsp;( bits)<br /><br />&nbsp; * debugging&nbsp; &nbsp; &nbsp; &nbsp;: basic<br />&nbsp; * optimizations&nbsp; &nbsp;: standard<br /><br />&nbsp; * MPI&nbsp; &nbsp; enabled&nbsp; : no<br />&nbsp; * MPI-IO enabled&nbsp; : no<br />&nbsp; * GPU&nbsp; &nbsp; enabled&nbsp; : no (none)<br /><br />&nbsp; * TRIO&nbsp; &nbsp;flavor = netcdf-fallback+etsf_io-fallback<br />&nbsp; * TIMER&nbsp; flavor = abinit (libs: ignored)<br />&nbsp; * LINALG flavor = netlib (libs: auto-detected)<br />&nbsp; * FFT&nbsp; &nbsp; flavor = none (libs: ignored)<br />&nbsp; * MATH&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * DFT&nbsp; &nbsp; flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)<br /><br />&#91;b&#93;When I did &quot;make&quot;, this was the message I got:&#91;/b&#93;<br /><br />make&nbsp; all-recursive<br />Making all in plugins<br />Making all in netcdf<br />make&#91;3&#93;: Nothing to be done for `all'.<br />Making all in etsf_io<br />make&#91;3&#93;: Nothing to be done for `all'.<br />Making all in libxc<br />make -f ../../plugins/libxc/libxc.mk <br />libxc-1.0 has been uncompressed.<br />touch patches-stamp<br />libxc-1.0 has been patched.<br />cd libxc-1.0 &amp;&amp; \<br />&nbsp; &nbsp; CPP=&quot;/usr/local/gfortran/bin/gcc -E&quot; \<br />&nbsp; &nbsp; CPPFLAGS=&quot;&quot; \<br />&nbsp; &nbsp; CC=&quot;/usr/local/gfortran/bin/gcc&quot; \<br />&nbsp; &nbsp; CFLAGS=&quot;-g -O2 -mtune=native -march=native -mfpmath=sse&nbsp; &quot; \<br />&nbsp; &nbsp; FCCPP=&quot;cpp &quot; \<br />&nbsp; &nbsp; FC=&quot;/usr/local/gfortran/bin/gfortran&quot; \<br />&nbsp; &nbsp; FCLIBS=&quot;&quot; \<br />&nbsp; &nbsp; LIBS=&quot;&quot; \<br />&nbsp; &nbsp; FCFLAGS=&quot;-ffree-form -g -ffree-line-length-none&nbsp; -O2 -mtune=native -march=native -mfpmath=sse&quot; \<br />&nbsp; &nbsp; ./configure \<br />&nbsp; &nbsp;&nbsp; --prefix=&quot;/Users/nikhilsivadas/Downloads/abinit-6.10.3/plugins/libxc/tmp&quot; \<br />&nbsp; &nbsp;&nbsp; --enable-fortran --disable-shared<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... ./install-sh -c -d<br />checking for gawk... no<br />checking for mawk... no<br />checking for nawk... no<br />checking for awk... awk<br />checking whether make sets $(MAKE)... yes<br />checking build system type... i386-apple-darwin10.6.0<br />checking host system type... i386-apple-darwin10.6.0<br />checking for style of include used by make... GNU<br />checking for gcc... /usr/local/gfortran/bin/gcc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether /usr/local/gfortran/bin/gcc accepts -g... yes<br />checking for /usr/local/gfortran/bin/gcc option to accept ISO C89... none needed<br />checking dependency style of /usr/local/gfortran/bin/gcc... gcc3<br />checking for a sed that does not truncate output... /usr/bin/sed<br />checking for grep that handles long lines and -e... /usr/bin/grep<br />checking for egrep... /usr/bin/grep -E<br />checking for fgrep... /usr/bin/grep -F<br />checking for ld used by /usr/local/gfortran/bin/gcc... /usr/bin/ld<br />checking if the linker (/usr/bin/ld) is GNU ld... no<br />checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm<br />checking the name lister (/usr/bin/nm) interface... rm: conftest.dSYM: is a directory<br />BSD nm<br />checking whether ln -s works... yes<br />checking the maximum length of command line arguments... 196608<br />checking whether the shell understands some XSI constructs... yes<br />checking whether the shell understands &quot;+=&quot;... yes<br />checking for /usr/bin/ld option to reload object files... -r<br />checking for objdump... no<br />checking how to recognize dependent libraries... pass_all<br />checking for ar... ar<br />checking for strip... strip<br />checking for ranlib... ranlib<br />checking command to parse /usr/bin/nm output from /usr/local/gfortran/bin/gcc object... rm: conftest.dSYM: is a directory<br />ok<br />checking for dsymutil... dsymutil<br />checking for nmedit... nmedit<br />checking for lipo... lipo<br />checking for otool... otool<br />checking for otool64... no<br />checking for -single_module linker flag... yes<br />checking for -exported_symbols_list linker flag... yes<br />checking how to run the C preprocessor... /usr/local/gfortran/bin/gcc -E<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking for dlfcn.h... yes<br />checking for objdir... .libs<br />checking if /usr/local/gfortran/bin/gcc supports -fno-rtti -fno-exceptions... no<br />checking for /usr/local/gfortran/bin/gcc option to produce PIC... -fno-common -DPIC<br />checking if /usr/local/gfortran/bin/gcc PIC flag -fno-common -DPIC works... yes<br />checking if /usr/local/gfortran/bin/gcc static flag -static works... no<br />checking if /usr/local/gfortran/bin/gcc supports -c -o file.o... yes<br />checking if /usr/local/gfortran/bin/gcc supports -c -o file.o... (cached) yes<br />checking whether the /usr/local/gfortran/bin/gcc linker (/usr/bin/ld) supports shared libraries... yes<br />checking dynamic linker characteristics... darwin10.6.0 dyld<br />checking how to hardcode library paths into programs... immediate<br />checking whether stripping libraries is possible... yes<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... no<br />checking whether to build static libraries... yes<br />checking for gcc... (cached) /usr/local/gfortran/bin/gcc<br />checking whether we are using the GNU C compiler... (cached) yes<br />checking whether /usr/local/gfortran/bin/gcc accepts -g... (cached) yes<br />checking for /usr/local/gfortran/bin/gcc option to accept ISO C89... (cached) none needed<br />checking dependency style of /usr/local/gfortran/bin/gcc... (cached) gcc3<br />checking whether /usr/local/gfortran/bin/gcc and cc understand -c and -o together... yes<br />checking for inline... inline<br />checking for ANSI C header files... (cached) yes<br />checking for working alloca.h... yes<br />checking for alloca... yes<br />checking size of void*... 4<br />checking whether we are using the GNU Fortran compiler... yes<br />checking whether /usr/local/gfortran/bin/gfortran accepts -g... yes<br />checking whether we are using the GNU Fortran compiler... (cached) yes<br />checking whether /usr/local/gfortran/bin/gfortran accepts -g... (cached) yes<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... no<br />checking whether to build static libraries... yes<br />checking for /usr/local/gfortran/bin/gfortran option to produce PIC... -fno-common<br />checking if /usr/local/gfortran/bin/gfortran PIC flag -fno-common works... yes<br />checking if /usr/local/gfortran/bin/gfortran static flag -static works... no<br />checking if /usr/local/gfortran/bin/gfortran supports -c -o file.o... yes<br />checking if /usr/local/gfortran/bin/gfortran supports -c -o file.o... (cached) yes<br />checking whether the /usr/local/gfortran/bin/gfortran linker (/usr/bin/ld) supports shared libraries... yes<br />checking dynamic linker characteristics... darwin10.6.0 dyld<br />checking how to hardcode library paths into programs... immediate<br />checking for Fortran flag to compile .f90 files... none<br />configure: Using FCFLAGS=&quot;-ffree-form -g -ffree-line-length-none&nbsp; -O2 -mtune=native -march=native -mfpmath=sse&quot;<br />checking how to get verbose linking output from /usr/local/gfortran/bin/gfortran... -v<br />checking for Fortran libraries of /usr/local/gfortran/bin/gfortran...&nbsp; -L/usr/local/gfortran/lib/gcc/i686-apple-darwin10/4.6.1 -L/usr/local/gfortran/lib/gcc/i686-apple-darwin10/4.6.1/../../.. -lgfortran -lquadmath -lm<br />checking for dummy main to link with Fortran libraries... none<br />checking for Fortran name-mangling scheme... lower case, underscore, no extra underscore<br />checking whether the compiler accepts very long lines... yes<br />checking whether the compiler accepts &quot;line-number&quot; lines cast by the preprocessor... yes<br />checking fortran 90 modules extension... mod<br />checking for the size of a Fortran integer... rm: intsizetest.x.dSYM: is a directory<br />4 bytes<br />checking for which C type corresponds to Fortran integer... rm: ccfortranint.x.dSYM: is a directory<br />int<br />configure: creating ./config.status<br />config.status: creating Makefile<br />config.status: creating src/Makefile<br />config.status: creating testsuite/Makefile<br />config.status: creating build/Makefile<br />config.status: creating build/libxc.pc<br />config.status: creating build/libxc.spec<br />config.status: creating config.h<br />config.status: config.h is unchanged<br />config.status: executing depfiles commands<br />config.status: executing libtool commands<br />touch configure-stamp<br />libxc-1.0 has been configured.<br />rm -f libxc-1.0/src/libxc.f90<br />cd libxc-1.0/src &amp;&amp; make libxc.f90 \<br />&nbsp; &nbsp; AM_CPPFLAGS=&quot;-P -std=c99&quot;<br />cpp&nbsp; &nbsp;-P -std=c99 ./libxc_master.F90 &gt; ../src/libxc.f90<br />cd libxc-1.0 &amp;&amp; make<br />make&nbsp; all-recursive<br />Making all in build<br />make&#91;7&#93;: Nothing to be done for `all'.<br />Making all in src<br />make&nbsp; all-am<br />/bin/sh ../libtool&nbsp; --tag=FC --tag=F77&nbsp; --mode=compile /usr/local/gfortran/bin/gfortran&nbsp; -ffree-form -g -ffree-line-length-none&nbsp; -O2 -mtune=native -march=native -mfpmath=sse -c -o libxc_la-libxc.lo&nbsp; `test -f 'libxc.f90' || echo './'`libxc.f90<br />libtool: ignoring unknown tag F77<br />libtool: compile:&nbsp; /usr/local/gfortran/bin/gfortran -ffree-form -g -ffree-line-length-none -O2 -mtune=native -march=native -mfpmath=sse -c libxc.f90 -o libxc_la-libxc.o<br />libxc.f90:30:<br /><br />module xc_f90_ ## types_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:34.17:<br /><br />&nbsp; integer, public, parameter :: xc_f90_kind = selected_real_kind(14)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PUBLIC attribute at (1) is not allowed outside of the specification part of a module<br />libxc.f90:37.2:<br /><br />&nbsp; type xc_f90_ ## pointer_t<br />&nbsp; 1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:38.11:<br /><br />&nbsp; &nbsp; private<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PRIVATE statement at (1) is only allowed in the specification part of a module<br />libxc.f90:40.5:<br /><br />&nbsp; end type xc_f90_ ## pointer_t<br />&nbsp; &nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:42.3:<br /><br />end module xc_f90_ ## types_m<br />&nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:46:<br /><br />module xc_f90_ ## lib_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:48.13:<br /><br />&nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:49.19:<br /><br />&nbsp; use libxc_funcs_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />libxc.f90:39.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: USE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:51.15:<br /><br />&nbsp; implicit none<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />libxc.f90:39.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: IMPLICIT NONE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:53.8:<br /><br />&nbsp; public<br />&nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: PUBLIC statement at (1) is only allowed in the specification part of a module<br />libxc.f90:95.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_number(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Expected formal argument list in function definition at (1)<br />libxc.f90:96.17:<br /><br />&nbsp; &nbsp; &nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:97.6:<br /><br />&nbsp; &nbsp; &nbsp; type(xc_f90_ ## pointer_t), intent(in) :: info<br />&nbsp; &nbsp; &nbsp; 1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:98.7:<br /><br />&nbsp; &nbsp; end function xc_f90_ ## info_number<br />&nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Expecting END INTERFACE statement at (1)<br />libxc.f90:100.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_kind(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Internal Error at (1):<br />insert_bbt(): Duplicate key found!<br />make&#91;8&#93;: *** &#91;libxc_la-libxc.lo&#93; Error 1<br />make&#91;7&#93;: *** &#91;all&#93; Error 2<br />make&#91;6&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;5&#93;: *** &#91;all&#93; Error 2<br />make&#91;4&#93;: *** &#91;build-stamp&#93; Error 2<br />make&#91;3&#93;: *** &#91;package-ready&#93; Error 2<br />make&#91;2&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br /> After this &quot;make testin_1&quot; is not working:<br /><br />echo &quot;Running built-in test in_1&quot;<br />Running built-in test in_1<br />cd tests ; /usr/bin/perl .././tests/Scripts/run-basic-tests.pl built-in in_1 /Users/nikhilsivadas/Downloads/abinit-6.10.3<br />sh: ../../../src/98_main/abinit: No such file or directory<br /><br />Please advise on what to do,<br />Thank you</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 30, 2012 1:16 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">export PATH=/usr/local/gfortran/bin:$PATH if not done already and add FCCPP=/usr/local/gfortran/bin/cpp to configure flags</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Thu Jan 10, 2013 7:08 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Hello, I'm attempting to compile abinit 7.0.4 on OSX Mountain Lion, and I ran into the same issue nikhilsd was having. I was able to get past that compiler error using the configure flags suggested, but I have run into another error that I do not know how to resolve.<br /><br />I'm running configure with the following options:<br />CC=/usr/local/gfortran/bin/gcc FCCPP=/usr/local/gfortran/bin/cpp --enable-mpi --with-mpi-prefix=/usr/local/Cellar/open-mpi/1.6.3<br /><br />Here are the last couple lines of output from the compiler:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Basics:<br />&nbsp; Prefix:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports<br />&nbsp; Fortran90 compiler:&nbsp; &nbsp; &nbsp;gfortran<br />&nbsp; Fortran90 flags:&nbsp; &nbsp; &nbsp; &nbsp; -ffree-form -g -ffree-line-length-none&nbsp; &nbsp;-O2 -mtune=native -march=native -mfpmath=sse -g -O2 -I/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include -I/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include <br />&nbsp; Linker flags:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; Linked libraries:&nbsp; &nbsp; &nbsp; &nbsp;-L/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/lib -lnetcdf -L/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/lib -lnetcdf <br />&nbsp; Installed module dir:&nbsp; &nbsp;/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include<br />&nbsp; Installed lib dir:&nbsp; &nbsp; &nbsp; /Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/lib<br />&nbsp; Installed doc dir:&nbsp; &nbsp; &nbsp; ${datarootdir}/doc/${PACKAGE_TARNAME}<br /><br />cd sources/etsf_io-1.0.4 &amp;&amp; make -j 4 <br />Making all in src/low_level<br />gfortran -I/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include -I. -ffree-form -g -ffree-line-length-none&nbsp; &nbsp;-O2 -mtune=native -march=native -mfpmath=sse -g -O2 -I/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include -I/Users/michalplucinski/Downloads/abinit-7.0.4/tmp/fallbacks/exports/include&nbsp; -c -o etsf_io_low_level.o&nbsp; etsf_io_low_level.f90<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:115:no such instruction: `vmovsd (%rsi), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:129:no such instruction: `vmulsd (%rax), %xmm0,%xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:131:no such instruction: `vmovsd %xmm1, (%rax)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:148:no such instruction: `vmovsd (%rsi), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:174:no such instruction: `vmulsd (%rdx), %xmm0,%xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:176:no such instruction: `vmovsd %xmm1, (%rdx)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:207:no such instruction: `vmovsd (%rsi), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:252:no such instruction: `vmulsd (%rdx), %xmm0,%xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:254:no such instruction: `vmovsd %xmm1, (%rdx)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:294:no such instruction: `vmovsd (%rsi), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:350:no such instruction: `vmulsd (%rdx), %xmm0,%xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:352:no such instruction: `vmovsd %xmm1, (%rdx)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:401:no such instruction: `vmovsd (%rsi), %xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:483:no such instruction: `vmulsd (%rax), %xmm1,%xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:485:no such instruction: `vmovsd %xmm0, (%rax)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:548:no such instruction: `vmovsd (%rsi), %xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:645:no such instruction: `vmulsd (%rax), %xmm1,%xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:647:no such instruction: `vmovsd %xmm0, (%rax)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:699:no such instruction: `vmovsd (%rsi), %xmm1'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:839:no such instruction: `vmulsd (%rax), %xmm1,%xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:841:no such instruction: `vmovsd %xmm0, (%rax)'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:37272:no such instruction: `vmovss 1336(%rsp), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:37277:no such instruction: `vucomiss (%r15), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:37550:no such instruction: `vucomiss LC152(%rip), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:37841:no such instruction: `vmovss LC157(%rip), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:37845:no such instruction: `vucomiss 0(%rbp), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:38288:no such instruction: `vmovss LC157(%rip), %xmm0'<br />/var/folders/sy/tn179p_x5vz2x4pqpwfx_bg80000gn/T//ccgcglTn.s:38289:no such instruction: `vucomiss 0(%rbp), %xmm0'<br />make&#91;5&#93;: *** &#91;etsf_io_low_level.o&#93; Error 1<br />make&#91;4&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;3&#93;: *** &#91;stamps/etsf_io-build-stamp&#93; Error 2<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2</code></pre></div><br /><br />Any help with this error would be much appreciated! <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br />Thanks!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Sun Jan 13, 2013 6:20 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Looks like you installed a version of GCC compiled for another architecture.<br /><br />Try to configure with the following options: --enable-optim=&quot;yes&quot; CFLAGS_OPTIM=&quot;-O2&quot; FCFLAGS_OPTIM=&quot;-O2&quot;.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 6:35 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Thank you very much for your help.  I managed to compile and install abinit with the settings you recommended.  However, when running make tests_min and tests_acc, I am getting a lot of &quot;Segmentation fault: 11&quot; errors.<br /><br />How can I check the version of GCC that is being used, if it is compiled for another architecture.  I installed a version of gfortran recently, but it used a default osx installer. Perhaps it is an issue with using mountain lion if the installer was for lion?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 6:46 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hi Michal,<br /><br />The sad story is that Apple provided backend assembler (a deprecated &quot;as&quot;) doesn't generate AVX instructions although Apple manufactures computers with AVX enabled processors. I assume that you installed fortran compiler binaries that are by default hard linked to the the culprit /usr/bin/as ... that's the reason why many &quot;net&quot; provided compilers execs fail even if you have a good assembler in your path.<br />Yann's suggestion may work i.e. to disable the native optimizations at the price of a slight speed penalty ... I would be delighted to know if it does in order to amend the config files.<br />If it doesn't, you may have success by trying to first export AS=&quot;clang -x assembler&quot; which will use the build-in assembler of clang but I'm not sure that your fortran compiler follows the AS environment variable directive. Another solution would be to install macports gcc46 or gcc47 compiler suite (or homebrew) that uses a recent version of the binutils.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 6:54 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Regarding the segfaults, would you be so kind to paste here the output of an <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>otool -L abinit</code></pre></div>where abinit points to the location of the abinit binary (it should live in src/98_main/...). I wouldn't be surprised if there were references to Apple vecLib BLAS or LAPACK.<br />If it does, you may have success with the --with-linalg-flavor=&quot;none&quot; ... at a significant performance penalty.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 7:11 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Hello Alain,<br /><br />Here are the results of running otool, LAPACK and BLAS are mentioned as you suspected.<br />Michals-MacBook-Pro:98_main michalplucinski$ otool -L abinit<br />abinit:<br />	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib (compatibility version 1.0.0, current version 1.0.0)<br />	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib (compatibility version 1.0.0, current version 1.0.0)<br />	/usr/local/lib/libmpi_f77.1.dylib (compatibility version 2.0.0, current version 2.6.0)<br />	/usr/local/lib/libmpi.1.dylib (compatibility version 2.0.0, current version 2.6.0)<br />	/usr/local/gfortran/lib/libgfortran.3.dylib (compatibility version 4.0.0, current version 4.0.0)<br />	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)<br />	/usr/local/gfortran/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)<br />	/usr/local/gfortran/lib/libquadmath.0.dylib (compatibility version 1.0.0, current version 1.0.0)<br /><br />Should I attempt to recompile and install abinit with a homebrew or macports provided compiler?<br /><br />Thank you very much for your help,<br />Michal</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 7:15 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">It's not a problem with the installer. The AVX problem comes from the gfortran binaries compiled with the default /usr/bin/as that is outdated.<br />The segfault problem has another origin ... my assumptions are either a wrong BLAS/LAPACK detection (otool will tell) or a ZDOTx bug. No need to run the whole test suite to figure out; a make tests_v1 already shows a bunch of segfaults.<br /><br />... follow-up in a few minutes <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 7:36 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Should I recompile with the setting --with-linalg-flavor=&quot;none&quot; or do I have any other options that would have lower performance penalties?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 7:52 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">The situation is tricky ...<br />First of all you (well, abinit configure linalg routines) have fished for the vecLib BLAS and LAPACK that are buggy (and not supporting Fortran) as you can see in the first two lines of otool output.<br /><br />Now if I suggest to switch to macports, you'll be in trouble with the MPI libraries you installed in /usr/local (that are autodetected too) because they are calling your /usr/local/gfortran/bin/gfortran backend. So in order to switch to macports, you'll need to install several packages i.e. gcc47, openmpi (the gcc47 variant of openmpi i.e. specify port install openmpi +gcc47) and atlas (the gcc47 variant of atlas package i.e. specify port install atlas +gcc47). And then configure abinit with the right options to avoid the autodetection nightmare i.e. --with-mpi-prefix=/opt/local --with-linalg-flavor=&quot;atlas&quot; --with-linalg-libs=&quot;-L/opt/local/lib -llapack -lcblas -lf77blas -latlas&quot; (add Yann's suggestions to get rid of the mfpmath setting). Please check the messages at the end of the configure step that the intended libraries are effectively used.<br />All this can take some time especially if macports doesn't find pre-compiled packages for your OSX version - you'll need a suitable xcode too if not already installed)<br /><br />The fastest way to build an abinit binary with what you already have on your system is to use --with-linalg-flavor=&quot;none&quot; to force the use of the build-in linalg package at the price of a speed penalty. Please check again the end of the configure step and the abinit binary after the make with otool that there are no reference to the vecLib framework.<br />The tests_v1 is enough to test for a segfault.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 8:04 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">I recompiled with the setting --with-linalg-flavor=&quot;none&quot;, and that seems to have gotten rid of the seg faults.  Running tests_v1, the majority complete in 0-3 seconds, with the longest taking 23 seconds and the 2nd longest 7s.  Would you think it's worth it to recompile with a different version of gcc, how significant a performance increase would I see?<br />The version of open-mpi I'm using is provided by homebrew, and was installed using the homebrew provided gfortran complier, not the default OSX one.  If I was to recompile abinit from scratch, would it make sense to link to that compiler, or would switching to macports make more sense? I do have xcode installed with command line tools enabled.<br /><br />Thanks,<br />Michal</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 8:43 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">It's difficult to estimate the performance gain because it is very related to the kind of problem i.e. the part of the code you're running and the way you run it. For example, if you study large systems with little k-point sets, the k-point parallelization will be poor and you'll benefit from atlas multithreading capabilities. The most efficient optimization would be to use FFTW3 library - its performance in terms of speed is much better that the internal FFT. Unfortunately, fftw3 distributed by macports disables its fortran support so you'll need to build your own FFTW3 libraries to work with abinit. So is it suitable to use a laptop for large production work that will benefit from speed optimization and, if yes, it would be advisable to complement the macports installation with another external fftw3.<br />But yes, developers devote a significant time to adapt Abinit to optimized libraries because it provides a significant speed gain (... thanks Matteo).<br /><br />Now I read that you're a user of homebrew. I have no experience with it but it looks a very well maintained project. So I assume that you can also add to your existing homebrew installation optimized BLAS/LAPACK (atlas or gotoblas or openblas) and optimized FFT (but check that homebrew doesn't disable fortran support as macports does - for very stupid reasons) libs. And you'll have to adapt the configure options I gave (and add --with-fftw-flavor=&quot;fftw3&quot; --with-fft-libs=&quot;-L/usr/local/lib/fftw -lfftw3&quot; ... check the -L param, I don't know where homebrew stores fftw3 libs, as written here you should have a /usr/local/lib/fftw/libfftw3.dylib file).<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 8:45 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Don't mix homebrew with macports. They have many duplicates so installing both will be a source of many problems. Again homebrew should provide similar packages as macports.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 8:57 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Look <a href="http://braumeister.org/search" class="postlink">http://braumeister.org/search</a> for clues ... I see a suitable fftw but no optimized lapack/blas in homebrew - it would be a pity. If it is true, I don't regret my macports installation.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 9:10 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">homebrew does have openblas, does that also include lapack or would I need another package for that? It also has a separate lapack package.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 9:53 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Here are the settings I am using:<br /><br />FC=usr/local/bin/gfortran/ CC=/usr/local/gfortran/bin/gcc FCCPP=/usr/local/gfortran/bin/cpp --enable-mpi=&quot;yes&quot; --enable-optim=&quot;yes&quot; CFLAGS_OPTIM=&quot;-O2&quot; FCFLAGS_OPTIM=&quot;-O2&quot; --with-mpi-prefix=&quot;/usr/local/Cellar/open-mpi/1.6.3&quot; --with-fft-flavor=&quot;fftw3&quot; --with-fft-libs=&quot;-L/usr/local/Cellar/fftw/3.3.2/lib -lfftw3&quot; --with-linalg-flavor=&quot;goto&quot; --with-linalg-libs=&quot;-L/usr/local/Cellar/openblas/0.2.5/lib -lopenblas&quot;<br /><br />I have gotten openblas and fftw through home-brew, but configure is giving me an error that actual fft support is broken and the specified libraries do not work. I presume this means I need to compile my own version of fftw and is related to a lack of fortran support?  Blas and lapack are both supported according to configure.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 11:38 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Could you post the section of config.log where the build system reports that the fftw3 support is broken?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Mon Jan 14, 2013 11:57 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content"><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>configure:33167: checking for the requested FFT support<br />configure:33169: result: fftw3<br />configure:33571: /Users/michalplucinski/Downloads/abinit-7.0.4/tmp/config/wrappers/wrap-mpiLFC -o conftest&nbsp; -g -ffree-line-length-none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;conftest.F90 -L/usr/local/Cellar/fftw/3.3.2/lib -lfftw3 -L/usr/local/Cellar/fftw/3.3.2/lib -lfftw3&nbsp; &nbsp; &nbsp; &nbsp;&gt;&amp;5<br />Undefined symbols for architecture x86_64:<br />&nbsp; &quot;_dfftw_execute_&quot;, referenced from:<br />&nbsp; &nbsp; &nbsp; _MAIN__ in ccVCae52.o<br />ld: symbol(s) not found for architecture x86_64<br />collect2: ld returned 1 exit status<br />configure:33571: $? = 1<br />configure: failed program was:<br />|&nbsp; &nbsp; &nbsp; &nbsp;program main<br />|<br />|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;call dfftw_execute<br />|<br />|&nbsp; &nbsp; &nbsp; &nbsp;end<br />configure:34275: checking for the actual FFT support<br />configure:34277: result: broken<br />configure:34322: error: the specified FFT libraries do not work</code></pre></div><br /><br />Here it is</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Tue Jan 15, 2013 10:20 am</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Your fftw3 library does not provide the Fortran binding dfftw_execute.<br />I suggest to compile your version of fftw3 from source</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Tue Jan 15, 2013 3:06 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hi Michal, Matteo<br /><br />I had a look on the homebrew ruby script that is used to build its fftw package (at <!-- m --><a class="postlink" href="https://github.com/mxcl/homebrew/blob/master/Library/Formula/fftw.rb">https://github.com/mxcl/homebrew/blob/m ... la/fftw.rb</a><!-- m -->)<br />It says:<br />...<br />args &lt;&lt; &quot;--disable-fortran&quot; unless which 'gfortran'<br />...<br />So you should have fortran support unless you have installed fftw before fortran (or gfortran is not in your path). Would you be so kind to try again<br /><br />without the FC=usr/local/bin/gfortran/ CC=/usr/local/gfortran/bin/gcc  part; it's the MPI wrappers that should call the right compilers (furthermore FC setting is wrong here)<br />with an export PATH=/usr/local/gfortran/bin:/usr/local/Cellar/open-mpi/1.6.3/bin:$PATH before the configure command<br />and with an export DYLD_LIBRARY_PATH=/usr/local/Cellar/open-mpi/1.6.3/lib:/usr/local/Cellar/fftw/3.3.2/lib:/usr/local/Cellar/openblas/0.2.5/lib:$DYLD_LIBRARY_PATH before configure<br /><br />Do you have a file named /usr/local/Cellar/fftw/3.3.2/lib/libfftw3f.dylib or similar?<br />Would you please add the output of nm /usr/local/Cellar/fftw/3.3.2/lib/libfftw3.3.dylib |grep dfftw_execute ... if it says T _dfftw_execute_ then it is fine.<br /><br />and yes, if you look at <!-- m --><a class="postlink" href="https://github.com/Homebrew/homebrew-science/blob/master/openblas.rb">https://github.com/Homebrew/homebrew-sc ... penblas.rb</a><!-- m --> your openblas comes with full lapack. The other lapack package is probably the plain netlib one so don't mix them.<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Tue Jan 15, 2013 6:09 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">I do indeed have the file libfftw3f.dylib.  When I search the output of nm libfftw3.3.dylib, I can find T _fftw_execute_ but dfftw cannot be found. <br /><br />I get the same error after removing FC and CC and adding the two lines to my path and library path before running configure.<br /><br />I attempted to reinstall fftw now that I know gfortran is in the path, but it didn't make any difference.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Wed Jan 16, 2013 12:37 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hi Michal,<br /><br />I just installed fftw-3.3.3 (I was using 3.3.2 before) with the following configuration ...<br />./configure --prefix=/opt/fftw-3.3.3 --enable-sse2 --enable-shared CC=/opt/gcc-4.6/bin/gcc-4.6 CPP=/opt/gcc-4.6/bin/cpp-4.6 F77=/opt/gcc-4.6/bin/gfortran-4.6<br /><br />and a nm /opt/fftw-3.3.3/lib/libfftw3.3.dylib |grep dfftw_execute outputs 00000000000d1b60 T _dfftw_execute_ which means that the function is there and is defined. Try something similar by adapting prefix, CC, CPP and F77 to your own system and it should work. Do not forget to clean the reference to homebrew fftw from your DYLD_LIBRARY_PATH variable.<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Wed Jan 16, 2013 5:02 pm</strong></div>
				<div class="author">by <strong>MichalP</strong></div>
				<div class="content">Thank you, installing fftw from source worked.<br /><br />Here is the summary from configure:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Summary of important options:<br /><br />&nbsp; * C compiler&nbsp; &nbsp; &nbsp; : gnu version <br />&nbsp; * Fortran compiler: gnu version 4.6<br />&nbsp; * architecture&nbsp; &nbsp; :&nbsp; &nbsp;( bits)<br /><br />&nbsp; * debugging&nbsp; &nbsp; &nbsp; &nbsp;: basic<br />&nbsp; * optimizations&nbsp; &nbsp;: yes<br /><br />&nbsp; * OpenMP enabled&nbsp; : no (collapse: ignored)<br />&nbsp; * MPI&nbsp; &nbsp; enabled&nbsp; : yes<br />&nbsp; * MPI-IO enabled&nbsp; : yes<br />&nbsp; * GPU&nbsp; &nbsp; enabled&nbsp; : no (none)<br /><br />&nbsp; * TRIO&nbsp; &nbsp;flavor = netcdf-fallback+etsf_io-fallback<br />&nbsp; * TIMER&nbsp; flavor = abinit (libs: ignored)<br />&nbsp; * LINALG flavor = netlib-fallback (libs: ignored)<br />&nbsp; * ALGO&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * FFT&nbsp; &nbsp; flavor = fftw3 (libs: user-defined)<br />&nbsp; * MATH&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * DFT&nbsp; &nbsp; flavor = libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br /><br />LINALG is set to netlib, not openblas as I set it.<br /><br />Here are my configure options:<br />../configure FCCPP=/usr/local/gfortran/bin/cpp --enable-mpi=&quot;yes&quot; --enable-optim=&quot;yes&quot; CFLAGS_OPTIM=&quot;-O2&quot; FCFLAGS_OPTIM=&quot;-O2&quot; --with-mpi-prefix=&quot;/usr/local/Cellar/open-mpi/1.6.3&quot; --with-fft-flavor=&quot;fftw3&quot; --with-fft-libs=&quot;-L/usr/local/fftw-3.3.3/lib -lfftw3&quot; --with-linalg-flavor=&quot;goto&quot; --with-linalg-libs=&quot;-L/usr/local/Cellar/openblas/0.2.5/lib -llapack -lcblas -lf77blas -latlas -lopenblas&quot;<br /><br />What should I do to ensure LINALG is set properly?<br /><br />Here is the selection of configure output pertaining to linear algebra support:<br /><br />checking for the requested linear algebra support... goto<br />checking whether to select a fallback for linear algebra... no<br />checking for BLAS support in specified libraries... no<br />checking for AXPBY support in specified BLAS libraries... no<br />checking for gemm3m in specified libraries... no<br />checking for mkl_imatcopy in specified libraries... no<br />checking for mkl_omatcopy in specified libraries... no<br />checking for mkl_omatadd in specified libraries... no<br />checking for LAPACK support in specified libraries... no<br />checking for BLACS support in specified libraries... no<br />checking for ScaLAPACK support in specified libraries... no<br />checking for MAGMA (version&gt;=1.1.0) support in specified libraries... checking TEST... no<br />checking whether we have a serial linear algebra support... no<br />configure: WARNING: falling back to internal linear algebra libraries<br />checking whether we have a MPI linear algebra support... no<br />checking whether we have a GPU linear algebra support... no<br />checking for the actual linear algebra support... netlib-fallback<br /></code></pre></div><br />For some reason LAPACK and BLAS support is not present in these libraries.  How can I double check what is supported in the openblas libraries?<br /><br />Thanks,<br />Michal</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: abinit-6.10.3 error message with make command</h3>
				<div class="date">Posted: <strong>Wed Jan 16, 2013 5:37 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Hello Michal,<br /><br />In order to understand what's  going wrong, we need the section of config.log <br />that checks for the presence of BLAS and LAPACK routines in your libraries.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>2</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1514&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:17:01 GMT -->
</html>
