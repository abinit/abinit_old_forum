<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=10340 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:13:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>sharing .ac config and install files on supercomputers - ABINIT Discussion Forums</title>


	<link rel="canonical" href="viewtopice1e2.html?t=3389">

<!--
	phpBB style name: Flat Style
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      Ian Bradley
-->

<link href="assets/css/font-awesome.minaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/stylesheetaea1.css?assets_version=57" rel="stylesheet">
<link href="styles/flat-style/theme/en/stylesheetaea1.css?assets_version=57" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/flat-style/theme/tweaks.css?assets_version=57" rel="stylesheet">
<![endif]-->

<meta name="google-site-verification" content="PLdTN48UENWHvJ5ViWhDTahZKzoMyw5e1QZgw1IECVw" />
<link rel="alternate" type="application/atom+xml" title="ATOM" href="app.php/smartfeed/feed.html" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="app.php/smartfeed/feed9830.html?y=2" />

<link href="ext/crizzo/aboutus/styles/prosilver/theme/aboutusaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/dmzx/topicageday/styles/prosilver/theme/topicagedayaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/clock/styles/all/theme/clockaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/hifikabin/googlesearch/styles/prosilver/theme/googlesearchaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/kinerity/bestanswer/styles/prosilver/theme/bestansweraea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbb/collapsiblecategories/styles/all/theme/collapsiblecategoriesaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/phpbbservices/smartfeed/styles/prosilver/theme/customaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/senky/userstatistics/styles/prosilver/theme/userstatisticsaea1.css?assets_version=57" rel="stylesheet" media="screen" />
<link href="ext/tierra/topicsolved/styles/prosilver/theme/buttonsaea1.css?assets_version=57" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description">
				<a id="logo" class="logo" href="index-2.html" title="Board index"><span class="site_logo"></span></a>
				<div  class="site-description">
					<h1>ABINIT Discussion Forums</h1>
					<p>The meeting place for ABINIT users and developers</p>
					<p class="skiplink"><a href="#start_here">Skip to content</a></p>
				</div>
			</div>

			</div>
					</div>
				<div class="navbar navbar-top" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
																									<li>
								<a href="search33a7.html?search_id=unanswered" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="search526f.html?search_id=active_topics" role="menuitem">
									<i class="icon fa-file fa-fw" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="search.html" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
										
										<li class="separator"></li>

									</ul>
			</div>
		</li>

			<li class="small-icon icon-smartfeed no-bulletin"><a href="app.php/smartfeed/ui.html">Smartfeed</a></li>		<li data-skip-responsive="true">
			<a href="app.php/help/faq.html" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Main Site</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://www.abinit.org/packages" title="" role="menuitem" target="_blank">
				<i class="icon fa-download fa-fw" aria-hidden="true"></i><span>Download</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/" title="" role="menuitem" target="_blank">
				<i class="icon fa-book fa-fw" aria-hidden="true"></i><span>Documentations</span>
				</a>
			</li>
								<li data-last-responsive="true">
				<a href="https://docs.abinit.org/tutorial/" title="" role="menuitem" target="_blank">
				<i class="icon fa-graduation-cap fa-fw" aria-hidden="true"></i><span>Tutorials</span>
				</a>
			</li>
							
			<li class="rightside"  data-skip-responsive="true">
			<a href="ucp26c3.html?mode=login" title="Login" accesskey="x" role="menuitem">
				<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Login</span>
			</a>
		</li>
						</ul>
    </div>
</div>

<div class="navbar" role="navigation">
	<div class="inner">
	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
								<li class="breadcrumbs" itemscope itemtype="http://schema.org/BreadcrumbList">
										<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope><a href="index-2.html" itemtype="https://schema.org/Thing" itemprop="item" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>
											<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="1"><a href="viewforum58da.html?f=1" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Building ABINIT</span></a><meta itemprop="position" content="2" /></span>
															<span class="crumb"  itemtype="http://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="3"><a href="viewforum4d6b.html?f=3" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Configuring and compiling ABINIT</span></a><meta itemprop="position" content="3" /></span>
												</li>
		<li class="rightside responsive-hide">
	<div id="show-clock">
		<div id="liveclock" class="outer_face">
			<div class="marker oneseven"></div>
			<div class="marker twoeight"></div>
			<div class="marker fourten"></div>
			<div class="marker fiveeleven"></div>
			<div class="inner_face">
				<div class="hand hour"></div>
				<div class="hand minute"></div>
				<div class="hand second"></div>
			</div>
		</div>
	</div>
</li><!--[if !IE]><!-->
<li id="g-search-box" class="search-box rightside responsive-hide">
	<form action="https://forum.abinit.org/app.php/googlesearch">
	<fieldset>
		<input name="cx" type="hidden" value="017804512478788106347:tlftx8kncg4">
		<input name="q" type="search" maxlength="255" class="inputbox search tiny" value="" placeholder="Google Search ...">
		<button class="button button-search-google" type="submit" name="sitesearch" title="Google Search">
		<i class="icon fa-search fa-fw" aria-hidden="true"></i>
		</button>
	</fieldset>
</form>
</li>
<!--<![endif]-->

							<li id="search-box" class="rightside search-box responsive-hide" role="search">
				<form action="https://forum.abinit.org/search.php" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="search" maxlength="128" title="Search for keywords" class="inputbox search tiny" size="20" value="" placeholder="Search…" />
					<button class="button button-search" type="submit" title="Search">
						<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
					</button>
					<a href="search.html" class="button button-search-end" title="Advanced search">
						<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
					</a>
					
				</fieldset>
				</form>
			</li>

			<li class="rightside responsive-search">
				<a href="search.html" title="View the advanced search options" role="menuitem">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</a>
			</li>
					</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
		﻿
<h2 class="topic-title"><a href="viewtopicf45f.html?f=3&amp;t=3389">sharing .ac config and install files on supercomputers</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">option, parallelism,...<br /></div>
<p>
	<strong>Moderators:</strong> <a href="memberlist5296.html?mode=viewprofile&amp;u=2740" class="username">fgoudreault</a>, <a href="memberlist7468.html?mode=viewprofile&amp;u=53" class="username">mcote</a>
</p>

	<div class="rules">
		<div class="inner">

					<strong>Forum rules</strong><br />
			Please have a look at ~abinit/doc/config/build-config.ac in the source package for detailed and up-to-date information about the configuration of Abinit 8 builds.<br>
For a video explanation on how to build Abinit 7.x for Linux, please go to: <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br>
<strong class="text-strong">IMPORTANT: when an answer solves your problem, please check the little green V-like button on its upper-right corner to accept it.</strong>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="postingda4c.html?mode=reply&amp;f=3&amp;t=3389" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicf2a6.html?f=3&amp;t=3389&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="https://forum.abinit.org/search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="search.html" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="3389" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p10329" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10329">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4380.html?author_id=1648&amp;sr=posts">7</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Aug 07, 2015 6:53 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10329">

						<h3 class="first"><a href="#p10329">sharing .ac config and install files on supercomputers</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting6446.html?mode=quote&amp;f=3&amp;p=10329" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic3861.html?p=10329#p10329" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a></strong> &raquo; </span>Fri Sep 30, 2016 11:33 pm
			</p>
			
			
			
			<div class="content">Does anyone have compile experience on any XSEDE supercomputers, and would be willing to share config files etc? I'm about to embark on installation on various computers, e.g. Stampede, Maverick, Jetstream, Comet, Gordon, OSG, Bridges, etc. But every computer will have its own challenges, so it seems like it would be sweet if the abinit community shared config/install files and notes on each of these, as I assume many users of those computers also use abinit. When I get working executables, I'd be willing to share too if there is interest. <br /><br />For now the first computer I'm looking at is Stampede, if anyone has suggestions as to mpi vs openmp for starters and anything else that may be useful. Here's a little info: <br /><!-- m --><a class="postlink" href="https://portal.tacc.utexas.edu/user-guides/stampede">https://portal.tacc.utexas.edu/user-guides/stampede</a><!-- m --><br /><br />On Stampede nodes, MPI applications can be launched solely on the E5 processors, or solely on the Phi coprocessors, or on both in a &quot;symmetric&quot; heterogeneous computing mode. For heterogeneous computing, an application is compiled for each architecture and the MPI launcher (&quot;ibrun&quot; at TACC) is modified to launch the executables on the appropriate processors according to the resource specification for each platform (number of tasks on the E5 component and the Phi component of a node).<br /><br />So, to use both the E5's and the Phi coprocessors, I will need to compile abinit on each separately, and somehow get ibrun to make them both work properly...<br /><br />So the Phi can run either MPI or openMP, but perhaps I should do something like offload a sharedmem part of the application to the co? Because, hey, 61 cores w/ 8GB. Well I guess you<br />could still do MPI, but maybe openmp would be better.<br /><br />abinit seems to expect MPI... openmp is still possible right? <br /><br />Any thoughts, suggestions, experience? Much thanks!<br /><br />-Ryan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10340" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10340">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4380.html?author_id=1648&amp;sr=posts">7</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Aug 07, 2015 6:53 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10340">

						<h3 ><a href="#p10340">stuck at libxc</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingcbc3-2.html?mode=quote&amp;f=3&amp;p=10340" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopicdf31.html?p=10340#p10340" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a></strong> &raquo; </span>Wed Oct 12, 2016 1:56 am
			</p>
			
			
			
			<div class="content">I'm stuck at the libxc compile, but here's what I have for now...<br /><br />modules I have loaded on Stampede:    1) intel/15.0.2   2) mvapich2/2.1   3) xalt/0.6   4) TACC   5) fftw3/3.3.4   6) gsl/1.16 (m)<br /><br />I would like to install abinit with atompaw/libxc, but I'm stuck at compiling libxc properly. Actually I don't notice the failure until I get to the abinit and atompaw compiles, but first things first...<br /><br />Install libxc:<br />  1. download<br />  2. ./configure CC=mpicc CFLAGS=-xhost CXX=mpicxx CXXFLAGS=-xhost FC=mpif90 FCFLAGS=-xhost &gt; config.out 2&gt; config.err &amp;<br />  3. make &gt; make.out 2&gt; make.err &amp;<br /><br />Everything seems to be fine. However both atompaw and abinit test libxc (and fail) with a line like the following:<br /><br />mpif90 -xhost -o conftest -g  -I/home1/03283/snowman/work/build/libxc/libxcmpif90/src -I/home1/03283/snowman/work/build/libxc/libxcmpif90 -O2 conftest.F90 -L/home1/03283/snowman/work/build/libxc/libxcmpif90/src/.libs -I/opt/apps/intel/15/composer_xe_2015.2.164/mkl/include -mkl=sequential -lxc<br /><br />where conftest.F90 is this:<br />       program main<br /><br />       use xc_f90_types_m<br />       use xc_f90_lib_m<br />       implicit none<br />       TYPE(xc_f90_pointer_t) :: xc_func<br />       TYPE(xc_f90_pointer_t) :: xc_info<br />       integer :: func_id = 1<br />       call xc_f90_func_init(xc_func, xc_info, func_id, XC_UNPOLARIZED)<br />       call xc_f90_func_end(xc_func)<br /><br />       end<br /><br /><br />which when I attempt to compile I get the error:<br />/tmp/ifortwruWXi.o: In function `main':<br />/work/03283/snowman/build/libxc/conftest.F90:9: undefined reference to `xc_f90_func_init_'<br />/work/03283/snowman/build/libxc/conftest.F90:10: undefined reference to `xc_f90_func_end_'<br />/usr/bin/ld: link errors found, deleting executable `conftest'<br /><br /><br />I've also tried compiling with gfortran and ifort and gotten identical results. I've also tried linking with -lxcf90 and with -lxcf03. And -lxcf90 gives a bunch more undefined reference errors. <br /><br />Any thoughts? I know I should maybe bring it to the libxc peeps, but thought I'd ask here since it's a failure that comes up in the abinit compile... Thanks much!<br /><br />-Ryan</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10350" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10350">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="searchdd2b.html?author_id=1180&amp;sr=posts">282</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue May 07, 2013 9:47 am</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10350">

						<h3 ><a href="#p10350">Re: sharing .ac config and install files on supercomputers</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingb889.html?mode=quote&amp;f=3&amp;p=10350" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic0005.html?p=10350#p10350" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist933d.html?mode=viewprofile&amp;u=1180" class="username">Jordan</a></strong> &raquo; </span>Thu Oct 13, 2016 8:36 am
			</p>
			
			
			
			<div class="content">Hi,<br /><br />You should indeed compile with -lxcf90 -lxc flags together and use -L/path/to/libxc/libraries<br />During the abinit configuration step this is set using<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--with-libxc-incs=&quot;-I/path/to/libxc/include&quot;<br />--with-libxc-libs=&quot;-L/path/to/libxc/libraries -lxcf90 -lxc&quot;<br /></code></pre></div><br /><br />Cheers</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10355" class="post has-profile bg1 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10355">
			<dt class="no-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search4380.html?author_id=1648&amp;sr=posts">7</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Aug 07, 2015 6:53 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10355">

						<h3 ><a href="#p10355">Re: sharing .ac config and install files on supercomputers</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="postingf044.html?mode=quote&amp;f=3&amp;p=10355" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopica1ae.html?p=10355#p10355" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlistf578.html?mode=viewprofile&amp;u=1648" class="username">snow</a></strong> &raquo; </span>Thu Oct 13, 2016 7:19 pm
			</p>
			
			
			
			<div class="content">Hi Jordan, thanks for the reply. I'll see if I can get that. For now I've realized that you don't actually need atompaw+libxc to use PAWs. <br /><br />So I've got a working compile now, MPI version. <br /><br />abinit compile notes<br />abinit's own install notes: <!-- m --><a class="postlink" href="http://www.abinit.org/doc/helpfiles/for-v8.0/install_notes/install.html">http://www.abinit.org/doc/helpfiles/for ... stall.html</a><!-- m --><br />                                      see also ~abinit/doc/INSTALL<br /><br />Load Stampede modules:    1) intel/15.0.2   2) mvapich2/2.1   3) xalt/0.6   4) TACC   5) fftw3/3.3.4   <br /><br />** I tried gsl but it failed on me, so I'm leaving it out...<br /><br />Open a file, call it e.g. stampede.ac: (for a more complete template, use ~abinit/doc/config/build-config.ac)<br />CC=&quot;mpicc&quot;<br />CFLAGS_EXTRA=&quot;-xhost&quot;<br />CXX=&quot;mpicxx&quot;<br />CXXFLAGS_EXTRA=&quot;-xhost&quot;<br />FC=&quot;mpif90&quot;<br />F77=&quot;mpif77&quot;<br />FCFLAGS_EXTRA=&quot;-xhost&quot;<br />enable_stdin=&quot;no&quot;<br />enable_mpi=&quot;yes&quot;<br />enable_mpi_io=&quot;yes&quot;<br />with_mpi_incs=&quot;-I/opt/apps/intel15/mvapich2/2.1/include&quot;<br />with_mpi_libs=&quot;-L/opt/apps/intel15/mvapich2/2.1/lib -lmpi&quot;<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/opt/apps/intel15/mvapich2_2_1/fftw3/3.3.4/include&quot;<br />with_fft_libs=&quot;-L/opt/apps/intel15/mvapich2_2_1/fftw3/3.3.4/lib -lfftw3&quot;<br />with_linalg_flavor=&quot;mkl&quot;<br /><br /><br />Make a new 'build' directory in the abinit home dir, move the stampede.ac file there, go there and do:<br />../configure --with-config-file=stampede.ac<br />        (save the output by adding:   &gt;config.out 2&gt;config.err &amp;)<br />Check the config.log for details. If the config works, go ahead and make:<br />make multi multi_nprocs=16<br />        (save output:   &gt;make.out 2&gt;make.err &amp;)<br /> <br />And that should get you a good MPI abinit executable for use on Stampede. See the ~/abinit/src/98_main/abinit for the executable. <br /><br />Also, on Stampede use ibrun instead of mpirun.<br /><br />If anyone gets the MIC up and running, please post!</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
				<div id="p10380" class="post has-profile bg2 offline">
		<div class="inner">

		<dl class="postprofile" id="profile10380">
			<dt class="no-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="avatar"><img class="avatar" src="download/file96d1.jpg?avatar=61_1392074789.jpg" width="92" height="79" alt="User avatar" /></a>														</div>
								<a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="username">gmatteo</a>							</dt>

									
		<dd class="profile-posts"><strong>Posts:</strong> <a href="search9f23.html?author_id=61&amp;sr=posts">291</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sun Aug 16, 2009 5:40 pm</dd>		
		
						
						
		</dl>

		<div class="postbody">
						<div id="post_content10380">

						<h3 ><a href="#p10380">Re: sharing .ac config and install files on supercomputers</a></h3>

													<ul class="post-buttons">
																																									<li>
							<a href="posting083f.html?mode=quote&amp;f=3&amp;p=10380" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
														</ul>
							
						<p class="author">
									<a class="unread" href="viewtopic8565.html?p=10380#p10380" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="memberlist6f62.html?mode=viewprofile&amp;u=61" class="username">gmatteo</a></strong> &raquo; </span>Fri Oct 28, 2016 10:10 pm
			</p>
			
			
			
			<div class="content">Hi Ryan,<br /><br /><blockquote class="uncited"><div>I'm about to embark on installation on various computers, e.g. Stampede, Maverick, Jetstream, Comet, Gordon, OSG, Bridges, etc. But every computer will have its own challenges, so it seems like it would be sweet if the abinit community shared config/install files and notes on each of these, as I assume many users of those computers also use abinit. When I get working executables, I'd be willing to share too if there is interest. <br /></div></blockquote><br /><br />This is an excellent idea!<br />I've created a repo on github  to share configuration files for Abinit (<!-- m --><a class="postlink" href="https://github.com/abinit/abiconfig">https://github.com/abinit/abiconfig</a><!-- m -->).<br />Each ac file contains an initial section with metadata e.g. the modules that must be loaded before running configure.<br />There's also a python script that can be used to find the ac files associated to a particular machine or select the configuration files<br />containing a particular set of keywords.<br />You may want to contribute your config files to abiconfig.<br /><br /><blockquote class="uncited"><div>with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs=&quot;-I/opt/apps/intel15/mvapich2_2_1/fftw3/3.3.4/include&quot;<br />with_fft_libs=&quot;-L/opt/apps/intel15/mvapich2_2_1/fftw3/3.3.4/lib -lfftw3&quot;<br /></div></blockquote><br /><br />Note that abinit requires the double precision library (libfftw3) as well as the single precision version (libfftw3f)<br />So I would use:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>with_fft_libs=&quot;-L${FFTW_LIB} -lfftw3 -lfftw3f&quot;<br /></code></pre></div><br /><br />I usually prefer the FFTW3 wrappers provided by MKL, especially when I'm already using MKL for BLAS/LAPACK:<br />These are the options I use to compile with intel ifort and to link dinamically with MKL: <br /><br /> <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># BLAS/LAPACK provided by MKL (dynamic linking)<br /># See https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor<br />with_linalg_flavor=&quot;mkl&quot;<br />with_linalg_incs='-I$(MKLROOT)/include'<br />with_linalg_libs=&quot;-L${MKLROOT}/lib/intel64 -lmkl_intel_lp64 -lmkl_core -lmkl_sequential -lpthread -lm -ldl&quot;<br /><br /># FFTW3 interface provided by MKL (dynamic linking)<br />with_fft_flavor=&quot;fftw3&quot;<br />with_fft_incs='-I$(MKLROOT)/include'<br />with_fft_libs=&quot;-L${MKLROOT}/lib/intel64 -lmkl_intel_lp64 -lmkl_core -lmkl_sequential -lpthread -lm -ldl&quot;<br /></code></pre></div><br /><br />Matteo</div>
			
			
			
									
									
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	<hr class="divider" />
	

	<div class="action-bar bar-bottom">
	
			<a href="postingda4c.html?mode=reply&amp;f=3&amp;t=3389" class="button" title="This topic is locked, you cannot edit posts or make further replies.">
							<span>Locked</span> <i class="icon fa-lock fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																												<li>
					<a href="viewtopicf2a6.html?f=3&amp;t=3389&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="https://forum.abinit.org/viewtopic.php?f=3&amp;t=3389">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			5 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="viewforum4d6b.html?f=3" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Configuring and compiling ABINIT”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="viewforumffeb.html?f=20" class="jumpbox-forum-link"> <span> News &amp; Announcements</span></a></li>
																<li><a href="viewforum8011.html?f=23" class="jumpbox-forum-link"> <span> Jobs and Other Announcements</span></a></li>
																<li><a href="viewforum58da.html?f=1" class="jumpbox-cat-link"> <span> Building ABINIT</span></a></li>
																<li><a href="viewforum4d6b.html?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Configuring and compiling ABINIT</span></a></li>
																<li><a href="viewforum31e6.html?f=4" class="jumpbox-cat-link"> <span> Running Abinit</span></a></li>
																<li><a href="viewforumfdc5.html?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Ground state</span></a></li>
																<li><a href="viewforum15ca.html?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Response calculations</span></a></li>
																<li><a href="viewforum8a83.html?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Many-body perturbation theory</span></a></li>
																<li><a href="viewforum01c9.html?f=12" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Other tools and postprocessing in ABINIT</span></a></li>
																<li><a href="viewforum345c.html?f=24" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Python interfacing : Abipy ecosystem</span></a></li>
																<li><a href="viewforum9780.html?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Link to other codes</span></a></li>
																<li><a href="viewforume774.html?f=5" class="jumpbox-cat-link"> <span> Developing Abinit</span></a></li>
																<li><a href="viewforum218b.html?f=19" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Improving ABINIT</span></a></li>
											</ul>
		</div>
	</div>

	</div>


			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar navbar-bottom" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="index-2.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				
							<li class="rightside">
				<a href="ucp033a.html?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
				
		<li class="rightside" data-last-responsive="true"><a href="app.php/aboutus.html" role="menuitem"><i class="icon fa-info-circle fa-fw" aria-hidden="true"></i><span>About us</span></a></li>			</ul>

	</div>
</div>

	<div class="copyright">
		<script type="text/javascript">
copyright=new Date();

update=copyright.getFullYear();

document.write("Copyright\u0020\u0026copy\u003B 2009 - "+ update +	" ABINIT Discussion Forums All\u0020rights\u0020reserved.");

</script>
<br /><br />		<p class="footer-row">
			<span class="footer-copyright">Flat Style by <a href="http://phpbbstyles.oo.gd/">Ian Bradley</a></span>
		</p>
        <p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row">
			<a class="footer-link" href="ucp4d86.html?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="ucp226b.html?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="assets/javascript/jquery.minaea1.js?assets_version=57"></script>
<script src="assets/javascript/coreaea1.js?assets_version=57"></script>



<script>
	(function() {
		var cx = '017804512478788106347\u003Atlftx8kncg4';
		var gcse = document.createElement('script');
		gcse.type = 'text/javascript';
		gcse.async = true;
		gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
			'//cse.google.com/cse.js?cx=' + cx;
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(gcse, s);
	})();
</script>
<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="ext/hifikabin/clock/styles/all/template/js/js_clockaea1.js?assets_version=57"></script>
<script src="ext/phpbb/collapsiblecategories/styles/all/template/js/collapsiblecategoriesaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/forum_fnaea1.js?assets_version=57"></script>
<script src="styles/prosilver/template/ajaxaea1.js?assets_version=57"></script>



</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?p=10340 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:13:08 GMT -->
</html>
