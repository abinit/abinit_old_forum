<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=653&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:31:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; bug in fft routine calls</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>bug in fft routine calls</h2>
		<p><a href="viewtopicd12b.html?f=9&amp;t=653">https://forum.abinit.org/viewtopic.php?f=9&amp;t=653</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>bug in fft routine calls</h3>
				<div class="date">Posted: <strong>Mon Oct 11, 2010 4:16 pm</strong></div>
				<div class="author">by <strong>Zeila</strong></div>
				<div class="content">Hello,<br /><br />with this simple input file (very elongated cell with bogus input) I get an error in some fft routine, which depends sensitively on the exact fft grid. Changing ecutdg from 16 down to 15 makes the crash go away. Same for increasing it to 20. My normal job with ecut 15, ecutdg 30 is running fine, but I wanted to do some rapid tests...<br /><br />Other fft algorithms do the same type of error (fftalg = 401, 300, 312, 112...)<br /><br />build details below (ifort on xeon openmpi). abinit 6.4.0 was doing the same thing as 6.5.0 (here)<br /><br />anyone know what is going on? <br /><br />Zeila<br /><br /><br /><br />Error number 1:<br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br /><br /> newkpt: loop on k-points done in parallel<br /> pareigocc : MPI_ALLREDUCE<br /> <br /> setup2: Arith. and geom. avg. npw (full set) are    1409.000    1408.100<br />[nick3:08287] *** Process received signal ***<br />[nick3:08287] Signal: Segmentation fault (11)<br />[nick3:08287] Signal code: Address not mapped (1)<br />[nick3:08287] Failing at address: 0x18<br />[nick3:08287] [ 0] /lib64/libpthread.so.0 [0x3f2360e4c0]<br />[nick3:08287] [ 1] /lib64/libc.so.6 [0x3f22a724bd]<br />[nick3:08287] [ 2] /lib64/libc.so.6(__libc_malloc+0x7a) [0x3f22a7402a]<br />[nick3:08287] [ 3] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_malloc_plain+0x12) [0x1e23e12]<br />[nick3:08287] [ 4] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit [0x1e28f66]<br />[nick3:08287] [ 5] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_solvtab_exec+0x25) [0x1e4f0b5]<br />[nick3:08287] [ 6] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_dft_conf_standard+0x11) [0x1e292e1]<br />[nick3:08287] [ 7] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_configure_planner+0x9) [0x1e26d99]<br />[nick3:08287] [ 8] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_the_planner+0x34) [0x1e260b4]<br />[nick3:08287] [ 9] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_mkapiplan+0x1e) [0x1e25abe]<br />[nick3:08287] [10] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_plan_many_dft_c2r+0x141) [0x1e23891]<br />[nick3:08287] [11] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_plan_dft_c2r+0x44) [0x1e23914]<br />[nick3:08287] [12] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw_plan_dft_c2r_3d+0x28) [0x1e23628]<br />[nick3:08287] [13] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(dfftw_plan_dft_c2r_3d_+0x24) [0x1e22af4]<br />[nick3:08287] [14] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(m_fftw3_mp_fftw3_c2r_op_+0x643) [0x1555e53]<br />[nick3:08287] [15] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fftw3_fourdp_+0x32e) [0x14e9dde]<br />[nick3:08287] [16] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(fourdp_+0x5646) [0x14f2aa6]<br />[nick3:08287] [17] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(initro_+0x16f9) [0xcd6e09]<br />[nick3:08287] [18] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(gstate_+0x98e0) [0x524fc0]<br />[nick3:08287] [19] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(gstateimg_+0x33ac) [0x4689fc]<br />[nick3:08287] [20] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(driver_+0x8908) [0x45b8e8]<br />[nick3:08287] [21] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(MAIN__+0x3f9e) [0x44fc8e]<br />[nick3:08287] [22] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(main+0x3c) [0x44bcdc]<br />[nick3:08287] [23] /lib64/libc.so.6(__libc_start_main+0xf4) [0x3f22a1d974]<br />[nick3:08287] [24] /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(ctrtri_+0x41) [0x44bbe9]<br />[nick3:08287] *** End of error message ***<br /><br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br /><br /><br />error number 2: with fftalg 112<br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />*** glibc detected *** /u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit: double free or corruption (!prev): 0x0000000015542190 ***<br />======= Backtrace: =========<br />/lib64/libc.so.6[0x3f22a71ce2]<br />/lib64/libc.so.6(cfree+0x8c)[0x3f22a7590c]<br />/cvos/shared/apps/intel/Compiler/11.0/074/lib/intel64/libifcore.so.5(for_deallocate+0xbb)[0x2ab1180d15eb]<br />/cvos/shared/apps/intel/Compiler/11.0/074/lib/intel64/libifcore.so.5(for_dealloc_allocatable+0x70)[0x2ab1180d14f0]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(gstate_+0x1dcff)[0x5393df]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(gstateimg_+0x33ac)[0x4689fc]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(driver_+0x8908)[0x45b8e8]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(MAIN__+0x3f9e)[0x44fc8e]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(main+0x3c)[0x44bcdc]<br />/lib64/libc.so.6(__libc_start_main+0xf4)[0x3f22a1d974]<br />/u/mverstra/CODES/ABINIT/6.5.0-private/tmp-ifort/src/98_main/abinit(ctrtri_+0x41)[0x44bbe9]<br /><br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br /><br /><br /><br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br /> === Build Information === <br />  Version       : 6.5.0<br />  Build target  : x86_64_linux_intel11.0<br />  Build date    : 20100909<br /> <br /> === Compiler Suite === <br />  C compiler       : intel<br />  CFLAGS           :  -g -O2 -vec-report0<br />  C++ compiler     : gnu11.0<br />  CXXFLAGS         : -m64 -g -O3 -fschedule-insns2 -march=nocona -mmmx -msse -msse2 -msse3 -mfpmath=sse<br />  Fortran compiler : intel11.0<br />  FCFLAGS          :  -g -extend-source -vec-report0 -m64 -O3 -ip -mcmodel=large -g -msse3<br />  FC_LDFLAGS       :    -static-libgcc -static-intel<br /> <br /> === Optimizations === <br />  Debug level        : yes<br />  Optimization level : standard<br />  Architecture       : intel_xeon<br /> <br /> === MPI === <br />  Parallel build : yes<br />  Parallel I/O   : yes<br /> <br /> === Linear algebra === <br />  Library flavor : @linalg_flavor@<br />  Use ScaLAPACK  : no<br /> <br /> === Plug-ins === <br />  BigDFT    : yes<br />  ETSF I/O  : yes<br />  LibXC     : yes<br />  FoX       : no<br />  NetCDF    : yes<br />  Wannier90 : yes<br /> <br /> === Experimental features === <br />  Bindings            : no<br />  Exports             : no<br />  GW double-precision : yes<br />  Macroave build      : yes<br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br /><br /><br /><br />input<br /><br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />ecut   2.<br />pawecutdg  16.<br />ngkpt  2 2 1<br /><br />acell 3*1.0000000000 angstrom<br />rprim   4.1342980847         0.0000000000         0.0000000000<br />        0.0000000000         7.1608143361         0.0000000000<br />        0.0000000000         0.0000000000        53.0000000000<br /><br />ntypat 1<br />znucl  31<br />natom 14<br />typat *1<br /><br />xangst<br />0 1 0<br />1 0 3<br />0 0 6<br />0 0 9<br />0 0 12<br />0 0 15<br />0 0 18<br />0 0 21<br />0 0 24<br />0 0 27<br />0 0 30<br />0 0 33<br />0 0 36<br />0 0 39<br /><br />kptopt 1           # automatic generation of kpoints, according to symmetries<br />nshiftk 1         # every grid is repeated 1 time with shift:<br />shiftk 0.0 0.0 0.5    # abinis suggestion<br /><br />occopt 4<br />tsmear 0.02<br /><br />nstep 100          # Maximal number of SCF cycles<br />toldff 1.0d-6      # for relaxation - 10 volte piu' strict del tolmxf<br />diemac 14.5        # the standard preconditioner of the SCF cycle is the<br /><br />&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=653&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 22:31:11 GMT -->
</html>
