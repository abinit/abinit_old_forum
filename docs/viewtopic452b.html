<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=891&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Abinit 6.4.3 binaries for OSX posted</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Abinit 6.4.3 binaries for OSX posted</h2>
		<p><a href="viewtopic95eb.html?f=3&amp;t=891">https://forum.abinit.org/viewtopic.php?f=3&amp;t=891</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Wed Feb 16, 2011 8:40 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Dear All,<br /><br />A new binary package for Abinit 6.4.3 for OSX has been posted on the ETSF software repository at <a href="http://www.etsf.eu/resources/software/etsf_software_repository" class="postlink">http://www.etsf.eu/resources/software/etsf_software_repository</a> and can be downloaded from <a href="http://www.etsf.be/downloads/ETSF_softlib/OSX_binaries/abinit-6.4.3_intel_10.6_m64.tar.bz2" class="postlink">http://www.etsf.be/downloads/ETSF_softlib/OSX_binaries/abinit-6.4.3_intel_10.6_m64.tar.bz2</a><br /><br />Abinit 6.4.3 is the latest production release as of 15/02/2011 . This 64bit OSX version comes with all advertised plugins and required libraries. It passes the full testsuite (tested on Snow Leopard). The static binaries should work under reasonably recent OSX versions.<br />The binaries have been prepared with multithreaded FFT and linear algebra libraries i.e. they can use all available cores on SMP systems.<br /><br />Don't hesitate to provide feedback on the forum.<br /><br />Kind regards,<br /><br />Alain Jacques</div>
			</div>
			<hr />
					<div class="post">
				<h3>Properly launching Abinit 6.4.3 OS X binaries Alain posted</h3>
				<div class="date">Posted: <strong>Mon Apr 04, 2011 10:57 pm</strong></div>
				<div class="author">by <strong>WoodDM</strong></div>
				<div class="content">Many thanks for your work, Alain!<br /><br />I'm used to running the binaries *I* built from scratch using OpenMPI via, e.g., <br /><br />/opt/openmpi-1.5/bin/mpirun -np 8 /pathtomyexecutable &lt; MkSCF-BigEcut.files &gt;&amp; MkSCF-BigEcut.log &amp;<br /><br />and then watching 8 instances of abinit running, each with &gt;99% usage of a CPU.<br /><br />When launching a job with the new binaries, I find:<br /><br />1 instance of abinit with 359.0% of a CPU being used (usually &lt;300%)<br />plus<br />1 instance of abinit with 0% of a CPU being used.<br /><br />EG the process list shows<br />dmwood   70269 254.2  7.1  3669496 1042548 s006  R+    2:54PM   0:44.23 /opt/etsf/abinit/6.4.5FromAJ/bin/abinit<br />dmwood   70267   0.0  0.0  2436320   1616 s006  S+    2:54PM   0:00.03 /opt/openmpi-1.5/bin/mpirun -np 8 /opt/etsf/abinit/6.4.5FromAJ/bin/abinit<br /><br />Can anyone identify what I'm doing wrong [apart from not reading more of the documentation <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /> ]<br /><br />Many thanks, --DMW</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Tue Apr 05, 2011 11:12 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello DMW,<br /><br />Most of the time I build two kinds of binaries ...<br />x either parallel Abinit releases with sequential FFT and linear algebra libs; they come with a MPICH2 launcher (aka gforker) suitable for SMP systems.<br />x or sequential Abinit releases with multithreaded FFT and linalg libs; they will use multicores cpus if present<br /><br />Type 1 is crafted for production work, type 2 mostly for testing and learning purposes. I assume that people downloading from ETSF look for a good binary to follow the tutorials with reasonable performance on laptops or even netbooks.<br />What you have downloaded is of type 2 <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /> ... it's a sequential Abinit, mpirun won't work - at least won't launch more that one instance. But this instance will find that you have several cores and parallelize (some, many) FFT and LAPACK calls. I would not say that it is unsuitable for production work; it is quite efficient and works well when a lot of memory is needed and k point parallelization not an option.<br /><br />Kind regards,<br /><br />Alain<br />... I didn't even say RTFD <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Tue Apr 05, 2011 7:50 pm</strong></div>
				<div class="author">by <strong>WoodDM</strong></div>
				<div class="content">Alain,<br /><br />Many thanks for the reply and the explanation of what it was I downloaded!<br /><br />For those who might be curious: (Remarks relevant to running on OS X 10.6.7 on an 8-core early 2008 Mac Pro, 14GB RAM)<br /><br />1) DESPITE being launched with mpirun, I found (when I got home and could see a system usage monitor, rather than just the process list) that the type 2 version WAS using all 8 cores, according to what Alain says probably on abundant FFT and LAPACK calls, but with a many more fluctuations that what I was used to from a simple openmpi build. As I noted, there was only one instance of abinit running in the process list.<br /><br />2) DESPITE what I thought, the job finished 31% sooner than the version of AB 6.4.3 I'd built myself [disabling libxc, which I have been unable to build automatically for many months, using the mpif90 [based on the latest OpenMPI with the gfortran from MacPorts--an executable named x86_64-apple-darwin10-gfortran-mp-4.4].<br /><br />In short: NOTHING was wrong--the CPU usage patterns are just substantially different than the abinit builds I'd made.  I don't know much about the relative merits of various compilers, but if my tests were meaningful (they may not be since I'm comparing apples and oranges) I'd conclude that a sequential build with multithreaded FFT and linalg libs BEATS a parallel build with sequential FFT and linear algebra libs on a multicore standalone machine.<br /><br />Thanks again for your work, Alain.<br /><br />DMW</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Sun Sep 18, 2011 5:59 am</strong></div>
				<div class="author">by <strong>lucile</strong></div>
				<div class="content">Hello,<br /><br />I am a totally new user of abinit, and I cannot manage to run it:  I am using a MacBook (Intel Core 2 Duo) with OS 10.5.8.  I downloaded v6.4.3 of Abinit yesterday, and started the lesson 1 of the tutorial<br /><br /><a href="http://www.abinit.org/documentation/helpfiles/for-v6.4/tutorial/lesson_1.html" class="postlink">http://www.abinit.org/documentation/helpfiles/for-v6.4/tutorial/lesson_1.html</a><br /><br />I went through steps 1.1.a to 1.1.c, but at step 1.1.d, when I run<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>abinit &lt; t1x.files &gt;&amp; log </code></pre></div><br /><br />none of the files   <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>t11.out&nbsp; t1x.files&nbsp; t1xo_DDB&nbsp; t1xo_DEN&nbsp; t1xo_EIG&nbsp; t1xo_WFK</code></pre></div>   are created.  I simply get<br /><br />- in my terminal the output:  <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Trace/BPT trap</code></pre></div><br />- the log file which simply contains:  <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>dyld: unknown required load command 0x80000022</code></pre></div><br /><br />I googled for this error message, and found on a couple websites, including this one:<br /><br /><a href="http://asqueella.blogspot.com/2010/12/dyld-unknown-required-load-command.html" class="postlink">http://asqueella.blogspot.com/2010/12/dyld-unknown-required-load-command.html</a><br /><br />that this problem might be related to my OS, and indeed I found on abinit's website that the latter seemed to have been tested for Snow Leopard only.<br /><br />So I am wondering about the following:<br />- is my OS indeed the problem?<br />- if so, is there any way to work around it without updating my system to Snow Leopard?<br />- will I run into any <em class="text-italics">new</em> problems if I do not update my system?<br />- or did I do something wrong to start with (e.g. I did not run any configuration command, because I am not sure how this works!)?<br /><br />Thanks a lot for your help!!<br /><br />L.<br /><br />PS:<br />Note that its seems the path to the Work directory actually should be <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>share/abinit/tutorial/Input/Work</code></pre></div>, and <em class="text-italics">not</em> <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>tests/abinit/tutorial/Input/Work</code></pre></div>, and that the executable is contained in the <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>bin</code></pre></div> folder and <em class="text-italics">not</em> <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>opt</code></pre></div>.  Also, from the Work directory, the path to the executable seems to be  <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../../../bin/abinit</code></pre></div>, and that the last line of the t1x.files should be left to be <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../Psps_for_tests/01h.pspgth</code></pre></div>, and <em class="text-italics">not</em> changed to <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../Psps_for_tests/01h.pspgth</code></pre></div>.<br /><br />Consequently, my t1x.files file contains:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>t11.in<br />t11.out<br />t1xi<br />t1xo<br />t1x<br />../../../Psps_for_tests/01h.pspgth</code></pre></div><br /><br />Yet one last thing:  when I run <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>../../../../../bin/abinit &lt; t1x.files &gt;&amp; log</code></pre></div>, I get this BTP/Trap output in the terminal, but when I simply run <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>abinit &lt; t1x.files &gt;&amp; log</code></pre></div>, no output is generated in the terminal (I directly copied and pasted &quot;abinit&quot; from the bin folder to the Work folder).</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Sun Sep 18, 2011 4:20 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hi Lucile,<br /><br />hmmm ... the problem comes from me - I managed to build 64bit OSX binaries specific to Snow Leopard. Please visit again the ETSF repository to download the new 6.8.2 version for Leopard (10.5) or directly at <a href="http://www.etsf.be/downloads/ETSF_softlib/OSX_binaries/abinit-6.8.2_gcc_10.5_m64.tar.bz2" class="postlink">http://www.etsf.be/downloads/ETSF_softlib/OSX_binaries/abinit-6.8.2_gcc_10.5_m64.tar.bz2</a>. Any improvement?<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Mon Sep 19, 2011 12:00 am</strong></div>
				<div class="author">by <strong>lucile</strong></div>
				<div class="content">Yes, it now seems to work perfectly!  Thanks a million!  <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />L.<br /><br />PS:  Just one more thing.  The tutorial seems to suggest that one can simply copy the abinit executable from the bin folder to the Work folder.  But when I run <br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>abinit &lt;t1x.files&gt;&amp;log<br /></code></pre></div><br />after having done that, nothing happens, the log file only says <br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>-bash: abinit: command not found</code></pre></div><br />So I am wondering whether I am missing something?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Mon Sep 19, 2011 10:30 am</strong></div>
				<div class="author">by <strong>david.waroquiers</strong></div>
				<div class="content">Hello,<br /><br />You might try running &quot;./abinit &lt;t1x.files&gt;&amp;log&quot;. Otherwise your system is trying to find the executable in all the locations that are specified in your &quot;PATH&quot; (which is an environment variable containing the locations where the system should find the executable).<br /><br />By doing ./yourexecutable, you try to execute yourexecutable in the current (&quot;.&quot;) directory.<br /><br />David</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.4.3 binaries for OSX posted</h3>
				<div class="date">Posted: <strong>Mon Sep 19, 2011 7:38 pm</strong></div>
				<div class="author">by <strong>lucile</strong></div>
				<div class="content">Super!  <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" />  Thanks a lot.<br /><br />L.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=891&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:17 GMT -->
</html>
