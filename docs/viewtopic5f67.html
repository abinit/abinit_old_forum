<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1585&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:53:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Linking error in 6.12.2 on Mac OS X</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Linking error in 6.12.2 on Mac OS X</h2>
		<p><a href="viewtopicf7b2.html?f=3&amp;t=1585">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1585</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Linking error in 6.12.2 on Mac OS X</h3>
				<div class="date">Posted: <strong>Tue Mar 27, 2012 5:34 am</strong></div>
				<div class="author">by <strong>paulfons</strong></div>
				<div class="content">I have compiled the abinit sources on my (Mac OS 10.7) eight-core mac and find that I can get every file to compile, only to find some unresolved references in the final linking state in 98_main.  I have the intel compilers (ifort and icc 12.1.3) and I have compiled openmpi-1.4.5 (the latest stable release of openmpi) using these compilers. I naturally, have the mkl libraries as well (they come with the fortran compiler).  I used the following line to configure abinit. <br /><br />../configure --enable-mpi --with-mpi-prefix=/opt/openmpi --with-linalg-flavor=mkl --enable-gui --with-PACKAGE=fox --enable-64bit CC=mpicc FC=mpif90 CXX=mpicxx<br /><br />The linking details are below, but are generally references to libraries of the form &quot;pseudo_pwscf_mp_nlcc&quot; where &quot;mp&quot; seems to be the key word.  I am attempting to carry out mpi parallelization and cannot find these files.<br /><br />I also noticed on the macintosh that the /usr/bin/cpp has trouble with the libxc library (I ended up using the fpp that comes with the intel compilers without incident.  There also seems to be a parsing error (perhaps due to the use of accented characters in the atompaw source in libxc_ini.  Where can I find these libraries (or if they are for mp parallelization, switch them off?   Perhaps my configuration could be improved?  Any suggestions?<br /><br /><br />Linking error follows:<br /><br />/Users/paulfons/Ports/abinit/build/config/wrappers/wrap-mpiLFC -free -module /Users/paulfons/Ports/abinit/build/src/mods -O2 -xHost -g -extend-source -vec-report0 -noaltparam -nofpscomp   -g -extend-source -vec-report0 -noaltparam -nofpscomp  -static-intel -static-libgcc  -static-intel -static-libgcc  -o abinit abinit-abinit.o -static-intel -static-libgcc  ../../src/95_drive/lib95_drive.a ../../src/93_rdm/lib93_rdm.a ../../src/79_seqpar_mpi/lib79_seqpar_mpi.a ../../src/77_ddb/lib77_ddb.a ../../src/77_suscep/lib77_suscep.a ../../src/72_response/lib72_response.a ../../src/71_bse/lib71_bse.a ../../src/70_gw/lib70_gw.a ../../src/69_wfdesc/lib69_wfdesc.a ../../src/68_dmft/lib68_dmft.a ../../src/68_recursion/lib68_recursion.a ../../src/68_rsprc/lib68_rsprc.a ../../src/67_common/lib67_common.a ../../src/66_paw/lib66_paw.a ../../src/66_wfs/lib66_wfs.a ../../src/65_psp/lib65_psp.a ../../src/65_nonlocal/lib65_nonlocal.a ../../src/64_atompaw/lib64_atompaw.a ../../src/62_occeig/lib62_occeig.a ../../src/62_iowfdenpot/lib62_iowfdenpot.a ../../src/62_wvl_wfs/lib62_wvl_wfs.a ../../src/62_poisson/lib62_poisson.a ../../src/62_cg_noabirule/lib62_cg_noabirule.a ../../src/61_ionetcdf/lib61_ionetcdf.a ../../src/59_io_mpi/lib59_io_mpi.a ../../src/57_iovars/lib57_iovars.a ../../src/56_recipspace/lib56_recipspace.a ../../src/56_xc/lib56_xc.a ../../src/56_mixing/lib56_mixing.a ../../src/53_abiutil/lib53_abiutil.a ../../src/53_spacepar/lib53_spacepar.a ../../src/53_ffts/lib53_ffts.a  ../../src/52_fft_mpi_noabirule/lib52_fft_mpi_noabirule.a ../../src/51_manage_mpi/lib51_manage_mpi.a ../../src/49_gw_toolbox_oop/lib49_gw_toolbox_oop.a ../../src/47_xml/lib47_xml.a ../../src/45_psp_parser/lib45_psp_parser.a ../../src/44_geomoptim/lib44_geomoptim.a ../../src/43_ptgroups/lib43_ptgroups.a ../../src/43_abitypes_defs/lib43_abitypes_defs.a ../../src/42_nlstrain/lib42_nlstrain.a ../../src/42_geometry/lib42_geometry.a ../../src/42_parser/lib42_parser.a ../../src/42_wvl_wrappers/lib42_wvl_wrappers.a  ../../src/32_util/lib32_util.a ../../src/28_numeric_noabirule/lib28_numeric_noabirule.a ../../src/27_toolbox_oop/lib27_toolbox_oop.a ../../src/18_timing/lib18_timing.a ../../src/16_hideleave/lib16_hideleave.a ../../src/14_hidewrite/lib14_hidewrite.a  ../../src/12_hide_mpi/lib12_hide_mpi.a ../../src/11_qespresso_ext/lib11_qespresso_ext.a ../../src/13_memory_mpi/lib13_memory_mpi.a ../../src/10_defs/lib10_defs.a  ../../src/01_linalg_ext/lib01_linalg_ext.a ../../src/01_interfaces_ext/lib01_interfaces_ext.a  -L/Users/paulfons/Ports/abinit/build/fallbacks/exports/lib -lwannier90 -L/Users/paulfons/Ports/abinit/build/fallbacks/exports/lib -lbigdft -lpoissonsolver -labinit -L/Users/paulfons/Ports/abinit/build/fallbacks/exports/lib -lxc -L/Users/paulfons/Ports/abinit/build/fallbacks/exports/lib -letsf_io_low_level -letsf_io_utils -letsf_io -L/Users/paulfons/Ports/abinit/build/fallbacks/exports/lib -lnetcdf -lmkl_intel_lp64 -lmkl_sequential -lmkl_core  <br />Undefined symbols for architecture x86_64:<br />  &quot;_unlink_&quot;, referenced from:<br />      _mlwfovlp_ in lib67_common.a(mlwfovlp.o)<br />  &quot;_pseudo_pwscf_mp_nlcc_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_lll_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_nbeta_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_zp_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_psd_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_lmax_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_dft_&quot;, referenced from:<br />      _upfheader2abi_ in lib45_psp_parser.a(upfheader2abi.o)<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rho_at_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_rhoatom_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_chi_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_vloc0_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_local_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rho_atc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nlcc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_oc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_lchi_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_els_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_ntwfc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_mesh_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_rhoatom_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_pswfc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_local_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nlcc_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      ...<br />  &quot;_pseudo_pwscf_mp_ecutrho_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_ecutwfc_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_etotps_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_isus_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_pseudotype_&quot;, referenced from:<br />      _read_pseudo_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _read_pseudo_header_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_rab_&quot;, referenced from:<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_r_&quot;, referenced from:<br />      _read_pseudo_mesh_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_qfcoef_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_rinner_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_nqlc_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_nqf_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_qfunc_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_qqq_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />  &quot;_pseudo_pwscf_mp_dion_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_betar_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />  &quot;_pseudo_pwscf_mp_ikk2_&quot;, referenced from:<br />      _read_pseudo_nl_ in lib11_qespresso_ext.a(read_upf_pwscf.o)<br />      _upf2abinit_ in lib65_psp.a(upf2abinit.o)<br />ld: symbol(s) not found for architecture x86_64</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1585&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:53:43 GMT -->
</html>
