<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1609&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:04:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Compiling 6.13.3 in Lion Mac OS</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Compiling 6.13.3 in Lion Mac OS</h2>
		<p><a href="viewtopic7f55.html?f=3&amp;t=1609">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1609</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Sun Apr 08, 2012 11:51 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">I have tried to compile again the most recent version of Abinit (6.13.3) in a brand new Mac Os 10.7.3. I have recreated all necessary files (automake, lib tool, etc) and I did try to compile after configuration and the errors are again really weird.. any advice will be welcome <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /><br />Thanks!<br /><br />---------<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>MacBook-Pro-de-aldo:6.13.3-private aldoromero$ make<br />make&nbsp; all-recursive<br />Making all in fallbacks<br />make fox<br />The build of fox has been disabled<br />Checking build of fox fallback<br />test -e stamps/fox-install-stamp<br />make libxc<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/libxc-1.1.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/libxc-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make linalg<br />The build of linalg has been disabled<br />Checking build of linalg fallback<br />test -e stamps/linalg-install-stamp<br />make netcdf<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/netcdf-4.1.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/netcdf-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of netcdf fallback<br />test -e stamps/netcdf-install-stamp<br />make etsf_io<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/etsf_io-1.0.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/etsf_io-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make atompaw<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/atompaw-3.0.1.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/atompaw-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of atompaw fallback<br />test -e stamps/atompaw-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ mkdir fallbacks/stamps/atompaw-install-stamp<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ make<br />make&nbsp; all-recursive<br />Making all in fallbacks<br />make fox<br />The build of fox has been disabled<br />Checking build of fox fallback<br />test -e stamps/fox-install-stamp<br />make libxc<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/libxc-1.1.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/libxc-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make linalg<br />The build of linalg has been disabled<br />Checking build of linalg fallback<br />test -e stamps/linalg-install-stamp<br />make netcdf<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/netcdf-4.1.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/netcdf-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of netcdf fallback<br />test -e stamps/netcdf-install-stamp<br />make etsf_io<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/etsf_io-1.0.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/etsf_io-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make atompaw<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/atompaw-3.0.1.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/atompaw-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of atompaw fallback<br />test -e stamps/atompaw-install-stamp<br />make wannier90<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/wannier90-1.2.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/wannier90-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ mkdir fallbacks/stamps/wannier90-install-stamp<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ make<br />make&nbsp; all-recursive<br />Making all in fallbacks<br />make fox<br />The build of fox has been disabled<br />Checking build of fox fallback<br />test -e stamps/fox-install-stamp<br />make libxc<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/libxc-1.1.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/libxc-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make linalg<br />The build of linalg has been disabled<br />Checking build of linalg fallback<br />test -e stamps/linalg-install-stamp<br />make netcdf<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/netcdf-4.1.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/netcdf-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of netcdf fallback<br />test -e stamps/netcdf-install-stamp<br />make etsf_io<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/etsf_io-1.0.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/etsf_io-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make atompaw<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/atompaw-3.0.1.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/atompaw-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of atompaw fallback<br />test -e stamps/atompaw-install-stamp<br />make wannier90<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/wannier90-1.2.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/wannier90-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />make bigdft<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/bigdft-1.6-tuto.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/bigdft-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of bigdft fallback<br />test -e stamps/bigdft-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ mkdir fallbacks/stamps/bigdft-install-stamp&nbsp; &nbsp;<br />MacBook-Pro-de-aldo:6.13.3-private aldoromero$ make<br />make&nbsp; all-recursive<br />Making all in fallbacks<br />make fox<br />The build of fox has been disabled<br />Checking build of fox fallback<br />test -e stamps/fox-install-stamp<br />make libxc<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/libxc-1.1.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/libxc-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make linalg<br />The build of linalg has been disabled<br />Checking build of linalg fallback<br />test -e stamps/linalg-install-stamp<br />make netcdf<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/netcdf-4.1.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/netcdf-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of netcdf fallback<br />test -e stamps/netcdf-install-stamp<br />make etsf_io<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/etsf_io-1.0.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/etsf_io-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of etsf_io fallback<br />test -e stamps/etsf_io-install-stamp<br />make atompaw<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/atompaw-3.0.1.4.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/atompaw-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of atompaw fallback<br />test -e stamps/atompaw-install-stamp<br />make wannier90<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/wannier90-1.2.0.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/wannier90-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of wannier90 fallback<br />test -e stamps/wannier90-install-stamp<br />make bigdft<br />cd sources &amp;&amp; \<br />&nbsp; &nbsp;&nbsp; gzip -cd /Users/aldoromero/.abinit/tarballs/bigdft-1.6-tuto.1.tar.gz | tar xf -<br />/bin/sh: line 0: cd: sources: No such file or directory<br />make&#91;3&#93;: *** &#91;stamps/bigdft-unfold-stamp&#93; Error 1<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of bigdft fallback<br />test -e stamps/bigdft-install-stamp<br />Making all in src<br />Making all in incs<br />There is no buildable file here<br />Making all in mods<br />There is no buildable file here<br />Making all in 01_interfaces_ext<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o m_iso_c_bindings.o m_iso_c_bindings.F90<br />rm -f lib01_interfaces_ext.a<br />ar rc lib01_interfaces_ext.a m_iso_c_bindings.o <br />/usr/bin/ranlib: file: lib01_interfaces_ext.a(m_iso_c_bindings.o) has no symbols<br />ranlib lib01_interfaces_ext.a<br />ranlib: file: lib01_interfaces_ext.a(m_iso_c_bindings.o) has no symbols<br />ranlib: warning for library: lib01_interfaces_ext.a the table of contents is empty (no object file members in the library define global symbols)<br />Making all in 01_linalg_ext<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o m_linalg_interfaces.o m_linalg_interfaces.F90<br />rm -f lib01_linalg_ext.a<br />ar rc lib01_linalg_ext.a m_linalg_interfaces.o <br />/usr/bin/ranlib: file: lib01_linalg_ext.a(m_linalg_interfaces.o) has no symbols<br />ranlib lib01_linalg_ext.a<br />ranlib: file: lib01_linalg_ext.a(m_linalg_interfaces.o) has no symbols<br />ranlib: warning for library: lib01_linalg_ext.a the table of contents is empty (no object file members in the library define global symbols)<br />Making all in 01_macroavnew_ext<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o io.o io.F90<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o iorho.o iorho.F90<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native -mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o numeric.o numeric.F90<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccqieL16.s:172:no such instruction: `vmovsd LC2(%rip), %xmm0'</code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 10, 2012 3:52 am</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">Ah! I tend to forget about this issue once I have abinit compiled but it occurs regularly on OSX. The problem is that on OSX there is a special macro applied to fix the install-sh path in each of the abinit directories and in the fallbacks directory it yields a MKDIR_P variable of something like /config/gnu/install-sh (missing the leading .). Then when the config script tries to create the sources and stamps directories it fails and all hell breaks loose. <br /><br />As a workaround for now, edit the configure script in fallbacks to explicitly fix the install-sh path problem, make clean and start again. Once I get back into my office I'll post more exact instructions if you don't know how to do this.<br /><br />Kane</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 10, 2012 9:22 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi,<br /><br /><blockquote><div><cite>kaneod wrote:</cite> ... it yields a MKDIR_P variable of something...</div></blockquote><br /><br />concerning the problem of MKDIR_P, you can try these &quot;solutions&quot; :<br /><br />1) export MKDIR_P=&quot;/bin/mkdir -p&quot;<br />2) install &quot;coreutils&quot; package with MacPort or fink and change the PATH variable<br /><br />the &quot;/bin/mkdir&quot; of MacOS X is able to use -p but the autotools checks only if mkdir is  a gnu version of mkdir not the capability to use -p  <img class="smilies" src="images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /><br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 10, 2012 11:13 pm</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">Thanks, it might be helpful to just use a workaround. I thought I'd just mention though (now that I have the source in front of me) that the core problem here is that the AX_PROG_MKDIR_P macro in fallbacks/configure.ac (from fallbacks/config/m4/util-fixes.m4) generates a set of instructions for a fix that doesn't actually fix.<br /><br />The macro is:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>AC_DEFUN(&#91;AX_PROG_MKDIR_P&#93;,&#91;<br />&nbsp; AC_PROG_MKDIR_P<br />&nbsp; ax_tmp_mkdir_p=`echo &quot;${MKDIR_P}&quot; | awk '{print &#91;$&#93;1}'`<br />&nbsp; if test &quot;${ax_tmp_mkdir_p}&quot; = &quot;config/gnu/install-sh&quot;; then<br />&nbsp; &nbsp; AC_MSG_NOTICE(&#91;fixing wrong path to mkdir replacement&#93;)<br />&nbsp; &nbsp; MKDIR_P=&quot;${fallbacks_srcdir}/${MKDIR_P}&quot;<br />&nbsp; fi<br />&nbsp; unset ax_tmp_mkdir_p</code></pre></div><br /><br />However, fallbacks_srcdir isn't set anywhere (it doesn't exist anywhere else in the final configure script) and is hence blank. So, since the native MKDIR_P is by that time config/gnu/install-sh (with some options), it stays that way, and the subsequent line:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>${MKDIR_P} exports sources stamps</code></pre></div><br /><br />fails and no stamps can be created, amongst other things.<br /><br />For users, the fastest fix is just to change fallbacks_srcdir to just srcdir in all instances in fallbacks/configure. For a dev fix unless there was a deliberate strategy regarding the use of SRCDIR, I think the macro in fallbacks/m4/util-fixes.m4 should be modified in the same way (then autoreconf).</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Thu Apr 12, 2012 4:13 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">THANKS both of you for your kind reply. I have tried to follow your advices but maybe I got lost.<br /><br />I did change my .bashrc and I did include the line<br /><br />export MKDIR_P=&quot;/bin/mkdir -p&quot;<br /><br />then, I did download the coreutils in macport but still is not compelling. After doing the two previous steps<br />I did a complete clean of the source try by<br />config/scripts/makemake -c<br />and then<br />config/scripts/makemake <br />./configure<br />make<br /><br />but for now, I got stop at the libxc compilation....any ideas?<br /><br />...<br /><br /><br />libtool: compile:  gfortran -ffree-form -g -ffree-line-length-none -O2 -mtune=native -march=native -mfpmath=sse -g -O2 -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include -c libxc.f90 -o libxc.o<br />libxc.f90:30:<br /><br />module xc_f90_ ## types_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:34.17:<br /><br />  integer, public, parameter :: xc_f90_kind = selected_real_kind(14)<br />                 1<br />Error: PUBLIC attribute at (1) is not allowed outside of the specification part of a module<br />libxc.f90:37.2:<br /><br />  type xc_f90_ ## pointer_t<br />  1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:38.11:<br /><br />    private<br />           1<br />Error: PRIVATE statement at (1) is only allowed in the specification part of a module<br />libxc.f90:40.5:<br /><br />  end type xc_f90_ ## pointer_t<br />     1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:42.3:<br /><br />end module xc_f90_ ## types_m<br />   1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:46:<br /><br />module xc_f90_ ## lib_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:48.13:<br /><br />  use xc_f90_ ## types_m<br />             1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:49.19:<br /><br />  use libxc_funcs_m<br />                   1<br />libxc.f90:39.30:<br /><br />    integer, pointer :: buffer<br />                              2<br />Error: USE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:51.15:<br /><br />  implicit none<br />               1<br />libxc.f90:39.30:<br /><br />    integer, pointer :: buffer<br />                              2<br />Error: IMPLICIT NONE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:53.8:<br /><br />  public<br />        1<br />Error: PUBLIC statement at (1) is only allowed in the specification part of a module<br />libxc.f90:99.28:<br /><br />    integer function xc_f90_ ## info_number(info)<br />                            1<br />Error: Expected formal argument list in function definition at (1)<br />libxc.f90:100.17:<br /><br />      use xc_f90_ ## types_m<br />                 1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:101.6:<br /><br />      type(xc_f90_ ## pointer_t), intent(in) :: info<br />      1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:102.7:<br /><br />    end function xc_f90_ ## info_number<br />       1<br />Error: Expecting END INTERFACE statement at (1)<br />libxc.f90:104.28:<br /><br />    integer function xc_f90_ ## info_kind(info)<br />                            1<br />Internal Error at (1):<br />insert_bbt(): Duplicate key found!<br />make[7]: *** [libxc.lo] Error 1<br />make[6]: *** [all] Error 2<br />make[5]: *** [all-recursive] Error 1<br />make[4]: *** [all] Error 2<br />make[3]: *** [stamps/libxc-build-stamp] Error 2<br />make[2]: [all-local] Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make[2]: *** [all-local] Error 1<br />make[1]: *** [all-recursive] Error 1<br />make: *** [all] Error 2</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Fri Apr 13, 2012 1:08 am</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">The fallbacks LibXC compilation in Abinit is not great, just compile it separately and point to it in your build.ac file with --with-libxc-incs=&quot;-I/path/to/your/libxc/installation/include&quot; --with-libxc-libs=&quot;-L/path/to/your/libxc/installation/lib -lxc&quot;.<br /><br />The errors you're seeing don't make all that much sense (it looks like it's not recognising the module statement, which may mean a bad preprocessing mistake) so I suspect if you just sort libxc out separately you'll be ok. Same goes for Atompaw.<br /><br />Kane</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Sat Apr 14, 2012 5:53 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Dear Kane<br /><br />thanks for your response. I did compile libxc without any problem but now when I am trying to link it<br />through the configure as<br /><br /> ./configure --with-libxc-incs=&quot;-I/opt/etsf/include&quot; --with-libxc-libs=&quot;-L/opt/etsf/lib -lxc&quot;<br /><br />I get the error<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;==============================================================================<br />&nbsp;=== Build flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />configure: WARNING: apple is not able to handle full link information<br />configure: WARNING: static builds will fail<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Advanced compiler features&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking stddef.h usability... no<br />checking stddef.h presence... yes<br />configure: WARNING: stddef.h: present but cannot be compiled<br />configure: WARNING: stddef.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: stddef.h: see the Autoconf documentation<br />configure: WARNING: stddef.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: stddef.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for stddef.h... no<br />checking stdarg.h usability... no<br />checking stdarg.h presence... yes<br />configure: WARNING: stdarg.h: present but cannot be compiled<br />configure: WARNING: stdarg.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: stdarg.h: see the Autoconf documentation<br />configure: WARNING: stdarg.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: stdarg.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for stdarg.h... no<br />checking stdio.h usability... no<br />checking stdio.h presence... yes<br />configure: WARNING: stdio.h: present but cannot be compiled<br />configure: WARNING: stdio.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: stdio.h: see the Autoconf documentation<br />configure: WARNING: stdio.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: stdio.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for stdio.h... no<br />checking math.h usability... no<br />checking math.h presence... yes<br />configure: WARNING: math.h: present but cannot be compiled<br />configure: WARNING: math.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: math.h: see the Autoconf documentation<br />configure: WARNING: math.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: math.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for math.h... no<br />checking termios.h usability... no<br />checking termios.h presence... yes<br />configure: WARNING: termios.h: present but cannot be compiled<br />configure: WARNING: termios.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: termios.h: see the Autoconf documentation<br />configure: WARNING: termios.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: termios.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for termios.h... no<br />checking errno.h usability... no<br />checking errno.h presence... yes<br />configure: WARNING: errno.h: present but cannot be compiled<br />configure: WARNING: errno.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: errno.h: see the Autoconf documentation<br />configure: WARNING: errno.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: errno.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for errno.h... no<br />checking malloc.h usability... no<br />checking malloc.h presence... no<br />checking for malloc.h... no<br />checking sys/malloc.h usability... no<br />checking sys/malloc.h presence... yes<br />configure: WARNING: sys/malloc.h: present but cannot be compiled<br />configure: WARNING: sys/malloc.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: sys/malloc.h: see the Autoconf documentation<br />configure: WARNING: sys/malloc.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: sys/malloc.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for sys/malloc.h... no<br />checking mcheck.h usability... no<br />checking mcheck.h presence... no<br />checking for mcheck.h... no<br />checking sys/time.h usability... no<br />checking sys/time.h presence... yes<br />configure: WARNING: sys/time.h: present but cannot be compiled<br />configure: WARNING: sys/time.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: sys/time.h: see the Autoconf documentation<br />configure: WARNING: sys/time.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: sys/time.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for sys/time.h... no<br />checking sys/resource.h usability... no<br />checking sys/resource.h presence... yes<br />configure: WARNING: sys/resource.h: present but cannot be compiled<br />configure: WARNING: sys/resource.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: sys/resource.h: see the Autoconf documentation<br />configure: WARNING: sys/resource.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: sys/resource.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for sys/resource.h... no<br />checking for abort... no<br />checking for mallinfo... no<br />checking size of char... 0<br />checking size of short... 0<br />checking size of int... 0<br />checking size of long... 0<br />checking size of long long... 0<br />checking size of unsigned int... 0<br />checking size of unsigned long... 0<br />checking size of unsigned long long... 0<br />checking size of float... 0<br />checking size of double... 0<br />checking size of long double... 0<br />checking size of size_t... 0<br />checking size of ptrdiff_t... 0<br />checking for an ANSI C-conforming const... no<br />checking for size_t... no<br />checking whether the Fortran compiler supports allocatable arrays in datatypes... yes<br />checking whether the Fortran compiler provides the iso_c_binding module... yes<br />checking whether the Fortran compiler accepts exit()... yes<br />checking whether the Fortran compiler accepts flush()... yes<br />checking whether the Fortran compiler accepts flush_()... no<br />checking whether the Fortran compiler accepts gamma()... yes<br />checking whether the Fortran compiler accepts getenv()... yes<br />checking whether the Fortran compiler accepts getpid()... no<br />checking whether the Fortran compiler accepts the null() intrinsic... yes<br />checking whether the Fortran compiler accepts quadruple integers... yes<br />checking whether the Fortran compiler accepts long lines... yes<br />checking whether the Fortran compiler supports stream IO... yes<br />checking whether the Fortran compiler accepts cpu_time()... yes<br />checking whether the Fortran compiler accepts etime()... no<br />checking whether to use C clock for timings... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Multicore architecture support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking whether MPI is usable... no<br />checking whether to build MPI code... no<br />checking whether the MPI library supports MPI_CREATE_TYPE_STRUCT... no<br />checking whether to activate GPU support... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Connectors / Fallbacks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking for the requested transferable I/O support... netcdf+etsf_io<br />checking whether to select a fallback for netcdf... no<br />checking netcdf.h usability... no<br />checking netcdf.h presence... no<br />checking for netcdf.h... no<br />checking for library containing nc_open... no<br />checking for Fortran module includes... unknown<br />configure: WARNING: falling back to internal netcdf version<br />checking whether to select a fallback for etsf_io... no<br />configure: WARNING: ETSF_IO requires missing NetCDF support<br />configure: WARNING: falling back to internal etsf_io version<br />checking for the actual transferable I/O support... netcdf-fallback+etsf_io-fallback<br />checking for the requested timer support... abinit<br />checking time.h usability... no<br />checking time.h presence... yes<br />configure: WARNING: time.h: present but cannot be compiled<br />configure: WARNING: time.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: time.h: see the Autoconf documentation<br />configure: WARNING: time.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: time.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for time.h... no<br />checking for clock_gettime in -lrt... no<br />checking for clock_gettime... no<br />checking for the actual timer support... abinit<br />checking for the requested linear algebra support... netlib<br />checking whether to select a fallback for linear algebra... no<br />checking for AXPBY support in specified BLAS libraries... no<br />checking for gemm3m in specified libraries... no<br />checking for library containing zgemm... -lblas<br />checking for library containing zhpev... -llapack<br />checking whether we have a serial linear algebra support... yes<br />checking whether we have a MPI linear algebra support... no<br />checking whether we have a GPU linear algebra support... no<br />checking for the actual linear algebra support... netlib<br />checking for the requested algorithmic support... none<br />checking for the actual algorithmic support... none<br />checking for the requested math support... none<br />checking for the actual math support... none<br />checking for the requested FFT support... none<br />checking for the actual FFT support... none<br />checking for the requested DFT support... atompaw+bigdft+libxc+wannier90<br />checking whether to select a fallback for libxc... no<br />checking xc.h usability... no<br />checking xc.h presence... yes<br />configure: WARNING: xc.h: present but cannot be compiled<br />configure: WARNING: xc.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: xc.h: see the Autoconf documentation<br />configure: WARNING: xc.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: xc.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for xc.h... no<br />checking xc_funcs.h usability... no<br />checking xc_funcs.h presence... yes<br />configure: WARNING: xc_funcs.h: present but cannot be compiled<br />configure: WARNING: xc_funcs.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: xc_funcs.h: see the Autoconf documentation<br />configure: WARNING: xc_funcs.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: xc_funcs.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for xc_funcs.h... no<br />checking for Fortran module includes... none required<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br />&nbsp; &nbsp; &nbsp; &nbsp; | Connector detection failure&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br />&nbsp; &nbsp; &nbsp; &nbsp; | The build system of Abinit has not been able to detect&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | one or more requested external packages, probably because&nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | you did not provide sufficient information. This means&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | that the build cannot proceed, and the configure script&nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | will thus abort now with an error.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | To address this issue, you may:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * make sure that the prerequisites of the external&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | packages are available and enabled, e.g.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-dft-flavor=&quot;libxc+bigdft&quot; or&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-trio-flavor=&quot;netcdf+etsf_io&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * use the --with-*-bins, --with-*-incs, and&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-*-libs options of configure to provide&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | additional information; please see the section related&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | to connectors in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | ~abinit/doc/config/build-config.ac for available&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | options and details;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * disable the corresponding extensions, by using the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | associated --with-*-flavor=&quot;none&quot; options of&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | configure; please see the section associated to&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | connectors in ~abinit/doc/config/build-config.ac for&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | details.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br /><br />configure: error: external libxc support does not work<br /></code></pre></div><br /><br />It seems that it is more trickier that I thought<br /><br />Thanks and regards<br /><br />-aldo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Mon Apr 16, 2012 3:26 am</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">Hi,<br /><br />It seems your build environment is broken for some reason (could be a lot of things). Where did you get the fortran compiler you're using? Instead of using the command line options, copy the doc/config/build-config.ac file to the top level directory of your abinit code folder and rename it HOST.ac where HOST is the output of running hostname on the command line. Modify the contents of the file to suit your conditions.<br /><br />Unfortunately the contents of the output you posted are not enough to diagnose this for you. You need to look in the config.log file to determine what is really happening, not just the output errors that happen at the end as they are just consequences of earlier problems.<br /><br />Compiling abinit on a mac is straightforward if you are experienced with GNU-style installs and figuring out how to fix them. If not, grab some pre-compiled binaries. <br /><br />Kane</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 17, 2012 5:42 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">On Mac you need to explicitely set CPP for the build of LibXC to work. If this is still not sufficient, you may use the --enable-fc-wrapper option in addition to it.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Fri Apr 20, 2012 2:50 pm</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Dear Kane and Yann<br /><br />thanks for your replies. I have been trying to go through and still I am unsuccesful. <br /><br />The gcc came with XCODE and the gfortran I did download it from hpc.sourceforge.net (lion version and binaries)<br /><br />If I use configure without any flag, and after I use make, I get errors related to libxc as<br />Error: Unclassifiable statement at (1)<br />libxc.f90:102.7:<br /><br />    end function xc_f90_ ## info_number<br />       1<br />Error: Expecting END INTERFACE statement at (1)<br />libxc.f90:104.28:<br /><br />    integer function xc_f90_ ## info_kind(info)<br />                            1<br />Internal Error at (1):<br />insert_bbt(): Duplicate key found!<br />make[7]: *** [libxc.lo] Error 1<br />make[6]: *** [all] Error 2<br /><br /><br />(config.log is included)<br /><br />but if I do compile libxc on my own (which went really smooth) and I do use <br /><br />./configure --with-libxc-incs=-I/opt/etsf/include --with-libxc-libs=&quot;-L/opt/etsf/lib/ -lxc&quot;<br /><br />which do exist:<br /><br />nb134:6.13.3-private aldoromero$ ls /opt/etsf/include/<br />libxc_funcs_m.mod       xc.h                    xc_config.h             xc_f90_lib_m.mod        xc_f90_types_m.mod      xc_funcs.h<br />nb134:6.13.3-private aldoromero$ ls /opt/etsf/lib     <br />libxc.a         libxc.la        pkgconfig<br /><br /><br />I get the following complain<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp;==============================================================================<br />&nbsp;=== Connectors / Fallbacks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking for the requested transferable I/O support... netcdf+etsf_io<br />checking whether to select a fallback for netcdf... no<br />checking netcdf.h usability... no<br />checking netcdf.h presence... no<br />checking for netcdf.h... no<br />checking for library containing nc_open... no<br />checking for Fortran module includes... unknown<br />configure: WARNING: falling back to internal netcdf version<br />checking whether to select a fallback for etsf_io... no<br />configure: WARNING: ETSF_IO requires missing NetCDF support<br />configure: WARNING: falling back to internal etsf_io version<br />checking for the actual transferable I/O support... netcdf-fallback+etsf_io-fallback<br />checking for the requested timer support... abinit<br />checking time.h usability... no<br />checking time.h presence... yes<br />configure: WARNING: time.h: present but cannot be compiled<br />configure: WARNING: time.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: time.h: see the Autoconf documentation<br />configure: WARNING: time.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: time.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for time.h... no<br />checking for clock_gettime in -lrt... no<br />checking for clock_gettime... no<br />checking for the actual timer support... abinit<br />checking for the requested linear algebra support... netlib<br />checking whether to select a fallback for linear algebra... no<br />checking for AXPBY support in specified BLAS libraries... no<br />checking for gemm3m in specified libraries... no<br />checking for library containing zgemm... -lblas<br />checking for library containing zhpev... -llapack<br />checking whether we have a serial linear algebra support... yes<br />checking whether we have a MPI linear algebra support... no<br />checking whether we have a GPU linear algebra support... no<br />checking for the actual linear algebra support... netlib<br />checking for the requested algorithmic support... none<br />checking for the actual algorithmic support... none<br />checking for the requested math support... none<br />checking for the actual math support... none<br />checking for the requested FFT support... none<br />checking for the actual FFT support... none<br />checking for the requested DFT support... atompaw+bigdft+libxc+wannier90<br />checking whether to select a fallback for libxc... no<br />checking xc.h usability... no<br />checking xc.h presence... yes<br />configure: WARNING: xc.h: present but cannot be compiled<br />configure: WARNING: xc.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: xc.h: see the Autoconf documentation<br />configure: WARNING: xc.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: xc.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for xc.h... no<br />checking xc_funcs.h usability... no<br />checking xc_funcs.h presence... yes<br />configure: WARNING: xc_funcs.h: present but cannot be compiled<br />configure: WARNING: xc_funcs.h:&nbsp; &nbsp; &nbsp;check for missing prerequisite headers?<br />configure: WARNING: xc_funcs.h: see the Autoconf documentation<br />configure: WARNING: xc_funcs.h:&nbsp; &nbsp; &nbsp;section &quot;Present But Cannot Be Compiled&quot;<br />configure: WARNING: xc_funcs.h: proceeding with the compiler's result<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## Report this to https://bugs.launchpad.net/abinit/ ##<br />configure: WARNING:&nbsp; &nbsp; &nbsp;## ------------------------------------------------- ##<br />checking for xc_funcs.h... no<br />checking for Fortran module includes... none required<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br />&nbsp; &nbsp; &nbsp; &nbsp; | Connector detection failure&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br />&nbsp; &nbsp; &nbsp; &nbsp; | The build system of Abinit has not been able to detect&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | one or more requested external packages, probably because&nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | you did not provide sufficient information. This means&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | that the build cannot proceed, and the configure script&nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | will thus abort now with an error.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | To address this issue, you may:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * make sure that the prerequisites of the external&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | packages are available and enabled, e.g.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-dft-flavor=&quot;libxc+bigdft&quot; or&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-trio-flavor=&quot;netcdf+etsf_io&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * use the --with-*-bins, --with-*-incs, and&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | --with-*-libs options of configure to provide&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | additional information; please see the section related&nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | to connectors in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | ~abinit/doc/config/build-config.ac for available&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | options and details;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | * disable the corresponding extensions, by using the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | associated --with-*-flavor=&quot;none&quot; options of&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | configure; please see the section associated to&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; | connectors in ~abinit/doc/config/build-config.ac for&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; | details.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; +--------------------------------------------------------------+<br /></code></pre></div><br /><br />By the way Kane, I am not interested in a binary because I am developing something in Abinit, therefore is not<br />only as a user <img class="smilies" src="images/smilies/icon_e_smile.gif" alt=":-)" title="Smile" /><br /><br />Thanks again!<br /><br />-aldo.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Fri Apr 20, 2012 7:45 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Looks like your system is ignoring the --with-libxc-* arguments. I clearly was not able to reproduce this problem. This is thus very likely coming from a misconfiguration of your development environment.<br /><br />I cannot help you any further, because I'm not a Mac user.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Mon Apr 23, 2012 10:00 pm</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">I concur. How about you post your config.log for the misconfiguration? It might contain something helpful.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 24, 2012 9:33 am</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Well.. herewith I am including two different config.log. The first one was created only with the ./configure command,<br />while the second one was created with ./configure --with-dft-flavor=none --with-trio-flavor=none<br /><br />The errors for the first case looks like:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>cpp -P -std=c99&nbsp; -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; ./libxc_master.F90 &gt; ../src/libxc.f90<br />/bin/sh ../libtool --tag=FC&nbsp; &nbsp;--mode=compile gfortran&nbsp; -ffree-form -g -ffree-line-length-none&nbsp; -O2 -mtune=native -march=native -mfpmath=sse -g -O2 -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include -c -o libxc.lo&nbsp; libxc<br />.f90<br />libtool: compile:&nbsp; gfortran -ffree-form -g -ffree-line-length-none -O2 -mtune=native -march=native -mfpmath=sse -g -O2 -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include -c libxc.f90 -o libxc.o<br />libxc.f90:30:<br /><br />module xc_f90_ ## types_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:34.17:<br /><br />&nbsp; integer, public, parameter :: xc_f90_kind = selected_real_kind(14)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PUBLIC attribute at (1) is not allowed outside of the specification part of a module<br />libxc.f90:37.2:<br /><br />&nbsp; type xc_f90_ ## pointer_t<br />&nbsp; 1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:38.11:<br /><br />&nbsp; &nbsp; private<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PRIVATE statement at (1) is only allowed in the specification part of a module<br />libxc.f90:40.5:<br /><br />&nbsp; end type xc_f90_ ## pointer_t<br />&nbsp; &nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:42.3:<br /><br />end module xc_f90_ ## types_m<br />&nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />libxc.f90:46:<br /><br />module xc_f90_ ## lib_m<br />1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:48.13:<br /><br />&nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:49.19:<br /><br />&nbsp; use libxc_funcs_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />libxc.f90:39.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: USE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:51.15:<br /><br />&nbsp; implicit none<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />libxc.f90:39.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: IMPLICIT NONE statement at (1) cannot follow data declaration statement at (2)<br />libxc.f90:53.8:<br /><br />&nbsp; public<br />&nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: PUBLIC statement at (1) is only allowed in the specification part of a module<br />libxc.f90:99.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_number(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Expected formal argument list in function definition at (1)<br />libxc.f90:100.17:<br /><br />&nbsp; &nbsp; &nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />libxc.f90:101.6:<br /><br />&nbsp; &nbsp; &nbsp; type(xc_f90_ ## pointer_t), intent(in) :: info<br />&nbsp; &nbsp; &nbsp; 1<br />Error: Unclassifiable statement at (1)<br />libxc.f90:102.7:<br /><br />&nbsp; &nbsp; end function xc_f90_ ## info_number<br />&nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Expecting END INTERFACE statement at (1)<br />libxc.f90:104.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_kind(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Internal Error at (1):<br />insert_bbt(): Duplicate key found!<br />make&#91;7&#93;: *** &#91;libxc.lo&#93; Error 1<br />make&#91;6&#93;: *** &#91;all&#93; Error 2<br />make&#91;5&#93;: *** &#91;all-recursive&#93; Error 1<br />make&#91;4&#93;: *** &#91;all&#93; Error 2<br />make&#91;3&#93;: *** &#91;stamps/libxc-build-stamp&#93; Error 2<br />make&#91;2&#93;: &#91;all-local&#93; Error 2 (ignored)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make&#91;2&#93;: *** &#91;all-local&#93; Error 1<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br />While for the second case, they looks like<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native <br />-mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o io.o io.F90<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native <br />-mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o iorho.o iorho.F90<br />gfortran -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs -I/Users/aldoromero/Abinit/6.13.3-private/fallbacks/exports/include&nbsp; &nbsp;-ffree-form -J/Users/aldoromero/Abinit/6.13.3-private/src/mods -O2 -mtune=native -march=native <br />-mfpmath=sse -g -ffree-line-length-none&nbsp; -c -o numeric.o numeric.F90<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:172:no such instruction: `vmovsd LC2(%rip), %xmm0'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:174:no such instruction: `vcvtsi2sd %eax, %xmm2,%xmm2'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:175:no such instruction: `vdivsd %xmm2, %xmm0,%xmm2'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:179:no such instruction: `vmulsd LC3(%rip), %xmm2,%xmm0'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:180:no such instruction: `vmovsd %xmm2, (%rsp)'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:185:no such instruction: `vmovsd (%rsp), %xmm2'<br />/var/folders/sd/7rq2vwcx7fd8stfzsvfnz9980000gn/T//ccFPt6Ue.s:188:no such instruction: `vmulsd %xmm0, %xmm0,%xmm0'<br /></code></pre></div><br /><br />I hope this helps. Thanks a lot!.<br /><br />-aldo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 24, 2012 9:36 am</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Sorry, I forgot to include the config.log. Here is the first case.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 24, 2012 9:37 am</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">Second case. Thanks.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 24, 2012 10:05 am</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Looks like the default architecture of your GCC installation is not the one of your computer. You should reinstall the whole GCC suite paying a particular attention to the architecture.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Tue Apr 24, 2012 11:42 am</strong></div>
				<div class="author">by <strong>aromero</strong></div>
				<div class="content">I have reinstalled the gcc in lion after the xcode reinstallation and I am having exactly the same problem.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS&nbsp;&nbsp;<span style="color: #006600">[SOLVED]</span></h3>
				<div class="date">Posted: <strong>Thu Apr 26, 2012 2:33 am</strong></div>
				<div class="author">by <strong>kaneod</strong></div>
				<div class="content">Hi,<br /><br />Your config log is full of one particular kind of error that seems to be causing the Abinit configure script to choose the wrong kind of settings:<br /><br /><blockquote class="uncited"><div>conftest.c:1: error: bad value (native) for -march= switch</div></blockquote><br /><br /> Basically when configure tries to run a test on gcc it uses the flag -march=native which apparently isn't supported by the Apple LLVM compiler you're using. Clang is known not to support this, for example. My general advice for using OSX as a scientific platform is to compile a version of GCC (gcc, g++ and gfortran) solely for the purpose of building electronic structure codes, then go and compile your whole toolchain (fftw, blas, lapack, libxc, etc) with the custom gcc. The apple &quot;GCC&quot; compilers are just wrappers for their own LLVM implementation and cannot be trusted to behave like regular GNU tools.<br /><br />It is normal for electronic structure codes to be quite touchy about compilers and the toolchain generally - I believe between Abinit and CASTEP, dozens of compiler bugs have been discovered over the years! <br /><br />On my computers at home the custom gcc binaries all have a &quot;46&quot; suffix (gcc46, gfortran46, etc) so that I never have any ambiguity about what compiler is being used. Remember you really do have to compile all the fortran parts of the toolchain (including MPI) with the same version of gfortran to ensure compatibility. Possibly this is true for the C/C++ parts of the code as well. PM me if you want more details, I can also give you a build.ac that works on Lion once you have gcc built and installed.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Fri Jun 08, 2012 4:42 pm</strong></div>
				<div class="author">by <strong>dgontier</strong></div>
				<div class="content">Hi,<br />I got the same problem ! I'm also running Lion Mac OS.<br /><br />I can run make on fallback/sources/libxc-1.1.0.1/ with<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>FCCPP=/usr/bin/cpp ./configure<br />make<br /></code></pre></div><br />and obtain :<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make&nbsp; all-recursive<br />Making all in build<br />make&#91;2&#93;: Nothing to be done for `all'.<br />Making all in src<br />make&nbsp; all-am<br />/bin/sh ../libtool --tag=FC&nbsp; &nbsp;--mode=compile gfortran&nbsp; -pipe -O3 -funroll-loops -ffast-math -ffree-line-length-none -c -o libxc.lo&nbsp; libxc.f90<br />libtool: compile:&nbsp; gfortran -pipe -O3 -funroll-loops -ffast-math -ffree-line-length-none -c libxc.f90 -o libxc.o<br />./libxc_master.F90:28:<br /><br />module xc_f90_ ## types_m<br />1<br />Error: Unclassifiable statement at (1)<br />./libxc_master.F90:32.17:<br /><br />&nbsp; integer, public, parameter :: xc_f90_kind = selected_real_kind(14)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PUBLIC attribute at (1) is not allowed outside of the specification part of a module<br />./libxc_master.F90:35.2:<br /><br />&nbsp; type xc_f90_ ## pointer_t<br />&nbsp; 1<br />Error: Unclassifiable statement at (1)<br />./libxc_master.F90:36.11:<br /><br />&nbsp; &nbsp; private<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: PRIVATE statement at (1) is only allowed in the specification part of a module<br />./libxc_master.F90:38.5:<br /><br />&nbsp; end type xc_f90_ ## pointer_t<br />&nbsp; &nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />./libxc_master.F90:40.3:<br /><br />end module xc_f90_ ## types_m<br />&nbsp; &nbsp;1<br />Error: Expecting END PROGRAM statement at (1)<br />./libxc_master.F90:44:<br /><br />module xc_f90_ ## lib_m<br />1<br />Error: Unclassifiable statement at (1)<br />./libxc_master.F90:46.13:<br /><br />&nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />./libxc_master.F90:47.19:<br /><br />&nbsp; use libxc_funcs_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />./libxc_master.F90:37.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: USE statement at (1) cannot follow data declaration statement at (2)<br />./libxc_master.F90:49.15:<br /><br />&nbsp; implicit none<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />./libxc_master.F90:37.30:<br /><br />&nbsp; &nbsp; integer, pointer :: buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />Error: IMPLICIT NONE statement at (1) cannot follow data declaration statement at (2)<br />./libxc_master.F90:51.8:<br /><br />&nbsp; public<br />&nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: PUBLIC statement at (1) is only allowed in the specification part of a module<br />./libxc_master.F90:97.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_number(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Error: Expected formal argument list in function definition at (1)<br />./libxc_master.F90:98.17:<br /><br />&nbsp; &nbsp; &nbsp; use xc_f90_ ## types_m<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Syntax error in USE statement at (1)<br />./libxc_master.F90:99.6:<br /><br />&nbsp; &nbsp; &nbsp; type(xc_f90_ ## pointer_t), intent(in) :: info<br />&nbsp; &nbsp; &nbsp; 1<br />Error: Unclassifiable statement at (1)<br />./libxc_master.F90:100.7:<br /><br />&nbsp; &nbsp; end function xc_f90_ ## info_number<br />&nbsp; &nbsp; &nbsp; &nbsp;1<br />Error: Expecting END INTERFACE statement at (1)<br />./libxc_master.F90:102.28:<br /><br />&nbsp; &nbsp; integer function xc_f90_ ## info_kind(info)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br />Internal Error at (1):<br />insert_bbt(): Duplicate key found!<br />make&#91;3&#93;: *** &#91;libxc.lo&#93; Error 1<br />make&#91;2&#93;: *** &#91;all&#93; Error 2<br />make&#91;1&#93;: *** &#91;all-recursive&#93; Error 1<br />make: *** &#91;all&#93; Error 2<br /></code></pre></div><br /><br />Also, while I would be pleased with a pre-compiled version of Abinit, I cannot find any on the download page : <!-- m --><a class="postlink" href="http://www.abinit.org/downloads">http://www.abinit.org/downloads</a><!-- m --> .</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Sat Jun 09, 2012 4:39 pm</strong></div>
				<div class="author">by <strong>dgontier</strong></div>
				<div class="content">Allright, it worked.<br /><br />First thing is : whenever I try to use /usr/bin/cpp or /usr/bin/gcc, it fails. So I installed gcc-4, c++-4, (version 4.7) and so on.<br />First, I run :<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>CC=gcc-4 CXX=c++-4 CPP=cpp-4 ./configure<br />make<br /></code></pre></div><br /><br />and I get a first error when compiling libxc. Then, I look in the file ./fallbacks/config.mk to change the variable : TRUE_CPP=cpp ... into TRUE_CPP=cpp-4<br />now, a make should work !</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Compiling 6.13.3 in Lion Mac OS</h3>
				<div class="date">Posted: <strong>Thu Jul 24, 2014 12:16 pm</strong></div>
				<div class="author">by <strong>murray21</strong></div>
				<div class="content">As a developer, I am engaged in this and I find the same issue while running the latest version in Mountain Lion. I am getting a bunch of errors, I have tried to recreate and compile again, and nothing worked out. Thank you Kane, editing the configuration scripts did the trick for me and it is working great for me. I appreciate it.	<br /><br />Also, this blog <a href="http://www.windowssupportnow.com/" class="postlink">windowssupportnow.com</a>  is helpful in resolving the windows problems.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1609&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 23:04:02 GMT -->
</html>
