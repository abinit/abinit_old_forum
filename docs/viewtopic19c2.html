<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3103&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 00:29:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; phonon spectro under finite electric field with rf</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>phonon spectro under finite electric field with rf</h2>
		<p><a href="viewtopicd6e6.html?f=10&amp;t=3103">https://forum.abinit.org/viewtopic.php?f=10&amp;t=3103</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>phonon spectro under finite electric field with rf</h3>
				<div class="date">Posted: <strong>Tue Sep 15, 2015 5:30 pm</strong></div>
				<div class="author">by <strong>onion2440</strong></div>
				<div class="content">Dear every one:<br />    I want to calculate the phonon dispersion under finite electric  field with the response function method. Followed the steps attached under the berropt input variable I first do a ground state under the electric field and then I do a phonon calculation. But I always encounter a problem like that as showed below:<br /><br />-P-0000  leave_test : synchronization done...<br /><br /> chkinp: machine precision is   2.2204460492503131E-16<br /><br /> chkinp: Checking input parameters for consistency, jdtset=  11.<br /><br /> chkinp: Checking input parameters for consistency, jdtset=  12.<br /><br /> chkinp: Checking input parameters for consistency, jdtset=  21.<br /><br /> chkinp: Checking input parameters for consistency, jdtset=  22.<br /><br /> Subroutine Unknown:0:BUG<br />  The value of cond_number is4 but it should be positive and &lt; 4.<br />  Action : contact ABINIT group.<br /><br />.Delivered   10 WARNINGs and  43 COMMENTs to log file.<br />-P-0000<br />-P-0000  leave_new : decision taken to exit ...<br /> DATA TYPE INFORMATION:<br /> REAL:      Data type name: REAL(DP)<br />            Kind value:      8<br />            Precision:      15<br />            Smallest nonnegligible quantity relative to 1:  0.22204460E-15<br />            Smallest positive number:                       0.22250739-307<br /> Subroutine Unknown:0:BUG<br />  The value of cond_number is4 but it should be positive and &lt; 4.<br />  Action : contact ABINIT group.<br /><br />.Delivered   10 WARNINGs and  43 COMMENTs to log file.<br />-P-0000<br />-P-0000  leave_new : decision taken to exit ...<br /> DATA TYPE INFORMATION:<br /> REAL:      Data type name: REAL(DP)<br />            Kind value:      8<br />            Precision:      15<br />            Smallest nonnegligible quantity relative to 1:  0.22204460E-15<br />            Smallest positive number:                       0.22250739-307<br />            Largest representable number:                   0.17976931+309<br /> INTEGER:   Data type name: INTEGER(default)<br />           Kind value: 4<br />            Bit size:   32<br />            Largest representable number: 2147483647<br /> LOGICAL:   Data type name: LOGICAL<br />            Kind value: 4<br /><br /> Subroutine Unknown:0:BUG<br />  The value of cond_number is4 but it should be positive and &lt; 4.<br />  Action : contact ABINIT group.<br /><br /> CHARACTER: Data type name: CHARACTER             Kind value: 1<br />  ==== Using MPI-2 specifications ====<br />  MPI-IO support is ON<br />  xmpi_tag_ub ................   2147483647<br />  xmpi_bsize_ch ..............            1<br />  xmpi_bsize_int .............            4<br />  xmpi_bsize_sp ..............            4<br />  xmpi_bsize_dp ..............            8<br />  xmpi_bsize_spc .............            8<br />  xmpi_bsize_dpc .............           16<br />  xmpio_bsize_frm ............            4<br />  xmpi_address_kind ..........            8<br />  xmpi_offset_kind ...........            8<br />  MPI_WTICK ..................   1.000000000000000E-006<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /> === Build Information ===<br />  Version       : 7.0.5<br />  Build target  : x86_64_linux_intel11.1<br />  Build date    : 20150913<br />=== Compiler Suite ===<br />  C compiler       : intel11.1<br />  CFLAGS           :  -g -O2 -vec-report0<br />  C++ compiler     : gnu11.1<br />  CXXFLAGS         :  -g -O2 -mtune=native -march=native -mfpmath=sse<br />  Fortran compiler : intel11.1<br />  FCFLAGS          :  -g -extend-source -vec-report0 -noaltparam -nofpscomp<br />  FC_LDFLAGS       :    -static-intel -static-libgcc<br /><br /> === Optimizations ===<br />  Debug level        : basic<br />  Optimization level : standard<br />  Architecture       : intel_xeon<br /><br /> === MPI ===<br />  Parallel build : yes<br />  Parallel I/O   : yes<br />  Time tracing   : no<br />  GPU support    : no<br /><br /> === Connectors / Fallbacks ===<br />  Connectors on : yes<br />  Fallbacks on  : yes<br />  DFT flavor    : libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br />  FFT flavor    : none<br />  LINALG flavor : netlib-fallback<br />  MATH flavor   : none<br />  TIMER flavor  : abinit<br />  TRIO flavor   : netcdf-fallback+etsf_io-fallback<br /><br /> === Experimental features ===<br />  Bindings            : no<br />  Exports             : no<br />  GW double-precision : no<br />MPI process (rank: 12) terminated unexpectedly on c318-215.ls4.tacc.utexas.edu<br />Exit code -5 signaled from c307-302<br />MPI process (rank: 0) terminated unexpectedly on c307-302.ls4.tacc.utexas.edu<br />MPI process (rank: 24) terminated unexpectedly on c318-308.ls4.tacc.utexas.edu<br />MPI process (rank: 40) terminated unexpectedly on c338-309.ls4.tacc.utexas.edu<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libirc.so          00002B378D0D251D  Unknown               Unknown  Unknown<br />libirc.so          00002B378D0D1025  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B378CD2020C  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B378CC90F45  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B378CCA0BC2  Unknown               Unknown  Unknown<br />libpthread.so.0    000000347120ECA0  Unknown               Unknown  Unknown<br />......<br />after the unknown the job ended.<br /><br />The input file is attached below:<br />#Definition of the elementary cell<br />#*********************************<br />   acell 3*10.62<br />   rprim 0.0 0.5 0.5<br />         0.5 0.0 0.5<br />         0.5 0.5 0.0<br /><br />#Definition of the atoms<br />#***********************<br />   natom 2<br />   ntypat 2<br />   znucl 13 33<br />   typat 1 2<br />   ixc 3<br />   xred  0.00  0.00  0.00<br />         0.25  0.25  0.25<br /><br />#Definition of the SCF procedure<br />#*******************************<br />   iscf 5<br />   nstep 100<br />   nband 4<br />   nbdbuf 0<br /><br /><br />#Definition of the plane wave basis set<br />#**************************************<br />   ecut  3<br />   ecutsm 0.5<br />   dilatmx 1.05<br />   ngkpt 8 8 8<br />   nshiftk 4<br />   shiftk 0.5 0.5 0.5<br />          0.5 0.0 0.0<br />          0.0 0.5 0.0<br />          0.0 0.0 0.5<br />   tolvrs 1.0d-20<br /><br />#autoparal 1<br />#paral_kgb 0<br /><br /># ndtset  11<br />  ndtset   12<br />jdtset  11  12  21  22  23  31  32  33 34 35 36 37   #different parameter<br /><br />nsym2?  1    # phonon calculation should be set to be 1<br />nsym3?  1<br />berryopt11 -1       rfdir11    1 1 1<br /><br />berryopt12   4       efield12   0.0001  0.0  0.0   #scf in efield<br />berryopt2?   4       efield2?   0.0001  0.0  0.0<br />berryopt3?   4       efield3?   0.0001  0.0  0.0<br /><br /><br />getwfk12  11<br /><br /><br />###ground state changed to the efield state<br /># Crystalline AlAs : computation of the phonon spectrum<br />#   ndtset   10<br />#Set 1 : ground state self-consistency<br /><br />#  getwfk12   0            # Cancel default<br />  kptopt12   2            # Automatic generation of k points, taking<br />                         # into account the symmetry<br />    nqpt12   0            # Cancel default<br />  tolvrs12   1.0d-18      # SCF stopping criterion (modify default)<br />  rfphon12   0            # Cancel default<br /><br />#Q vectors for all datasets<br /><br />#Complete set of symmetry-inequivalent qpt chosen to be commensurate<br /># with kpt mesh so that only one set of GS wave functions is needed.<br />#Generated automatically by running GS calculation with kptopt=1,<br /># nshift=0, shiftk=0 0 0 (to include gamma) and taking output kpt set<br /># file as qpt set. Set nstep=1 so only one iteration runs.<br /><br />     nqpt2?   1            # One qpt for each dataset (only 0 or 1 allowed)<br />     nqpt3?   1                    # This is the default for all datasets and must<br />                           #  be explicitly turned off for dataset 1.<br /><br />     qpt22   0.00000000E+00  0.00000000E+00  0.00000000E+00<br />     qpt23   0.00000000E+00  0.00000000E+00  0.00000000E+00<br />     qpt31   2.50000000E-01  0.00000000E+00  0.00000000E+00<br />     qpt32   5.00000000E-01  0.00000000E+00  0.00000000E+00<br />     qpt33   2.50000000E-01  2.50000000E-01  0.00000000E+00<br />     qpt34   5.00000000E-01  2.50000000E-01  0.00000000E+00<br />    qpt35  -2.50000000E-01  2.50000000E-01  0.00000000E+00<br />     qpt36   5.00000000E-01  5.00000000E-01  0.00000000E+00<br />     qpt37  -2.50000000E-01  5.00000000E-01  2.50000000E-01<br /><br />#Set 2 : Response function calculation of d/dk wave function <br /><br />    iscf22   -3         # Need this non-self-consistent option for d/dk<br />  kptopt22   3         # Modify default to use time-reversal symmetry<br />  rfphon22   0          # Cancel default<br />  rfelfd22   2          # Calculate d/dk wave function only<br />  tolwfr22   1.0d-22    # Use wave function residual criterion instead<br /><br />#Set 3 : Response function calculation of Q=0 phonons and electric field pert.<br /><br />  getddk23   22          # d/dk wave functions from last dataset<br />  kptopt23   3          # Modify default to use time-reversal symmetry<br />  rfelfd23   3          # Electric-field perturbation response only<br /><br />#Sets 4-10 : Finite-wave-vector phonon calculations (defaults for all datasets)<br /><br />    getwfk2?   12          # Use GS wave functions from dataset1<br />#   kptopt3?   3          # Need full k-point set for finite-Q response<br />#   rfphon3?   1          # Do phonon response<br />    rfatpol2?   1 2        # Treat displacements of all atoms<br />    rfdir2?   1 1 1      # Do all directions (symmetry will be used) <br /><br /><br />   getwfk3?   12          # Use GS wave functions from dataset1<br />   kptopt3?   3          # Need full k-point set for finite-Q response<br />   rfphon3?   1          # Do phonon response<br />  rfatpol3?   1 2        # Treat displacements of all atoms<br />    rfdir3?   1 1 1      # Do all directions (symmetry will be used)<br />   tolvrs3?   1.0d-8     # This default is active for sets 3-10<br /><br /># add to conserve old &lt; 6.7.2 behavior for calculating forces at each SCF step<br /> optforces 1<br /><br />Can anyone help me ? please!<br />Thank you a lot!<br />Bestwishes<br />onion</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3103&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 00:29:24 GMT -->
</html>
