<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3273&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:57:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Got negative freq for dense q points</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Got negative freq for dense q points</h2>
		<p><a href="viewtopic5e9f.html?f=10&amp;t=3273">https://forum.abinit.org/viewtopic.php?f=10&amp;t=3273</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Got negative freq for dense q points</h3>
				<div class="date">Posted: <strong>Thu Apr 28, 2016 3:05 am</strong></div>
				<div class="author">by <strong>shaoziji</strong></div>
				<div class="content">Dear users/developers,<br />I am doing the test work on abinit as a new user, I calculated the el-ph of the Im-3m BCC H3S with 4*4*4 q points, the results was ok an no negative freq appeared, but as I changed the q points to 8*8*8 and keep other input unchanged. I got a negative freq at one q points about -400 cm -1. The negative freq q point was generated by 8*8*8 q points but didn't appeared when q points was 4*4*4. Is there anything wrong with the calculation?<br /><br />Sincerely thanks<br /><br />Shao<br />the dataset of the q point next to the negative q point without negative freq<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>ndtset 4<br /># DATASET 1 : make ground state wavefunctions and density<br />tolvrs1&nbsp; &nbsp; &nbsp;1.0d-18<br />iscf1&nbsp; &nbsp; 7<br />nline1&nbsp; &nbsp;8<br />rfphon1&nbsp; 0<br />nqpt1&nbsp; &nbsp; 0<br />prtwf1&nbsp; &nbsp;1<br />getwfk1&nbsp; 0<br />kptopt1&nbsp; 1<br />dilatmx1&nbsp; &nbsp; 2.00<br />ecutsm1&nbsp; &nbsp; &nbsp;0.5<br />strtarget1&nbsp; -6.797858d-3&nbsp; -6.797858d-3&nbsp; -6.797858d-3&nbsp; 0&nbsp; 0&nbsp; 0<br /># DATASET 2 : calculate the Qpoints<br />qpt2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-3.75000000E-01 5.00000000E-01 1.25000000E-01<br /># DATASET 3 : calculate WF on full BZ<br />tolvrs3&nbsp; &nbsp; &nbsp; 1.0d-18<br />prtwf3&nbsp; &nbsp; &nbsp; &nbsp;1<br />getwfk3&nbsp; &nbsp; &nbsp; 1<br />iscf3&nbsp; &nbsp; &nbsp; &nbsp; 7<br />nline3&nbsp; &nbsp; &nbsp; &nbsp;1<br />nqpt3&nbsp; &nbsp; &nbsp; &nbsp; 0<br />rfphon3&nbsp; &nbsp; &nbsp; 0<br /># DATASET 5 : Compute the GKK correctly (no gauge problem)<br /># This step is very quick as NSCF+nstep 1<br />qpt4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-3.75000000E-01 5.00000000E-01 1.25000000E-01<br />prtgkk4&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # print out gkk files directly<br />iscf4&nbsp; &nbsp; &nbsp; -2<br />tolwfr4&nbsp; &nbsp; &nbsp; 1.0d-20<br />nline4&nbsp; &nbsp; &nbsp; &nbsp;1<br />getwfk4&nbsp; &nbsp; &nbsp; 3<br />get1den4&nbsp; &nbsp; &nbsp;2<br /># general data for all phonon calculations:<br />prepgkk 1&nbsp; &nbsp; &nbsp; &nbsp; # flag to calculate all perturbations for el-phon calculations<br />use_nonscf_gkk 0 # enforce old default and scf-calculate all perturbations<br />nqpt 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 1 qpoint at a time<br />tolvrs 1.e-8&nbsp; &nbsp; &nbsp;# tolerance on 2DTE convergence: potential^(1) is what we need<br />getwfk 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# all other DS get wf from DS1<br />prtwf 0<br />rfatpol 1 4&nbsp; &nbsp; &nbsp; # all atoms are perturbed-Notice<br />rfdir 1 1 1&nbsp; &nbsp; &nbsp; # all directions of perturbation<br />rfphon 1<br />#&nbsp; Common data for GS and perturbation runs<br /># The kpoint grid is minimalistic to keep the calculation manageable.<br />ngkpt&nbsp; &nbsp; &nbsp; &nbsp; 24 24 24<br />kptopt&nbsp; &nbsp; &nbsp; &nbsp;3<br /># As the kinetic energy cutoff<br />ecut&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;35<br /># Use a centered grid for the kpoints<br />nshiftk&nbsp; &nbsp; 1<br />shiftk&nbsp; &nbsp; &nbsp; 0 0 0<br />#&nbsp; Common data<br />acell&nbsp; &nbsp; &nbsp; 4.8813597008E+00&nbsp; 4.8813597008E+00&nbsp; 4.8813597008E+00<br />rprim&nbsp; &nbsp; &nbsp;-5.7735026919E-01&nbsp; 5.7735026919E-01&nbsp; 5.7735026919E-01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.7735026919E-01 -5.7735026919E-01&nbsp; 5.7735026919E-01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.7735026919E-01&nbsp; 5.7735026919E-01 -5.7735026919E-01<br />nband&nbsp; &nbsp; &nbsp; &nbsp; 15<br />#&nbsp; include metallic occupation function with a small smearing<br />occopt&nbsp; &nbsp; &nbsp; &nbsp;6<br />tsmear&nbsp; &nbsp; &nbsp; &nbsp;0.001<br />natom&nbsp; &nbsp; &nbsp; &nbsp; 4<br />ntypat&nbsp; &nbsp; &nbsp; &nbsp;2<br />typat&nbsp; &nbsp; &nbsp; &nbsp; 1 1 1 2<br />xred&nbsp; &nbsp; &nbsp; 5.0000000000E-01&nbsp; 5.0000000000E-01&nbsp; 0.0000000000E+00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0000000000E+00&nbsp; 5.0000000000E-01&nbsp; 5.0000000000E-01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.0000000000E-01&nbsp; 0.0000000000E+00&nbsp; 5.0000000000E-01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0000000000E+00&nbsp; 0.0000000000E+00&nbsp; 0.0000000000E+00<br />nstep&nbsp; &nbsp; &nbsp; &nbsp; 100000<br />znucl&nbsp; &nbsp; &nbsp; &nbsp; 1 16</code></pre></div><br />and the dataset of negative q point was nothing different from this but the coordinate of q : -0.375 -0.375 0.125</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Got negative freq for dense q points</h3>
				<div class="date">Posted: <strong>Wed Jul 20, 2016 7:26 pm</strong></div>
				<div class="author">by <strong>bmatt</strong></div>
				<div class="content">Hello,<br />As a user, I get this problem too. In my experience, you must increase parameters like ngkpt and ecut (try ngkpt first) to help the situation. Sometimes though, if the structure itself is unstable, this negative frequency suggests instabilities in the crystal structure or phase. Increasing ngkpt makes the calculations expensive so make sure you can get away with using lower tolvrs when converging the scf phonon cycle in your rfphon dataset</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Got negative freq for dense q points</h3>
				<div class="date">Posted: <strong>Fri Aug 12, 2016 5:31 am</strong></div>
				<div class="author">by <strong>shaoziji</strong></div>
				<div class="content"><blockquote><div><cite>bmatt wrote:</cite>Hello,<br />As a user, I get this problem too. In my experience, you must increase parameters like ngkpt and ecut (try ngkpt first) to help the situation. Sometimes though, if the structure itself is unstable, this negative frequency suggests instabilities in the crystal structure or phase. Increasing ngkpt makes the calculations expensive so make sure you can get away with using lower tolvrs when converging the scf phonon cycle in your rfphon dataset</div></blockquote><br />Thank you very much for your answer, but my computation sources cannot afford the denser kpoints or larger ecut calculation. Is that ok to set a more dense kpoints during the scf calculation at first step and then a smaller kpoints  for the following calculation about every qpoints?  I want to calculate the el-ph porperties and the superconductive temperature(Tc) , if I set  two ngkpt like this , will it influence the results?<br /><br />Thank you very much<br /> <br />Shao</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Got negative freq for dense q points</h3>
				<div class="date">Posted: <strong>Fri Aug 19, 2016 12:54 am</strong></div>
				<div class="author">by <strong>bmatt</strong></div>
				<div class="content">Oh I see, when I first looked at the question I did not read thoroughly<br />I thought you were running a phonon band structure calculation and getting negative frequencies at specific q-points. My mistake, upon 2nd look, I have no real experience doing el-ph calcs</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Got negative freq for dense q points</h3>
				<div class="date">Posted: <strong>Sun Aug 21, 2016 8:28 am</strong></div>
				<div class="author">by <strong>shaoziji</strong></div>
				<div class="content"><blockquote><div><cite>bmatt wrote:</cite>Oh I see, when I first looked at the question I did not read thoroughly<br />I thought you were running a phonon band structure calculation and getting negative frequencies at specific q-points. My mistake, upon 2nd look, I have no real experience doing el-ph calcs</div></blockquote><br />Thank you all the same for your answer, I think you are right. I should use a denser k points for this calculation.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=3273&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:57:38 GMT -->
</html>
