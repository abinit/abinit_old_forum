<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1228&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; spin-polarized calc of a Ti ATOM</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>spin-polarized calc of a Ti ATOM</h2>
		<p><a href="viewtopica202.html?f=9&amp;t=1228">https://forum.abinit.org/viewtopic.php?f=9&amp;t=1228</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>spin-polarized calc of a Ti ATOM</h3>
				<div class="date">Posted: <strong>Mon Jul 18, 2011 9:11 pm</strong></div>
				<div class="author">by <strong>brehmj</strong></div>
				<div class="content">I keep getting the same error when I try my input file:<br />chkneu: nelect_occ=  0.12000000E+02, zval=  0.24000000E+02,<br />         and input value of charge=  0.00000000000000E+00,  <br />   nelec_occ is computed from occ and wtk                   <br />   zval is nominal charge of all nuclei, computed from zion (read in psp),<br />   charge is an input variable (usually 0).                               <br /><br /> ERROR - These must obey zval-nelect_occ=charge to better than 0.10E-07<br /> This is not the case.                                                 <br />   Action : check input file for occ,wtk, and charge.                  <br />   Note that wtk is NOT automatically normalized when occopt=2,        <br />   but IS automatically normalized otherwise.          <br /><br />I am befuddled.  My pseudopotential is of the semi-core variety and total valence states are 3s, 3p, 4s, 3d, 4s, 4p.  So, 3s, 3p and 4s are filled up; 3d has 2 electrons, and 4p is empty.<br />By my reasoning, I should have a minimum of 10 bands up and 10 bands down (1 for 3s, 3 for 3p, 5 for 3d, and 1 for 4s).<br />Here are the relevant input parameters:<br />    spinat 0.0 0.0 2.0<br />natom 1<br />  nsppol 2<br />  occopt 2<br />  nband 10 10<br />   occ 1.0 1.0 1.0 1.0 1.0 1.0 1.0 0.0 0.0 0.0<br />         1.0 1.0 1.0 1.0 1.0 0.0 0.0 0.0 0.0 0.0<br />kptopt 0<br />nkpt 1<br />kpt 0 0 0<br />wtk 1.0<br /><br />what in the world am I doing wrong?<br /><br />Thanks,<br />John</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: spin-polarized calc of a Ti ATOM</h3>
				<div class="date">Posted: <strong>Mon Jul 18, 2011 10:47 pm</strong></div>
				<div class="author">by <strong>blackburn</strong></div>
				<div class="content">There seems to be something wrong with your pseudo-potential as zval is greater than 22 (the nuclear charge of Ti).<br /><br />Can you post the full log (from ABINIT) so we can get a better idea what is going on?<br /><br />Cheers,<br /><br />Simon</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: spin-polarized calc of a Ti ATOM</h3>
				<div class="date">Posted: <strong>Mon Sep 12, 2011 2:01 pm</strong></div>
				<div class="author">by <strong>brehmj</strong></div>
				<div class="content">Simon,<br />Sorry for the long delay -- here is the log file  (it is short so I'll paste it right below)  . after that I will paste the 1st few lines of my ti.fhi too:<br /><br />ABINIT                                                                       <br />                                                                               <br />  Give name for formatted input file:                                          <br />jm.in                                                                          <br />  Give name for formatted output file:                                         <br />jm.out                                                                         <br />  Give root name for generic input files:                                      <br />gs_i                                                                           <br />  Give root name for generic output files:                                     <br />gs_o                                                                           <br />  Give root name for generic temporary files:                                  <br />gs_g                                                                           <br /><br /> isfile : WARNING -<br />  Finds that output file jm.out<br /> already exists.               <br /> new name assigned:jm.outA     <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outA<br /> already exists.                <br /> new name assigned:jm.outB      <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outB<br /> already exists.                <br /> new name assigned:jm.outC      <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outC<br /> already exists.                <br /> new name assigned:jm.outD      <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outD<br /> already exists.                <br /> new name assigned:jm.outE      <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outE<br /> already exists.                <br /> new name assigned:jm.outF      <br /><br /><br /> isfile : WARNING -<br />  Finds that output file jm.outF<br /> already exists.                <br /> new name assigned:jm.outG      <br /><br /> leave_test : synchronization done...<br /><br />.Version 6.4.1  of ABINIT <br />.(MPI version, prepared for a x86_64_linux_intel11.0 computer) <br /><br />.Copyright (C) 1998-2010 ABINIT group . <br /> ABINIT comes with ABSOLUTELY NO WARRANTY.<br /> It is free software, and you are welcome to redistribute it<br /> under certain conditions (GNU General Public License,      <br /> see ~abinit/COPYING or <!-- m --><a class="postlink" href="http://www.gnu.org/copyleft/gpl.txt">http://www.gnu.org/copyleft/gpl.txt</a><!-- m -->).<br /><br /> ABINIT is a project of the Universite Catholique de Louvain,<br /> Corning Inc. and other collaborators, see ~abinit/doc/developers/contributors.txt .<br /> Please read ~abinit/doc/users/acknowledgments.html for suggested                   <br /> acknowledgments of the ABINIT effort.                                              <br /> For more information, see <!-- m --><a class="postlink" href="http://www.abinit.org/">http://www.abinit.org</a><!-- m --> .                                  <br /><br />.Starting date : Mon 12 Sep 2011.<br />- ( at  7h58 )                   <br />                                 <br />                                 <br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />                                                                               <br /> === Build Information ===                                                     <br />  Version       : 6.4.1                                                        <br />  Build target  : x86_64_linux_intel11.0                                       <br />  Build date    : 20101102                                                     <br />                                                                               <br /> === Compiler Suite ===                                                        <br />  C compiler       : gnu                                                       <br />  CFLAGS           : -m64 -g -O3                                               <br />  C++ compiler     : gnu11.0                                                   <br />  CXXFLAGS         : -m64 -g -O3                                               <br />  Fortran compiler : intel11.0                                                 <br />  FCFLAGS          :  -g -extend-source -vec-report0 -noaltparam -nofpscomp    <br />  FC_LDFLAGS       :    -static-intel -static-libgcc                           <br />                                                                               <br /> === Optimizations ===                                                         <br />  Debug level        : yes                                                     <br />  Optimization level : standard                                                <br />  Architecture       : intel_xeon                                              <br />                                                                               <br /> === MPI ===                                                                   <br />  Parallel build : yes                                                         <br />  Parallel I/O   : yes                                                         <br />                                                                               <br /> === Linear algebra ===                                                        <br />  Library flavor : @linalg_flavor@                                             <br />  Use ScaLAPACK  : no                                                          <br />                                                                               <br /> === Plug-ins ===                                                              <br />  BigDFT    : yes                                                              <br />  ETSF I/O  : yes                                                              <br />  LibXC     : yes                                                              <br />  FoX       : no                                                               <br />  NetCDF    : yes                                                              <br />  Wannier90 : yes                                                              <br />                                                                               <br /> === Experimental features ===                                                 <br />  Bindings            : no                                                     <br />  Exports             : no                                                     <br />  GW double-precision : no                                                     <br />  Macroave build      : yes                                                    <br />                                                                               <br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />                                                                               <br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /> Default optimizations:                                                        <br />   -O3 -xHost                                                                  <br /><br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /> CPP options activated during the build:                                       <br /><br />                    CC_GNU                   CXX_GNU                  FC_INTEL<br /><br />               HAVE_BIGDFT              HAVE_ETSF_IO             HAVE_FC_ETIME<br /><br />              HAVE_FC_EXIT             HAVE_FC_FLUSH            HAVE_FC_GETENV<br /><br />            HAVE_FC_GETPID     HAVE_FC_ISO_C_BINDING              HAVE_FC_NULL<br /><br />                HAVE_LIBXC                  HAVE_MPI                 HAVE_MPI2<br /><br />               HAVE_MPI_IO               HAVE_NETCDF             HAVE_OS_LINUX<br /><br />              HAVE_STDIO_H            HAVE_WANNIER90              USE_MACROAVE<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br />- input  file    -&gt; jm.in<br />- output file    -&gt; jm.outG<br />- root for input  files -&gt; gs_i<br />- root for output files -&gt; gs_o<br /><br /> instrng :    50 lines of input have been read<br /><br /> iofn2 : Please give name of formatted atomic psp file<br /> iofn2 : for atom type   1 , psp file is ti.fhi       <br />  read the values zionpsp= 12.0 , pspcod=   6 , lmax=   3<br /><br /> inpspheads : deduce mpsang  =   4, n1xccc  =   0.<br /> leave_test : synchronization done...             <br /><br /> invars1m : enter jdtset=     1<br /> invars1 : treat image number     1<br /><br /> symlatt : the Bravais lattice is cP (primitive cubic)<br />  xcart  is defined in input file                     <br /> ingeo : takes atomic coordinates from input array xcart<br /><br /> symlatt : the Bravais lattice is cP (primitive cubic)<br /><br /> symlatt : the Bravais lattice is cP (primitive cubic)<br /><br /> symbrav : COMMENT -<br />  The Bravais lattice determined only from the primitive<br />  vectors, bravais(1)=  7, is more symmetric            <br />  than the real one, iholohedry=  4, obtained by taking into<br />  account the atomic positions. Start deforming the primitive vector set.<br /><br /> symlatt : the Bravais lattice is tP (primitive tetragonal)<br /> symspgr : the symmetry operation no.   1 is the identity  <br /> symspgr : the symmetry operation no.   2 is an inversion  <br /> symaxes : the symmetry operation no.   3 is a 2-axis      <br /> symplanes : the symmetry operation no.   4 is a mirror plane<br /> symaxes : the symmetry operation no.   5 is a 2-axis        <br /> symplanes : the symmetry operation no.   6 is a mirror plane<br /> symaxes : the symmetry operation no.   7 is a 2-axis        <br /> symplanes : the symmetry operation no.   8 is a mirror plane<br /> symplanes : the symmetry operation no.   9 is a mirror plane<br /> symaxes : the symmetry operation no.  10 is a tertiary 2-axis<br /> symspgr : the symmetry operation no.  11 is a -4 axis        <br /> symaxes : the symmetry operation no.  12 is a 4-axis         <br /> symplanes : the symmetry operation no.  13 is a mirror plane <br /> symaxes : the symmetry operation no.  14 is a tertiary 2-axis<br /> symspgr : the symmetry operation no.  15 is a -4 axis        <br /> symaxes : the symmetry operation no.  16 is a 4-axis         <br /> symspgr : spgroup= 123  P4/m m m   (=D4h^1)                  <br /> inkpts: Sum of    1 k point weights is    1.000000           <br /> npfft, npband and npkpt           1           1           1  <br /> mpi_enreg%sizecart(1),np_fft           1           1         <br /> mpi_enreg%sizecart(2),np_band           1           1        <br /> mpi_enreg%sizecart(3),np_kpt           1           1         <br /> in initmpi_grid : me_fft, me_band, me_kpt are           0           0<br />           0                                                          <br /> invars1: mkmem  undefined in the input file. Use default mkmem  = nkpt<br /> invars1: With nkpt_me=    1 and mkmem  =     1, ground state wf handled in core.<br /> invars1: mkqmem undefined in the input file. Use default mkqmem = nkpt          <br /> invars1: With nkpt_me=    1 and mkqmem =     1, ground state wf handled in core.<br /> invars1: mk1mem undefined in the input file. Use default mk1mem = nkpt          <br /> invars1: With nkpt_me=    1 and mk1mem =     1, ground state wf handled in core.<br /><br /> DATASET    1 : space group P4/m m m (#123); Bravais tP (primitive tetrag.)<br /> inkpts: Sum of    1 k point weights is    1.000000                        <br /> invars2: reading occ(nband*nkpt*nsppol) explicitly                        <br /><br /> chkneu: nelect_occ=  0.12000000E+02, zval=  0.24000000E+02,<br />         and input value of charge=  0.00000000000000E+00,  <br />   nelec_occ is computed from occ and wtk                   <br />   zval is nominal charge of all nuclei, computed from zion (read in psp),<br />   charge is an input variable (usually 0).                               <br /><br /> ERROR - These must obey zval-nelect_occ=charge to better than 0.10E-07<br /> This is not the case.                                                 <br />   Action : check input file for occ,wtk, and charge.                  <br />   Note that wtk is NOT automatically normalized when occopt=2,        <br />   but IS automatically normalized otherwise.                          <br /><br /><br /> leave_new : decision taken to exit ...<br />                                       <br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /> === Build Information ===<br />  Version       : 6.4.1<br />  Build target  : x86_64_linux_intel11.0<br />  Build date    : 20101102<br /><br /> === Compiler Suite ===<br />  C compiler       : gnu<br />  CFLAGS           : -m64 -g -O3<br />  C++ compiler     : gnu11.0<br />  CXXFLAGS         : -m64 -g -O3<br />  Fortran compiler : intel11.0<br />  FCFLAGS          :  -g -extend-source -vec-report0 -noaltparam -nofpscomp<br />  FC_LDFLAGS       :    -static-intel -static-libgcc<br /><br /> === Optimizations ===<br />  Debug level        : yes<br />  Optimization level : standard<br />  Architecture       : intel_xeon<br /><br /> === MPI ===<br />  Parallel build : yes<br />  Parallel I/O   : yes<br /><br /> === Linear algebra ===<br />  Library flavor : @linalg_flavor@<br />  Use ScaLAPACK  : no<br /><br /> === Plug-ins ===<br />  BigDFT    : yes<br />  ETSF I/O  : yes<br />  LibXC     : yes<br />  FoX       : no<br />  NetCDF    : yes<br />  Wannier90 : yes<br /><br /> === Experimental features ===<br />  Bindings            : no<br />  Exports             : no<br />  GW double-precision : no<br />  Macroave build      : yes<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /><br />END LOG  FILE<br />SHOWING 1st few lines of ti.fhi:<br />________________________________<br /><br /><br />_________________________________<br /><br />OPIUM generated Ti potential<br />  22.00000  12.00000  110717                    zatom,zion,pspdat<br />    6    7    3    3      1156   0.00000        pspcod,pspxc,lmax,lloc,mmax,r2well<br />   0.00000   0.00000   0.00000                  rchrg,fchrg,qchrg<br />5 --- reserved for future features<br />6 --- reserved for future features<br />7 --- Here follows the cpi file in the fhi98pp format -<br /> 12.000000000    4<br /> 0.0000    0.0000    0.0000   0.0000<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 0.0000    .00e+00   .00e+00<br /> 1156    1.013084867359809e+00<br />    1    3.568829277518041e-05    5.362770961361201e-05   -1.229668854827899e+01<br />    2    3.615526935244168e-05    5.432942108092441e-05   -1.229668854776401e+01<br />    3    3.662835625627655e-05    5.504031434971970e-05   -1.229668854723547e+01<br />    4    3.710763343949776e-05    5.576050956265277e-05   -1.229668854669300e+</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=1228&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:23:47 GMT -->
</html>
