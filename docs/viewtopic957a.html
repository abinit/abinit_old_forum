<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2082&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:59:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Can mGGA functionals used with ionmov?</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Can mGGA functionals used with ionmov?</h2>
		<p><a href="viewtopic6dd7.html?f=9&amp;t=2082">https://forum.abinit.org/viewtopic.php?f=9&amp;t=2082</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Tue Apr 16, 2013 9:59 pm</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">Hello,<br />  Since  hybrid functionals  can't be used for GS calculations yet, and  I'm trying to use some geometry opmtimizations using MetaGGA's in abinit.  I'm starting with the lattice constants of graphite to work out problems with my input files.    When I do, I find that the program crashes during the initialization of the 2nd broyden step.  This happens in both the sequential and parallel versions, and both the internal and externally linked libxc.  Does anyone have a suggestion?  Is there a variable for reading in the kden files?  The Hessian does get initialized and output to _o_DS1_TIM1_KDEN, and is the same size as the corresponding density file.   Are these just not ready for geometry optimization yet?<br /> Thanks a bunch for any suggestions.<br />James<br /><br />Here's a copy of my log file<br />&quot;--- Iteration: ( 2/30) Internal Cycle: (1/1)<br />--------------------------------------------------------------------------------<br /><br /> Cartesian coordinates (xcart) [bohr]<br />  0.00000000000000E+00  0.00000000000000E+00  0.00000000000000E+00<br />  8.88178419700125E-16  2.69050809574840E+00 -3.52356707465703E-45<br />  3.84206680863613E-16  6.65465491863178E-16  6.27457126628040E+00<br />  2.33004836000581E+00  1.34525404787420E+00  6.27457126628040E+00<br /> Reduced coordinates (xred)<br />  0.00000000000000E+00  0.00000000000000E+00  0.00000000000000E+00<br />  3.33333333333333E-01  6.66666666666667E-01 -2.80791081688907E-46<br />  0.00000000000000E+00  0.00000000000000E+00  5.00000000000000E-01<br />  6.66666666666666E-01  3.33333333333333E-01  5.00000000000000E-01<br /> Scale of Primitive Cell (acell) [bohr]<br />  4.66009672001163E+00  4.66009672001163E+00  1.25491425325608E+01<br /> Real space primitive translations (rprimd) [bohr]<br />  4.66009672001163E+00  0.00000000000000E+00  0.00000000000000E+00<br /> -2.33004836000581E+00  4.03576214362261E+00  1.80346993469317E-49<br />  7.68413361727225E-16  1.33093098372636E-15  1.25491425325608E+01<br /> Unitary Cell Volume (ucvol) [Bohr^3]=  2.36012249773366E+02<br /> Angles (23,13,12)= [degrees]<br />  9.00000000000000E+01  9.00000000000000E+01  1.20000000000000E+02<br /> Lengths [Bohr]<br />  4.66009672001163E+00  4.66009672001163E+00  1.25491425325608E+01<br /><br />---SELF-CONSISTENT-FIELD CONVERGENCE--------------------------------------------<br /><br /> getcut: wavevector=  0.0000  0.0000  0.0000  ngfft=  20  20  60<br />         ecut(hartree)=     20.000   =&gt; boxcut(ratio)=   2.13184<br /><br /> ewald : nr and ng are    3 and   33<br />forrtl: severe (174): SIGSEGV, segmentation fault occurred<br />&quot;<br /><br />and a copy of my input file:<br /><br />#Graphite with FHI GGA Psuedopotential and M06-L Lattice constant optimization<br />chkprim 0<br /><br />acell 2.456 2.456 6.695 angstrom<br />angdeg 90 90 120<br />nstep 50<br />optcell 3<br />ionmov 2<br />dilatmx 1.07<br />ecutsm 0.5<br /><br />ntypat 1<br />znucl 6 #9<br />nshiftk 1<br />shiftk  0.0 0.0 0.0<br />natom 4<br />typat 4*1<br />nband 30<br /><br />spinat 0 0 1<br />0 0 -1<br /><br />0 0 1<br />0 0 -1<br />nsppol 2<br />nspinor 1<br />nspden 2<br /><br />occopt 3<br />tsmear .001<br />xred 0 0 0<br />1/3 2/3 0<br />0 0 .5<br />2/3 1/3 0.5<br /><br />ndtset 6<br />ecut: 20 ecut+ 5<br /><br />ngkpt 14 14 1<br />ixc -203233  #M06-L  MetaGGA<br /><br />usekden 1<br />prtkden 1<br />timopt 2<br />prtden 1   <br />#prtwf 1  <br />toldfe 5d-10<br />#toldff 1d-6<br />#tolmxf 1d-5<br />ntime 30</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Sat Apr 20, 2013 9:33 am</strong></div>
				<div class="author">by <strong>jzwanzig</strong></div>
				<div class="content">Are you using a mGGA pseudopotential? I guess more specifically, what pseudopotentials are you using?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Fri May 03, 2013 5:59 am</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">Hi Prof. Zwanzig,<br />  It took a long time to get back to this, but I wanted to not just give you a silly answer.  I've tried using a standard GGA pseudopotential (HGH PBE) and generating my own with APE and the M06-L functional with the output in the abinit6 format.  In the run that I had posted, I had used toldfe as the stopping criteria, because all of the ion positions were fixed by symmetry.  However, when I broke this symmetry and used tolmxf and toldff, I found that abinit was not computing the forces <br /><br /> cartesian forces (hartree/bohr) at end:<br />    1     -0.00000000000000    -0.00000000000000    -0.00000000000000<br />    2     -0.00000000000000    -0.00000000000000    -0.00000000000000<br />    3     -0.00000000000000    -0.00000000000000    -0.00000000000000<br />    4     -0.00000000000000    -0.00000000000000    -0.00000000000000<br /> frms,max,avg= 0.0000000E+00 0.0000000E+00   0.000E+00  0.000E+00  0.000E+00 h/b<br /><br />I know that there can be  an issue with meta-GGA functional and analytic gradients, is that why abinit doesn't compute the forces?<br />James</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Sat May 04, 2013 12:36 pm</strong></div>
				<div class="author">by <strong>jzwanzig</strong></div>
				<div class="content">which version of abinit are you using? the features around mGGA are in a state of active development at the moment.<br /><br />Joe</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Sat May 04, 2013 4:12 pm</strong></div>
				<div class="author">by <strong>JEJohns</strong></div>
				<div class="content">I'm using the release version abinit 7.2.1</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Can mGGA functionals used with ionmov?</h3>
				<div class="date">Posted: <strong>Sat May 04, 2013 6:33 pm</strong></div>
				<div class="author">by <strong>jzwanzig</strong></div>
				<div class="content">I just tried a similar test using the TB09 mGGA as done in the abinit test suite (libxc test 09) and forces and stresses seem to work there. Given that there seem to be about 10! different functionals around in the literature and in libxc, I'm not surprised that all features of all possibilities have not been coded yet.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2082&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:59:35 GMT -->
</html>
