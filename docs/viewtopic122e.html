<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=14&t=2868&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:39:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Strange forces in band-parallelizations with PAW</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Strange forces in band-parallelizations with PAW</h2>
		<p><a href="viewtopice8cc.html?f=14&amp;t=2868">https://forum.abinit.org/viewtopic.php?f=14&amp;t=2868</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Strange forces in band-parallelizations with PAW</h3>
				<div class="date">Posted: <strong>Thu Nov 27, 2014 7:27 am</strong></div>
				<div class="author">by <strong>goodwill</strong></div>
				<div class="content">Hi, I am just using abinit-7.10.1 to perform calculations using paral_kgb =1 with npkpt=16, npband=4 on a x86_64 cluster (ifort 13.1). The output is like this (the final column is maxfor, in the order of 10 Hartree/bohr!)<br /><br />     iter   Etot(hartree)      deltaE(h)  residm     nres2    diffor    maxfor<br /> ETOT  1  -455.79376867702    -4.558E+02 1.030E-02 3.098E+02 4.960E+01 4.960E+01<br /> ETOT  2  -455.49696664920     2.968E-01 1.029E-03 1.289E+02 1.628E+01 5.959E+01<br /> ETOT  3  -454.80717388965     6.898E-01 1.405E-02 7.583E+01 7.404E+01 2.141E+01<br /> ETOT  4  -454.56070487083     2.465E-01 1.627E-02 1.844E+01 2.649E+01 1.411E+01<br /> ETOT  5  -454.84821326916    -2.875E-01 2.532E-02 1.092E+01 1.077E+01 2.334E+01<br /> ETOT  6  -455.08934199200    -2.411E-01 7.827E-03 3.274E+00 8.032E+00 2.966E+01<br /> ETOT  7  -455.16533784863    -7.600E-02 8.167E-04 2.916E+00 6.775E+00 2.954E+01<br /> ETOT  8  -455.16172063386     3.617E-03 1.234E-03 4.157E+00 1.809E+00 2.773E+01<br /> ETOT  9  -455.15172880151     9.992E-03 4.491E-04 8.261E-01 1.432E+00 2.630E+01<br /> ETOT 10  -455.15223160180    -5.028E-04 8.695E-04 3.163E-01 1.011E+00 2.529E+01<br /> ETOT 11  -455.15028611449     1.945E-03 1.379E-04 5.936E-01 2.787E-01 2.534E+01<br /> ETOT 12  -455.14729925723     2.987E-03 1.181E-03 1.750E-01 7.426E+00 2.562E+01<br /> ETOT 13  -455.14609194029     1.207E-03 9.809E-04 5.634E-02 7.817E+00 2.617E+01<br /> ETOT 14  -455.14498794329     1.104E-03 4.143E-04 4.213E-02 6.245E+00 3.188E+01<br /> ETOT 15  -455.14408205791     9.059E-04 7.545E-04 3.083E-02 8.661E+00 4.054E+01<br /> ETOT 16  -455.14196853569     2.114E-03 4.746E-04 1.588E-02 1.224E+02 1.630E+02<br /> ETOT 17  -455.14127517411     6.934E-04 3.992E-04 1.517E-01 1.994E+02 3.624E+02<br /> ETOT 18  -455.14120344563     7.173E-05 8.248E-05 9.804E-02 1.109E+01 3.689E+02<br /> ETOT 19  -455.14094890423     2.545E-04 1.738E-04 1.201E-02 6.897E+01 4.319E+02<br /> ETOT 20  -455.14027723972     6.717E-04 3.584E-04 6.262E-03 4.175E+02 7.186E+02<br /> ETOT 21  -455.14012699962     1.502E-04 5.672E-05 7.948E-02 7.856E+02 8.000E+02<br /> ETOT 22  -455.13974282883     3.842E-04 6.687E-05 5.792E-03 7.869E+02 6.579E+02<br /> ETOT 23  -455.13951332678     2.295E-04 1.770E-05 9.110E-03 3.636E+02 2.943E+02<br /> ETOT 24  -455.13941619685     9.713E-05 1.504E-05 9.291E-03 2.496E+02 5.382E+01<br /> ETOT 25  -455.13931334045     1.029E-04 2.706E-05 1.419E-02 3.948E+02 3.410E+02<br /> ETOT 26  -455.13932854657    -1.521E-05 1.159E-06 9.033E-03 1.829E+02 1.789E+02<br /> ETOT 27  -455.13930353684     2.501E-05 2.901E-06 7.064E-03 2.806E+01 1.509E+02<br /> ETOT 28  -455.13920760950     9.593E-05 2.172E-05 5.915E-03 2.998E+02 4.308E+02<br /> ETOT 29  -455.13919449188     1.312E-05 5.883E-06 4.265E-03 1.596E+02 2.712E+02<br /> ETOT 30  -455.13940733917    -2.128E-04 1.036E-05 8.265E-02 7.772E+02 7.715E+02<br /> ETOT 31  -455.13908367436     3.237E-04 1.498E-04 2.941E-03 7.716E+02 6.370E+00<br /> ETOT 32  -455.13916902354    -8.535E-05 2.572E-05 2.796E-03 1.267E+02 1.267E+02<br /> ETOT 33  -455.13914490551     2.412E-05 2.346E-05 2.132E-03 4.282E+00 1.225E+02<br /> ETOT 34  -455.13915358720    -8.682E-06 1.850E-05 1.859E-03 1.259E+02 5.832E+00<br /> ETOT 35  -455.13912484698     2.874E-05 3.830E-05 7.326E-02 3.021E+01 3.370E+01<br /> ETOT 36  -455.13909083803     3.401E-05 2.323E-05 2.208E-02 1.786E+02 1.449E+02<br /> ETOT 37  -455.13906865516     2.218E-05 4.278E-05 2.639E-02 1.395E+02 2.844E+02<br /> ETOT 38  -455.13906542225     3.233E-06 7.584E-06 1.570E-03 2.844E+02 8.017E+00<br /> ETOT 39  -455.13905707394     8.348E-06 1.492E-05 1.404E-03 8.205E-01 7.196E+00<br /> ETOT 40  -455.13904862974     8.444E-06 7.077E-06 6.280E-04 1.266E+00 5.930E+00<br /> ETOT 41  -455.13904752866     1.101E-06 1.140E-05 4.014E-04 1.612E-01 5.771E+00<br /> ETOT 42  -455.13904768295    -1.543E-07 6.126E-06 6.355E-02 3.171E+02 3.171E+02<br /> ETOT 43  -455.13904458250     3.100E-06 5.500E-06 1.402E-04 3.171E+02 4.944E+00<br /> ETOT 44  -455.13904441037     1.721E-07 3.038E-06 2.198E-04 1.246E+00 4.734E+00<br /> ETOT 45  -455.13904430842     1.019E-07 2.988E-06 3.154E-04 7.115E-01 4.022E+00<br /><br />After I changed the settings as paral_kgb=0, I got the following results  at present:<br />     iter   Etot(hartree)      deltaE(h)  residm     nres2    diffor    maxfor<br /> ETOT  1  -455.33741606440    -4.553E+02 1.252E-01 2.354E+02 1.866E-01 1.866E-01<br /> ETOT  2  -455.53214846534    -1.947E-01 8.837E-03 1.019E+02 9.520E-01 7.654E-01<br /> ETOT  3  -455.39556106001     1.366E-01 2.259E-02 5.685E+01 6.271E-01 2.752E-01<br /> ETOT  4  -455.23010262171     1.655E-01 9.971E-03 1.533E+01 3.074E-01 9.531E-02<br /> ETOT  5  -455.21634096489     1.376E-02 8.585E-03 6.093E+00 2.746E-01 2.424E-01<br /> ETOT  6  -455.16922564430     4.712E-02 5.568E-03 3.397E+00 7.814E-02 2.216E-01<br /> ETOT  7  -455.17337782254    -4.152E-03 6.040E-03 5.844E+00 1.940E-01 2.112E-01<br /> ETOT  8  -455.17524499348    -1.867E-03 7.586E-03 4.749E+00 2.128E-01 1.794E-01<br /> ETOT  9  -455.15434972662     2.090E-02 6.138E-03 2.236E+00 1.467E-01 1.450E-01<br /> ETOT 10  -455.15332991675     1.020E-03 3.272E-03 2.339E+00 1.490E-02 1.460E-01<br /> ETOT 11  -455.15030328239     3.027E-03 3.482E-03 6.141E-01 5.254E-02 9.347E-02<br /> ETOT 12  -455.14896725849     1.336E-03 2.099E-03 2.571E-01 1.894E-02 7.453E-02<br /> ETOT 13  -455.14693501855     2.032E-03 1.519E-03 1.541E-01 3.174E-02 7.571E-02<br /> ETOT 14  -455.14630951238     6.255E-04 1.214E-03 1.333E+00 1.289E-01 9.176E-02<br /><br />It seems that the output of maxfor in the case of paral_kgb=1 with PAW is not trustworthy, isn't it?<br /><br />Thank you.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Strange forces in band-parallelizations with PAW</h3>
				<div class="date">Posted: <strong>Thu Nov 27, 2014 9:49 am</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">paral_kbg=1 works fine with PAW.<br />It seems that after 45 iterations you sart converging.<br />You should compare results at the end of the convergence rather than during the convergence. And if the converged results are not the same then perhaps there is something to investigate.<br /><br />Note that tunning the paral_kbg=1 case should give a better convergence than without.<br /><br />Jordan</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Strange forces in band-parallelizations with PAW</h3>
				<div class="date">Posted: <strong>Sat Nov 29, 2014 6:19 am</strong></div>
				<div class="author">by <strong>goodwill</strong></div>
				<div class="content">Thank you very much. According to your suggestion, I set the convergence criterion to tolwfr=1d-15. Using paral_kgb=1, npkpt=16, npband=8, now I get<br /><br />---SELF-CONSISTENT-FIELD CONVERGENCE--------------------------------------------<br /><br />     iter   Etot(hartree)      deltaE(h)  residm     nres2    diffor    maxfor<br /> ETOT  1  -455.81571367243    -4.558E+02 8.036E-03 2.459E+02 5.627E+01 5.627E+01<br /> ETOT  2  -455.51910721836     2.966E-01 1.065E-03 1.037E+02 6.035E+00 6.000E+01<br /> ETOT  3  -454.82894982784     6.902E-01 1.836E-02 6.168E+01 5.725E+01 1.723E+01<br /> ETOT  4  -454.70997953080     1.190E-01 3.238E-02 1.492E+01 1.299E+01 1.575E+01<br /> ETOT  5  -455.01781719041    -3.078E-01 2.027E-02 7.970E+00 1.126E+01 2.700E+01<br /> ETOT  6  -455.12570813773    -1.079E-01 1.846E-03 1.685E+00 3.757E+00 3.076E+01<br /> ETOT  7  -455.16631733094    -4.061E-02 9.346E-04 3.173E+00 8.013E-01 3.051E+01<br /> ETOT  8  -455.15577414430     1.054E-02 4.842E-04 1.738E+00 2.235E+00 2.828E+01<br /> ETOT  9  -455.15438755885     1.387E-03 1.032E-03 3.942E+00 2.901E+00 2.538E+01<br /> ETOT 10  -455.15162766768     2.760E-03 2.321E-04 2.309E-01 6.353E+00 2.473E+01<br /> ETOT 11  -455.15296359140    -1.336E-03 6.900E-04 4.235E+00 7.041E+00 2.395E+01<br /> ETOT 12  -455.14835596575     4.608E-03 4.510E-04 1.147E-01 1.958E+00 2.403E+01<br /> ETOT 13  -455.14765512069     7.008E-04 6.403E-04 3.196E-01 8.367E+00 2.434E+01<br /> ETOT 14  -455.14671226566     9.429E-04 1.573E-04 6.254E-01 7.901E+00 2.619E+01<br /> ETOT 15  -455.14569556821     1.017E-03 2.451E-04 1.122E-01 7.461E+00 2.810E+01<br /> ETOT 16  -455.14420003316     1.496E-03 5.616E-04 1.864E-01 9.731E+00 3.783E+01<br /> ETOT 17  -455.14255801923     1.642E-03 7.213E-04 6.495E-02 5.820E+01 9.388E+01<br /> ETOT 18  -455.14184925111     7.088E-04 1.219E-04 5.772E-02 7.722E+01 1.704E+02<br /> ETOT 19  -455.14126593205     5.833E-04 2.173E-04 1.986E-01 1.687E+02 3.391E+02<br /> ETOT 20  -455.14090601283     3.599E-04 3.350E-04 6.893E-01 6.772E+02 6.839E+02<br /> ETOT 21  -455.14067854417     2.275E-04 3.065E-05 6.161E-02 1.471E+02 5.368E+02<br /> ETOT 22  -455.14012307556     5.555E-04 2.449E-04 4.681E-02 5.207E+02 8.056E+02<br /> ETOT 23  -455.13969152324     4.316E-04 3.745E-05 6.559E-02 7.911E+02 6.922E+02<br /> ETOT 24  -455.13961716734     7.436E-05 4.152E-05 9.179E-02 2.483E+02 4.439E+02<br /> ETOT 25  -455.13925978811     3.574E-04 1.260E-05 7.428E-02 4.434E+02 2.666E+01<br /> ETOT 26  -455.13906646844     1.933E-04 6.646E-05 5.749E-02 5.142E+00 3.106E+01<br /> ETOT 27  -455.13924962596    -1.832E-04 5.855E-06 5.820E-02 5.742E+02 5.735E+02<br /> ETOT 28  -455.13915902597     9.060E-05 7.842E-06 8.438E-03 5.734E+02 2.174E+01<br /> ETOT 29  -455.13893210302     2.269E-04 7.854E-05 3.065E-01 3.132E+01 5.307E+01<br /> ETOT 30  -455.13882930542     1.028E-04 2.392E-05 8.945E-03 3.155E+01 3.366E+01<br /> ETOT 31  -455.13895458762    -1.253E-04 9.942E-06 6.221E-03 1.727E+01 2.721E+01<br /> ETOT 32  -455.13897652832    -2.194E-05 1.817E-06 5.800E-03 1.444E+01 2.312E+01<br /> ETOT 33  -455.13896984548     6.683E-06 3.236E-06 5.478E-03 1.227E+01 1.830E+01<br /> ETOT 34  -455.13898625665    -1.641E-05 2.021E-06 5.484E-03 7.799E+00 1.425E+01<br /> ETOT 35  -455.13900805603    -2.180E-05 2.055E-06 5.964E-03 4.611E+00 1.027E+01<br /> ETOT 36  -455.13901506299    -7.007E-06 1.021E-05 3.587E-03 1.155E+01 4.596E+00<br /> ETOT 37  -455.13901106072     4.002E-06 3.380E-06 2.215E-03 1.704E+02 1.705E+02<br /> ETOT 38  -455.13906829256    -5.723E-05 4.256E-06 8.311E-02 4.388E+02 2.805E+02<br /> ETOT 39  -455.13901321821     5.507E-05 1.826E-06 1.695E-03 2.805E+02 2.502E+00<br /> ETOT 40  -455.13902930063    -1.608E-05 2.525E-06 1.718E-03 2.434E+00 3.230E+00<br /> ETOT 41  -455.13902853420     7.664E-07 7.588E-06 1.166E-03 2.598E+02 2.598E+02<br /> ETOT 42  -455.13903185681    -3.323E-06 1.332E-05 4.955E-02 1.222E+02 1.376E+02<br /> ETOT 43  -455.13902981859     2.038E-06 7.337E-06 1.216E-03 1.504E+02 2.880E+02<br /> ETOT 44  -455.13903106486    -1.246E-06 2.773E-05 9.521E-04 7.435E+01 2.136E+02<br /> ETOT 45  -455.13903478139    -3.717E-06 1.316E-05 4.848E-02 1.009E+02 1.127E+02<br /> ETOT 46  -455.13903247100     2.310E-06 2.602E-05 9.315E-04 6.223E+01 1.749E+02<br /> ETOT 47  -455.13903332267    -8.517E-07 1.516E-05 8.958E-04 1.960E+01 1.553E+02<br /> ETOT 48  -455.13903371209    -3.894E-07 8.044E-06 8.505E-04 1.835E+01 1.370E+02<br /> ETOT 49  -455.13903399555    -2.835E-07 8.114E-06 9.025E-04 1.375E+00 1.372E+02<br /> ETOT 50  -455.13903446683    -4.713E-07 5.040E-06 8.400E-04 3.332E+01 1.039E+02<br /> ETOT 51  -455.13903465856    -1.917E-07 4.039E-06 7.966E-04 1.545E+01 8.841E+01<br /> ETOT 52  -455.13903466148    -2.924E-09 3.055E-06 7.146E-04 1.452E+01 7.389E+01<br /> ETOT 53  -455.13903456909     9.239E-08 2.714E-06 3.941E-04 2.734E+01 4.655E+01<br /> ETOT 54  -455.13904533428    -1.077E-05 2.388E-06 5.954E-02 1.001E+02 5.352E+01<br /> ETOT 55  -455.13903436480     1.097E-05 1.584E-06 1.249E-05 7.762E+01 2.411E+01<br /> ETOT 56  -455.13903461232    -2.475E-07 1.584E-06 1.380E-04 7.207E+00 3.131E+01<br /> ETOT 57  -455.13903461824    -5.925E-09 1.085E-06 1.544E-04 8.004E-01 3.201E+01<br /> ETOT 58  -455.13903465120    -3.295E-08 1.070E-06 3.352E-05 1.153E+01 2.048E+01<br /> ETOT 59  -455.13903464247     8.727E-09 7.491E-07 4.417E-05 2.324E+00 2.280E+01<br /> ETOT 60  -455.13903464045     2.015E-09 7.109E-07 6.590E-07 7.910E-01 2.329E+01<br /> ETOT 61  -455.13903467451    -3.406E-08 5.248E-07 9.091E-06 5.752E+00 1.754E+01<br /> ETOT 62  -455.13903467909    -4.576E-09 4.908E-07 2.559E-06 1.437E+00 1.610E+01<br /> ETOT 63  -455.13903467877     3.134E-10 3.617E-07 1.260E-06 4.893E-01 1.561E+01<br /> ETOT 64  -455.13903466508     1.369E-08 3.561E-07 8.103E-07 2.878E+00 1.849E+01<br /> ETOT 65  -455.13903466728    -2.196E-09 2.911E-07 2.302E-06 1.433E+00 1.706E+01<br /> ETOT 66  -455.13903466685     4.257E-10 2.996E-07 4.722E-07 6.417E-01 1.642E+01<br /> ETOT 67  -455.13903466971    -2.857E-09 2.106E-07 1.053E-07 3.170E+00 1.325E+01<br /> ETOT 68  -455.13903467073    -1.020E-09 2.276E-07 1.335E-07 1.528E+00 1.172E+01<br /> ETOT 69  -455.13903467170    -9.729E-10 1.891E-07 9.653E-07 1.928E+00 9.790E+00<br /> ETOT 70  -455.13903467206    -3.604E-10 3.099E-07 2.363E-07 2.618E+00 7.172E+00<br /> ETOT 71  -455.13903467248    -4.214E-10 2.002E-07 2.494E-07 3.019E+00 4.153E+00<br /> ETOT 72  -455.13903467207     4.094E-10 4.074E-07 2.495E-08 1.508E+00 2.645E+00<br /> ETOT 73  -455.13903467167     4.036E-10 2.436E-07 3.264E-09 1.601E+00 1.116E+00<br /> ETOT 74  -455.13903467155     1.197E-10 3.328E-07 1.427E-09 5.679E-01 6.319E-01<br /> ETOT 75  -455.13903467138     1.662E-10 2.761E-07 6.665E-09 6.004E-01 1.241E-01<br /> ETOT 76  -455.13903467139    -3.752E-12 4.044E-07 5.001E-09 2.509E-01 3.750E-01<br /> ETOT 77  -455.13903467149    -1.009E-10 3.048E-07 8.898E-09 3.300E-01 7.050E-01<br /> ETOT 78  -455.13903467150    -1.580E-11 2.171E-07 9.204E-10 5.962E-02 7.483E-01<br /> ETOT 79  -455.13903467176    -2.523E-10 5.609E-07 1.448E-10 8.959E-02 6.587E-01<br /> ETOT 80  -455.13903467186    -1.041E-10 1.716E-07 5.613E-10 7.473E-02 5.840E-01<br /> ETOT 81  -455.13903467202    -1.560E-10 6.948E-07 1.616E-09 1.591E-01 4.249E-01<br /> ETOT 82  -455.13903467201     2.558E-12 2.583E-07 1.453E-09 1.806E-01 2.442E-01<br /> ETOT 83  -455.13903467206    -4.098E-11 4.554E-07 1.533E-10 8.253E-02 1.617E-01<br /> ETOT 84  -455.13903467207    -1.017E-11 2.886E-07 5.135E-10 7.086E-03 1.628E-01<br /> ETOT 85  -455.13903467206     9.379E-12 6.305E-07 1.608E-10 1.024E-02 1.710E-01<br /> ETOT 86  -455.13903467210    -4.150E-11 2.071E-07 1.799E-10 7.115E-03 1.639E-01<br /> ETOT 87  -455.13903467206     4.206E-11 4.517E-07 1.539E-10 2.493E-02 1.390E-01<br /> ETOT 88  -455.13903467209    -3.678E-11 2.005E-07 3.332E-11 2.855E-02 1.104E-01<br /> ETOT 89  -455.13903467203     5.974E-11 3.583E-07 7.786E-12 3.712E-02 7.462E-02<br /> ETOT 90  -455.13903467209    -6.173E-11 1.685E-07 1.409E-12 1.151E-02 6.311E-02<br /> ETOT 91  -455.13903467200     9.146E-11 3.212E-07 9.179E-13 1.779E-02 4.621E-02<br /> ETOT 92  -455.13903467208    -7.384E-11 2.481E-07 1.542E-13 1.024E-02 3.597E-02<br /> ETOT 93  -455.13903467210    -2.575E-11 4.519E-07 1.487E-13 9.484E-03 2.649E-02<br /> ETOT 94  -455.13903467204     6.503E-11 2.974E-07 6.261E-14 2.848E-03 2.364E-02<br /> ETOT 95  -455.13903467209    -4.758E-11 6.240E-07 2.022E-14 3.374E-03 2.064E-02<br /> ETOT 96  -455.13903467215    -6.742E-11 1.459E-07 1.105E-14 2.392E-03 2.303E-02<br /> ETOT 97  -455.13903467208     7.287E-11 7.094E-07 8.424E-15 9.788E-05 2.313E-02<br /> ETOT 98  -455.13903467203     4.957E-11 4.123E-07 1.696E-14 3.774E-04 2.350E-02<br /> ETOT 99  -455.13903467206    -3.382E-11 7.419E-07 1.319E-14 1.643E-04 2.359E-02<br /> ETOT  100  -455.13903467207    -7.446E-12 2.543E-07 1.488E-15 3.132E-04 2.358E-02<br /> ETOT  101  -455.13903467203     3.757E-11 3.626E-07 5.937E-15 1.013E-03 2.413E-02<br /><br />It seems that the forces still change very fast even when the total energy difference is smaller than 1.0d-10. <br />The maxfor becomes stable but still not fully converged when tolvrs &lt; 1.0d-14. However, in the case of norm-conserving pseudopotentials, maxfor gradually decreases from a value not more than 1.0d-1 and shows a converging behavior when the total energy is well converged.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Strange forces in band-parallelizations with PAW</h3>
				<div class="date">Posted: <strong>Wed Dec 03, 2014 7:52 am</strong></div>
				<div class="author">by <strong>goodwill</strong></div>
				<div class="content">After some tests, I finally set toldiff=1.d-6 as the convergence criterion in order to get reliable forces by ABINIT-7.10.1 within PAW. The final run of the structural optimization looks like: <br /><br />---SELF-CONSISTENT-FIELD CONVERGENCE--------------------------------------------<br /><br />     iter   Etot(hartree)      deltaE(h)  residm     nres2    diffor    maxfor<br /> ETOT  1  -455.14638248551    -4.551E+02 1.213E-09 5.625E-05 1.592E+00 1.592E+00<br /> ETOT  2  -455.14638352065    -1.035E-06 5.039E-09 8.200E-04 4.880E+00 4.877E+00<br /> ETOT  3  -455.14638213813     1.383E-06 4.101E-07 9.649E-04 3.981E-01 4.479E+00<br /> ETOT  4  -455.14638227467    -1.365E-07 2.287E-08 3.940E-05 2.565E-01 4.223E+00<br /> ETOT  5  -455.14638236120    -8.653E-08 1.500E-09 3.906E-06 4.243E+00 9.406E-01<br /> ETOT  6  -455.14638237242    -1.122E-08 3.361E-10 4.754E-06 3.222E+00 3.201E+00<br /> ETOT  7  -455.14638237505    -2.639E-09 3.376E-11 1.302E-06 3.226E+00 1.127E+00<br /> ETOT  8  -455.14638237456     4.950E-10 7.152E-11 1.564E-07 1.069E-01 1.202E+00<br /> ETOT  9  -455.14638237449     6.793E-11 2.008E-11 1.513E-07 1.203E+00 1.703E-01<br /> ETOT 10  -455.14638237452    -3.212E-11 5.598E-11 2.164E-09 3.311E-02 1.372E-01<br /> ETOT 11  -455.14638237463    -1.099E-10 1.446E-11 7.060E-09 3.946E-02 9.777E-02<br /> ETOT 12  -455.14638237460     3.490E-11 4.730E-11 3.088E-09 1.010E+00 1.009E+00<br /> ETOT 13  -455.14638237464    -4.104E-11 1.422E-11 3.272E-10 8.771E-02 9.215E-01<br /> ETOT 14  -455.14638237465    -7.844E-12 3.123E-11 1.929E-10 1.201E+00 1.182E+00<br /> ETOT 15  -455.14638237463     1.756E-11 1.093E-11 2.111E-10 2.482E-01 9.337E-01<br /> ETOT 16  -455.14638237466    -3.342E-11 2.800E-11 9.951E-11 1.054E-01 8.282E-01<br /> ETOT 17  -455.14638237470    -4.070E-11 9.666E-12 4.534E-11 2.384E-01 5.898E-01<br /> ETOT 18  -455.14638237467     2.956E-11 2.325E-11 2.661E-11 1.423E-01 4.475E-01<br /> ETOT 19  -455.14638237475    -7.270E-11 8.976E-12 1.659E-11 1.803E-01 2.672E-01<br /> ETOT 20  -455.14638237470     4.923E-11 2.145E-11 9.684E-12 9.825E-02 1.724E-01<br /> ETOT 21  -455.14638237473    -2.939E-11 9.587E-12 6.115E-12 5.190E-02 1.299E-01<br /> ETOT 22  -455.14638237473    -5.343E-12 2.047E-11 3.920E-12 7.193E-02 6.899E-02<br /> ETOT 23  -455.14638237476    -2.444E-11 8.986E-12 2.383E-12 2.372E-02 4.587E-02<br /> ETOT 24  -455.14638237479    -3.314E-11 1.707E-11 2.367E-12 2.784E-02 1.804E-02<br /> ETOT 25  -455.14638237477     1.580E-11 7.714E-12 7.886E-13 1.043E-02 1.435E-02<br /> ETOT 26  -455.14638237484    -6.918E-11 1.499E-11 6.093E-13 5.501E-03 8.849E-03<br /> ETOT 27  -455.14638237478     6.236E-11 7.233E-12 3.349E-13 5.668E-03 1.377E-02<br /> ETOT 28  -455.14638237473     4.883E-11 1.375E-11 3.327E-13 4.205E-03 9.565E-03<br /> ETOT 29  -455.14638237473     4.206E-12 6.518E-12 2.074E-13 1.717E-03 9.762E-03<br /> ETOT 30  -455.14638237478    -5.514E-11 1.277E-11 8.684E-14 5.464E-03 5.963E-03<br /> ETOT 31  -455.14638237475     3.126E-11 6.347E-12 7.435E-14 1.758E-03 6.485E-03<br /> ETOT 32  -455.14638237475    -1.137E-13 1.168E-11 2.791E-14 9.922E-04 5.493E-03<br /> ETOT 33  -455.14638237474     1.137E-11 6.238E-12 1.674E-14 5.142E-04 5.144E-03<br /> ETOT 34  -455.14638237476    -2.274E-11 1.079E-11 7.910E-15 7.497E-04 4.394E-03<br /> ETOT 35  -455.14638237474     2.751E-11 5.520E-12 6.004E-15 4.297E-04 3.964E-03<br /> ETOT 36  -455.14638237467     7.111E-11 9.654E-12 1.849E-15 9.529E-04 3.012E-03<br /> ETOT 37  -455.14638237476    -9.146E-11 5.648E-12 1.241E-15 5.869E-04 2.425E-03<br /> ETOT 38  -455.14638237475     2.785E-12 9.585E-12 7.698E-16 4.324E-04 1.992E-03<br /> ETOT 39  -455.14638237473     2.183E-11 8.574E-12 5.725E-16 5.239E-04 1.468E-03<br /> ETOT 40  -455.14638237475    -1.950E-11 7.609E-12 3.662E-16 4.300E-04 1.038E-03<br /> ETOT 41  -455.14638237476    -9.663E-12 8.679E-12 3.783E-16 1.054E-04 9.329E-04<br /> ETOT 42  -455.14638237478    -2.012E-11 5.303E-12 2.351E-16 2.736E-04 6.593E-04<br /> ETOT 43  -455.14638237474     3.695E-11 7.241E-12 2.220E-16 8.836E-05 5.710E-04<br /> ETOT 44  -455.14638237471     3.746E-11 5.984E-12 1.465E-16 1.625E-04 4.745E-04<br /> ETOT 45  -455.14638237477    -6.719E-11 6.331E-12 1.265E-16 1.189E-04 4.812E-04<br /> ETOT 46  -455.14638237479    -1.199E-11 5.798E-12 1.221E-16 3.100E-05 4.700E-04<br /> ETOT 47  -455.14638237475     4.013E-11 6.746E-12 8.254E-17 1.058E-04 4.497E-04<br /> ETOT 48  -455.14638237478    -3.860E-11 7.145E-12 8.544E-17 5.209E-05 4.382E-04<br /> ETOT 49  -455.14638237470     8.123E-11 4.024E-12 9.246E-17 4.014E-05 4.115E-04<br /> ETOT 50  -455.14638237481    -1.040E-10 6.813E-12 3.496E-17 8.413E-05 3.935E-04<br /> ETOT 51  -455.14638237469     1.187E-10 4.544E-12 2.653E-17 4.219E-05 3.935E-04<br /> ETOT 52  -455.14638237476    -7.384E-11 6.628E-12 2.197E-17 4.848E-05 3.935E-04<br /> ETOT 53  -455.14638237473     3.246E-11 3.393E-12 2.444E-17 3.208E-05 3.936E-04<br /> ETOT 54  -455.14638237474    -1.086E-11 4.393E-12 1.325E-17 1.113E-05 3.936E-04<br /> ETOT 55  -455.14638237482    -8.362E-11 4.067E-12 1.634E-17 1.119E-05 3.936E-04<br /> ETOT 56  -455.14638237474     8.714E-11 6.396E-12 9.392E-18 3.440E-05 3.936E-04<br /> ETOT 57  -455.14638237472     1.467E-11 4.965E-12 1.350E-17 5.770E-05 3.936E-04<br /> ETOT 58  -455.14638237476    -3.558E-11 4.971E-12 1.233E-17 8.748E-06 3.936E-04<br /> ETOT 59  -455.14638237478    -1.967E-11 2.646E-12 9.647E-18 1.050E-05 3.936E-04<br /> ETOT 60  -455.14638237480    -2.615E-11 5.132E-12 7.214E-18 2.175E-05 3.936E-04<br /> ETOT 61  -455.14638237477     3.206E-11 2.342E-12 8.005E-18 8.996E-06 3.936E-04<br /> ETOT 62  -455.14638237478    -3.411E-12 4.010E-12 7.737E-18 4.552E-06 3.936E-04<br /> ETOT 63  -455.14638237478    -7.446E-12 4.375E-12 8.118E-18 1.192E-06 3.936E-04<br /> ETOT 64  -455.14638237476     2.177E-11 2.296E-12 3.558E-17 2.061E-05 3.936E-04<br /> ETOT 65  -455.14638237478    -1.904E-11 2.271E-12 8.064E-18 1.070E-05 3.936E-04<br /> ETOT 66  -455.14638237475     2.728E-11 2.175E-12 7.829E-18 4.635E-06 3.936E-04<br /> ETOT 67  -455.14638237475     2.103E-12 2.416E-12 7.429E-18 3.282E-06 3.936E-04<br /> ETOT 68  -455.14638237484    -8.464E-11 1.660E-12 8.326E-18 5.615E-06 3.936E-04<br /> ETOT 69  -455.14638237480     3.922E-11 2.362E-12 6.636E-18 3.877E-06 3.936E-04<br /> ETOT 70  -455.14638237478     1.796E-11 1.642E-12 6.238E-18 4.599E-06 3.936E-04<br /> ETOT 71  -455.14638237477     9.834E-12 2.003E-12 6.524E-18 2.182E-06 3.936E-04<br /> ETOT 72  -455.14638237474     3.342E-11 1.372E-12 5.599E-18 1.376E-06 3.936E-04<br /> ETOT 73  -455.14638237470     3.411E-11 1.788E-12 7.328E-18 6.161E-06 3.936E-04<br /> ETOT 74  -455.14638237469     6.253E-12 1.318E-12 8.482E-18 4.450E-07 3.936E-04<br /> ETOT 75  -455.14638237472    -2.456E-11 1.247E-12 5.204E-18 1.513E-06 3.936E-04<br /> ETOT 76  -455.14638237472     2.501E-12 1.345E-12 5.140E-18 3.284E-06 3.936E-04<br /> ETOT 77  -455.14638237471     1.108E-11 1.415E-12 6.951E-18 1.980E-06 3.936E-04<br /> ETOT 78  -455.14638237471    -2.387E-12 1.171E-12 6.176E-18 1.241E-06 3.936E-04<br /> ETOT 79  -455.14638237472    -1.398E-11 1.136E-12 6.451E-18 2.074E-06 3.936E-04<br /> ETOT 80  -455.14638237473    -1.199E-11 1.243E-12 1.347E-17 2.963E-06 3.936E-04<br /> ETOT 81  -455.14638237474    -5.343E-12 1.257E-12 4.425E-18 3.271E-06 3.936E-04<br /> ETOT 82  -455.14638237474    -1.592E-12 1.230E-12 4.445E-18 1.026E-06 3.936E-04<br /> ETOT 83  -455.14638237470     3.712E-11 1.233E-12 5.111E-18 2.422E-06 3.936E-04<br /> ETOT 84  -455.14638237474    -3.587E-11 7.892E-13 5.107E-18 1.822E-06 3.936E-04<br /> ETOT 85  -455.14638237474    -2.672E-12 1.624E-12 5.719E-18 1.875E-06 3.936E-04<br /> ETOT 86  -455.14638237475    -6.366E-12 5.787E-13 4.796E-18 5.473E-07 3.936E-04<br /> ETOT 87  -455.14638237473     1.387E-11 1.435E-12 4.092E-18 2.835E-07 3.936E-04<br /><br /> At SCF step   87, forces are converged :<br />  for the second time, max diff in force=  2.835E-07 &lt; toldff=  1.000E-06<br /><br /> Cartesian components of stress tensor (hartree/bohr^3)<br />  sigma(1 1)=  1.68543099E-04  sigma(3 2)=  2.01362441E-06<br />  sigma(2 2)= -1.43572863E-04  sigma(3 1)= -1.38993666E-06<br />  sigma(3 3)=  1.08071563E-05  sigma(2 1)= -3.61309362E-05<br /><br /><br /> PAW TEST:<br /> ==== Compensation charge inside spheres ============<br /> The following values must be close to each other ...<br /> Compensation charge over spherical meshes =     21.244509849901164<br /> Compensation charge over fine fft grid    =     21.244499183963224<br /><br />-----------------------------------------------------------------<br />The behavior of maxfor in the SCF calculation is really puzzling, so I hope the developer <br />can have a look into the force calculation subroutines in PAW.  <br />By the way, &quot;enable_mpi_io=yes&quot; option was used in the compiling. <br /><br />Thank you.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Strange forces in band-parallelizations with PAW</h3>
				<div class="date">Posted: <strong>Thu Dec 04, 2014 9:16 am</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">For relaxation or force interest, one should not converge with a tolerance criteria on the wavefunctions since they can be very well calculated with a bad density, energy and forces.<br />Instead, one should use the last criteria you used : toldff to ensure the relaxation to converge.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=14&t=2868&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 21:39:15 GMT -->
</html>
