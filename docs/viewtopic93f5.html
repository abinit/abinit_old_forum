<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=2246&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 00:49:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; problem in convergence of phonon dispertion calculation</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>problem in convergence of phonon dispertion calculation</h2>
		<p><a href="viewtopic2b7a.html?f=10&amp;t=2246">https://forum.abinit.org/viewtopic.php?f=10&amp;t=2246</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Wed Aug 14, 2013 2:17 pm</strong></div>
				<div class="author">by <strong>brahimlag</strong></div>
				<div class="content">hello abinit's<br />I wanted to calculate the phonon Dispersion, calculation works well at gamma point but for other points that do not converge. I do not know where is the problem<br /> my input file is in attachement<br /><br /><br />Perturbation wavevector (in red.coord.)   0.333333  0.000000  0.000000<br /> Perturbation : displacement of atom   1   along direction   1<br /> Found     2 symmetries that leave the perturbation invariant.<br /> symkpt : the number of k-points, thanks to the symmetries,<br /> is reduced to    48 .<br /><br />--------------------------------------------------------------------------------<br /><br />-inwffil : will read wavefunctions from disk file FeBo_DS1_WFK<br />-P-0000 - newkpt: read input wf with ikpt,npw=   1     915, make ikpt,npw=   1    1829<br />-P-0000 - newkpt: read input wf with ikpt,npw=   2    1836, make ikpt,npw=   2    1836<br />-P-0000 - newkpt: read input wf with ikpt,npw=   2    1836, make ikpt,npw=   3    1836<br />-P-0000 - newkpt: read input wf with ikpt,npw=   3    1817, make ikpt,npw=   4    1817<br /><br />--------------------------------------------------------------------------------<br /><br />-inwffil : will read wavefunctions from disk file FeBo_DS1_WFK<br />-P-0000 - newkpt: read input wf with ikpt,npw=   2    1836, make ikpt,npw=   1    1836<br />-P-0000 - newkpt: read input wf with ikpt,npw=   2    1836, make ikpt,npw=   2    1836<br />-P-0000 - newkpt: read input wf with ikpt,npw=   1     915, make ikpt,npw=   3    1829<br />-P-0000 - newkpt: read input wf with ikpt,npw=   4    1822, make ikpt,npw=   4    1822<br /><br /> loper3 : total number of electrons, from k and k+q<br />  fully or partially occupied states are    4.400000E+01 and    4.400000E+01.<br /> Initialisation of the first-order wave-functions :<br />  ireadwf=   0<br />P newkpt: treating    180 bands with npw=    1836 for ikpt=   1 by node    0<br />P newkpt: treating    180 bands with npw=    1836 for ikpt=   2 by node    0<br />P newkpt: treating    180 bands with npw=    1829 for ikpt=   3 by node    0<br />P newkpt: treating    180 bands with npw=    1822 for ikpt=   4 by node    0<br />P newkpt: treating    180 bands with npw=    1822 for ikpt=   5 by node    1<br />P newkpt: treating    180 bands with npw=    1817 for ikpt=   6 by node    1<br />P newkpt: treating    180 bands with npw=    1814 for ikpt=   7 by node    1<br />P newkpt: treating    180 bands with npw=    1814 for ikpt=   8 by node    1<br />P newkpt: treating    180 bands with npw=    1821 for ikpt=   9 by node    2<br />P newkpt: treating    180 bands with npw=    1812 for ikpt=  10 by node    2<br />P newkpt: treating    180 bands with npw=    1812 for ikpt=  11 by node    2<br />P newkpt: treating    180 bands with npw=    1808 for ikpt=  12 by node    2<br />P newkpt: treating    180 bands with npw=    1828 for ikpt=  13 by node    3<br />P newkpt: treating    180 bands with npw=    1828 for ikpt=  14 by node    3<br />P newkpt: treating    180 bands with npw=    1825 for ikpt=  15 by node    3<br />P newkpt: treating    180 bands with npw=    1817 for ikpt=  16 by node    3<br />P newkpt: treating    180 bands with npw=    1817 for ikpt=  17 by node    4<br />P newkpt: treating    180 bands with npw=    1822 for ikpt=  18 by node    4<br />P newkpt: treating    180 bands with npw=    1813 for ikpt=  19 by node    4<br />P newkpt: treating    180 bands with npw=    1813 for ikpt=  20 by node    4<br />P newkpt: treating    180 bands with npw=    1809 for ikpt=  21 by node    5<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  22 by node    5<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  23 by node    5<br />P newkpt: treating    180 bands with npw=    1804 for ikpt=  24 by node    5<br />P newkpt: treating    180 bands with npw=    1806 for ikpt=  25 by node    6<br />P newkpt: treating    180 bands with npw=    1806 for ikpt=  26 by node    6<br />P newkpt: treating    180 bands with npw=    1792 for ikpt=  27 by node    6<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  28 by node    6<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  29 by node    7<br />P newkpt: treating    180 bands with npw=    1810 for ikpt=  30 by node    7<br />P newkpt: treating    180 bands with npw=    1802 for ikpt=  31 by node    7<br />P newkpt: treating    180 bands with npw=    1802 for ikpt=  32 by node    7<br />P newkpt: treating    180 bands with npw=    1806 for ikpt=  33 by node    8<br />P newkpt: treating    180 bands with npw=    1816 for ikpt=  34 by node    8<br />P newkpt: treating    180 bands with npw=    1816 for ikpt=  35 by node    8<br />P newkpt: treating    180 bands with npw=    1812 for ikpt=  36 by node    8<br />P newkpt: treating    180 bands with npw=    1828 for ikpt=  37 by node    9<br />P newkpt: treating    180 bands with npw=    1828 for ikpt=  38 by node    9<br />P newkpt: treating    180 bands with npw=    1825 for ikpt=  39 by node    9<br />P newkpt: treating    180 bands with npw=    1817 for ikpt=  40 by node    9<br />P newkpt: treating    180 bands with npw=    1817 for ikpt=  41 by node   10<br />P newkpt: treating    180 bands with npw=    1822 for ikpt=  42 by node   10<br />P newkpt: treating    180 bands with npw=    1813 for ikpt=  43 by node   10<br />P newkpt: treating    180 bands with npw=    1813 for ikpt=  44 by node   10<br />P newkpt: treating    180 bands with npw=    1809 for ikpt=  45 by node   11<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  46 by node   11<br />P newkpt: treating    180 bands with npw=    1820 for ikpt=  47 by node   11<br />P newkpt: treating    180 bands with npw=    1804 for ikpt=  48 by node   11<br /><br /><br />     iter   2DEtotal(Ha)        deltaE(Ha) residm    vres2<br />-ETOT  1   2582696.5824959      2.582E+06 2.504E+01 5.386E+10<br /> ETOT  2   2102426164.6901      2.100E+09 4.155E+03 4.332E+13<br /> ETOT  3   2858490.3786928     -2.100E+09 3.568E+03 5.406E+10<br /> ETOT  4   1162310.1268631     -1.696E+06 8.758E+02 2.015E+10<br /> ETOT  5   1190021.1841785      2.771E+04 9.691E+01 2.532E+10<br /> ETOT  6   29130.937598120     -1.161E+06 5.567E+01 4.214E+08<br /> ETOT  7   10067.434177251     -1.906E+04 2.762E+01 1.906E+08<br /> ETOT  8   72.904035136211     -9.995E+03 1.275E+01 1.034E+06<br /> ETOT  9   16.189033707846     -5.672E+01 7.646E+00 8.165E+04<br /> ETOT 10   22.813691574573      6.625E+00 3.311E+00 2.077E+05<br /> ETOT 11   18.555502227962     -4.258E+00 2.105E+00 1.286E+05<br /> ETOT 12   19.970003390068      1.415E+00 8.908E-01 6.616E+04<br /> ETOT 13   16.984162679842     -2.986E+00 9.264E-01 5.913E+04<br /> ETOT 14   63.133630047078      4.615E+01 7.548E-01 4.991E+05<br /> ETOT 15   18.276276763790     -4.486E+01 1.442E+00 2.035E+04<br /> ETOT 16   116.53773025635      9.826E+01 1.184E+00 1.693E+06<br /> ETOT 17   12.912215286574     -1.036E+02 6.808E-02 2.900E+03<br /> ETOT 18   14.085012171117      1.173E+00 1.390E+00 2.672E+04<br /> ETOT 19   60.153558295754      4.607E+01 2.055E-01 8.703E+05<br /> ETOT 20   13.202376142594     -4.695E+01 1.419E-01 1.430E+04<br /> ETOT 21   19.070935888370      5.869E+00 1.334E-01 1.215E+05<br /> ETOT 22   20.104316099486      1.033E+00 1.699E-01 8.134E+04<br /> ETOT 23   22.415302073775      2.311E+00 2.250E-01 1.187E+05<br /> ETOT 24   16.408112222822     -6.007E+00 2.391E-01 2.257E+04<br /> ETOT 25   24.143277351434      7.735E+00 3.528E-01 1.934E+05<br /> ETOT 26   52.316563532230      2.817E+01 3.618E-01 2.873E+05<br /> ETOT 27   73.062845515788      2.075E+01 5.541E-01 7.620E+05<br /> ETOT 28   31.194009265978     -4.187E+01 5.687E-01 3.501E+05<br /> ETOT 29   528.70033285783      4.975E+02 8.596E-01 1.019E+07<br /> ETOT 30   177.00581830748     -3.517E+02 8.734E-01 2.258E+06<br /> ETOT 31   253.58339008075      7.658E+01 1.350E+00 2.140E+06<br /> ETOT 32   271.90603253330      1.832E+01 1.346E+00 1.954E+06<br /> ETOT 33   200.61877473398     -7.129E+01 2.995E-03 1.015E+06<br /> ETOT 34   5032.5847097360      4.832E+03 1.375E+00 9.652E+07<br /> ETOT 35   224.61886674024     -4.808E+03 2.119E-01 1.791E+06<br /> ETOT 36   227.69995936727      3.081E+00 1.253E-01 1.723E+06<br /> ETOT 37   15296.093795337      1.507E+04 1.280E-01 2.326E+08<br /> ETOT 38   5223.0681511120     -1.007E+04 1.322E-01 9.654E+07<br /> ETOT 39   7013.8467579661      1.791E+03 2.093E-01 1.190E+08<br /> ETOT 40   5127.5044482076     -1.886E+03 2.163E-01 2.276E+07<br /> ETOT 41   12176.427816549      7.049E+03 3.550E-01 1.030E+08<br /> ETOT 42   4792.8650717127     -7.384E+03 2.929E-01 1.573E+07<br /> ETOT 43   9820.3788405442      5.028E+03 5.123E-01 1.922E+08<br /> ETOT 44   19843.346953819      1.002E+04 4.651E-01 1.105E+08<br /> ETOT 45   116773.46448778      9.693E+04 5.130E-01 9.038E+08<br /> ETOT 46   44658.671016227     -7.211E+04 6.879E-01 7.252E+08<br /> ETOT 47   495776.10187867      4.511E+05 9.725E-01 1.007E+10<br /> ETOT 48   193046.68231029     -3.027E+05 9.193E-01 3.412E+09<br /> ETOT 49   185262.33371659     -7.784E+03 9.928E-01 1.324E+09<br /> ETOT 50   167471.33869366     -1.779E+04 1.373E+00 8.579E+08<br /> ETOT 51   111988.76614857     -5.548E+04 1.281E+00 5.304E+08<br /> ETOT 52   6843654.0750648      6.732E+06 1.397E+01 1.276E+11<br /> ETOT 53   2967120.5122031     -3.877E+06 9.058E+00 4.647E+10<br /> ETOT 54   219034.02837964     -2.748E+06 5.237E+00 1.100E+09<br /> ETOT 55   9401427.1528353      9.182E+06 1.851E+01 1.263E+11<br /> ETOT 56   5977247.3118967     -3.424E+06 3.140E+01 1.127E+11</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Mon Aug 19, 2013 10:58 am</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content">Hello<br /><br />Try setting usexcnhat=1 (default is -1). It should help for convergence issues with the conjugate gradient.<br /><br />Boris</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Thu Oct 17, 2013 6:51 pm</strong></div>
				<div class="author">by <strong>lagoun brahim</strong></div>
				<div class="content">thank you Boris for your reply.<br />  I tried but it does not converge</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Fri Oct 18, 2013 11:17 am</strong></div>
				<div class="author">by <strong>ilukacevic</strong></div>
				<div class="content">Hi!<br /><br />Did you check whether:<br /><br />1] Your 1st dataset is well converged,<br /><br />2] You use the same input parameters in RF calculation as in your relaxation calculation (ecut, ecutsm, dilatmx, ngkpt, shiftk, nshiftk,...),<br /><br />3] Try putting npulayit to higher value that default (nnsclo and nline, also).<br /><br />Igor</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Fri Oct 18, 2013 11:34 pm</strong></div>
				<div class="author">by <strong>Boris</strong></div>
				<div class="content"><blockquote><div><cite>lagoun brahim wrote:</cite>thank you Boris for your reply.<br />  I tried but it does not converge</div></blockquote><br /><br />Hi again<br /><br />It may be a parallelisation issue. How many cpus are you using for the calculation ?<br /><br />Thanks to the symmetries, the number of kpts has been reduced to 48. If you use more than 48 cores, abinit will switch to band parallelisation, which does not work yet and the conjugate gradient fails. <br /><br />Boris</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Sat Oct 19, 2013 2:19 am</strong></div>
				<div class="author">by <strong>lagoun brahim</strong></div>
				<div class="content"><blockquote><div><cite>Boris wrote:</cite><blockquote><div><cite>lagoun brahim wrote:</cite>thank you Boris for your reply.<br />  I tried but it does not converge</div></blockquote><br /><br />Hi again<br /><br />It may be a parallelisation issue. How many cpus are you using for the calculation ?<br /><br />Thanks to the symmetries, the number of kpts has been reduced to 48. If you use more than 48 cores, abinit will switch to band parallelisation, which does not work yet and the conjugate gradient fails. <br /><br />Boris</div></blockquote><br />thank you boris again<br />i use 12 cores only</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: problem in convergence of phonon dispertion calculation</h3>
				<div class="date">Posted: <strong>Sat Oct 19, 2013 2:24 am</strong></div>
				<div class="author">by <strong>lagoun brahim</strong></div>
				<div class="content"><blockquote><div><cite>ilukacevic wrote:</cite>Hi!<br /><br />Did you check whether:<br /><br />1] Your 1st dataset is well converged,<br /><br />2] You use the same input parameters in RF calculation as in your relaxation calculation (ecut, ecutsm, dilatmx, ngkpt, shiftk, nshiftk,...),<br /><br />3] Try putting npulayit to higher value that default (nnsclo and nline, also).<br /><br />Igor</div></blockquote><br />thank you for your reponse<br />1-yes<br />2-yes<br />3- i tried to increase nnsclo and nline but i have the same problem (i tried iscf 7 also)<br />thanks again</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=2246&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 00:49:03 GMT -->
</html>
