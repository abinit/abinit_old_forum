<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=120&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 20:54:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; error in gw</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>error in gw</h2>
		<p><a href="viewtopic4481.html?f=11&amp;t=120">https://forum.abinit.org/viewtopic.php?f=11&amp;t=120</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>error in gw</h3>
				<div class="date">Posted: <strong>Wed Mar 10, 2010 6:30 am</strong></div>
				<div class="author">by <strong>yaser</strong></div>
				<div class="content">Dear Abiniters,<br />I want to calculate the band gap with GW approximation (first part of lesson<br />one ) for a nonsymmorphic material whit space group 206 .<br />The question is : when i get symmorphic=0 i will face with error in log file:<br />( Simple Lattice Grid<br />symkpt : found identity, with number  1<br /><br />inread : ERROR -<br />  Attempted to read ndig=    10 integer digits,<br />  from string(1:ndig)= OPTDRIVER2, to initialize an integer variable<br /><br />  inread : WARNING -<br />  Note that this string contains the letter O. <br />  It is likely that this letter should be replaced by the number 0.<br /><br />inarray : ERROR -<br />  It occurred reading data for keyword &quot; ISTWFK1                  <br />                                          <br />        &quot;,<br />    looking for      12 array elements.<br />  There is a problem with the input file : maybe<br />  a disagreement between the declared dimension of the array,<br />  and the number of data actually provided.<br />  Action : correct your input file !<br /><br />leave_new : decision taken to exit ...1).<br /><br /><br />-and when symmorphic=1 : ( chkinp: Checking input parameters for consistency,<br />jdtset= 1.<br /><br />chkinp : ERROR -<br />When kssform==1 or 2, one cannot use pseudopotentials with<br />more than one projector per angular momentum channel.<br />Note that the ABINIT Troullier-Martins psps (pspcod=6),<br />are suitable for use with kssform==1 or 2.<br />Action : change kssform, nbandkss, or the problematic pseudopotential.<br /><br />chkinp: ERROR -<br />  When nbandkss/=0, all the components of tnons must be zero.<br />  However, for the symmetry operation number  3, tnons =  0.5000  0.0000 <br />0.5000.<br />  Action : use the symmetry finder (nsym=0) with symmorphi==0.<br /><br />leave_new : decision taken to exit ...1).<br /><br />My Dear Abiniters ,please help me .<br />I am wating to hear you as soon as possible.<br />tank you <br />asadi.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Wed Mar 10, 2010 7:40 pm</strong></div>
				<div class="author">by <strong>gonze</strong></div>
				<div class="content">Hi,<br />There must be a typographical error in your input file.<br />Could you post it ?<br />X.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Thu Mar 11, 2010 7:35 am</strong></div>
				<div class="author">by <strong>yaser</strong></div>
				<div class="content">Dear gonze,<br />Hi, Thank you for your reply. the input file is:<br />--------------------------------------------------------------------------------------------------------------------------<br /> <br />ndtset      3    <br /><br /><br /># Definition of parameters for the calculation of the KSS file<br /><br />nbandkss1   -1      # Number of bands in KSS file (-1 means the maximum possible)<br />nband1      100        # Number of (occ and empty) bands to be computed<br />istwfk1     10*1<br /><br /># Calculation of the screening (epsilon^-1 matrix)<br />optdriver2  3        # Screening calculation<br />getkss2     -1       # Obtain KSS file from previous dataset<br />nband2      150      # Bands to be used in the screening calculation<br />ecutwfn2    5      # Cut-off energy of the planewave set to represent the wavefunctions<br />ecuteps2    6.6      # Cut-off energy of the planewave set to represent the dielectric matrix<br /> ppmfrq2   16.8        # Imaginary frequency where to calculate the screening<br /><br /># Calculation of the Self-Energy matrix elements (GW corrections)<br />optdriver3  4        # Self-Energy calculation<br />getkss3     -2       # Obtain KSS file from dataset 1<br />getscr3     -1       # Obtain SCR file from previous dataset<br />nband3      200     # Bands to be used in the Self-Energy calculation<br />ecutwfn3     8     # Planewaves to be used to represent the wavefunctions<br />ecutsigx3     9     # Dimension of the G sum in Sigma_x<br />                     # (the dimension in Sigma_c is controlled by npweps)<br />nkptgw3      1                # number of k-point where to calculate the GW correction<br />kptgw3                       # k-points<br />  0.000   0.000    0.000<br />bdgw3       96  97            # calculate GW corrections for bands from 4 to 5<br /><br /><br /># Data common to the three different datasets<br /><br />acell   3*18.852         <br />ntypat  2          <br />znucl   49 8           <br />natom   40<br />natrd   40<br />spgroup  206<br /><br />brvltt   -1               <br />typat     16*1 24*2               <br />xred                   <br />   0.25000000 0.25000000 0.25000000      <br />   0.25000000 0.75000000 0.75000000      <br />   0.75000000 0.25000000 0.75000000<br />   0.25000000 0.25000000 0.75000000<br />  ...<br />  ...<br />  ...<br />  ...<br /><br />kptopt    1 <br /> <br />nshiftk   1<br />shiftk    0.5 0.5 0.5  <br />       <br />ngkpt     4 4 4    <br /># Use only symmorphic operations<br />symmorphi 0<br /><br /><br /><br /><br /># Definition of the planewave basis set (at convergence 16 Rydberg 8 Hartree)<br />ecut 16       # Maximal kinetic energy cut-off, in Hartree<br /><br /># Definition of the SCF procedure<br />nstep   1500        # Maximal number of SCF cycles<br />toldfe  1.0d-6    # Will stop when this tolerance is achieved on total energy<br />diemac  12.0      # Although this is not mandatory, it is worth to<br />                  # precondition the SCF cycle. The model dielectric<br />                  # function used as the standard preconditioner<br />                  # is described in the &quot;dielng&quot; input variable section.<br />                  # Here, we follow the prescription for bulk silicon.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Thu Mar 11, 2010 11:11 am</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">&gt; istwfk1 10*1<br /><br />is the problem, and trying to read into the next fields looking for data.<br />You have more than 10 k-points, so adjust the 10.<br />On most platforms you can use<br />istwfk *1<br />to tell the parser to fill all needed values with 1.<br /><br />Matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Thu Mar 11, 2010 4:01 pm</strong></div>
				<div class="author">by <strong>yaser</strong></div>
				<div class="content">Dear mverstra,<br />Hi,thank you for your reply.<br />When i let istwfk*1 in input fille then i have the following error.<br />----------------------------------------------------------------------------------------------------------<br />chkinp: machine precision is   2.2204460492503131E-16<br /><br /> chkinp: Checking input parameters for consistency, jdtset= 1.<br /><br />chkinp : ERROR -<br /> When kssform==1 or 2, one cannot use pseudopotentials with<br /> more than one projector per angular momentum channel.<br /> Note that the ABINIT Troullier-Martins psps (pspcod=6),<br /> are suitable for use with kssform==1 or 2.<br /> Action : change kssform, nbandkss, or the problematic pseudopotential.<br /><br /> chkinp: Checking input parameters for consistency, jdtset= 2.<br /><br /> chkinp: Checking input parameters for consistency, jdtset= 3.<br /><br /> leave_new : decision taken to exit ...<br />1<br />----------------------------------------------------------<br />thank you.<br />asadi.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Thu Mar 11, 2010 4:26 pm</strong></div>
				<div class="author">by <strong>gmatteo</strong></div>
				<div class="content">Dear Asadi,<br /><br />you are probably using an old version of the code.<br />Could you try the latest stable version available on the web site?<br />Moreover I suggest you use kssform=3 for generating the KSS file<br />instead of the direct diagonalization. <br />This topic has been already discussed in this forum.<br /><br />An additional comment: the treatment of the optical limit (q--&gt;0) of the <br />heads and of the wings of the dielectric matrix is not coded <br />when at least one of the NC pseudos has more than one projector per angular channel.<br />GW results in bulk systems should tend to the correct value when the <br />q-sampling of the BZ is increased as the contribution given by q=\Gamma will decrease. <br />On the other hand the optical spectra produced in the screening part might be affected<br />by important errors when multi-projector pseudopotentials are used.<br /><br />Hope it helps,<br />Matteo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: error in gw</h3>
				<div class="date">Posted: <strong>Thu Mar 11, 2010 6:47 pm</strong></div>
				<div class="author">by <strong>yaser</strong></div>
				<div class="content">Dear gonze,Matthieu  and  Matteo,<br /><br />Thanks for your reply. That's helpful!<br /><br />Best regards,<br /><br />Asadi.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=120&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 20:54:49 GMT -->
</html>
