<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1821&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:30:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Why is finite E field for GaAs crashing?</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Why is finite E field for GaAs crashing?</h2>
		<p><a href="viewtopic17df-2.html?f=10&amp;t=1821">https://forum.abinit.org/viewtopic.php?f=10&amp;t=1821</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Why is finite E field for GaAs crashing?</h3>
				<div class="date">Posted: <strong>Sun Sep 02, 2012 3:05 pm</strong></div>
				<div class="author">by <strong>paulfons</strong></div>
				<div class="content">Greetings,<br />        I have been trying to learn more about Berry phase calculations in a finite electric field.  First, I tried the finite electric field calculation for AlAs in the tutorials without problem.  I then tried to adopt the same procedure for GaAs.  I have set the polarization direction to be 111 and am using a rhombohedral primitive cell for the structure.  While I doubt it matters, I have also optimized the cell size using the HGH PS within the LDA.  For the Berry phase, I first calculate the SCF 8x8x8 MP grid with 4 shift vectors and calculate the Berry phase in zero field and pass the resulting wavefunction to the next dataset and gradually turn on the efield with berryopt 4.  Running the serial version of abinit with this input always results in a crash at the start of the Berry phase calculation.  I have tried this with different k-point meshes to no avail.  Any suggestions would be greatly appreciated.<br /><br /><br /><br /><br /><br /> ETOT  8  -8.6674496284773    -3.375E-13 3.561E-08 4.435E-11<br /> scprqt: &lt;Vxc&gt;= -3.2553761E-01 hartree<br />  newvtr : enter <br />  newvtr : ispmix,nfft,nfftmix=           1       91125       91125<br /><br /> Pulay update with  7 previous iterations:<br /> mixing of old trial potential : alpha(m:m-4)=   1.09     -0.969E-01  0.946E-02 -0.383E-03 -0.478E-04<br /><br /> ITER STEP NUMBER     9<br /> vtorho : nnsclo_now=  1, note that nnsclo,dbl_nnsclo,istep=  0 0  9<br /> leave_test : synchronization done...<br /> vtorho: loop on k-points and spins done in parallel<br /> vtorho: echo density<br /> Total charge density [el/Bohr^3]<br />,     Maximum=    1.0601E-01  at reduced coord.    0.1778    0.1778    0.4889<br />,     Minimum=    2.6512E-05  at reduced coord.    0.0000    0.0000    0.0000<br />,  Integrated=    8.0000E+00<br />  mkdenpos : enter <br />  xc_denpos=  9.99999999999999999E-015<br /> ETOT  9  -8.6674496284769     3.606E-13 6.064E-09 1.030E-13<br /> scprqt: &lt;Vxc&gt;= -3.2553761E-01 hartree<br /><br /> At SCF step    9, etot is converged : <br />  for the second time, diff in etot=  3.606E-13 &lt; toldfe=  1.000E-12<br /><br /> Computing the polarization (Berry phase) for reciprocal vector:<br />  0.12500  0.00000  0.00000 (in reduced coordinates)<br /> -0.01196  0.01196  0.01196 (in cartesian coordinates - atomic units)<br /> Number of strings:   256<br /> Number of k points in string:    8<br /><br /> berryphase_new : BUG - <br />  For k-point #    1,<br />  the determinant of the overlap matrix is found to be 0.<br /><br /> berryphase_new : BUG - <br />  For k-point #    1,<br />  the determinant of the overlap matrix is found to be 0.<br />  Action : contact ABINIT group.<br />  Action : contact ABINIT group.<br /><br /><br />.Delivered   15 WARNINGs and  15 COMMENTs to log file.<br /><br /> leave_new : decision taken to exit ...<br /> DATA TYPE INFORMATION: <br /> REAL:      Data type name: REAL(DP) <br />            Kind value:      8<br />            Precision:      15<br />            Smallest nonnegligible quantity relative to 1:  0.22204460E-15<br />            Smallest positive number:                       0.22250739-307<br />            Largest representable number:                   0.17976931+309<br /> INTEGER:   Data type name: INTEGER(default) <br />            Kind value: 4<br />            Bit size:   32<br />            Largest representable number: 2147483647<br /> LOGICAL:   Data type name: LOGICAL <br />            Kind value: 4<br /> CHARACTER: Data type name: CHARACTER             Kind value: 1<br />  ==== Using MPI-2 specifications ==== <br />  MPI-IO support is ON<br />  xmpi_tag_ub ................   2147483647<br />  xmpi_bsize_ch ..............            1<br />  xmpi_bsize_int .............            4<br />  xmpi_bsize_sp ..............            4<br />  xmpi_bsize_dp ..............            8<br />  xmpi_bsize_spc .............            8<br />  xmpi_bsize_dpc .............           16<br />  xmpio_bsize_frm ............            4<br />  xmpi_address_kind ..........            8<br />  xmpi_offset_kind ...........            8<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br /><br /> === Build Information === <br />  Version       : 6.12.3<br />  Build target  : x86_64_linux_gnu4.5<br />  Build date    : 20120902<br /><br /> === Compiler Suite === <br />  C compiler       : gnu4.5<br />  CFLAGS           :  -g -O2 -mtune=native -march=native -mfpmath=sse<br />  C++ compiler     : gnu4.5<br />  CXXFLAGS         :  -g -O2 -mtune=native -march=native -mfpmath=sse<br />  Fortran compiler : gnu4.5<br />  FCFLAGS          :  -g -ffree-line-length-none -Wstrict-aliasing=2<br />  FC_LDFLAGS       : <br /><br /> === Optimizations === <br />  Debug level        : basic<br />  Optimization level : standard<br />  Architecture       : intel_xeon<br /><br /> === MPI === <br />  Parallel build : yes<br />  Parallel I/O   : yes<br />  Time tracing   : no<br />  GPU support    : no<br /><br /> === Connectors / Fallbacks === <br />  Connectors on : yes<br />  Fallbacks on  : yes<br />  DFT flavor    : libxc-fallback+atompaw-fallback+bigdft-fallback+wannier90-fallback<br />  FFT flavor    : none<br />  LINALG flavor : mkl<br />  MATH flavor   : none<br />  TIMER flavor  : abinit<br />  TRIO flavor   : netcdf-fallback+etsf_io-fallback<br /><br /> === Experimental features === <br />  Bindings            : no<br />  Exports             : no<br />  GW double-precision : no<br /><br /> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Why is finite E field for GaAs crashing? [Answer]</h3>
				<div class="date">Posted: <strong>Mon Sep 03, 2012 7:03 am</strong></div>
				<div class="author">by <strong>paulfons</strong></div>
				<div class="content">I am answering my own question which leads to yet another question.  First, the reason the Berry phase calculation crashed was that my lattice constant was too small.  Replacing the 10.45 (Bohr) value in the original GaAs input file with a value of 10.6 Bohr allows the Berry phase calculation to run to completion. <br />   <br />  My confusion stems from the fact that I optimized the structure with respect to volume (with so_psp 2 2, nspinor 2) with spin-orbit turned on.  At first I thought it might be an error in the force routine, but even changing the acell value in steps in different calculations leads to the same 10.45 Bohr value.  Using this value in the Berry phase leads to a crash, but using the experimental value of 10.67 Bohr works.  Does this mean that spin-orbit calculations are flaky?  Does anyone have any insight?<br /><br />Thanks!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Why is finite E field for GaAs crashing?</h3>
				<div class="date">Posted: <strong>Mon Sep 10, 2012 7:14 pm</strong></div>
				<div class="author">by <strong>jzwanzig</strong></div>
				<div class="content">Again the real problem is the spinor code for the Berry's phase in version 6.12.3. I just ran GaAs with nspinor 2, HGH pseudo's so spin orbit coupling on, with berryopt -1 followed by berryopt 4 and a finite efield, parallelized over k points, on version 7.0.1 and it worked fine-- ;)</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1821&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:30:33 GMT -->
</html>
