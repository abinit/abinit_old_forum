<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1837&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:55:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Abinit 6.12.3 on CentOS 6.3 with OpenMPI</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Abinit 6.12.3 on CentOS 6.3 with OpenMPI</h2>
		<p><a href="viewtopicf256.html?f=3&amp;t=1837">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1837</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Abinit 6.12.3 on CentOS 6.3 with OpenMPI</h3>
				<div class="date">Posted: <strong>Mon Sep 17, 2012 9:06 pm</strong></div>
				<div class="author">by <strong>oryx</strong></div>
				<div class="content">Hi all,<br />I am attempting to set up Abinit 6.12.3 on a 64 bit machine running CentOS 6.3.  I can compile and run Abinit in serial just fine, but I am having trouble getting it to utilize OpenMPI.  Here are my procedure and the resulting problems.<br /><br />First, install OpenMPI:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo yum install openmpi openmpi-devel</code></pre></div><br /><br />Then I loaded the OpenMPI module and checked to make sure my paths were correct:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>module load openmpi-$(uname -i)<br />echo $PATH<br />/usr/lib64/openmpi/bin:...<br />echo $LD_LIBRARY_PATH<br />/usr/lib64/openmpi/lib:...<br />which mpirun<br />/usr/lib64/openmpi/bin/mpirun</code></pre></div><br /><br />I was able to compile and run some simple MPI programs, so I believe OpenMPI is functioning.  I then configured Abinit:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --enable-mpi=&quot;yes&quot; --enable-mpi-io=&quot;yes&quot; --with-mpi-prefix=&quot;/usr/lib64/openmpi/&quot; --with-dft-flavor=&quot;none&quot; --with-trio-flavor=&quot;none&quot; --with-linalg-libs=&quot;-L/usr/lib64 -lblas -llapack&quot;</code></pre></div><br /><br />This resulted in:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code><br />&nbsp;==============================================================================<br />&nbsp;=== Overall startup&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking build system type... x86_64-unknown-linux-gnu<br />checking host system type... x86_64-unknown-linux-gnu<br />checking target system type... x86_64-unknown-linux-gnu<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking whether make sets $(MAKE)... (cached) yes<br />checking whether ln -s works... yes<br />checking for a sed that does not truncate output... /bin/sed<br />checking for gawk... (cached) gawk<br />checking for grep that handles long lines and -e... /bin/grep<br />checking for egrep... /bin/grep -E<br />configure: not loading options (no config file available)<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Build-system information&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />configure: ABINIT version 6.12.3<br />configure: M4 010416 - Autoconf 026800 - Automake 011100 - Libtool 020204<br />configure: reporting user interface changes:<br />configure:&nbsp; * new option --enable-gui is available<br />configure:&nbsp; * new option --enable-gw-openmp is available<br />configure:&nbsp; * new option --with-algo-flavor is available<br />configure:&nbsp; * new option --with-algo-incs is available<br />configure:&nbsp; * new option --with-algo-libs is available<br />configure:&nbsp; * --with-fallbacks-tardir removed<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Option consistency checking&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />configure: checking consistency of library-related options<br />configure:&nbsp; |---&gt; all OK<br />configure: <br />configure: checking consistency of experimental options<br />configure:&nbsp; |---&gt; all OK<br />configure: <br />configure:&nbsp; |---&gt; all OK<br />configure: <br />configure: parsing command-line options<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Multicore architecture startup&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />configure: Initializing MPI support<br />configure: looking for MPI in /usr/lib64/openmpi/<br />checking for a MPI C compiler... /usr/lib64/openmpi//bin/mpicc<br />checking for a MPI C++ compiler... /usr/lib64/openmpi//bin/mpicxx<br />checking for a MPI Fortran compiler... /usr/lib64/openmpi//bin/mpif90<br />checking for a MPI runner... /usr/lib64/openmpi//bin/mpirun<br />configure: GPU support disabled from command-line<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Utilities&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking for sh... /bin/sh<br />checking for mv... /bin/mv<br />checking for perl... /usr/bin/perl<br />checking for rm... /bin/rm<br />checking for patch... patch<br />checking for tar... tar<br /><br />&nbsp;==============================================================================<br />&nbsp;=== C support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking for gcc... /usr/lib64/openmpi//bin/mpicc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether /usr/lib64/openmpi//bin/mpicc accepts -g... yes<br />checking for /usr/lib64/openmpi//bin/mpicc option to accept ISO C89... none needed<br />checking for style of include used by make... GNU<br />checking dependency style of /usr/lib64/openmpi//bin/mpicc... gcc3<br />checking how to run the C preprocessor... /usr/lib64/openmpi//bin/mpicc -E<br />checking which type of compiler we have... gnu 4.4<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking whether byte ordering is bigendian... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== C++ support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking whether we are using the GNU C++ compiler... yes<br />checking whether /usr/lib64/openmpi//bin/mpicxx accepts -g... yes<br />checking dependency style of /usr/lib64/openmpi//bin/mpicxx... gcc3<br />checking which type of C++ compiler we have... gnu 4.4<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Fortran support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking whether we are using the GNU Fortran compiler... yes<br />checking whether /usr/lib64/openmpi//bin/mpif90 accepts -g... yes<br />checking which type of Fortran compiler we have... gnu 4.4<br />checking fortran 90 modules extension... mod<br />checking for Fortran flag to compile .F90 files... none<br />configure: determining Fortran module case<br />checking whether Fortran modules are upper-case... no<br />checking how to get verbose linking output from /usr/lib64/openmpi//bin/mpif90... -v<br />checking for Fortran libraries of /usr/lib64/openmpi//bin/mpif90...&nbsp; -L/usr/lib64/openmpi/lib -L/usr/lib/gcc/x86_64-redhat-linux/4.4.6 -L/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../.. -lmpi_f90 -lmpi_f77 -lmpi -ldl -lgfortranbegin -lgfortran -lm -lpthread<br />checking for dummy main to link with Fortran libraries... none<br />checking for Fortran name-mangling scheme... lower case, underscore, no extra underscore<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Python support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking for python... python<br />checking for Python CPPFLAGS... -I/usr/include/python2.6 -I/usr/lib64/python2.6/site-packages/numpy/core/include<br />checking for bzr... no<br />checking for Python NumPy headers... found<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Libraries and linking&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking for ar... ar<br />checking for ranlib... ranlib<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Hints&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking for cpp... cpp<br />checking for a true C preprocessor... cpp<br />checking which cpp hints to apply... default/default/default<br />checking which cc hints to apply... gnu/default/default<br />checking which xpp hints to apply... none/none/none<br />checking which cxx hints to apply... gnu/default/default<br />checking which fpp hints to apply... default/default/default<br />checking which fc hints to apply... gnu/default/default<br />checking which ar hints to apply... none/none/none<br />checking which Fortran preprocessor to use... <br />checking which Fortran preprocessor flags to apply... <br />checking whether to wrap Fortran compiler calls... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Debugging&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking debugging status... enabled (profile mode: basic)<br />configure: setting C debug flags to '-g'<br />configure: setting C++ debug flags to '-g'<br />configure: setting Fortran debug flags to '-g'<br />checking whether to activate debug mode in source files... no<br />checking which cc debug flags to apply... gnu/default/default<br />checking which cxx debug flags to apply... none/none/none<br />checking which fc debug flags to apply... gnu/default/default<br />checking whether to activate design-by-contract debugging... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Optimizations&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking optimization status... enabled (profile mode: standard)<br />checking which cc optimizations to apply... gnu/default/default<br />checking which cxx optimizations to apply... gnu/default/default<br />checking which fc optimizations to apply... gnu/default/default<br />checking whether to apply per-directory optimizations... yes<br /><br />&nbsp;==============================================================================<br />&nbsp;=== 64-bit support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking for a 64-bit architecture... yes<br />checking whether to use 64-bit flags... no<br />checking for user-defined 64-bit flags... <br /><br />&nbsp;==============================================================================<br />&nbsp;=== Build flags&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />configure: static builds may be performed<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Advanced compiler features&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking stddef.h usability... yes<br />checking stddef.h presence... yes<br />checking for stddef.h... yes<br />checking stdarg.h usability... yes<br />checking stdarg.h presence... yes<br />checking for stdarg.h... yes<br />checking stdio.h usability... yes<br />checking stdio.h presence... yes<br />checking for stdio.h... yes<br />checking math.h usability... yes<br />checking math.h presence... yes<br />checking for math.h... yes<br />checking termios.h usability... yes<br />checking termios.h presence... yes<br />checking for termios.h... yes<br />checking errno.h usability... yes<br />checking errno.h presence... yes<br />checking for errno.h... yes<br />checking malloc.h usability... yes<br />checking malloc.h presence... yes<br />checking for malloc.h... yes<br />checking sys/malloc.h usability... no<br />checking sys/malloc.h presence... no<br />checking for sys/malloc.h... no<br />checking mcheck.h usability... yes<br />checking mcheck.h presence... yes<br />checking for mcheck.h... yes<br />checking sys/time.h usability... yes<br />checking sys/time.h presence... yes<br />checking for sys/time.h... yes<br />checking sys/resource.h usability... yes<br />checking sys/resource.h presence... yes<br />checking for sys/resource.h... yes<br />checking for abort... yes<br />checking for mallinfo... yes<br />checking size of char... 1<br />checking size of short... 2<br />checking size of int... 4<br />checking size of long... 8<br />checking size of long long... 8<br />checking size of unsigned int... 4<br />checking size of unsigned long... 8<br />checking size of unsigned long long... 8<br />checking size of float... 4<br />checking size of double... 8<br />checking size of long double... 16<br />checking size of size_t... 8<br />checking size of ptrdiff_t... 8<br />checking for an ANSI C-conforming const... yes<br />checking for size_t... yes<br />checking whether the Fortran compiler supports allocatable arrays in datatypes... yes<br />checking whether the Fortran compiler provides the iso_c_binding module... yes<br />checking whether the Fortran compiler accepts exit()... yes<br />checking whether the Fortran compiler accepts flush()... yes<br />checking whether the Fortran compiler accepts flush_()... no<br />checking whether the Fortran compiler accepts gamma()... yes<br />checking whether the Fortran compiler accepts getenv()... yes<br />checking whether the Fortran compiler accepts getpid()... no<br />checking whether the Fortran compiler accepts the null() intrinsic... yes<br />checking whether the Fortran compiler accepts quadruple integers... yes<br />checking whether the Fortran compiler accepts long lines... yes<br />checking whether the Fortran compiler supports stream IO... yes<br />checking whether the Fortran compiler accepts cpu_time()... yes<br />checking whether the Fortran compiler accepts etime()... no<br />checking whether to use C clock for timings... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Multicore architecture support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking whether the C compiler supports MPI... yes<br />checking whether the C++ compiler supports MPI... yes<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... yes<br />checking whether to build MPI code... yes<br />checking whether to build MPI I/O code... yes<br />checking whether to build MPI time tracing code... no<br />checking which level of MPI is supported by the Fortran compiler... 2<br />checking whether the MPI library supports MPI_CREATE_TYPE_STRUCT... yes<br />checking whether to activate GPU support... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Connectors / Fallbacks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />checking for the requested transferable I/O support... none<br />checking for the actual transferable I/O support... none<br />checking for the requested timer support... abinit<br />checking time.h usability... yes<br />checking time.h presence... yes<br />checking for time.h... yes<br />checking for clock_gettime in -lrt... yes<br />checking for clock_gettime... no<br />checking for the actual timer support... abinit<br />checking for the requested linear algebra support... netlib<br />checking whether to select a fallback for linear algebra... no<br />checking for BLAS support in specified libraries... yes<br />checking for LAPACK support in specified libraries... yes<br />checking for BLACS support in specified libraries... no<br />checking for ScaLAPACK support in specified libraries... no<br />checking for MAGMA support in specified libraries... checking TEST... no<br />checking whether we have a serial linear algebra support... yes<br />checking whether we have a MPI linear algebra support... no<br />checking whether we have a GPU linear algebra support... no<br />checking for the actual linear algebra support... netlib<br />checking for the requested algorithmic support... none<br />checking for the actual algorithmic support... none<br />checking for the requested math support... none<br />checking for the actual math support... none<br />checking for the requested FFT support... none<br />checking for the actual FFT support... none<br />checking for the requested DFT support... none<br />checking for the actual DFT support... <br />configure: fallbacks to enable =&gt; <br />checking whether to build atompaw... no<br />checking whether to build bigdft... no<br />checking whether to build etsf_io... no<br />checking whether to build fox... no<br />checking whether to build libxc... no<br />checking whether to build linalg... no<br />checking whether to build netcdf... no<br />checking whether to build wannier90... no<br />configure: using tarball repository /home/pakij/.abinit/tarballs<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Experimental developments and option triggers&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br />checking whether to accelerate 'make check'... no<br />checking whether to reduce 'make check' for packaging... no<br />checking whether to activate maintainer checks... no<br />configure: setting triggers associated to command-line options<br />checking whether to activate support for bindings (EXPERIMENTAL)... no<br />checking whether to activate Bethe-Salpeter unpacking (EXPERIMENTAL)... no<br />checking whether to enable the Abinit C library (EXPERIMENTAL)... no<br />checking whether to activate build of exported libraries (EXPERIMENTAL)... no<br />checking whether to activate the use of cut-offs for GW calculations (EXPERIMENTAL)... no<br />checking whether to activate double-precision GW calculations (EXPERIMENTAL)... no<br />checking whether to activate OpenMP-assisted GW calculations (EXPERIMENTAL)... no<br />checking whether to activate optimal GW calculations (EXPERIMENTAL)... no<br />checking whether to activate wrapped GW calculations (EXPERIMENTAL)... no<br />checking whether to enable build of macroave (EXPERIMENTAL)... yes<br />configure: triggering the 'DO_BUILD_01_MACROAVNEW_EXT' conditional<br />configure: triggering the 'DO_BUILD_MACROAVE' conditional<br />configure: defining the 'USE_MACROAVE' preprocessing macro<br />checking whether to activate support for Symmetric Multi-Processing (EXPERIMENTAL)... no<br />checking whether to tell Abinit to read file lists from standard input... yes<br />checking whether to activate workaround for bugged ZDOTC and ZDOTU... no<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Subsystems&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />configure: the Abinit Documentation will never be built<br />configure: the Abinit FALLBACKS may be built when necessary<br />configure: the Abinit GUI will never be built<br />configure: the Abinit Documentation may be built upon request<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Output&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;===<br />&nbsp;==============================================================================<br /><br />configure: creating ./config.status<br />config.status: creating doc/Makefile<br />config.status: creating config.dump<br />config.status: creating config.pc<br />config.status: creating config.sh<br />config.status: creating config/wrappers/wrap-fc<br />config.status: creating fallbacks/config.mk<br />config.status: creating src/incs/Makefile<br />config.status: creating src/mods/Makefile<br />config.status: creating src/16_hideleave/m_build_info.F90<br />config.status: creating tests/config.sh<br />config.status: creating tests/tests.env<br />config.status: creating tests/tests-install.env<br />config.status: creating Makefile<br />config.status: creating src/Makefile<br />config.status: creating src/01_gsl_ext/Makefile<br />config.status: creating src/01_interfaces_ext/Makefile<br />config.status: creating src/01_linalg_ext/Makefile<br />config.status: creating src/01_macroavnew_ext/Makefile<br />config.status: creating src/02_clib/Makefile<br />config.status: creating src/10_defs/Makefile<br />config.status: creating src/11_qespresso_ext/Makefile<br />config.status: creating src/12_hide_mpi/Makefile<br />config.status: creating src/13_memory_mpi/Makefile<br />config.status: creating src/14_hidewrite/Makefile<br />config.status: creating src/15_gpu_toolbox/Makefile<br />config.status: creating src/16_hideleave/Makefile<br />config.status: creating src/18_timing/Makefile<br />config.status: creating src/27_toolbox_oop/Makefile<br />config.status: creating src/28_numeric_noabirule/Makefile<br />config.status: creating src/32_contract/Makefile<br />config.status: creating src/32_util/Makefile<br />config.status: creating src/42_geometry/Makefile<br />config.status: creating src/42_nlstrain/Makefile<br />config.status: creating src/42_parser/Makefile<br />config.status: creating src/43_ptgroups/Makefile<br />config.status: creating src/43_wvl_wrappers/Makefile<br />config.status: creating src/44_abitypes_defs/Makefile<br />config.status: creating src/45_geomoptim/Makefile<br />config.status: creating src/45_psp_parser/Makefile<br />config.status: creating src/47_xml/Makefile<br />config.status: creating src/49_gw_toolbox_oop/Makefile<br />config.status: creating src/51_manage_mpi/Makefile<br />config.status: creating src/52_fft_mpi_noabirule/Makefile<br />config.status: creating src/52_manage_cuda/Makefile<br />config.status: creating src/53_abiutil/Makefile<br />config.status: creating src/53_ffts/Makefile<br />config.status: creating src/53_spacepar/Makefile<br />config.status: creating src/56_mixing/Makefile<br />config.status: creating src/56_recipspace/Makefile<br />config.status: creating src/56_xc/Makefile<br />config.status: creating src/57_iovars/Makefile<br />config.status: creating src/59_io_mpi/Makefile<br />config.status: creating src/61_ionetcdf/Makefile<br />config.status: creating src/62_cg_noabirule/Makefile<br />config.status: creating src/62_iowfdenpot/Makefile<br />config.status: creating src/62_occeig/Makefile<br />config.status: creating src/62_poisson/Makefile<br />config.status: creating src/62_wvl_wfs/Makefile<br />config.status: creating src/63_bader/Makefile<br />config.status: creating src/64_atompaw/Makefile<br />config.status: creating src/65_nonlocal/Makefile<br />config.status: creating src/65_psp/Makefile<br />config.status: creating src/66_paw/Makefile<br />config.status: creating src/66_wfs/Makefile<br />config.status: creating src/67_common/Makefile<br />config.status: creating src/68_dmft/Makefile<br />config.status: creating src/68_recursion/Makefile<br />config.status: creating src/68_rsprc/Makefile<br />config.status: creating src/69_wfdesc/Makefile<br />config.status: creating src/70_gw/Makefile<br />config.status: creating src/71_bse/Makefile<br />config.status: creating src/72_response/Makefile<br />config.status: creating src/77_ddb/Makefile<br />config.status: creating src/77_lwf/Makefile<br />config.status: creating src/77_suscep/Makefile<br />config.status: creating src/79_seqpar_mpi/Makefile<br />config.status: creating src/83_cut3d/Makefile<br />config.status: creating src/93_rdm/Makefile<br />config.status: creating src/95_drive/Makefile<br />config.status: creating src/98_main/Makefile<br />config.status: creating src/libs/Makefile<br />config.status: creating tests/Nightly/Makefile<br />config.status: creating bindings/Makefile<br />config.status: creating bindings/parser/Makefile<br />config.status: creating config.h<br />config.status: executing depfiles commands<br />config.status: executing dump-optim commands<br />config.status: executing script-perms commands<br />config.status: executing long-lines commands<br />=== configuring in fallbacks (/home/pakij/abinit-6.12.3/fallbacks)<br />configure: running /bin/sh ./configure --disable-option-checking '--prefix=/usr/local'&nbsp; '--enable-mpi=yes' '--enable-mpi-io=yes' '--with-mpi-prefix=/usr/lib64/openmpi/' '--with-dft-flavor=none' '--with-trio-flavor=none' '--with-linalg-libs=-L/usr/lib64 -lblas -llapack' '--enable-gui-build=yes' '--enable-atompaw=no' '--enable-bigdft=no' '--enable-etsf-io=no' '--enable-fox=no' '--enable-libxc=no' '--enable-linalg=no' '--enable-netcdf=no' '--enable-wannier90=no' '--with-fc-vendor=gnu' '--with-fc-version=4.4' '--with-tardir=/home/pakij/.abinit/tarballs' --cache-file=/dev/null --srcdir=.<br />checking build system type... x86_64-unknown-linux-gnu<br />checking host system type... x86_64-unknown-linux-gnu<br />checking target system type... x86_64-unknown-linux-gnu<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking whether make sets $(MAKE)... (cached) yes<br />checking whether ln -s works... yes<br />checking for a sed that does not truncate output... /bin/sed<br />checking for gawk... (cached) gawk<br />checking for grep that handles long lines and -e... /bin/grep<br />checking for egrep... /bin/grep -E<br />configure: setting Fortran compiler vendor to gnu<br />configure: setting Fortran compiler version to 4.4<br />configure: setting tarball repository to /home/pakij/.abinit/tarballs<br />configure: checking consistency of fallback options<br />checking for wget... wget<br />checking for curl... curl<br />configure: using tarball repository /home/pakij/.abinit/tarballs<br />checking for patch... patch<br />checking for gcc... gcc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether gcc accepts -g... yes<br />checking for gcc option to accept ISO C89... none needed<br />checking for style of include used by make... GNU<br />checking dependency style of gcc... none<br />checking for gfortran... gfortran<br />checking whether we are using the GNU Fortran compiler... yes<br />checking whether gfortran accepts -g... yes<br />checking whether to enable the LINALG fallback... no<br />checking whether to enable the FOX fallback... no<br />checking whether to enable the NETCDF fallback... no<br />checking whether to enable the ETSF_IO fallback... no<br />checking whether to enable the LIBXC fallback... no<br />checking whether to enable the ATOMPAW fallback... no<br />checking whether to enable the BIGDFT fallback... no<br />checking whether to enable the WANNIER90 fallback... no<br />configure: creating ./config.status<br />config.status: creating Makefile<br />config.status: executing depfiles commands<br />=== configuring in tests (/home/pakij/abinit-6.12.3/tests)<br />configure: running /bin/sh ./configure --disable-option-checking '--prefix=/usr/local'&nbsp; '--enable-mpi=yes' '--enable-mpi-io=yes' '--with-mpi-prefix=/usr/lib64/openmpi/' '--with-dft-flavor=none' '--with-trio-flavor=none' '--with-linalg-libs=-L/usr/lib64 -lblas -llapack' '--enable-gui-build=yes' '--enable-atompaw=no' '--enable-bigdft=no' '--enable-etsf-io=no' '--enable-fox=no' '--enable-libxc=no' '--enable-linalg=no' '--enable-netcdf=no' '--enable-wannier90=no' '--with-fc-vendor=gnu' '--with-fc-version=4.4' '--with-tardir=/home/pakij/.abinit/tarballs' --cache-file=/dev/null --srcdir=.<br />checking build system type... x86_64-unknown-linux-gnu<br />checking host system type... x86_64-unknown-linux-gnu<br />checking target system type... x86_64-unknown-linux-gnu<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking whether make sets $(MAKE)... (cached) yes<br />checking whether ln -s works... yes<br />checking for a sed that does not truncate output... /bin/sed<br />checking for gawk... (cached) gawk<br />checking for grep that handles long lines and -e... /bin/grep<br />checking for egrep... /bin/grep -E<br />checking for perl... perl<br />checking for python... python<br />checking for gcc... gcc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether gcc accepts -g... yes<br />checking for gcc option to accept ISO C89... none needed<br />checking for style of include used by make... GNU<br />checking dependency style of gcc... none<br />checking timeout for automatic tests... none<br />checking whether to build test timeout code... no<br />configure: creating ./config.status<br />config.status: creating Makefile<br />config.status: executing depfiles commands<br /><br />&nbsp;==============================================================================<br />&nbsp;=== Final remarks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ===<br />&nbsp;==============================================================================<br /><br /><br />Summary of important options:<br /><br />&nbsp; * C compiler&nbsp; &nbsp; &nbsp; : gnu version 4.4<br />&nbsp; * Fortran compiler: gnu version 4.4<br />&nbsp; * architecture&nbsp; &nbsp; : intel xeon (64 bits)<br /><br />&nbsp; * debugging&nbsp; &nbsp; &nbsp; &nbsp;: basic<br />&nbsp; * optimizations&nbsp; &nbsp;: standard<br /><br />&nbsp; * MPI&nbsp; &nbsp; enabled&nbsp; : yes<br />&nbsp; * MPI-IO enabled&nbsp; : yes<br />&nbsp; * GPU&nbsp; &nbsp; enabled&nbsp; : no (none)<br /><br />&nbsp; * TRIO&nbsp; &nbsp;flavor = none<br />&nbsp; * TIMER&nbsp; flavor = abinit (libs: ignored)<br />&nbsp; * LINALG flavor = netlib (libs: user-defined)<br />&nbsp; * ALGO&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * FFT&nbsp; &nbsp; flavor = none (libs: ignored)<br />&nbsp; * MATH&nbsp; &nbsp;flavor = none (libs: ignored)<br />&nbsp; * DFT&nbsp; &nbsp; flavor = <br /><br />Configuration complete.<br />You may now type &quot;make&quot; to build ABINIT.<br />(or, on a SMP machine, &quot;make mj4&quot;, or &quot;make multi multi_nprocs=&lt;n&gt;&quot;)<br /><br /></code></pre></div><br /><br />I then ran make:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make mj4 &gt;&amp; makelog.log </code></pre></div><br />No errors occurred, and there are no warnings in makelog.log.<br /><br />However, when I attempt to run the basic tests, I get:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make tests<br />make testin_1 testin_2 testin_3 testin_bigdft testin_etsf_io testin_libxc testin_wannier90<br />make&#91;1&#93;: Entering directory `/home/pakij/abinit-6.12.3/tests'<br />echo &quot;Running built-in test in_1&quot;<br />Running built-in test in_1<br />timeout=&quot;0&quot; perl ./Scripts/run-basic-tests.pl built-in in_1 /home/pakij/abinit-6.12.3/tests<br />--------------------------------------------------------------------------<br />MPI_ABORT was invoked on rank 0 in communicator MPI_COMM_WORLD <br />with errorcode 14.<br /><br />NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.<br />You may or may not see output from other processes, depending on<br />exactly when Open MPI kills them.<br />--------------------------------------------------------------------------<br />...same thing for every other test<br /></code></pre></div><br /><br />Also, when I try to run the first tutorial:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>mpirun -np 4 abinit &lt; t1x.files &gt;&amp; log</code></pre></div><br />No wavefunction files are generated and the contents of log are:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--------------------------------------------------------------------------<br />MPI_ABORT was invoked on rank 0 in communicator MPI_COMM_WORLD<br />with errorcode 14.<br /><br />NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.<br />You may or may not see output from other processes, depending on<br />exactly when Open MPI kills them.<br />--------------------------------------------------------------------------<br />&nbsp;Your architecture is not able to handle 16, 8, 4 or 2-bytes FORTRAN file record markers!<br />&nbsp;You cannot use ABINIT and MPI/IO.<br />&nbsp; MPI_ERROR_STRING: MPI_ERR_UNKNOWN: unknown error<br />--------------------------------------------------------------------------<br />mpirun has exited due to process rank 0 with PID 32236 on<br />node compphys.phys.rpi.edu exiting improperly. There are two reasons this could occur:<br /><br />1. this process did not call &quot;init&quot; before exiting, but others in<br />the job did. This can cause a job to hang indefinitely while it waits<br />for all processes to call &quot;init&quot;. By rule, if one process calls &quot;init&quot;,<br />then ALL processes must call &quot;init&quot; prior to termination.<br /><br />2. this process called &quot;init&quot;, but exited without calling &quot;finalize&quot;.<br />By rule, all processes that call &quot;init&quot; MUST call &quot;finalize&quot; prior to<br />exiting or it will be considered an &quot;abnormal termination&quot;<br /><br />This may have caused other processes in the application to be<br />terminated by signals sent by mpirun (as reported here).<br />--------------------------------------------------------------------------<br /></code></pre></div><br /><br />I have checked that the MPI compilers and mpirun are in /usr/lib64/openmpi/bin, and my normal compilers are gfortran 4.4.6, gcc 4.4.6, and g++ 4.4.6.<br /><br />So for some reason Abinit and OpenMPI are not playing nicely. Do you have any suggestions on how to proceed?  Please let me know if there is any other information that would be useful for diagnosing the problem.  Thanks for your time!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Abinit 6.12.3 on CentOS 6.3 with OpenMPI</h3>
				<div class="date">Posted: <strong>Tue Sep 18, 2012 4:01 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">Please have a look at the following and adapt it to your case:<br /><ul>  <li><a href="viewtopic3267.html?f=3&amp;t=1387" class="postlink">http://forum.abinit.org/viewtopic.php?f=3&amp;t=1387</a></li>  <li><a href="http://unix.stackexchange.com/questions/23502/how-to-run-abinit-via-mpi" class="postlink">http://unix.stackexchange.com/questions/23502/how-to-run-abinit-via-mpi</a></li></ul></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1837&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:55:11 GMT -->
</html>
