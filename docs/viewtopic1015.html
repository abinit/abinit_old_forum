<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1970&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:42:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Installation trouble</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Installation trouble</h2>
		<p><a href="viewtopic3276.html?f=3&amp;t=1970">https://forum.abinit.org/viewtopic.php?f=3&amp;t=1970</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Installation trouble</h3>
				<div class="date">Posted: <strong>Tue Jan 29, 2013 11:28 am</strong></div>
				<div class="author">by <strong>FBouyer</strong></div>
				<div class="content">Hello Everybody,<br /><br />Sorry to bother you one more time about compilation. I face the quite same problem with another person, but the responses did not help me.<br /><br />Here is the configure I use :<br />./configure --prefix=/home/bouyer/workdir/abinit --enable-mpi --enable-gui --enable-openmpi --enable-scalapack --with-scalapack-libs=&quot;-lscalapack -lblacs&quot; --program-suffix=&quot;-64&quot; FC=mpif90 --with-mpi-library=/usr/lib64/openmpi/1.4-gcc/lib --with-mpi-include=/usr/lib64/openmpi/1.4-gcc/include<br /><br />The LD_LIBRARY_PATH points to /usr/lib64/openmpi/1.4-gcc/lib<br /><br />With FC=gfortran or mpif90, the compilation does not start. The PATH contains the path that points to the /usr/lib64/openmpi/1.4-gcc/bin .<br /><br />the output is :<br />===========================<br />...<br />checking for a BSD-compatible install... /usr/bin/install -c<br />checking whether build environment is sane... yes<br />checking for a thread-safe mkdir -p... /bin/mkdir -p<br />checking for gawk... gawk<br />checking whether make sets $(MAKE)... yes<br />checking build system type... x86_64-unknown-linux-gnu<br />checking host system type... x86_64-unknown-linux-gnu<br />checking for style of include used by make... GNU<br />checking for gcc... gcc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether gcc accepts -g... yes<br />checking for gcc option to accept ISO C89... none needed<br />checking dependency style of gcc... gcc3<br />checking for a sed that does not truncate output... /bin/sed<br />checking for grep that handles long lines and -e... /bin/grep<br />checking for egrep... /bin/grep -E<br />checking for fgrep... /bin/grep -F<br />checking for ld used by gcc... /usr/bin/ld<br />checking if the linker (/usr/bin/ld) is GNU ld... yes<br />checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B<br />checking the name lister (/usr/bin/nm -B) interface... BSD nm<br />checking whether ln -s works... yes<br />checking the maximum length of command line arguments... 98304<br />checking whether the shell understands some XSI constructs... yes<br />checking whether the shell understands &quot;+=&quot;... yes<br />checking for /usr/bin/ld option to reload object files... -r<br />checking for objdump... objdump<br />checking how to recognize dependent libraries... pass_all<br />checking for ar... ar<br />checking for strip... strip<br />checking for ranlib... ranlib<br />checking command to parse /usr/bin/nm -B output from gcc object... ok<br />checking how to run the C preprocessor... gcc -E<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking for dlfcn.h... yes<br />checking for objdir... .libs<br />checking if gcc supports -fno-rtti -fno-exceptions... no<br />checking for gcc option to produce PIC... -fPIC -DPIC<br />checking if gcc PIC flag -fPIC -DPIC works... yes<br />checking if gcc static flag -static works... yes<br />checking if gcc supports -c -o file.o... yes<br />checking if gcc supports -c -o file.o... (cached) yes<br />checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes<br />checking dynamic linker characteristics... GNU/Linux ld.so<br />checking how to hardcode library paths into programs... immediate<br />checking whether stripping libraries is possible... yes<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... no<br />checking whether to build static libraries... yes<br />checking for gcc... (cached) gcc<br />checking whether we are using the GNU C compiler... (cached) yes<br />checking whether gcc accepts -g... (cached) yes<br />checking for gcc option to accept ISO C89... (cached) none needed<br />checking dependency style of gcc... (cached) gcc3<br />checking whether gcc and cc understand -c and -o together... yes<br />checking for inline... inline<br />checking for ANSI C header files... (cached) yes<br />checking for working alloca.h... yes<br />checking for alloca... yes<br />checking size of void*... 8<br />checking for sqrtf in -lm... yes<br />checking for cbrt in -lm... yes<br />checking for cbrtf in -lm... yes<br />checking whether we are using the GNU Fortran compiler... no<br />checking whether mpif90 accepts -g... yes<br />checking whether we are using the GNU Fortran compiler... (cached) no<br />checking whether mpif90 accepts -g... (cached) yes<br />checking if libtool supports shared libraries... yes<br />checking whether to build shared libraries... no<br />checking whether to build static libraries... yes<br />libtool.m4: error: problem compiling FC test program<br />checking for mpif90 option to produce PIC... <br />checking if mpif90 static flag  works... no<br />checking if mpif90 supports -c -o file.o... no<br />checking if mpif90 supports -c -o file.o... (cached) no<br />checking whether the mpif90 linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes<br />checking dynamic linker characteristics... GNU/Linux ld.so<br />checking how to hardcode library paths into programs... immediate<br />checking for Fortran flag to compile .f90 files... unknown<br />configure: error: Fortran could not compile .f90 files<br />make[3]: *** [stamps/libxc-config-stamp] Erreur 1<br />make[3]: quittant le répertoire « /media/DATA/bouyer/abinit/abinit-7.0.5/fallbacks »<br />make[2]: [all-local] Erreur 2 (ignorée)<br />Checking build of libxc fallback<br />test -e stamps/libxc-install-stamp<br />make[2]: *** [all-local] Erreur 1<br />make[2]: quittant le répertoire « /media/DATA/bouyer/abinit/abinit-7.0.5/fallbacks »<br />make[1]: *** [all-recursive] Erreur 1<br />make[1]: quittant le répertoire « /media/DATA/bouyer/abinit/abinit-7.0.5 »<br />make: *** [all] Erreur 2<br />==========================================================================================<br /><br />The config.log file is attached.<br /><br />Many thanks in advance to have a look, and to tell me haw to overcome this trouble. I face to that trouble on my PC and the cluster we have.<br /><br />Bien cordialement,<br /><br />Frédéric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Installation trouble</h3>
				<div class="date">Posted: <strong>Tue Jan 29, 2013 6:37 pm</strong></div>
				<div class="author">by <strong>jbeuken</strong></div>
				<div class="content">Hi Frédéric,<br /><br />- scalapack is not yet supported<br />- try first with :<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export LD_LIBRARY_PATH=/usr/lib64/openmpi/1.4-gcc/lib:$LD_LIBRARY_PATH<br />export PATH=/usr/lib64/openmpi/1.4-gcc/bin:$PATH<br />./configure --prefix=/home/bouyer/workdir/abinit&nbsp; &nbsp; --enable-mpi&nbsp; &nbsp; --with-mpi-prefix=/usr/lib64/openmpi/1.4-gcc<br />&nbsp;</code></pre></div><br /><br />jmb</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Installation trouble</h3>
				<div class="date">Posted: <strong>Wed Jan 30, 2013 11:20 am</strong></div>
				<div class="author">by <strong>FBouyer</strong></div>
				<div class="content">Hello,<br /><br />Same problem. The compilation stops at the same point.<br /><br />Cordialement</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Installation trouble</h3>
				<div class="date">Posted: <strong>Wed Jan 30, 2013 11:49 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Bonjour Frédéric,<br /><br />la suite en anglais, cela semble être la tradition ici.<br /><br />Your system has a (very) deprecated gcc/gfortran toolchain (version 4.1.2) that doesn't recognize options I have included to compile fortran code (i.e. -march=native). There are workarounds for the libxc failure but you will face other troubles later on. I suggest to compile a new gcc/gfortran 4.6 or 4.7 toolchain (or install Intel compilers) and the corresponding openmpi.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Installation trouble</h3>
				<div class="date">Posted: <strong>Tue Feb 05, 2013 9:27 am</strong></div>
				<div class="author">by <strong>FBouyer</strong></div>
				<div class="content">Bonjour,<br /><br />I have installed all Intel compilers and MKL libraries. The compilation ran fine. Thanks a lot for your help. I have checked abinit on the first small example as I follow the user guide. I did not check abinit with mpi.<br /><br />I am using the Opium pseudos generator. Is it the best choice, or do you recommend me another generator ?<br /><br />best regards, and good luck to continue developing abinit<br /><br />Frédéric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Installation trouble</h3>
				<div class="date">Posted: <strong>Tue Feb 05, 2013 11:45 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Bonjour Frédéric,<br /><br />Glad it worked.<br />I have not enough experience with Opium to do a real features comparison and certainly don't imply that Opium is a bad application. Abinit &quot;friend&quot; generators are the Atomic Pseudopotentials Engine aka APE - <a href="http://www.tddft.org/programs/APE/" class="postlink">http://www.tddft.org/programs/APE/</a> and atompaw for projector augmented wave kind of pseudo - <a href="http://users.wfu.edu/natalie/papers/pwpaw/man.html" class="postlink">http://users.wfu.edu/natalie/papers/pwpaw/man.html</a> (the latter even provided as an optional package in Abinit distribution).<br />And the venerable fhi98pp generator is another classic reference app - <a href="http://th.fhi-berlin.mpg.de/th/fhi98md/fhi98PP/" class="postlink">http://th.fhi-berlin.mpg.de/th/fhi98md/fhi98PP/</a>.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=1970&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:42:14 GMT -->
</html>
