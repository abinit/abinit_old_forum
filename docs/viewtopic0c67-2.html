<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1578&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:15:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; [SOLVED] nlo calculation stops with segmentation fault</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>[SOLVED] nlo calculation stops with segmentation fault</h2>
		<p><a href="viewtopic6a10.html?f=10&amp;t=1578">https://forum.abinit.org/viewtopic.php?f=10&amp;t=1578</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>[SOLVED] nlo calculation stops with segmentation fault</h3>
				<div class="date">Posted: <strong>Thu Mar 22, 2012 12:02 pm</strong></div>
				<div class="author">by <strong>ilukacevic</strong></div>
				<div class="content">Dear all,<br /><br />I'm trying to calculate the Raman spectrum of SiO2 at several pressures. At one pressure everything went fine, but when I changed the cell parameters to target the different pressure, the nlo calculation stops with the following errors in the log file just as it starts the 5th dataset (input file is bellow):<br /><br /><br /> ioarr: data read from disk file t11o_DS4_DEN22<br /><br /> mv_3dte : finite difference expression of the k-point derivative<br />           is performed using the PEAD formulation of the third-order energy<br />           (see Nunes and Gonze PRB 63, 155107 (2001) Eq. 102)<br /><br />forrtl: severe (174): SIGSEGV, segmentation fault occurred<br />forrtl: severe (174): SIGSEGV, segmentation fault occurred<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002B90AB5EE9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002B90AB4B289E  Unknown               Unknown  Unknown<br />forrtl: severe (28): CLOSE error, unit 7, file &quot;Unknown&quot;<br />Image              PC                Routine            Line        Source<br />libirc.so          00002B90AE144B2D  Unknown               Unknown  Unknown<br />libirc.so          00002B90AE143635  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B90ADA41535  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B90AD9B3A2D  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B90AD9B9C3D  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B90AD9B39BA  Unknown               Unknown  Unknown<br />libifcore.so.5     00002B90AD9C2FD1  Unknown               Unknown  Unknown<br />libpthread.so.0    00002B90AB5EEB10  Unknown               Unknown  Unknown<br />libpthread.so.0    00002B90AB5EE9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002B90AB4B289E  Unknown               Unknown  Unknown<br />MPI process terminated unexpectedly<br />Exit code -5 signaled from node001.srce.cro-ngi.hr<br />Killing remote processes...forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002ACFE220A9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002ACFE20CE89E  Unknown               Unknown  Unknown<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002B003A7899DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002B003A64D89E  Unknown               Unknown  Unknown<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002AB788FC49DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002AB788E8889E  Unknown               Unknown  Unknown<br />forrtl: severe (174): SIGSEGV, segmentation fault occurred<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002AABDC77C9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002AABDC64089E  Unknown               Unknown  Unknown<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002B024C2DF9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002B024C1A389E  Unknown               Unknown  Unknown<br />forrtl: error (69): process interrupted (SIGINT)<br />Image              PC                Routine            Line        Source<br />libpthread.so.0    00002B7A2684C9DD  Unknown               Unknown  Unknown<br />libiomp5.so        00002B7A2671089E  Unknown               Unknown  Unknown<br />DONE<br /><br /><br />How can this be? Has anyone ever encountered smth like this in nlo?<br /><br />I'm using abinit 6.10.2 on a linux cluster with  Intel Fortran/C 11.1,  MKL 10.2p and mvapich 1.1.0-0.20091222.1.el5 compilers.<br /><br />Yours,<br /><br />Igor Lukacevic<br /><br /><br />INPUT FILE<br /><br /># Linear and nonlinear response calculation for SiO2 - CaCl2<br /># Perturbations: electric fields &amp; atomic displacements<br /><br />#Definition of lattice parameters p = 50 GPa<br />#*******************************************<br />   acell       7.5573554382E+00  7.3978865685E+00  4.8581739040E+00<br />   angdeg      90  90  90<br />   spgroup     58<br />   brvltt     -1<br /><br />#Definition of atomic positions and types<br />#****************************************<br />   natom       6<br />   natrd       3<br />   ntypat      3<br />   typat       1  2  2<br />   znucl       14 8  8<br />   xred        0.00              0.00              0.00<br />               3.1370358896E-01  2.9039323040E-01  0.00<br />              -3.1370358896E-01 -2.9039323040E-01  0.00<br />   ixc         3<br /><br />#Parameters of the SCF cycles<br />#****************************<br />   iscf        7<br />npulayit       7<br />   nnsclo      2<br />   nline       6<br />   nstep       100<br /><br />#Plane wave basis and k-point grid<br />#*********************************<br />   ecut        50<br />   ecutsm      0.5<br />   dilatmx     1.2<br />   ngkpt       4 4 8<br />   nshiftk     1<br />   shiftk      0.5  0.5  0.5<br /><br />#Perturbation datasets<br />#*********************<br />   ndtset      5<br />   jdtset      1 2 3 4 5<br /><br />#DATASET1 : scf calculation: GS WF in the BZ<br />#*******************************************<br />   prtden1    1<br />   kptopt1    1<br />   tolvrs1    1.0d-18<br /><br />#DATASET2 : non-scf calculation: GS WF in the whole BZ<br />#*****************************************************<br />   getden2    1<br />   kptopt2    2<br />     iscf2   -2<br />   getwfk2    1<br />   tolwfr2    1.0d-22<br />    nband2    16<br /><br />#DATASET3 : d/dk on the MP grid of k-points<br />#******************************************<br />   getwfk3    2<br />    rfdir3    1 1 1<br />   rfelfd3    2<br />   tolwfr3    1.0d-22<br />    nband3    16<br />   kptopt3    2<br /><br />#DATASET4 : d/dE on the MP grid of k-points<br />#******************************************<br />   prtden4    1<br />   getwfk4    2<br />   getddk4    3<br />    rfdir4    1 1 1<br />   rfphon4    1<br />  rfatpol4    1 6<br />   tolvrs4    1.0d-12<br />   rfelfd4    3<br />    nband4    16<br />   kptopt4    2<br />  prepanl4    1<br /><br />#DATASET5 : 3DTE calculation<br />#***************************<br />   getden5    1<br />  get1den5    4<br />   getwfk5    2<br />   get1wf5    4<br />    nband5    16<br />   kptopt5    2<br />optdriver5    5<br />  rf1elfd5    1<br />  rf1phon5    1<br /> rf1atpol5    1 6<br />   rf1dir5    1 1 1<br />  rf2elfd5    1<br />   rf2dir5    1 1 1<br />  rf3elfd5    1<br />   rf3dir5    1 1 1<br />   tolvrs5    1.0d-12<br /><br />nbdbuf 0<br />timopt  2</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: nlo calculation stops with segmentation fault</h3>
				<div class="date">Posted: <strong>Thu Mar 22, 2012 9:31 pm</strong></div>
				<div class="author">by <strong>roginovicci</strong></div>
				<div class="content">Do you use strtarget in pressure calculations?</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: nlo calculation stops with segmentation fault</h3>
				<div class="date">Posted: <strong>Tue Mar 27, 2012 1:03 pm</strong></div>
				<div class="author">by <strong>ilukacevic</strong></div>
				<div class="content">Yes, I do. Not in nlo, but in preparational relaxation calc.<br /><br />Igor</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: nlo calculation stops with segmentation fault</h3>
				<div class="date">Posted: <strong>Mon Apr 02, 2012 10:25 pm</strong></div>
				<div class="author">by <strong>mverstra</strong></div>
				<div class="content">Hi again Igor,<br /><br />a bug has been fixed for v6.13.3 in this part, which _could_ explain your errors. Change line 326 to the following:<br /><br />             tag = jkpt_rbz<br />&gt;          count1 = npwarr(jkpt_rbz)*mband*nspinor<br />             ABI_ALLOCATE(buffer,(2,3*count1))<br /><br />tell us what happens<br /><br /><br />ciao<br /><br />Matthieu</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: nlo calculation stops with segmentation fault</h3>
				<div class="date">Posted: <strong>Thu May 03, 2012 9:48 am</strong></div>
				<div class="author">by <strong>ilukacevic</strong></div>
				<div class="content">We are most probably going to switch to 6.13 version, since I'm not allowed to edit the code to be compiled on the grid, and my desktop computer is too slow to run such a calculation.<br /><br />Thanks for the solution.<br /><br />Igor L.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1578&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:15:48 GMT -->
</html>
