<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2972&hilit=supercell&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:51:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; paral_kgb error?</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>paral_kgb error?</h2>
		<p><a href="viewtopicd2fd.html?f=9&amp;t=2972">https://forum.abinit.org/viewtopic.php?f=9&amp;t=2972</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>paral_kgb error?</h3>
				<div class="date">Posted: <strong>Fri Apr 24, 2015 8:00 am</strong></div>
				<div class="author">by <strong>charlesp</strong></div>
				<div class="content">Hi,<br /><br />I have been running calculations on two different titanate perovskites, with <span class="posthilit">supercell</span> containing between 80 and 135 atoms.<br />I have a problem with parallelization. Although when I use paral_kgb 0, everything is running fine, each time I used paral_kgb 1, I get the same error after a while :<br />--- !ERROR<br />message: |<br />    abi_xpotrf, info=9 (or 3 sometimes)<br />src_file: abi_xorthonormalize.f90<br />src_line: 106<br />...<br /><br />Would anyone know if it is a bug in ABINIT, or if it is a compilation problem, and how to solve it?<br /><br />Thanks a lot!</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Tue May 05, 2015 6:16 pm</strong></div>
				<div class="author">by <strong>jzwanzig</strong></div>
				<div class="content">Hi, we would need to know all about your computer system, build, and input file to make progress on this question.<br /><br />Joe</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Wed May 06, 2015 9:07 am</strong></div>
				<div class="author">by <strong>charlesp</strong></div>
				<div class="content">Hi,<br /><br />I am computing on a supercomputer made of Intel 12-Cores (E5-2690 @ 2.6Ghz) nodes, each node having 64 Go of memory.<br />Regarding compilation, I did not compile it myself, but as far as I know, ABINIT was compiled using the intel compiler (version 15), linked with the intel mkl libraries, and as for parallelization, with bullxmpi.<br /><br />As for the input file, here is an example:<br /><br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code><br />paral_kgb 1<br />npkpt 2<br />npband 10<br />npfft 6<br /><br />chkprim 0<br />nline 8<br /><br />#Cut-Offs<br />ecut 20.0<br />pawecutdg 30.0<br /><br />#points k<br />kptopt 1<br />ngkpt 2 2 2<br />occopt 3<br />tsmear 0.001<br />nband 800<br /><br />#cycle SCF<br />toldff 2.0d-5<br />nstep 100<br /><br />#optimisation<br />ionmov 3<br />tolmxf 4.0d-04<br />ntime 200<br /><br />prtden 0<br />ixc 7<br /><br /><br />#geometrie<br />acell 7.36068155523333E+00 7.36068155523333E+00 7.36068155523333E+00<br />scalecart 3.0 3.0 3.0<br /><br />natom 134<br />ntypat 3<br />znucl 82 22 8<br />typat 27*1 27*2 80*3<br /><br />charge +2<br /><br />nsppol 2<br />nspden 2<br />spinat 402*0<br />xred<br /># Pb atoms<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br /># Ti atoms<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br /># O1 atoms<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />#0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br /># O2 atoms<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.000000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.333333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br />0.666666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333<br /># O3 atoms<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.000000000000<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.333333333333<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.166666666667&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.500000000000&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br />0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.833333333333&nbsp; &nbsp; &nbsp; &nbsp;0.666666666667<br /></code></pre></div><br /><br />Thanks a lot!<br />Charles.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Wed May 06, 2015 2:16 pm</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">Hi,<br /><br />Intel 15 is not officially supported yet.<br /><br />As far as I can tell, the KGB parallelization often has troubles with orthogonalization even though it is efficient.<br />I would suggest to compile abinit with the --enable-zdot-bugfix if used with MKL<br /><br />It works without paral_kbg because the algorithm and part of executed code are different. <br /><br />Hope that helps<br /><br />Jordan</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Thu May 07, 2015 2:32 pm</strong></div>
				<div class="author">by <strong>charlesp</strong></div>
				<div class="content">Hi,<br /><br />This error actually also happens with the ABINIT version computed on my laptop, with the GNU compilers, openmpi, fftw3 and the ATLAS-BLAS and LAPACK. I build this version of ABINIT according the tutorial at <a href="http://www.youtube.com/watch?v=DppLQ-KQA68" class="postlink">http://www.youtube.com/watch?v=DppLQ-KQA68</a>.<br /><br />So I still get this error when using paral_kgb 1, even when I only use 1 processor for parallelisation on bands and fft, and for instance 5 for npkpt.<br /> <br />Any idea?<br /><br />Charles.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Thu May 07, 2015 5:05 pm</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">I'm running some test.<br /><br />Can you tell where the code crashes ?<br />Which broyden iteration ?<br />Which SCF iteration ?<br />Or does it crash at the very beginning ?<br /><br />Jordan<br /><br />EDIT : I have been running your input file with JTH pseudo on 8 cpus (nkpt 2 npband 1 bandpp 2 npfft 4) and it is still running (18th scf of the 1st broyden)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Sat May 09, 2015 8:38 pm</strong></div>
				<div class="author">by <strong>charlesp</strong></div>
				<div class="content">It actually depends on the system. For most of them, the code makes a few broyden iterations before crashing. <br />Here is a simpler input file where, on the contrary, the system does not make any broyden step and stops after 25 minutes at SCF step #9.<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>getxred -1<br />getcell -1<br /><br /># Allocated Ressources<br /># -------------------------------------------------------------------------------------------------<br />paral_kgb 1<br />npkpt 27<br />npband 4<br />npspinor 1<br />npfft 1<br /># -------------------------------------------------------------------------------------------------<br /><br />ndtset 5<br /><br /># Convergence Parameters<br /># -------------------------------------------------------------------------------------------------<br /># Plane-waves cut-offs :<br />ecut 30.0<br />pawecutdg: 30.0<br />pawecutdg+ 5.0<br />nline 10<br />nband 140<br />npulayit 14<br /><br /># k-pt mesh<br />kptopt 1<br />ngkpt 6 6 6<br />occopt 3<br />tsmear 0.0001<br /><br /># Convergence criteria<br />#Cycle SCF<br />toldff 1.0d-6<br />nstep 200<br /># Geometry Optimization<br />ionmov 3<br />optcell 2<br />ecutsm 0.5<br />tolmxf 5.0d-5<br />ntime 200<br />dilatmx 1.15<br /><br />prtden 0<br />prtwf 0<br /># Physics Parameters<br /># -------------------------------------------------------------------------------------------------<br /># DFT + U<br />usepawu 1<br />lpawu -1 2 -1<br />upawu 0.000000000 0.110247972 0.000000000 # 4eV for Gd f band, 3eV for Ti d band, see Appl. Phys. Lett., 105, 172402 (2014)<br />jpawu 0.000000000 0.000000000 0.000000000<br /><br /># Cell geometry <br /># -------------------------------------------------------------------------------------------------<br /># Atoms<br />natom 20<br />ntypat 3<br />znucl 64 22 8<br />typat 4*1 4*2 12*3<br /><br /># Space Group #62<br />spgroup 62<br />spgaxor 1 # --&gt; Configuration of the axes of Pnma type<br />spgorig 1<br />brvltt 1<br /><br /># Magnetism<br />nsppol 2<br />nspden 2<br />#spinat 7.0 2*0 7.0 2*0 7.0 2*0 7.0 2*0 -1.0 2*0 -1.0 2*0 -1.0 2*0 -1.0 2*0 36*0 # Gd 7mu_b; Ti 1 mu_b --&gt; AFM coupled<br />spinat 2*0 0.0 2*0 0.0 2*0 0.0 2*0 0.0 2*0 1.0 2*0 1.0 2*0 1.0 2*0 1.0 36*0<br /><br /># The pc axes are along &#91;110&#93;,&#91;-110&#93; and &#91;001&#93; of the orthorombic axes<br />acell 1.0927882596E+01&nbsp; 1.4614453832E+01&nbsp; 1.0220501783E+01<br />angdeg 90.0 90.0 90.0<br />xred<br /># Gd atoms (0.0,0.0,0.0) in the pc cell<br />7.3064947075E-02&nbsp; 2.5000000000E-01&nbsp; 9.7718907754E-01<br />9.2693505293E-01&nbsp; 7.5000000000E-01&nbsp; 2.2810922462E-02<br />4.2693505293E-01&nbsp; 7.5000000000E-01&nbsp; 4.7718907754E-01<br />5.7306494707E-01&nbsp; 2.5000000000E-01&nbsp; 5.2281092246E-01<br /># Ti atoms (0.5,0.5,0.5) in the pc cell<br />5.0000000000E-01&nbsp; 0.0000000000E+00&nbsp; 0.0000000000E+00<br />-2.4884908616E-33 -2.7903770249E-33&nbsp; 5.0000000000E-01<br />5.0000000000E-01&nbsp; 5.0000000000E-01&nbsp; 0.0000000000E+00<br />-2.4884908616E-33&nbsp; 5.0000000000E-01&nbsp; 5.0000000000E-01<br /># O1 atoms (0.5,0.0,0.5) in the pc cell<br />1.8987146189E-01&nbsp; 9.4084057328E-01&nbsp; 1.9147676300E-01<br />8.1012853811E-01&nbsp; 5.9159426722E-02&nbsp; 8.0852323700E-01<br />8.1012853811E-01&nbsp; 4.4084057328E-01&nbsp; 8.0852323700E-01<br />1.8987146189E-01&nbsp; 5.5915942672E-01&nbsp; 1.9147676300E-01<br /># O2 atoms (0.0,0.5,0.5) in the pc cell<br />3.1012853811E-01&nbsp; 5.9159426722E-02&nbsp; 6.9147676300E-01<br />6.8987146189E-01&nbsp; 9.4084057328E-01&nbsp; 3.0852323700E-01<br />6.8987146189E-01&nbsp; 5.5915942672E-01&nbsp; 3.0852323700E-01<br />3.1012853811E-01&nbsp; 4.4084057328E-01&nbsp; 6.9147676300E-01<br /># O3 atoms (0.5,0.5,0.0) in the pc cell<br />9.5581685847E-01&nbsp; 2.5000000000E-01&nbsp; 3.7478305796E-01<br />4.5581685847E-01&nbsp; 2.5000000000E-01&nbsp; 1.2521694204E-01<br />5.4418314153E-01&nbsp; 7.5000000000E-01&nbsp; 8.7478305796E-01<br />4.4183141530E-02&nbsp; 7.5000000000E-01&nbsp; 6.2521694204E-01<br /><br /># Exchange-Correlation functionnal<br />ixc 11 # to be used with PAW method<br /></code></pre></div><br /><br />Thanks,<br />Charles.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Sat May 09, 2015 8:42 pm</strong></div>
				<div class="author">by <strong>charlesp</strong></div>
				<div class="content">As for the bigger example that I gave earlier, it crashes after SCF iteration #8, Broyden step #5, after 10h of computing.<br />Charles.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: paral_kgb error?</h3>
				<div class="date">Posted: <strong>Mon May 11, 2015 10:45 am</strong></div>
				<div class="author">by <strong>Jordan</strong></div>
				<div class="content">I have not tried the smaller example but the bigger one given earlier is still running on my computer and is at broyden 8 SCF iteration8.<br />So it is much likely a architecture/compilation issue.<br /><br />In any case, if you can perform a few broyden step, then you can restart your calculation every time it crashed but getting the last coordinates and lattices vector parameters and setting them in your input file.<br />Meanwhile, you can work on improving the compilation of abinit.<br />You should perhaps run the full testfarm on your installation to be sure that at least the tests work. If not, really change the way abinit was compiled.<br /><br />If you have any question or issue regarding the configuration/compilation time, don't hesitate to ask.<br /><br />Cheers,<br /><br />Jordan</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=2972&hilit=supercell&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:51:04 GMT -->
</html>
