<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=858&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:40:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; installing abinit 6.4.3 on rocks clusters 5.3</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>installing abinit 6.4.3 on rocks clusters 5.3</h2>
		<p><a href="viewtopic6daa.html?f=3&amp;t=858">https://forum.abinit.org/viewtopic.php?f=3&amp;t=858</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Mon Jan 24, 2011 7:44 am</strong></div>
				<div class="author">by <strong>asanee</strong></div>
				<div class="content">Dear All, <br /><br />I have a problem when configure the abinit, I tried installing it in a parallel environment using this string<br /><br />./configure --enable-64bit-flags=&quot;yes&quot; --enable-mpi=&quot;yes&quot; --with-mpi-prefix=&quot;/opt/mpich2/gnu/include/&quot;<br /><br />Unforturnately, I am a new for using parallel on abinit. After, it's configure, the process is going well.<br />Then, I just type &quot;make mj4&quot; Its got a message look like this<br /><br />[root@cluster abinit-6.4.3]# make mj4<br />make multi multi_nprocs=4 <br />make[1]: Entering directory `/state/partition1/apps/abinit-6.4.3'<br />cd prereqs &amp;&amp; make -j4 <br />make[2]: Entering directory `/state/partition1/apps/abinit-6.4.3/prereqs'<br />Making all in linalg<br />make[3]: Entering directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg'<br />make -f ../../prereqs/linalg/linalg.mk <br />make[4]: Entering directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg'<br />lapack-abinit_6.0 has been uncompressed.<br />touch configure-stamp<br />lapack-abinit_6.0 has been configured.<br />cd blas &amp;&amp; make FC=&quot;gfortran -m64&quot; FCFLAGS=&quot;-m64 -ffixed-form -m64 -g   -O2 -mtune=native -march=native -mfpmath=sse&quot; AR=&quot;ar&quot; ARFLAGS=&quot;rc&quot; RANLIB=&quot;ranlib&quot;<br />make[5]: Entering directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg/blas'<br />gfortran -m64 -m64 -ffixed-form -m64 -g   -O2 -mtune=native -march=native -mfpmath=sse -c caxpy.f<br />gfortran -m64 -m64 -ffixed-form -m64 -g   -O2 -mtune=native -march=native -mfpmath=sse -c ccopy.f<br />gfortran -m64 -m64 -ffixed-form -m64 -g   -O2 -mtune=native -march=native -mfpmath=sse -c cdotc.f<br />caxpy.f:0: error: bad value (native) for -march= switch<br />caxpy.f:0: error: bad value (native) for -mtune= switch<br />ccopy.f:0: error: bad value (native) for -march= switch<br />ccopy.f:0: error: bad value (native) for -mtune= switch<br />make[5]: *** [caxpy.o] Error 1<br />make[5]: *** Waiting for unfinished jobs....<br />make[5]: *** [ccopy.o] Error 1<br />cdotc.f:0: error: bad value (native) for -march= switch<br />cdotc.f:0: error: bad value (native) for -mtune= switch<br />make[5]: *** [cdotc.o] Error 1<br />make[5]: Leaving directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg/blas'<br />make[4]: *** [build-stamp] Error 2<br />make[4]: Leaving directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg'<br />make[3]: *** [package-ready] Error 2<br />make[3]: Leaving directory `/state/partition1/apps/abinit-6.4.3/prereqs/linalg'<br />make[2]: *** [all-recursive] Error 1<br />make[2]: Leaving directory `/state/partition1/apps/abinit-6.4.3/prereqs'<br />make[1]: *** [multi] Error 2<br />make[1]: Leaving directory `/state/partition1/apps/abinit-6.4.3'<br />make: *** [mj4] Error 2<br /><br />Do I make some mistake, Please recommend me<br /><br />Thank <br />Asanee</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Mon Jan 24, 2011 11:46 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello Asanee,<br /><br />Two things look fishy to me.<br />First of all, you configured with mpi enabled but gfortran is invoked instead of the mpif90 wrapper. I bet the --with-mpi-prefix is wrong (it should point to the root dir of your MPI implementation i.e. where bin/, lib/ and include/ live)<br />Secondly, gfortran chokes on march=native (and mtune). It's probably quite an old version not supported anymore by Abinit - check it with gfortran --version.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Mon Jan 24, 2011 1:01 pm</strong></div>
				<div class="author">by <strong>asanee</strong></div>
				<div class="content">Thank. Alain_Jacques to answer me<br /><br />First of all, I am a new in Linux user. So, If I have change for the mpi libs to<br /><br />./configure --enable-64bit-flags=&quot;yes&quot; --enable-mpi=&quot;yes&quot; --with-mpi-prefix=&quot;/usr/lib/openmpi/1.3.2-gcc/include/&quot;<br /><br />As, I know the mpi.h file is in there ( &quot;/usr/lib/openmpi/1.3.2-gcc/include/&quot;) and the gfortran version is 4.1.2.<br />however, it might be the older version. Could you help me for the next step? Please .... if i got the same error as i have been got before<br />Could I change another compiler insteat of gfortran or it just update for gfortran ? <br /><br />Thank Asanee</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Mon Jan 24, 2011 2:04 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">if you use the --with-mpi-prefix=&quot;/SomeDirectory&quot;, configure expects to find mpi.h in /SomeDirectory/include/mpi.h, mpif90 in /SomeDirectory/bin/mpif90, libmpi.so in /SomeDirectory/lib/libmpi.so ... and so on. If your mpi implementation is scattered then use --with-mpi-includes=&quot;-I/usr/lib/openmpi/1.3.2-gcc/include/&quot; and --with-mpi-libs=&quot;-L/usr/lib/openmpi/1.3.2-gcc/lib -lmpi&quot; instead. Now these libs seem associated with an old gfortran 4.1.2 which is not supported anymore (because it is quite buggy).<br /><br />So try either <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export LD_LIBRARY_PATH=/opt/mpich2/gnu/lib:$LD_LIBRARY_PATH<br />./configure --enable-64bit-flags=&quot;yes&quot; --enable-mpi=&quot;yes&quot; --with-mpi-prefix=&quot;/opt/mpich2/gnu/&quot; --disable-linalg&nbsp; FCFLAGS=&quot;-O2&quot; CFLAGS=&quot;-O2&quot; CXXFLAGS=&quot;-O2&quot;</code></pre></div> by reference to your first post or <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --enable-64bit-flags=&quot;yes&quot; --enable-mpi=&quot;yes&quot; --with-mpi-includes=&quot;-I/usr/lib/openmpi/1.3.2-gcc/include/&quot; --with-mpi-libs=&quot;-L/usr/lib/openmpi/1.3.2-gcc/lib -lmpi&quot; --disable-linalg FCFLAGS=&quot;-O2&quot; CFLAGS=&quot;-O2&quot; CXXFLAGS=&quot;-O2&quot;</code></pre></div><br />and maybe add --disable-all-plugins if you are in trouble with one of them.<br /><br />You mentioned that you work on a cluster; it would be reasonable to think that gfortran 4.1.2 is not the only available fortran compiler on it. Sorry, I don't know where they hide ... ask the system admin. Abinit supports quite a variety of compilers ... gnu, Intel, PGI, ... And also ask for the mpi associated with the compilers (mpi is build for a specific compiler i.e. don't try to mix). Then I can help you further with this info.<br /><br />Updating to a new gfortran means compiling a new compiler - not for the fainted of heart, you'll probably have to prepare new gmp, mpfr and mpc libraries. And new mpi libs when finished. Better to check first if this hasn't been done already on your system.<br /><br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Tue Jan 25, 2011 6:22 am</strong></div>
				<div class="author">by <strong>asanee</strong></div>
				<div class="content">Dear Alain_Jacques<br /><br />I would be appreciate in your kind helping me. Anyway, I try to configue my cluster which has a few node. <br />Before that I have been familiar to use abinit within single run. <br />My system is quit large, and also took a long time. Thus, I have plan for mpirun to help my calculationl. So,.... <br />I have done on your recommend with a bit change as following<br /><br /> ./configure --enable-mpi=&quot;yes&quot; --with-mpi-includes=&quot;-I/usr/lib/openmpi/1.3.2-gcc/include/&quot; --with-mpi-libs=&quot;-L/usr/lib/openmpi/1.3.2-gcc/lib/&quot; -disable-all-plugins FC=&quot;f95&quot; FCFLAGS=&quot;-L/usr/bin/&quot;<br /><br />As results, this can neglect for &quot;gfortran&quot; problems (as I was understand). However, I had stuck on ... .. with I don't know such that problem as shown below (this is only some part of the messege)<br /><br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:197<br /><br />     Included at m_xmpi.F90:628<br /><br />   call MPI_ALLGATHER(xval,nelem,MPI_INTEGER,recvcounts,nelem,MPI_INTEGER,space<br />                                           1<br />Error: Symbol 'mpi_integer' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:135<br /><br />     Included at m_xmpi.F90:628<br /><br />   call MPI_ALLGATHER(charval,20,MPI_CHARACTER,recvcounts,20,MPI_CHARACTER,spac<br />                                             1<br />Error: Symbol 'mpi_character' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:133<br /><br />     Included at m_xmpi.F90:628<br /><br /> if (spaceComm /= MPI_COMM_SELF .and. spaceComm /= MPI_COMM_NULL) then<br />                              1<br />Error: Symbol 'mpi_comm_self' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:133<br /><br />     Included at m_xmpi.F90:628<br /><br /> if (spaceComm /= MPI_COMM_SELF .and. spaceComm /= MPI_COMM_NULL) then<br />                                                               1<br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:73<br /><br />     Included at m_xmpi.F90:628<br /><br /> if (spaceComm /= MPI_COMM_SELF .and. spaceComm /= MPI_COMM_NULL) then<br />                              1<br />Error: Symbol 'mpi_comm_self' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:73<br /><br />     Included at m_xmpi.F90:628<br /><br /> if (spaceComm /= MPI_COMM_SELF .and. spaceComm /= MPI_COMM_NULL) then<br />                                                               1<br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file xallgather_mpi.F90:75<br /><br />     Included at m_xmpi.F90:628<br /><br />   call MPI_ALLGATHER(xval,1,MPI_INTEGER,recvcounts,1,MPI_INTEGER,spaceComm,ier)<br />                                       1<br />Error: Symbol 'mpi_integer' at (1) has no IMPLICIT type<br /> In file m_xmpi.F90:517<br /><br /> if (spaceComm /= MPI_COMM_NULL) then<br />                              1<br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file m_xmpi.F90:467<br /><br /> if ( spaceComm/=MPI_COMM_NULL ) then<br />                             1<br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file m_xmpi.F90:421<br /><br /> if ( spaceComm/=MPI_COMM_NULL ) then<br />                             1<br />Error: Symbol 'mpi_comm_null' at (1) has no IMPLICIT type<br /> In file m_xmpi.F90:335<br /><br /> call MPI_ATTR_GET(MPI_COMM_WORLD, MPI_TAG_UB, attribute_val, lflag, ierr) ! De<br />                                            1<br />Error: Symbol 'mpi_tag_ub' at (1) has no IMPLICIT type<br /> In file m_xmpi.F90:335<br /><br /> call MPI_ATTR_GET(MPI_COMM_WORLD, MPI_TAG_UB, attribute_val, lflag, ierr) ! De<br />                                1<br />Error: Symbol 'mpi_comm_world' at (1) has no IMPLICIT type<br />make[3]: *** [m_xmpi.o] Error 1<br />make[3]: Leaving directory `/state/partition1/home/abinit-6.4.3/src/12_hide_mpi'<br />make[2]: *** [all-recursive] Error 1<br />make[2]: Leaving directory `/state/partition1/home/abinit-6.4.3/src'<br />make[1]: *** [all-recursive] Error 1<br />make[1]: Leaving directory `/state/partition1/home/abinit-6.4.3'<br />make: *** [all] Error 2<br /><br /><br />For now, this thing I don't understand. Should I go back to use single run again ... ?  I'm Sorry for my knowledge using linux however Thank you again.<br /><br />Thank<br />Asanee</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Tue Jan 25, 2011 2:41 pm</strong></div>
				<div class="author">by <strong>pouillon</strong></div>
				<div class="content">You should do exactly as Alain told you in his first suggestion. If you do otherwise, it will likely not work.<br /><br />An alternative to setting CFLAGS, CXXFLAGS and FCFLAGS is to use the following options:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--with-fc-vendor=&quot;gnu&quot; --with-fc-version=&quot;4.2&quot;<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Tue Jan 25, 2011 5:58 pm</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Here are some recipes to build a new compiler toolchain ... let's try to have a clean gfortran 4.4 working on your box. As you currently have gcc-4.1.2 installed, I assume you're working with some sort of RHEL 5 or variant (CentOS, Scientific Linux, ...)<br /><br />1. download GNU MP from <a href="ftp://ftp.gmplib.org/pub/gmp-4.3.2/gmp-4.3.2.tar.bz2" class="postlink">ftp://ftp.gmplib.org/pub/gmp-4.3.2/gmp-4.3.2.tar.bz2</a> Configure, build, check and install with <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=/opt/gmp-4.3.2<br />make<br />make check<br />make install</code></pre></div><br /><br />2. download MPFR from <a href="http://www.mpfr.org/mpfr-2.4.2/mpfr-2.4.2.tar.bz2" class="postlink">http://www.mpfr.org/mpfr-2.4.2/mpfr-2.4.2.tar.bz2</a> Configure, ... with<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=/opt/mpfr-2.4.2 --with-gmp=/opt/gmp-4.3.2<br />make<br />make check<br />make install</code></pre></div><br /><br />3. download gcc-4.4.5 from a mirror of <a href="http://gcc.gnu.org/" class="postlink">http://gcc.gnu.org/</a> Untar. Create a separate build directory, cd to it then configure, .... with<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>PathToGCCSource/configure --prefix=/opt/gcc-4.4.5 --enable-bootstrap --enable-shared --enable-threads=posix --with-system-zlib --enable-languages=c,c++,fortran --with-cpu=generic --with-mpfr=/opt/mpfr-2.4.2 --with-gmp=/opt/gmp-4.3.2<br />make<br />make install</code></pre></div><br />You should have a brand new gcc/gfortran in /opt/gcc-4.4.5<br /><br />4. prepare your environment to use the new toolchain ...<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export PATH=/opt/gcc-4.4.5/bin:$PATH<br />export LD_LIBRARY_PATH=/opt/gcc-4.4.5/lib:$LD_LIBRARY_PATH</code></pre></div><br />From now, a plain gfortran -v should return the new compiler.<br /><br />5. Build a new MPI (don't try to recycle the one already on your system). Download <a href="http://www.open-mpi.org/software/ompi/v1.4/downloads/openmpi-1.4.3.tar.bz2" class="postlink">http://www.open-mpi.org/software/ompi/v1.4/downloads/openmpi-1.4.3.tar.bz2</a> Configure, ... with<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --prefix=/opt/openmpi-1.4.3_gcc-4.4.5 CC=/opt/gcc-4.4.5/bin/gcc CXX=/opt/gcc-4.4.5/bin/g++ F77=/opt/gcc-4.4.5/bin/gfortran FC=/opt/gcc-4.4.5/bin/gfortran CPP=/opt/gcc-4.4.5/bin/cpp<br />make<br />make check<br />make install</code></pre></div><br /><br />6. append the parallel environment ...<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export PATH=/opt/openmpi-1.4.3_gcc-4.4.5/bin:$PATH<br />export LD_LIBRARY_PATH=/opt/openmpi-1.4.3_gcc-4.4.5/lib:$LD_LIBRARY_PATH</code></pre></div><br />From now, mpif90 -show should return the new MPI wrapper<br /><br />7. back to abinit 6.4.3. Try to configure with <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>./configure --enable-64bit-flags=&quot;yes&quot; --enable-mpi=&quot;yes&quot; --with-mpi-prefix=/opt/openmpi-1.4.3_gcc-4.4.5 --enable-linalg=&quot;no&quot;</code></pre></div><br /><br />Working?<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Wed Jan 26, 2011 8:42 am</strong></div>
				<div class="author">by <strong>asanee</strong></div>
				<div class="content">Thank you for both of your recommendation<br /><br />I had try exactly as both of you suggestion but, I can't update new compiler as a good recommendation from Alain. <br />Thank for Pouillon, for the suggestion. I re-configure again by using the first as Alian guide me <br /><br /> ./configure --enable-mpi=&quot;yes&quot; --with-mpi-prefix=&quot;/opt/mpich2/gnu/&quot; --disable-linalg  FCFLAGS=&quot;-O2&quot; CFLAGS=&quot;-O2&quot; CXXFLAGS=&quot;-O2&quot; --disable-all-plugins<br /><br />and get the result message as showing<br /><br /><br /> ==============================================================================<br /> === C support                                                              ===<br /> ==============================================================================<br /><br />checking for gcc... /opt/mpich2/gnu//bin/mpicc<br />checking whether the C compiler works... yes<br />checking for C compiler default output file name... a.out<br />checking for suffix of executables... <br />checking whether we are cross compiling... no<br />checking for suffix of object files... o<br />checking whether we are using the GNU C compiler... yes<br />checking whether /opt/mpich2/gnu//bin/mpicc accepts -g... yes<br />checking for /opt/mpich2/gnu//bin/mpicc option to accept ISO C89... none needed<br />checking for style of include used by make... GNU<br />checking dependency style of /opt/mpich2/gnu//bin/mpicc... gcc3<br />checking how to run the C preprocessor... /opt/mpich2/gnu//bin/mpicc -E<br />checking which type of compiler we have... gnu 4.1<br />checking for ANSI C header files... yes<br />checking for sys/types.h... yes<br />checking for sys/stat.h... yes<br />checking for stdlib.h... yes<br />checking for string.h... yes<br />checking for memory.h... yes<br />checking for strings.h... yes<br />checking for inttypes.h... yes<br />checking for stdint.h... yes<br />checking for unistd.h... yes<br />checking whether byte ordering is bigendian... no<br /><br /> ==============================================================================<br /> === C++ support                                                            ===<br /> ==============================================================================<br /><br />checking whether we are using the GNU C++ compiler... yes<br />checking whether /opt/mpich2/gnu//bin/mpicxx accepts -g... yes<br />checking dependency style of /opt/mpich2/gnu//bin/mpicxx... gcc3<br />checking which type of C++ compiler we have... gnu 4.1<br /><br /> ==============================================================================<br /> === Fortran support                                                        ===<br /> ==============================================================================<br /><br />checking whether we are using the GNU Fortran compiler... yes<br />checking whether /opt/mpich2/gnu//bin/mpif90 accepts -g... yes<br />checking which type of Fortran compiler we have... gnu 4.1<br />checking fortran 90 modules extension... mod<br />checking for Fortran flag to compile .F90 files... none<br />configure: determining Fortran module case<br />checking whether Fortran modules are upper-case... no<br />checking how to get verbose linking output from /opt/mpich2/gnu//bin/mpif90... -v<br />checking for Fortran libraries of /opt/mpich2/gnu//bin/mpif90...  -L/opt/mpich2/gnu/lib -L/usr/lib/gcc/x86_64-redhat-linux/4.1.2 -L/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -lmpichf90 -lmpich -lopa -lpthread -lrt -luuid -lgfortranbegin -lgfortran -lm<br />checking for dummy main to link with Fortran libraries... none<br />checking for Fortran name-mangling scheme... lower case, underscore, no extra underscore<br />.<br />.<br />.<br /> ==============================================================================<br /> === Connectors                                                             ===<br /> ==============================================================================<br /><br />checking whether the C compiler supports MPI... yes<br />checking whether the C++ compiler supports MPI... yes<br />checking whether the Fortran Compiler supports MPI... yes<br />checking whether MPI is usable... yes<br />configure: enabling MPI I/O support<br />checking whether to build MPI code... yes<br />checking whether to build MPI I/O code... yes<br />checking whether to build MPI I/O untested features... no<br />checking whether to build MPI time tracing code... no<br />checking which level of MPI is supported by the Fortran compiler... 2<br />checking whether to activate GPU support... no<br />checking whether to use transferable I/O libraries... no<br />checking whether to use optimized timer libraries... no<br />checking whether to use optimized linear algebra libraries... no<br />checking whether to activate ScaLAPACK support... no<br />checking whether to use optimized math libraries... no<br />checking whether to use optimized FFT libraries... no<br />checking whether to use DFT libraries... no<br /><br />This is seem to be good, however, I have continue by &quot; make mj4&quot; . I got this message <br />The screen show the succeed complie of compiler, however ...<br /> <br />In file interfaces_67_common.F90:580<br /><br />  real(dp), intent(out), allocatable :: csix(:,:)<br />                                           1<br />Error: ALLOCATABLE attribute conflicts with DUMMY attribute at (1)<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o calc_fc.o calc_fc.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o clnup2.o clnup2.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o dens_in_sph.o dens_in_sph.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o dielmt2.o dielmt2.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o dielmt.o dielmt.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o dieltcel.o dieltcel.F90<br /> In file interfaces_67_common.F90:572<br /><br /> subroutine evdw_wannier(csix,corrvdw,nwan,vdw_nwan,&amp;  <br />                            1<br />Error: Symbol 'csix' at (1) has no IMPLICIT type<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o ewald.o ewald.F90<br />/opt/mpich2/gnu//bin/mpif90 -m64 -DHAVE_CONFIG_H -I. -I../.. -I../../src/incs -I../../src/incs    -ffree-form -J/export/home/asanee/Desktop/abinit-6.4.3/src/mods -I/export/home/asanee/Desktop/abinit-6.4.3/src/mods  -O2 -c -o ewald2.o ewald2.F90<br />make[5]: *** [interfaces_67_common.o] Error 1<br />make[5]: *** Waiting for unfinished jobs....<br />make[5]: Leaving directory `/state/partition1/home/asanee/Desktop/abinit-6.4.3/src/67_common'<br />make[4]: *** [all-recursive] Error 1<br />make[4]: Leaving directory `/state/partition1/home/asanee/Desktop/abinit-6.4.3/src'<br />make[3]: *** [all-recursive] Error 1<br />make[3]: Leaving directory `/state/partition1/home/asanee/Desktop/abinit-6.4.3'<br />make[2]: *** [all] Error 2<br />make[2]: Leaving directory `/state/partition1/home/asanee/Desktop/abinit-6.4.3'<br />make[1]: *** [multi] Error 2<br />make[1]: Leaving directory `/state/partition1/home/asanee/Desktop/abinit-6.4.3'<br />make: *** [mj4] Error 2<br /><br />I think the error might come from somethings which it does not concern to the compiler. <br />So, for now, I would be appreciated for boths of your helps. I would be afraid of your offering for the sake of my less<br />linux user. Anyway, Is there possible if I change to use fedora14 (This might be a new compiler), and install mpich2, then <br />abinit in single computer? This would be easier than rocks cluster.<br /><br />Very thank boths<br />Asanee</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Wed Jan 26, 2011 11:29 am</strong></div>
				<div class="author">by <strong>Alain_Jacques</strong></div>
				<div class="content">Hello Asanee,<br /><br />Fedora 14 comes with gcc-4.5 ... this compiler version is well supported. And yes, you can use MPICH2 on a single SMP box - multicores and/or multicpus - in this case, I configure MPICH2 with gforker process manager and ch3:nemesis communication device.<br /><br />Kind regards,<br /><br />Alain</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: installing abinit 6.4.3 on rocks clusters 5.3</h3>
				<div class="date">Posted: <strong>Wed Jan 26, 2011 2:14 pm</strong></div>
				<div class="author">by <strong>asanee</strong></div>
				<div class="content">Dear Alain<br /><br />Thank for reply me. Now, I decide to install abinit on fedora14 with has compiler 4.5.1 in it. This is correct as you had been mension before.<br />The compiling procedure is strange forword as you suggest. It's working. Thank again. The mpich2 and abinit are well compatible. <br />But one thing that's quit differ from a single run is &quot; Does mpirun need memory (RAM) to calculate for the whole process as a single core before?&quot;<br />I check by using system monitor and observe that It doesn't a litle bit within a big system calculation, or do I make something worng?<br /><br />Finally, Thank you for all you kind helping me again<br />Asanee</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=3&t=858&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 02:40:51 GMT -->
</html>
