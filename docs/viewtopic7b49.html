<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1268&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:05:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Segmentation faults in anaddb</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Segmentation faults in anaddb</h2>
		<p><a href="viewtopicefab-2.html?f=10&amp;t=1268">https://forum.abinit.org/viewtopic.php?f=10&amp;t=1268</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Segmentation faults in anaddb</h3>
				<div class="date">Posted: <strong>Tue Aug 16, 2011 5:20 pm</strong></div>
				<div class="author">by <strong>loniarf</strong></div>
				<div class="content">Hi all,<br />I posted this on the message board under a different topic, but haven't received any replies so I thought I'd try here as well.<br /><br />I am attempting to run anaddb (interested in raman) for calcite with a rhombohedral primitive cell. I have been getting segmentation faults. They are not always in the same place in the code, but they all seem to boil down to &quot;syntax errors&quot; in the fortran files (which I know cannot be right because the anaddb fortran files all run fine when I use tutorial input files). I can't tell where the error is coming from. Everything seems to run fine: abinit, mrgddb until I get to anaddb and then I get this weird segmentation fault. There are some warnings in abinit, which I know about because I am ignoring some of the necessary convergence studies as at this stage I just want to see how close I can come and then I will refine everything later. Is it possible I am running out of memory?<br /><br />The error looks like this when I run anaddb in gdb:<br />Program received signal SIGSEGV, Segmentation fault.<br />0x00007ffff7b85e08 in _gfortran_reshape_r8 () from /usr/lib/libgfortran.so.3<br /><br />The output file contains nothing.<br />The log file contains nothing.<br /><br />I am running Abinit-6.8.1 on a 64-bit Dell precision T7500 linux workstation running Ubuntu 10.10.<br /><br />I have attached all the relevant input files.<br /><br />I am using the following pseudopotentials:<br />20ca.2.hgh<br />6c.pspnc<br />8o.pspnc<br />from the Psps_for_tests directory.<br /><br />Every time I try to solve this I feel like I've hit a wall. Any help would be greatly appreciated.<br /><br />Many thanks,<br />loniarf<div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/fileff44.php?id=423">calciteR_nlorespfn.in</a></dt>
			<dd><em>abinit input file</em></dd>			<dd>(2.51 KiB) Downloaded 268 times</dd>
		</dl>
		
		
			</div><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file4b97.php?id=424">calciteR_nlorespfn2.in</a></dt>
			<dd><em>anaddb input file</em></dd>			<dd>(739 Bytes) Downloaded 280 times</dd>
		</dl>
		
		
			</div><div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/file6048.php?id=425">calcite_nlorespfn1.ddb.out</a></dt>
			<dd><em>ddb file produced by abinit and mrgddb</em></dd>			<dd>(53.76 KiB) Downloaded 233 times</dd>
		</dl>
		
		
			</div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in anaddb</h3>
				<div class="date">Posted: <strong>Wed Aug 17, 2011 3:13 am</strong></div>
				<div class="author">by <strong>Robin</strong></div>
				<div class="content">Dear loniarf,<br /><br />I analyzed the ddb file and received no segmentation fault, but there are lots of &quot;NaN&quot; in the output file. You could run the test packages to make sure if there is any problem with your compilation.<br /><br />Sincerely,<br />Guangfu Luo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in anaddb</h3>
				<div class="date">Posted: <strong>Wed Aug 17, 2011 9:47 pm</strong></div>
				<div class="author">by <strong>loniarf</strong></div>
				<div class="content">Guangfu Luo,<br />Thank you for your reply. I am relieved to see that the problem does not appear to be my input parameters.<br />I have run the basic tests (tests_in, tests_libxc, tests_fast) as well as the response function tests (tests_v2).<br />There are also do not appear to be errors during the use of configure, but I have posted here the results of configure as a .txt file.<br />Please let me know if you see anything strange.<br />Thanks again,<br />Lonia<div class="inline-attachment">
			
		
		
				<dl class="file">
			<dt><img src="images/upload_icons/txt.gif" alt="" /> <a class="postlink" href="download/fileefa8.php?id=427">config_results1.in</a></dt>
			<dd><em>results of configure (as a.in file because certain extensions are not allowed)</em></dd>			<dd>(24.07 KiB) Downloaded 256 times</dd>
		</dl>
		
		
			</div></div>
			</div>
			<hr />
					<div class="post">
				<h3>What are the specs of your computing system?</h3>
				<div class="date">Posted: <strong>Fri Aug 19, 2011 7:19 pm</strong></div>
				<div class="author">by <strong>loniarf</strong></div>
				<div class="content">Dear Guangfu Luo,<br />It seems to me (after successful re-compilation and tests) that the problem may be with my computing system.<br />What are the specs of the system that you used to successfully run my input?<br />If I can't get my own system running, would it be possible for you to send me the output files that your run generated?<br />Thank you once again,<br />Loniarf</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Segmentation faults in anaddb</h3>
				<div class="date">Posted: <strong>Fri Sep 02, 2011 3:26 am</strong></div>
				<div class="author">by <strong>Robin</strong></div>
				<div class="content">Dear Loniarf,<br /><br />I use Intel Ifort-9.1.052 and Intel mpi 4.0.0.028 to compile ABINIT, and they worked pretty well for the abinit versions I used. The following line is my configure setting for abinit-6.8.1.<br /><br />./configure FC=/opt/intel/impi/4.0.0.028/bin64/mpiifort enable_mpi=yes --enable-mpi-io=no --enable-64bit-flags=yes --with-trio-flavor=none<br /><br />As you requested, I attached the anaddb analysis results of your files, and a successful Raman spectrum analysis of my own for your check.<br /><br />Sincerely,<br />Guangfu Luo</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=1268&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:05:43 GMT -->
</html>
