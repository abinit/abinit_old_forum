<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3369&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:17:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; errors in nscf caculation with thousands of bands using PAW</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>errors in nscf caculation with thousands of bands using PAW</h2>
		<p><a href="viewtopica715-2.html?f=9&amp;t=3369">https://forum.abinit.org/viewtopic.php?f=9&amp;t=3369</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>errors in nscf caculation with thousands of bands using PAW</h3>
				<div class="date">Posted: <strong>Sat Sep 03, 2016 6:19 am</strong></div>
				<div class="author">by <strong>xw213</strong></div>
				<div class="content">Hello,<br /><br />I am trying to do a PAW+GW calculation. Before the heavy GW part, I need prepare the ground state electron density and wavefunctions. So, first step I did a normal SCF calculation. The second step is a nscf calculation (iscf=-2) to get wavefunctions using the converged electron density from step 1. As GW usually needs a lot of empty bands to get converged, I included 3008 nbands in the nscf calculation.(cause nband&lt;2000 is not enough to converge the GW bands according to my convergence study). However, when I did nscf calculation with nband=3008, my calculation stop with the following error:<br /><br />--- !ERROR<br />src_file: fxphas.F90<br />src_line: 188<br />mpi_rank: 3<br />message: |<br />    The eigenvector with band 634 has zero norm.<br />    This usually happens when the number of bands (nband) is comparable to the number of planewaves (mpw)<br />    Action: Check the parameters of the calculation. If nband ~ mpw, then decrease nband or, alternatively, increase ecut<br />...<br /><br /><br /><br />I checked the out file, npw=8165 which is a little larger than nband. As the message said, should I increase the ecut to get rid of this error? For ground state calculation, I did convergence study on the ecut which is 15 Ha in the present case. I am wondering if increasing the ecut is the common recipe to include thousands of bands in GW calculations for PAW? Is there another way to deal with this error? Cause increasing the ecut will greatly increasing the computational cost for GW.<br /><br /><br /><br />Following is my input file:<br /> enunit     2<br /> ecut       15<br /> pawecutdg  30<br /> occopt     4<br /> tsmear     0.01<br /> nstep      300<br /> irdden     1<br /> tolwfr     1.0d-12<br /> nline      6<br /> kptopt     1<br /> ngkpt      2 2 1<br /> nshiftk    1<br /> shiftk     0.0 0.0 0.0<br /> iscf      -2<br /> nband      3008<br /> nbdbuf     8<br /> istwfk     *1<br /> acell      2*3.319 44.949 angstrom<br /> angdeg     90 90 120<br /> natom      20<br /> ntypat     4<br /> typat      1 1 1 1 2 4 2 2 3 2 2 3 2 2 4 2 1 1 1 1<br /> znucl      21 34 42 74<br /> xred       ......... (atomic positions)<br /><br /><br /><br />Xiaoming Wang<br />Postdoc<br />Rutgers University</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: errors in nscf caculation with thousands of bands using </h3>
				<div class="date">Posted: <strong>Sat Sep 03, 2016 8:31 pm</strong></div>
				<div class="author">by <strong>xw213</strong></div>
				<div class="content">However, when I increased the ecut from 15 Ha to 30 Ha, the error didn't go away.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: errors in nscf caculation with thousands of bands using </h3>
				<div class="date">Posted: <strong>Mon Sep 05, 2016 7:47 pm</strong></div>
				<div class="author">by <strong>xw213</strong></div>
				<div class="content">Can anyone give me some advice, please? I am stuck with this problem for weeks.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=9&t=3369&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 03:17:20 GMT -->
</html>
