<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=591&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:20:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; Error in reading QPS/KSS file?</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>Error in reading QPS/KSS file?</h2>
		<p><a href="viewtopic2217-2.html?f=11&amp;t=591">https://forum.abinit.org/viewtopic.php?f=11&amp;t=591</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Error in reading QPS/KSS file?</h3>
				<div class="date">Posted: <strong>Tue Sep 14, 2010 10:54 am</strong></div>
				<div class="author">by <strong>loefaas</strong></div>
				<div class="content">Hello,<br /><br />I don't know if this is the right section of the forum, but when I have some problems with GW+wannier. The GW calculation goes fine, but when I want to use the results to make wannier functions something goes wrong. I think it is when abinit tries to read the generated QPS-file. I don't know if it is a compilation error or something else? Anyone who has got any similar? The program stops with this message.<br /><br /><br />mlwfovlp_qp: WARNING<br />  The input *_WFK file of LDA wavefunctions to be  converted<br />  to GW quasiparticle wavefunctions MUST have been written in<br />  the run that produced the GW *_KSS file using kssform 3,<br />  the ONLY value of kssform permitted for GW Wannier functions.<br />  Otherwise, the *_QPS file needed here will be inconsistent,<br />  and the output quasiparticle wavefunctions will be garbage.<br />  No internal check that can verify this is presently possible.<br /><br />forrtl: severe (27): too many records in I/O statement, unit -5, file Internal Formatted Write<br />Image              PC                Routine            Line        Source             <br />libirc.so          00002AD7134A5826  Unknown               Unknown  Unknown<br />libirc.so          00002AD7134A47B8  Unknown               Unknown  Unknown<br />libifcoremt.so.5   00002AD712E31B2E  Unknown               Unknown  Unknown<br />libifcoremt.so.5   00002AD712DB7D50  Unknown               Unknown  Unknown<br />libifcoremt.so.5   00002AD712DB75B1  Unknown               Unknown  Unknown<br />libifcoremt.so.5   00002AD712E0125A  Unknown               Unknown  Unknown<br />abinit             0000000000B28D6B  Unknown               Unknown  Unknown<br />abinit             00000000006730E1  Unknown               Unknown  Unknown<br />abinit             0000000000644407  Unknown               Unknown  Unknown<br />abinit             00000000005DA484  Unknown               Unknown  Unknown<br />abinit             000000000052F655  Unknown               Unknown  Unknown<br />abinit             0000000000463876  Unknown               Unknown  Unknown<br />abinit             00000000004556AB  Unknown               Unknown  Unknown<br />abinit             000000000044AAEC  Unknown               Unknown  Unknown<br />abinit             0000000000446DC2  Unknown               Unknown  Unknown<br />libc.so.6          00000031A601D994  Unknown               Unknown  Unknown<br />abinit             0000000000446CE9  Unknown               Unknown  Unknown</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error in reading QPS file?</h3>
				<div class="date">Posted: <strong>Wed Sep 15, 2010 4:35 am</strong></div>
				<div class="author">by <strong>thanusit</strong></div>
				<div class="content">Hi,<br />I haven't seen this problem before (I'm new to GW+Wannier, though). It might be due to the way you generate the KSS file. Is it possible to see your input file?<br /><br />Kind regards,<br />Thanusit</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error in reading QPS file?</h3>
				<div class="date">Posted: <strong>Wed Sep 15, 2010 5:31 pm</strong></div>
				<div class="author">by <strong>loefaas</strong></div>
				<div class="content"><blockquote><div><cite>thanusit wrote:</cite>Hi,<br />I haven't seen this problem before (I'm new to GW+Wannier, though). It might be due to the way you generate the KSS file. Is it possible to see your input file?<br /><br />Kind regards,<br />Thanusit</div></blockquote><br /><br />yes, it seems to have something to do with the KSS file and symmetries. I arrived at this error when I was extending my system to more atoms. I can also get it for the diamond structure with just two atoms in the unit cell, when using xangst instead of xred to specify the atom places so I guess it has something to do with that the symmetry is broken due to small numerical differences. Now I am trying with a system consisting of 16 atoms, all defined by xred to keep symmetry etc. but I still get the error. Is it not possible to treat larger systems with GW+Wannier?<br /><br />Input file:<br /><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>&nbsp; &nbsp; ndtset&nbsp; &nbsp; &nbsp; 5<br /># Diamond structure<br />&nbsp; &nbsp; &nbsp;acell&nbsp; &nbsp; &nbsp;6.7274&nbsp; 6.7274&nbsp; 6.7274 <br />&nbsp; &nbsp; &nbsp;rprim&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp;1.0&nbsp; &nbsp;1.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0&nbsp; &nbsp;0.00&nbsp; &nbsp;1.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0&nbsp; &nbsp;1.0&nbsp; &nbsp;0.00<br />&nbsp; &nbsp; &nbsp;natom&nbsp; &nbsp; &nbsp; 16<br />#&nbsp; &nbsp; &nbsp; xangst&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0000000000E+00&nbsp; 0.0000000000E+00&nbsp; 0.0000000000E+00<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8.8999668827E-01&nbsp; 8.8999668827E-01&nbsp; 8.8999668827E-01&nbsp; &nbsp; <br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.000000000&nbsp; &nbsp; &nbsp;1.799933764&nbsp; &nbsp; &nbsp;1.799933764<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.88999668827&nbsp; &nbsp; 2.699900646&nbsp; &nbsp; &nbsp;2.699900646<br />chkprim 0<br />xred<br />0.0 0.0 0.0<br />0.125 0.125 0.125<br />0.5 0.0 0.0<br />0.625 0.125 0.125<br />0.0 0.5 0.0<br />0.125 0.625 0.125<br />0.5 0.5 0.0<br />0.625 0.625 0.125<br />0.0 0.0 0.5<br />0.125 0.125 0.625<br />0.5 0.0 0.5<br />0.625 0.125 0.625<br />0.0 0.5 0.5<br />0.125 0.625 0.625<br />0.5 0.5 0.5<br />0.625 0.625 0.625<br />#xyzfile test.xyz<br />&nbsp; &nbsp; ntypat&nbsp; &nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp;typat&nbsp; &nbsp; &nbsp; 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 <br />&nbsp; &nbsp; &nbsp;znucl&nbsp; &nbsp; &nbsp;6.00 7.0 <br />&nbsp;symmorphi&nbsp; &nbsp; &nbsp; 0<br /><br /># Plane wave basis<br />&nbsp; &nbsp; &nbsp; ecut&nbsp; &nbsp; &nbsp; 30.00&nbsp; #This is too low, just for this sample case<br />&nbsp; &nbsp; &nbsp; nstep&nbsp; &nbsp; 500&nbsp; &nbsp; &nbsp;#<br />&nbsp; &nbsp; &nbsp; istwfk&nbsp; 1024*1<br />gwpara 2<br />#kpoint set<br />&nbsp; ngkpt&nbsp; &nbsp; &nbsp; 2 2 2<br />nshiftk&nbsp; &nbsp; &nbsp; 1&nbsp; #wannier90 library can only handle one k-mesh<br />shiftk&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp;0.00&nbsp; &nbsp;0.00&nbsp; # default shift<br /><br /># Self-consistent run to get the density<br />&nbsp; &nbsp; &nbsp; iscf1&nbsp; &nbsp; &nbsp;5<br />&nbsp; &nbsp; tolvrs1&nbsp; &nbsp; &nbsp;1.00d-10<br />&nbsp; &nbsp; &nbsp;nband1&nbsp; &nbsp; &nbsp;100<br />&nbsp; &nbsp; prtden1&nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; kptopt1&nbsp; &nbsp; &nbsp; 1<br />&nbsp; &nbsp; enunit1&nbsp; &nbsp; &nbsp; 2<br />&nbsp; &nbsp; diemac1&nbsp; &nbsp; &nbsp; 12.0<br /><br /># Second dataset: NSCF<br />&nbsp;prtvol2 1<br />&nbsp; &nbsp;iscf2 -2<br />&nbsp; nband2 100<br />&nbsp; nstep2 200<br />&nbsp;tolwfr2&nbsp; 1.e-10<br />&nbsp;getwfk2&nbsp; 1<br />&nbsp;getden2 1&nbsp; &nbsp;! Usual file handling data<br />&nbsp;prtden2 1<br />&nbsp;kptopt2 1&nbsp; &nbsp; &nbsp; &nbsp;# Option for the automatic generation of k points<br />&nbsp;kssform2 3<br />&nbsp;nbandkss2 100<br />#npwkss2 150<br /><br />#Third: Calc of dielec matrix - it 1<br />&nbsp; optdriver3&nbsp; &nbsp; &nbsp;3<br />&nbsp; gwcalctyp3&nbsp; &nbsp; 28<br />&nbsp; &nbsp; getkss3&nbsp; &nbsp; &nbsp;2<br /><br />&nbsp; &nbsp; &nbsp;nband3&nbsp; &nbsp; 100<br />&nbsp; &nbsp; ecuteps3&nbsp; &nbsp;15<br />&nbsp; &nbsp; ecutwfn3&nbsp; &nbsp;15<br />&nbsp; &nbsp; ppmfrq3&nbsp; &nbsp; &nbsp;16.7 eV<br />&nbsp; &nbsp; &nbsp; awtr3&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; <br /><br />#Fourth: Calculation of the model GW corrections - iteration 1<br />&nbsp; optdriver4&nbsp; &nbsp; &nbsp;4<br />&nbsp; gwcalctyp4&nbsp; &nbsp; 28<br />&nbsp; &nbsp; getkss4&nbsp; &nbsp; &nbsp;2<br />&nbsp; &nbsp; getscr4&nbsp; &nbsp; &nbsp;3<br />&nbsp; &nbsp; &nbsp;nband4&nbsp; &nbsp; 100<br />&nbsp; &nbsp;ecutsigx4&nbsp; &nbsp;15<br />&nbsp; &nbsp;ecutwfn4&nbsp; &nbsp; 15<br /><br /># 7th: Wannier90<br />&nbsp; &nbsp;prtvol5 1<br />&nbsp; &nbsp; &nbsp;iscf5 -2<br />&nbsp; &nbsp; nband5 100<br />&nbsp; &nbsp;tolwfr5 1.e-10<br />&nbsp; &nbsp;getwfk5 2<br />&nbsp; &nbsp;getden5 2&nbsp; &nbsp;# Usual file handling data<br />&nbsp; &nbsp;getqps5 4<br />&nbsp; prtwant5 3<br />&nbsp; &nbsp;istwfk5 512*1<br />&nbsp; &nbsp;kptopt5 3&nbsp; &nbsp; &nbsp; &nbsp;# Option for the automatic generation of k points<br />&nbsp; &nbsp;nstep5 3<br />&nbsp; &nbsp; ngkpt5 2 2 2<br />&nbsp; nshiftk5 1<br />&nbsp; &nbsp;shiftk5 0.0 0.0 0.0<br />w90prtunk5 1<br />w90iniprj5 2<br /><br /><br />#Common for all calc<br />rhoqpmix&nbsp; &nbsp; &nbsp;0.5<br />&nbsp; &nbsp; &nbsp;nkptgw&nbsp; &nbsp; 1<br />&nbsp; &nbsp; &nbsp; kptgw<br />&nbsp; &nbsp; &nbsp; &nbsp;0.00000000E+00&nbsp; 0.00000000E+00&nbsp; 0.00000000E+00<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.50000000E-01&nbsp; 0.00000000E+00&nbsp; 0.00000000E+00<br />&nbsp;#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.00000000E-01&nbsp; 0.00000000E+00&nbsp; 0.00000000E+00<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.50000000E-01&nbsp; 2.50000000E-01&nbsp; 0.00000000E+00<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.00000000E-01&nbsp; 2.50000000E-01&nbsp; 0.00000000E+00<br />&nbsp;#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -2.50000000E-01&nbsp; 2.50000000E-01&nbsp; 0.00000000E+00<br />&nbsp;#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.00000000E-01&nbsp; 5.00000000E-01&nbsp; 0.00000000E+00<br />&nbsp; #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-2.50000000E-01&nbsp; 5.00000000E-01&nbsp; 2.50000000E-01<br /><br />&nbsp; &nbsp; &nbsp; &nbsp;bdgw<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8&nbsp; &nbsp;# Only bands 1-8 are quasiparticle.&nbsp; LDA will be used for<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp; bands 9 and 10 in the wannier90 calculation.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 8<br /></code></pre></div></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Error in reading QPS/KSS file?</h3>
				<div class="date">Posted: <strong>Thu Sep 16, 2010 10:50 am</strong></div>
				<div class="author">by <strong>thanusit</strong></div>
				<div class="content">Hi,<br />I tried running your input file with few changes introduced. (assuming that the structure data are properly given)<br />1. Reduce &quot;nband&quot; in all dataset to 40 (just to save time)<br />2. Set  &quot;znucl   6.00&quot; (remove the value 7.0)<br />3. Set  &quot;getden5  1&quot; (It is suggested in the w90_tutorial to use _DEN file from the ground state calculation for wannier90 run).<br />4. Set all &quot;ecuteps&quot;, &quot;ecutwfn&quot;, &quot;ecutsigx&quot; to 6 (just to save time)<br />5. Set &quot;nkptgw  3&quot;, and use all the three kpts from dataset2  as &quot;kptgw&quot; (to make sure that kptgws are consistent to those in the KSS file).<br />6. Set &quot;bdgw  1  40&quot;  for all the three kptgws   (to cover the top valence band and 8 empty bands).<br />7. Make sure the atom position listed in the *o_DS5_w90.win file, under &quot;begin atoms_frac&quot;, is the same as those below  xred.<br />8. Lastly, copy all the kpts of dataset5 into the *o_DS5_w90.win, place under &quot;begin  kpoints&quot;.<br /><br />The run was completed without the error. But I'm not sure which part that fixes it. <br />Also, be aware that the parameters, ngkpt, nband, etc., used in the test run give poorly converged results.<br /><br />Hope this help,<br />Thanusit<br />PS. I run the job with Abinit 6.2.2(MPI version, prepared for a x86_64_linux_gnu4.4), in serial. The psp is 6c.pspnc.</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=11&t=591&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Sep 2024 01:20:36 GMT -->
</html>
