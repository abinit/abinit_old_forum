<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=4115&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:44:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>ABINIT Discussion Forums &bull; DFPT</title>

<link href="styles/flat-style/theme/print.css" rel="stylesheet">
<link href="styles/flat-style/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>ABINIT Discussion Forums</h1>
		<p>The meeting place for ABINIT users and developers<br /><a href="index.html">https://forum.abinit.org/</a></p>

		<h2>DFPT</h2>
		<p><a href="viewtopicac4d.html?f=10&amp;t=4115">https://forum.abinit.org/viewtopic.php?f=10&amp;t=4115</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>DFPT</h3>
				<div class="date">Posted: <strong>Sat May 25, 2019 11:37 am</strong></div>
				<div class="author">by <strong>wlsong</strong></div>
				<div class="content">helloï¼Œthank you for your attension!my error  as follows:<br />getshell : BUG -<br /> The calculated weights do not solve the linear system for all k-points.<br />  Action: contact ABINIT group (please attach the output of `abinit -b`)<br /><br /><br />--- !BUG<br />src_file: m_getshell.F90<br />src_line: 653<br />mpi_rank: 0<br />message: |<br />    There is a problem with the finite difference expression of the ddk<br />...<br /><br />  Action: contact ABINIT group (please attach the output of `abinit -b`)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: DFPT</h3>
				<div class="date">Posted: <strong>Tue Jun 04, 2019 11:08 am</strong></div>
				<div class="author">by <strong>ebousquet</strong></div>
				<div class="content">Dear wlsong,<br />You should be more &quot;talkative&quot; if you want a response, what is your calculation exactly? Potentially, your input-output? With just the error message, it'll be hard to help you.<br />Best wishes,<br />Eric</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: DFPT</h3>
				<div class="date">Posted: <strong>Mon Jun 10, 2019 4:06 am</strong></div>
				<div class="author">by <strong>wlsong</strong></div>
				<div class="content">I am caculating a poscar containing C.N,O H.when i was caculating its response ,its err as  my lastest poster.<br /># Definition of lattice parameters<br />#********************************<br />   acell   4.6785467407E+00  4.6785465952E+00  5.4240539143E+01<br />               rprim   9.9979825533E-01  1.3096122241E-02 -1.5229583441E-02<br />                      -4.8855756831E-01  8.7239877279E-01  1.5227727480E-02<br />                      -1.5804714401E-02  9.1226315354E-03  9.9983348043E-01<br /><br />              <br />           <br />              <br /><br />#Definition of atomic positions and types<br />#*************************************<br />   natom       8<br />   ntypat      4<br />   znucl       5 7 1 9<br />   typat    1  1  1  2  2  2  3  4<br />   xred                6.6427145839E-01  3.3573183651E-01  3.8655144545E-01<br />                      -2.4285448185E-02  2.4241144023E-02  4.5731699263E-01<br />                       3.3682932037E-01  6.6321527484E-01  3.1539849813E-01<br />                       9.6619097835E-03 -9.6643284553E-03  4.0570763200E-01<br />                       3.3328032397E-01  6.6667186760E-01  4.7505895302E-01<br />                       6.9329998641E-01  3.0674082204E-01  3.3515841280E-01<br />                       2.9821439204E-01  7.0172586775E-01  5.0978669868E-01<br />                       3.5539423281E-01  6.4467060348E-01  2.6720778517E-01<br /><br /><br />               <br />   ixc         3<br /><br />#Parameters of the SCF cycles<br />#****************************<br />   nstep       200<br /><br /><br />#Plane wave basis and k-point grid<br />#*********************************<br />   ecut        20<br />   ecutsm      0.5<br />   dilatmx     1.05<br />   ngkpt       13 13 1<br />   nshiftk     1<br />   shiftk      0.5 0.5 0.5<br />              <br />               <br />          <br /><br />ndtset 5     jdtset 1 2 3 4 5<br /><br />#DATASET1 : scf calculation: GS WF in the BZ<br />#********************************************<br />   prtden1    1<br />   kptopt1    1<br />   toldfe1    1.0d-15<br /><br />#DATASET2 : non scf calculation: GS WF in the whole BZ<br />#*****************************************************<br />   getden2    1<br />   kptopt2    2<br />     iscf2   -2<br />   getwfk2    1<br />   tolwfr2    1.0d-20<br />    nband2    20<br /><br /><br />#DATASET3 : ddk on the MP grid of k-points<br />#*****************************************<br />   getwfk3    2<br />    rfdir3    1 1 1<br />   rfelfd3    2<br />   tolwfr3    1.0d-20<br />    nband3    20<br />   kptopt3    2<br /><br />#DATASET4 : ddE on the MP grid of k-points<br />#*****************************************<br />   prtden4    1<br />   getwfk4    2<br />   getddk4    3<br />    rfdir4    1 1 1<br />   rfphon4    1<br />  rfatpol4    1 8<br />   tolvrs4    1.0d-15<br />   rfelfd4    3<br />    nband4    20<br />   kptopt4    2<br />  prepanl4    1<br /><br />#DATASET5 : 3DTE calculation<br />#***************************<br />   getden5    1<br />  get1den5    4<br />   getwfk5    2<br />   get1wf5    4<br />    nband5    20<br />   kptopt5    2<br />optdriver5    5<br />  d3e_pert1_elfd5    1<br />  d3e_pert1_phon5    1<br /> d3e_pert1_atpol5    1 8<br />   d3e_pert1_dir5    1 1 1<br />  d3e_pert2_elfd5    1<br />   d3e_pert2_dir5    1 1 1<br />  d3e_pert3_elfd5    1<br />   d3e_pert3_dir5    1 1 1<br /><br />nbdbuf 0<br /><br /><br />## After modifying the following section, one might need to regenerate the pickle database with runtests.py -r<br />#%%&lt;BEGIN TEST_INFO&gt;<br />#%% [setup]<br />#%% executable = abinit<br />#%% test_chain = tnlo_2.in, tnlo_3.in, tnlo_4.in, tnlo_5.in<br />#%% [files]<br />#%% files_to_test = <br />#%%   tnlo_2.out, tolnlines=  9, tolabs=  9.000e-07, tolrel=  6.000e-05<br />#%% psp_files =  13al.pspnc, 33as.pspnc<br />#%% [paral_info]<br />#%% max_nprocs = 2<br />#%% [extra_info]<br />#%% authors =  M. Veithen<br />#%% keywords = NC, DFPT, NONLINEAR<br />#%% description = <br />#%%   Linear and nonlinear response calculation for AlAs<br />#%%   Perturbations: electric fields &amp; atomic displacements<br />#%%&lt;END TEST_INFO&gt;</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: DFPT</h3>
				<div class="date">Posted: <strong>Tue Jun 18, 2019 10:21 am</strong></div>
				<div class="author">by <strong>baguetl</strong></div>
				<div class="content">Dear wlsong,<br /><br />I am not an expert on Berry phase computations, but I used it a little some years ago.<br /><br />1) Have you tried kptopt = 3 (instead of 2) ? By the way, I see in your input file that ngkpt = 13 13 <strong class="text-strong">1</strong>, is the use of one kpoint in the third axis intended?<br /><br />2) You can use an other implementation of the non-linear response, following the workflow of the test v8/t81 for instance. You can get more information about that method reading the input variable description of &quot;usepead&quot; in the documentation. The convergence with respect to the number of kpoint could be faster, and you can use kptopt = 2 safely.<br /><br />Best,<br />Lucas</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="Europe/Brussels">UTC+02:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>

<!-- Mirrored from forum.abinit.org/viewtopic.php?f=10&t=4115&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 20 Sep 2024 19:44:22 GMT -->
</html>
